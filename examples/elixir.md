# [Elixir](https://github.com/elixir-lang/elixir)

## Branch Timeline:

### v1.6.5


#### [#7646] - (2018-05-07T10:16:21Z) - [Fix logger and stacktrace warnings on OTP 21](https://github.com/elixir-lang/elixir/pull/7646)

Those are the minimum fixes which preserve the existing behaviour.
More performant fixes in the logger cases will be applied to master
and the upcoming Elixir v1.7.

#### [#7176] - (2018-01-03T20:21:40Z) - [Changelog: mix test reports doctests separately now](https://github.com/elixir-lang/elixir/pull/7176)

Couldn't find it in the Changelog, maybe I'm a bit daft :) But the feature is there and I love it. Thanks :green_heart:

```
tobi@comfy ~/github/benchee $ mix test
.............................................................................................................................................................................................................................................................................................

Finished in 2.3 seconds
102 doctests, 183 tests, 0 failures
```

#### [#7128] - (2017-12-21T08:17:59Z) - [[WIP] Check deprecated calls on task xref warnings](https://github.com/elixir-lang/elixir/pull/7128)

Check deprecated using `__info__` or `ExDp` chunk if the module is not loaded,
it doesn't check local deprecations #7104

#### [#7129] - (2017-12-20T23:58:20Z) - [Fix documentation for dependency format import](https://github.com/elixir-lang/elixir/pull/7129)

The atom `:export_locals_without_parens` doesn't actually appear in source - the option is nested inside `:export`

#### [#7127] - (2017-12-20T12:26:42Z) - [Fix typo in String doc](https://github.com/elixir-lang/elixir/pull/7127)

Hi all,

`as this options specifies` ‚Üí `as this option specifies`.

Cheers!

#### [#7113] - (2017-12-19T10:44:36Z) - [Introduce @deprecated](https://github.com/elixir-lang/elixir/pull/7113)

Add deprecated to `ExDp` beam chunk and to `Module.__info__(:deprecated)` as discussed on #7104

#### [#7123] - (2017-12-18T08:02:03Z) - [Minor docs updates](https://github.com/elixir-lang/elixir/pull/7123)



#### [#7119] - (2017-12-17T08:33:00Z) - [Improve protocol consolidation tests for docs](https://github.com/elixir-lang/elixir/pull/7119)

`Code.get_docs/1` calls `:code.get_object_code/1` with the module and this returns the old binary
instead the consolidated one as discussed in #7117

#### [#7114] - (2017-12-15T09:21:39Z) - [Fix Stream.chunk_every/4 odd results when step > count](https://github.com/elixir-lang/elixir/pull/7114)

# Summary
`Stream.chunk_every/4` was giving odd results when step was greater than
count and the last element of the enumerable was the same as last
chunk's last element.

This patch fixes this issue and adds tests for different scenarios when
`step > count`. It also adds a `doctest` example to reflect this in the
documentation and test it simultaneously.

Fixes #7096

#### [#7115] - (2017-12-15T07:52:14Z) - [Name enumerable consistently](https://github.com/elixir-lang/elixir/pull/7115)

# Summary
While I was fixing another bug I realized the whole Enum module uses `enumerable` to name enumerables, but a few places used `enum`. This patch names all occurrences consistently.

#### [#7111] - (2017-12-13T15:49:30Z) - [Fix documentation typo in IO](https://github.com/elixir-lang/elixir/pull/7111)



#### [#7073] - (2017-12-13T14:03:31Z) - [Add documentation for Protocol.derive](https://github.com/elixir-lang/elixir/pull/7073)

Provides hex documentation requested by Issue #7019 

#### [#7108] - (2017-12-13T13:42:33Z) - [Allow "mix format" to read exported configuration from dependencies](https://github.com/elixir-lang/elixir/pull/7108)

~I am not sure yet on how to go about testing this, any suggestions are appreciated :).~ Testing is done.

The names of the options have been just decided by me for now so feedback is welcome.

Closes #6644.

#### [#7110] - (2017-12-13T08:48:32Z) - [Fix documentation for `Mix.Generator.create_file/3`](https://github.com/elixir-lang/elixir/pull/7110)

![screen shot 2017-12-13 at 14 50 35](https://user-images.githubusercontent.com/274656/33923536-14bbfa9c-e015-11e7-96d1-3270a4ca0a20.png)

Disallow unnecessary escape

![screen shot 2017-12-13 at 14 53 25](https://user-images.githubusercontent.com/274656/33923664-c4b754dc-e015-11e7-916c-32432cc0bec9.png)


#### [#7092] - (2017-12-11T20:38:49Z) - [Remove multiple clauses warning for default values on bodiless clause](https://github.com/elixir-lang/elixir/pull/7092)

Closes #7072

#### [#7103] - (2017-12-11T20:07:31Z) - [Do not indent right-side of pipelines in the formatter](https://github.com/elixir-lang/elixir/pull/7103)

Closes #7102

Please use the :+1: and :-1: reaction accordingly.

#### [#7089] - (2017-12-06T12:00:51Z) - [State argument on Node should be documented.](https://github.com/elixir-lang/elixir/pull/7089)

My guess is they are private because they rely on Erlang code/docs?

#### [#7078] - (2017-12-05T18:30:16Z) - [Files with only comments are no longer always stale](https://github.com/elixir-lang/elixir/pull/7078)

At the beginning of compilation, initial `:source` records of the files that
needs to be compiled are added to an Agent process. These records are then
updated when the files are compiled and then written to the compile manifest.

The `:size` field in the initial record has a default of 0, and since files
without any code (they only have comments or newlines) are not compiled, this
is never updated with the actual size of the file before the compile manifest
is written to disk.

These files are always seen as stale because their size on disk does not match
the compile manifest.

This is fixed by adding the actual size of the file to the initial record.

Closes #7066

#### [#7087] - (2017-12-04T23:29:21Z) - [Store lock from SCM on Dep](https://github.com/elixir-lang/elixir/pull/7087)

Hex's SCM.checkout returns package build tools in the lock, store this
information on the Dep struct so that the loader can pass this
information to SCM.managers/1.

Fixes hexpm/hex#468.

#### [#7079] - (2017-12-04T10:17:13Z) - [Adjust bind_quoted docs for language.](https://github.com/elixir-lang/elixir/pull/7079)

Uncommon:
https://www.google.com/search?q="helps+us+from+running+into"

Uncommon:
https://www.google.com/search?q="helps+prevent+us+from+running+into"

Common and sounds natural:
https://www.google.com/search?q="prevents+us+from+running+into"

#### [#7086] - (2017-12-04T02:54:27Z) - [Fix the documentation for Dynamic Supervisor](https://github.com/elixir-lang/elixir/pull/7086)

Hi Elixir Team.
I found mistake on the document for dynamic supervisor.
I think it will be correct that uses function `DynamicSupervisor.start_child/2` instead of `DynamicSupervisor.start_link/2`.
And an argument of `count_children` should be `sup` instead of `sup_pid`.

Thanks!

#### [#7085] - (2017-12-03T13:04:53Z) - [show UTF-8 BOM on inspected strings](https://github.com/elixir-lang/elixir/pull/7085)

As per #7084, this PR adds the printing of the UTF-8 BOM on inspected strings. I think this is the right behavior, but if anything needs being revisited I'm happy to talk about it.

Closes #7084 

#### [#7071] - (2017-11-30T02:29:55Z) - [Move boolean checks optimizations to Kernel](https://github.com/elixir-lang/elixir/pull/7071)

Fixes the issue raised on https://github.com/elixir-lang/elixir/pull/7069#issuecomment-347490983
returning environment from the left side to the next expressions on boolean checks (`and`, `or`)

#### [#7076] - (2017-11-30T02:28:35Z) - [Document multi clause anonymous functions](https://github.com/elixir-lang/elixir/pull/7076)

I was looking for the multi-clause anonymous function syntax, but couldn't find it when i searched for `fn`. I recall that it is documented somewhere else, but this seems like it would help as well.

Happy to change the example, I had a hard time thinking of a simple multi-clause function that wasn't self-referential. Not trying to write a y-combinator as an example :)

üççüççüççüççüççüçç 

#### [#7075] - (2017-11-29T20:54:28Z) - [Make Exception.blame/3 extensible](https://github.com/elixir-lang/elixir/pull/7075)

Provide an optional callback for exception: blame/2 that can be used to
augment the exceptions with some additional data that requires expensive
computation and shouldn't be done in every place, for example,
FunctionClauseError that will look up the clauses in the .beam file.

Closes #7074

#### [#7068] - (2017-11-29T18:59:33Z) - [add a ref function similar to pid, but for Reference types](https://github.com/elixir-lang/elixir/pull/7068)

This is a small PR that just seems useful. Would appreciate a quick look. I'm not aware if there is an easier way to do this.

#### [#7065] - (2017-11-29T17:44:17Z) - [Print out the specs of Erlang functions in `h` helper](https://github.com/elixir-lang/elixir/pull/7065)

Let the user know that Erlang documentation is currently not available

Closes #7060

#### [#7026] - (2017-11-29T11:15:09Z) - [Added public function `Mix.Tasks.Xref.calls/0` (#6967)](https://github.com/elixir-lang/elixir/pull/7026)

The function will return a flat list of maps containing information on all the called functions.

Closes #6967

- [x] Write doco
- [x] Add Spec
~~- [ ] Work out how to support Umbrella apps (?)~~

#### [#7067] - (2017-11-28T15:34:37Z) - [Explain bare expression behavior in with docs](https://github.com/elixir-lang/elixir/pull/7067)

I wasn't sure about the difference btween `<-` and `=` in `with` statements. Writing this example helped me understand the behaviour.
```elixir
one =
  with :foo <- :bar do
    :success
  end

IO.inspect one, label: "one"

two =
  with :foo = :bar do
    :success
  end

IO.inspect two, label: "two"
```

one will output `:bar` because the match fails, while two is never reached because it throws a `MatchError`.

This PR updates the with docs to make this a bit clearer

#### [#7069] - (2017-11-28T13:56:14Z) - [Translate clauses for boolean check](https://github.com/elixir-lang/elixir/pull/7069)

Warnings for unsafe variable on boolean checks stopped working after #7015 because
variables of the right clause are unbound on the left clause.

Fixes #7044

#### [#7061] - (2017-11-26T14:55:19Z) - [Change Date.range/2 to only accept dates](https://github.com/elixir-lang/elixir/pull/7061)

Ref https://github.com/elixir-lang/elixir/pull/6313#discussion_r152953013

#### [#7063] - (2017-11-26T14:54:37Z) - [Do not raise on non-integer values in is_odd/is_even](https://github.com/elixir-lang/elixir/pull/7063)



#### [#7062] - (2017-11-25T23:09:01Z) - [Update helpers.ex](https://github.com/elixir-lang/elixir/pull/7062)

Fix typo

#### [#7057] - (2017-11-23T00:19:19Z) - [Add OTP compatibility table to the "Compatibility and Deprecations" page](https://github.com/elixir-lang/elixir/pull/7057)

I renamed the "Deprecations" page to "Compatibility and Deprecations" and added an OTP compatibility table there.

I listed all versions, including minor versions, because we often support the next Erlang version in the last patch release of the current Elixir version when that Erlang version comes out. For example, we started supporting OTP 20 in Elixir 1.4.5.

Also, I am listing only the OTP major releases. I'm not sure this is the best course of action because sometimes they release a minor version and we fix something for that version. I'm open to changing this in the table :)

#### [#7058] - (2017-11-22T20:49:16Z) - [Preserve group leader in Logger.ErrorHandler notification to Logger](https://github.com/elixir-lang/elixir/pull/7058)

Logger.ErrorHandler which basically forwards received event (changing its shape, but this is irrelevant) should always preserve original group leader (gl). It's Logger's handlers (backends) which can do whatever they want with gl, based on their own strategies.

Similarly, suppressing events based on node difference (node(gl) != node()) is too early, IMO. The event had to travel to the event manager (:error_loger), so one hop to the final manager (Logger) is almost at no cost, as both reside in the same  node. So let the backends to decide.

#### [#7056] - (2017-11-22T03:51:07Z) - [Clarify File.exists? behavior for dangling symlinks](https://github.com/elixir-lang/elixir/pull/7056)

Currently, the documentation makes it sound like `File.exists?` might return `true` for dangling symlinks, but it actually returns `false`.

#### [#7055] - (2017-11-21T22:18:44Z) - [Consider microseconds in maximum possible Calendar.ISO datetime](https://github.com/elixir-lang/elixir/pull/7055)



#### [#7051] - (2017-11-21T09:11:40Z) - [Simplify Calendar.truncate/2 precision check](https://github.com/elixir-lang/elixir/pull/7051)

`Calendar.truncate/2` clamps the precision to a maximum of 3, which would seem to be more clearly expressed by `min(precision, 3)` than the current case statement.  All tests pass.

#### [#7045] - (2017-11-20T15:49:07Z) - [Improve ExUnit documentation with regards to "setup" and "using"](https://github.com/elixir-lang/elixir/pull/7045)

Phoenix's generated `conn_case.ex` uses both `setup` and `using` extensively, so it would be nice to have a clean and more explicit documentation around these two:
- Rearranged the docs so that it's easier to visually scan for `setup` and tried to make it more clear how to update the context for tests,
- Extended the example for `using` to make it more clear what is happening there.

#### [#7048] - (2017-11-20T15:48:21Z) - [Update docs for DateTime.compare/2](https://github.com/elixir-lang/elixir/pull/7048)

Add missing `the` and make the references to UTC and Standard offsets consistent with the other docs.

#### [#7042] - (2017-11-19T09:24:26Z) - [assert_receive should expand in match context](https://github.com/elixir-lang/elixir/pull/7042)

Closes #7041.



#### [#7043] - (2017-11-19T09:23:03Z) - [Use inspect in assertion diff for structs if possible](https://github.com/elixir-lang/elixir/pull/7043)

Closes #6930

For this:

```elixir
  test "1" do
    assert ~N[2017-10-01 09:00:00] == ~N[2017-11-02 09:00:00.0]
  end

  test "2" do
    assert MapSet.new([1]) == MapSet.new([1, 2])
  end

  test "3" do
    assert 1..1 == 1..2
  end

  test "4" do
    assert Stream.filter([1, 2, 3], &(&1)) == Stream.take([1, 2, 3], 2)
  end
```

Before:

![screen shot 2017-11-17 at 23 19 58](https://user-images.githubusercontent.com/76071/32971633-5bdaaeae-cbee-11e7-9664-fda250cc2a39.png)

After:

![screen shot 2017-11-17 at 23 20 26](https://user-images.githubusercontent.com/76071/32971635-5e942224-cbee-11e7-9dd1-d17337eb0d28.png)


#### [#7038] - (2017-11-16T15:53:29Z) - [[WIP] Throw Error if anonymous functions has default arguments](https://github.com/elixir-lang/elixir/pull/7038)

Closes #7029 

Would this be heading in the right direction?

#### [#7031] - (2017-11-15T19:53:57Z) - [Remove dialyzer warnings from else in with clauses](https://github.com/elixir-lang/elixir/pull/7031)

Add generated: true to guard clauses from else in with clauses

Resolves #6426

#### [#7037] - (2017-11-15T19:52:29Z) - [Warn duplicate definitions in macros](https://github.com/elixir-lang/elixir/pull/7037)

Closes #6637

#### [#7036] - (2017-11-15T18:53:20Z) - [Fix precedence of bitwise XOR (^^^) in formatter](https://github.com/elixir-lang/elixir/pull/7036)

Closes #7034.

#### [#7028] - (2017-11-15T11:04:24Z) - [Fix @impl warnings with default arguments](https://github.com/elixir-lang/elixir/pull/7028)

Remove warnings when some of the clauses of a function with defaults don't implement callbacks reported on #6975

#### [#7020] - (2017-11-13T22:00:54Z) - [Support uniq: true in for comprehensions](https://github.com/elixir-lang/elixir/pull/7020)

Closes #6792

#### [#7027] - (2017-11-13T11:59:22Z) - [Minor edits in mix.ex docs](https://github.com/elixir-lang/elixir/pull/7027)

Just a couple of minor edits.

The changes "mix" -> "Mix" are proposed because "Mix" is used consistently to refer to the project. Alternatively, you could write `mix` (fixed-width font) to mean the command-line program, but I chose "Mix" because it seems to follow the existing style.


#### [#7022] - (2017-11-11T11:22:44Z) - [Minor ExUnit docs improvements](https://github.com/elixir-lang/elixir/pull/7022)



#### [#7021] - (2017-11-10T21:43:17Z) - [Fix spec of Map.get_and_update!/3](https://github.com/elixir-lang/elixir/pull/7021)



#### [#7006] - (2017-11-09T21:14:27Z) - [Add DynamicSupervisor](https://github.com/elixir-lang/elixir/pull/7006)

As outlined in #5267.

  * [x] Write docs
  * [x] Remove simple_one_for_one references in Supervisor
  * [x] Decide the start_child API
  * [x] Support extra arguments

As @myronmarston mentioned, we need to figure out how we are going to handle the `start_child/2` arguments. He proposed an API that passes a function but that's very likely a no-go because we don't want to allow the user to run custom code inside the supervisor. Instead, I have been thinking about different start_child functions:

  * `start_child(supervisor, arg :: term)` - starts a child with a single argument given to start_link. The argument in the child_spec is ignored.

  * `start_child_with_arguments(supervisor, args :: [term])` - starts a child the given arguments in `start_link`. The arguments in the child_spec are retained.

  * `start_child_with_keywords(supervisor, keyword())` - starts a child by merging the given keywords with the single keyword argument given in the child_spec.

I am confident we need the first 2, we will likely for 3 until there is an use case.

#### [#7015] - (2017-11-09T13:24:49Z) - [Move andalso and orelse expansion to the erl pass](https://github.com/elixir-lang/elixir/pull/7015)

Since they modify the AST the correct place for the transformation is not the
macro expansion like today, but rather the erlang pass.

A note for people running git blame:
This transformation was done in the first place to correct the error that is
raised by `erlang:andalso/2` and `erlang:orelse/2` in case the first argument
is not a boolean. The rewrite changes it from `:badarg` into
`{:badbool, op, value}`. The inlining of both functions into a case would be
done anyway in the erlang compiler.

#### [#7014] - (2017-11-09T10:33:56Z) - [Remove unneeded function - No need to match `""`](https://github.com/elixir-lang/elixir/pull/7014)



#### [#7001] - (2017-11-08T18:44:50Z) - [Make sure proper reports are shown if app fails to boot](https://github.com/elixir-lang/elixir/pull/7001)



#### [#7011] - (2017-11-08T13:00:54Z) - [Add types autocompletion in IEx](https://github.com/elixir-lang/elixir/pull/7011)

Related issue : #6999 

# Purpose
Add type autocompletion in IEx when users tries to get the type information from the `t` helper.

# Goal
- [x] Autocomplete types only for a specific case (`t` helper only)
Added a clause to match an expression starting with `'t '` in the REPL and send it to type expansion logic.
- [x] Autocomplete all types for a module
`t String.<tab>` will show `codepoint/0    grapheme/0     pattern/0      t/0`.
- [x] Autocomplete types with a hint for a module
`t String.gra<tab>` will autocomplete to `t String.grapheme`.
- [x] Autocomplete modules like usual
`t Str<tab>` will show `Stream      String      StringIO`.

# Mentions
- `t(String.<tab>)` and all its parenthesized alternatives are not supported.  Is this a use case we want to support ?


#### [#7010] - (2017-11-08T12:45:45Z) - [Add truncate to Time, DateTime and NaiveDateTime](https://github.com/elixir-lang/elixir/pull/7010)

Fixes #6997

#### [#7012] - (2017-11-08T10:36:50Z) - [Improve calendar functions consistency and typespecs](https://github.com/elixir-lang/elixir/pull/7012)

* Add `Date.from_erl!/2` to match `from_erl/2`
* Add `Time.from_iso8601!/2` to match `from_iso8601/2`
* Add `NaiveDateTime.from_erl!/3` to match `from_erl/3`
* Update `DateTime.compare/2` to actually accept `Calendar.datetime()`
* Improve typespecs

---

Ideas for further improvements:
- Loosen up functions from taking `t` to taking `Calendar.naive_datetime()` (and similar), e.g. `NaiveDateTime.to_date` [1], `NaiveDateTime.to_time`, `NaiveDateTime.add`, `DateTime.to_date` etc
- similar to above for `DateTime.from_naive/2`, `NaiveDateTime.new/2`

I don't have a use case for the things above, but seems to improve consistency with other functions.

[1] https://github.com/wojtekmach/elixir/blob/wm-calendar-improvements/lib/elixir/lib/calendar/naive_datetime.ex#L304

#### [#7003] - (2017-11-04T09:50:51Z) - [Add @specs to functions in the Code module](https://github.com/elixir-lang/elixir/pull/7003)



#### [#7002] - (2017-11-03T12:12:53Z) - [Mention that HiPE-compiled modules won't call `@on_load` callback](https://github.com/elixir-lang/elixir/pull/7002)

Erlang is updating their docs regarding HiPE limitations and I think we need to mention that they also apply on Elixir.

Related changes: https://github.com/erlang/otp/pull/1618/files#diff-a0bf0e1ae6adf3eee9a66899aef70923R77

#### [#6995] - (2017-11-01T15:01:00Z) - [Fix doc of Kernel.put_elem/3](https://github.com/elixir-lang/elixir/pull/6995)



#### [#6987] - (2017-10-30T09:35:09Z) - [Raise when calling GenServer.stop/3 with current process](https://github.com/elixir-lang/elixir/pull/6987)



#### [#6986] - (2017-10-28T13:40:25Z) - [Improved documentation, mentioning exception raised by `Enum.reduce/2`](https://github.com/elixir-lang/elixir/pull/6986)



#### [#6978] - (2017-10-26T18:25:01Z) - [Better handling of non existing atoms](https://github.com/elixir-lang/elixir/pull/6978)

Addresses #6974 by always catching the `error:badarg` when `Code.string_to_quoted/2` is called with `existing_atoms_only: true`, returning an error tuple in `Code.string_to_quoted/2` and raising a `SyntaxError` in `Code.string_to_quoted!/2`.

#### [#6979] - (2017-10-26T11:59:38Z) - [Fix formatting of multiline "foo.{...}" calls](https://github.com/elixir-lang/elixir/pull/6979)

Calls such as `alias Foo.{Bar}` would be formatted when multiline as

```elixir
alias Foo.{
        Bar
      }
```

Now they're formatted as

```elixir
alias Foo.{
  Bar
}
```

#### [#6965] - (2017-10-23T12:04:34Z) - [Fix backtick position in Enum doc](https://github.com/elixir-lang/elixir/pull/6965)

Hi all,

this fixes the position of a backtick in an Enum doc.

Cheers!

#### [#6964] - (2017-10-22T20:52:03Z) - [Use Mix.shell.info over IO.write in Mix xref](https://github.com/elixir-lang/elixir/pull/6964)

As discussed in #6963, `mix xref` did not incorporate umbrella sub-app names in its output due to `IO.write` being used instead of `Mix.shell.info`. This PR fixes that, and also the tests that were using `capture_io`, which does not work with `Mix.Shell.Process`

#### [#6947] - (2017-10-22T10:39:46Z) - [Handle external files for xref callers and warnings](https://github.com/elixir-lang/elixir/pull/6947)

Use the file location available in the manifest to display external sources.

Closes #6629

#### [#6841] - (2017-10-21T21:35:16Z) - [Perform some behaviour lint checks in Elixir](https://github.com/elixir-lang/elixir/pull/6841)

This PR is still in development.  I am creating this PR for discussion regarding the behaviour lint checks and their corresponding implementations in the compiler.

# Purpose
Add linting checks during Elixir compilation to detect problems arising from misuses with behaviours, and disable such linting checks in *erl_lint* as mentioned in #5800.

# Approach
  - [x] Add tests for the new behaviour warnings
More tests can, and will be added.
  - [x] Disable *erl_lint* checks
Modified the `elixir_erl_compiler.erl` file to silence all behaviour related warnings thrown by *er_lint*.  Some tests are expected to fail for now.
  - [x] Lint *undefined_behaviour*
Added a function to check if the behaviour is indeed a behaviour.  This function can differentiate between an module without callbacks, and a non existing module.
  - [x] Lint *redefine_optional_callback*
Not applicable in Elixir, since multiple `@optional_callbacks` are merged together.
  - [ ] Lint *conflicting_behaviours*
To do in a subsequent pull request.
  - [x] Lint *undefined_behaviour_func*
  - [x] Lint *undefined_behaviour_callbacks*
  - [x] Lint *ill_defined_behaviour_callbacks*
  - [x] Lint *ill_defined_optional_callbacks*
  - [ ] Lint *behaviour_info*
To do in a subsequent pull request.
Should we just disable naming a function behaviour_info/1 ?
  - [x] Lint *undefined_callback*

#### [#6962] - (2017-10-21T21:33:09Z) - [Make fun in Stream.do_reduce less confusing](https://github.com/elixir-lang/elixir/pull/6962)

IMHO, it is a bit confusing to shadow the outer `fun` in the first function passed into `:lists.unfoldl`. Maybe we could change it to `f1` to be consistent to the rest of the module?

#### [#6958] - (2017-10-21T14:17:05Z) - [Add Enumerable.slice/1 and use it in Enum](https://github.com/elixir-lang/elixir/pull/6958)

We have reimplemented Enum.at/3, Enum.fetch/2, Enum.fetch!/2,
Enum.random/1, Enum.slice/2, and Enum.slice/3 to be more
efficient by using the new protocol function.

This partially implements #6955. We have decided to not replace
`count/1` by an `aggregate/2` callback because it became clear
we cannot implement `min/1` for date ranges since `Enum.min/1`
does a structural comparison. Given ranges are still the only case
that requires custom aggregations, we have decided to inline those
in Enum until we have more evidence that such callback is necessary.

#### [#6954] - (2017-10-21T09:53:07Z) - [Add file information to the dispatches on the source manifests](https://github.com/elixir-lang/elixir/pull/6954)

As discussed in #6629, this makes possible identify dispatches that occur in external sources

#### [#6960] - (2017-10-21T09:52:36Z) - [Fix handling deprecated return value for Erlang.compile callback](https://github.com/elixir-lang/elixir/pull/6960)

`do_compile` should always return 4-element tuple. Looks like a minor mistake in https://github.com/elixir-lang/elixir/pull/6598.

On hexpm we are using custom compiler for protobuf [1] and it broke on
Elixir master:

    $ mix compile.all --force
    Compiling 4 files (.proto)
    ** (MatchError) no match of right hand side value: {:ok, [], []}
        (mix) lib/mix/compilers/erlang.ex:249: Mix.Compilers.Erlang.combine_results/2
        (elixir) lib/enum.ex:1826: Enum."-reduce/3-lists^foldl/2-0-"/3
        (mix) lib/mix/compilers/erlang.ex:125: Mix.Compilers.Erlang.compile/5
        (mix) lib/mix/task.ex:354: Mix.Task.run_alias/3
        (mix) lib/mix/task.ex:278: Mix.Task.run/2
        (mix) lib/mix/tasks/compile.all.ex:63: Mix.Tasks.Compile.All.run_compiler/2
        (mix) lib/mix/tasks/compile.all.ex:47: Mix.Tasks.Compile.All.do_compile/4
        (mix) lib/mix/tasks/compile.all.ex:18: anonymous fn/1 in Mix.Tasks.Compile.All.run/1
        (mix) lib/mix/tasks/compile.all.ex:34: Mix.Tasks.Compile.All.with_logger_app/1
        (mix) lib/mix/task.ex:315: Mix.Task.run_task/3
        (mix) lib/mix/tasks/compile.ex:90: Mix.Tasks.Compile.run/1
        (mix) lib/mix/task.ex:315: Mix.Task.run_task/3
        (mix) lib/mix/cli.ex:80: Mix.CLI.run_task/2
        (elixir) lib/code.ex:646: Code.require_file/2

As mentioned in [2], `{:ok, _}` and `:error` returns from compile
callback are to be deprecated in Elixir v1.8.

FWIW on hexpm side, a fix is to turn `{:ok, output}` into `{:ok, output, []}` (and similar for `:error`)

[1] https://github.com/hexpm/hexpm/blob/6c4e7ab2d569eb09848f74cf0179702d5a847a90/mix.exs#L103
[2] https://github.com/elixir-lang/elixir/blob/f36a0f4a389eb819f383de935935dcae201332bb/lib/mix/lib/mix/compilers/erlang.ex#L230

#### [#6959] - (2017-10-21T08:57:57Z) - [Fix IEx and Mix suites on Windows](https://github.com/elixir-lang/elixir/pull/6959)



#### [#6933] - (2017-10-19T22:04:44Z) - [Implement :env_vars option for %Mix.Dep{}](https://github.com/elixir-lang/elixir/pull/6933)

This PR is the implementation of [this proposal](https://groups.google.com/forum/#!topic/elixir-lang-core/Lk08Vt0eRR0), which allows defining per dependency env variables to be used when loading or compiling it.

Example:

```elixir
def deps do
  {:exometer, "~> 1.2.1", env_vars: [{"EXOMETER_PACKAGES", "(amqp)"}]}
end
```

Will set the `EXOMETER_PACKAGES` env variable to "(amqp)" which will include the amqp dependencies in the `mix.lock` (see: [exometer-dependency-management](https://github.com/Feuerlabs/exometer#dependency-management)). This is a Rebar specific example, but the PR sets the env vars to all types of supported packages.

All the files have been formatted using the new `mix format` task.
I'll be really happy to get feedback to improve this PR and make all the required changes to have it merged.

#### [#6949] - (2017-10-18T04:07:07Z) - [Updating what seems to be outdated documentation.](https://github.com/elixir-lang/elixir/pull/6949)

This is a trivial fix for an outdated reference.

#### [#6946] - (2017-10-17T15:31:49Z) - [Fix a bug where we discarded some meta in some literals in the parser](https://github.com/elixir-lang/elixir/pull/6946)

Closes #6945.

Not sure the test is optimal but it's a start :).

#### [#6942] - (2017-10-17T08:09:23Z) - [Fix docs about logging strings vs funcs](https://github.com/elixir-lang/elixir/pull/6942)

The previous docs assumed an example using a string message

See https://github.com/elixir-lang/elixir/issues/6941#issuecomment-337018865

#### [#6943] - (2017-10-17T07:15:54Z) - [On mix format checks formatted for stdin](https://github.com/elixir-lang/elixir/pull/6943)

Improve output message when --check-* is passed to mix format with
stdin. And add tests for --check-formated with stdin.

Before when we ran `$ echo 'foo( )' | mix format  - --check-formatted` the output was

```
** (Mix) mix format failed due to --check-formatted.
The following files were not formatted:

  * -
```

Now the output will tell on the bullet list that the formatted error came from stdin

```
** (Mix) mix format failed due to --check-formatted.
The following files were not formatted:

  * stdin
```

#### [#6940] - (2017-10-16T21:02:31Z) - [Update CI builds: add OTP 20.1](https://github.com/elixir-lang/elixir/pull/6940)



#### [#6935] - (2017-10-16T16:00:08Z) - [Stop using keyword lists in IEx.Info](https://github.com/elixir-lang/elixir/pull/6935)

We were returning info from the protocol as lists of `{atom, string}` pairs with atoms being "titles" of info (such as "Reference modules"). This is a bit weird and it definitely becomes annoying with the new code formatter because it formats things like `["Description": ...]` as `[Description: ...]` which looks weird.

This PR turns all atom keys into strings so that now info is a list of `{string, string}` tuples.

I'm sure @fishcakez will be much relieved by this PR :).

#### [#6937] - (2017-10-16T14:34:22Z) - [made change](https://github.com/elixir-lang/elixir/pull/6937)



#### [#6939] - (2017-10-16T14:33:10Z) - [Remove print option from mix format](https://github.com/elixir-lang/elixir/pull/6939)

With the new `mix format -` there is no need to keep the print flag on
the task nor on the docs.

#### [#6929] - (2017-10-15T17:02:31Z) - [Collect sigil variables as part of assert matches](https://github.com/elixir-lang/elixir/pull/6929)

This fixes https://github.com/elixir-lang/elixir/issues/6925

When sigils are expanded via `Macro.expand/2` they aren't expanded into
their non-sigil equivalent.

eg:

```
defmodule MinimalMacro do
  defmacro sigil_l({:<<>>, _, [string]}, _), do: Code.string_to_quoted!(string, [])
end

iex> Macro.expand((quote do: {a} = 1), nil)
{:=, [], [{:{}, [], [{:a, [], Elixir}]}, 1]}

iex> Macro.expand((quote do: {~l(a)} = 1), nil)
{:=, [], [{:{}, [], [{:sigil_l, [], [{:<<>>, [], ["a"]}, []]}]}, 1]}
```

The `assert` macro uses `Macro.prewalk` to walk the AST of a given
expression using pattern matching to find variables that should be
used as the left side of the match. Because sigils aren't expanded into
their non-sigil equivalent and `assert` doesn't look for the sigil
pattern they aren't collected as variables to use in the match.

This matches against the sigil AST pattern and follows the same approach
https://github.com/elixir-lang/gettext/commit/2f183e33ce8ac7ff317b255eb27c809526eb9535
uses to ensure we're matching only against sigils.

#### [#6928] - (2017-10-13T18:57:17Z) - [Update default implementation in GenServer docs](https://github.com/elixir-lang/elixir/pull/6928)

Implementation changed after this commit: https://github.com/elixir-lang/elixir/commit/c907598cb1e508aac1664d8f198cc3f157fc3426

#### [#6927] - (2017-10-13T17:43:26Z) - [Fix README.md incorrect link to Getting Started guide](https://github.com/elixir-lang/elixir/pull/6927)

The README suggests users after Elixir build passes to go to the Getting Started guide, but it was pointing to the home page. This PR fixes the link.

#### [#6905] - (2017-10-12T06:51:26Z) - [Run code formatter on tokenizer_text.exs](https://github.com/elixir-lang/elixir/pull/6905)

Formatter worked great. 

## Note
These sorts of expressions feel a bit awkward, but I can't really think of a better way and it's just a test:

![screenshot 2017-10-11 11 08 01](https://user-images.githubusercontent.com/3220620/31458278-787533a0-ae74-11e7-9cc3-44faae4eaab5.png)


#### [#6901] - (2017-10-12T06:50:29Z) - [Run code formatter on errors_test.exs](https://github.com/elixir-lang/elixir/pull/6901)



#### [#6846] - (2017-10-12T06:49:10Z) - [Run code formatter on lib/elixir/lib/module.ex](https://github.com/elixir-lang/elixir/pull/6846)



#### [#6917] - (2017-10-11T21:40:30Z) - [Run formatter on Mix.Tasks.New](https://github.com/elixir-lang/elixir/pull/6917)



#### [#6916] - (2017-10-11T21:00:49Z) - [Run formatter on unicode/properties.ex](https://github.com/elixir-lang/elixir/pull/6916)



#### [#6914] - (2017-10-11T20:43:52Z) - [Run code formatter on Kernel.RaiseTest](https://github.com/elixir-lang/elixir/pull/6914)

This PR follows #6643.

#### [#6913] - (2017-10-11T20:31:41Z) - [Run code formatter on lib/elixir/test/elixir/option_parser_test.exs](https://github.com/elixir-lang/elixir/pull/6913)



#### [#6912] - (2017-10-11T20:30:20Z) - [Run the code formatter on ExUnit.CaptureIOTest](https://github.com/elixir-lang/elixir/pull/6912)

Contribution to #6643

#### [#6911] - (2017-10-11T20:29:33Z) - [Run code formatter on lib/ex_unit/test/ex_unit/diff_test.exs](https://github.com/elixir-lang/elixir/pull/6911)



#### [#6909] - (2017-10-11T20:17:45Z) - [Run the code formatter on Protocol](https://github.com/elixir-lang/elixir/pull/6909)

Some of the changes in this file are quite extreme. In a few places, the formatter has added a lot of extra newlines which has made the code quite different. In my opinion, it is more readable like this but I can see why somebody might disagree.

Any thoughts?

#### [#6908] - (2017-10-11T20:16:01Z) - [Run formatter on lib/logger/test/logger/translator_test.exs.](https://github.com/elixir-lang/elixir/pull/6908)

Formatter moved indentation on a lot of lines to align with
capture_log instead of assert.

#### [#6903] - (2017-10-11T17:45:48Z) - [Run the code formatter on lib/elixir/lib/inspect/algebra.ex](https://github.com/elixir-lang/elixir/pull/6903)



#### [#6904] - (2017-10-11T17:42:47Z) - [Run code formatter on lib/mix/test/mix/tasks/compile.erlang_test.exs](https://github.com/elixir-lang/elixir/pull/6904)

#6643 

#### [#6897] - (2017-10-11T16:28:58Z) - [Run the code formatter on lib/elixir/test/elixir/string_test.exs](https://github.com/elixir-lang/elixir/pull/6897)



#### [#6900] - (2017-10-11T16:18:40Z) - [Format kernel/impl_test.exs](https://github.com/elixir-lang/elixir/pull/6900)

See #6643

#### [#6892] - (2017-10-11T15:42:59Z) - [run code formatter on test/mix/tasks/app.start_test.exs](https://github.com/elixir-lang/elixir/pull/6892)



#### [#6893] - (2017-10-11T15:42:09Z) - [Run the code formattter on lib/elixir/lib/calendar/iso.ex](https://github.com/elixir-lang/elixir/pull/6893)



#### [#6894] - (2017-10-11T15:41:27Z) - [Run formatter on deps.compile](https://github.com/elixir-lang/elixir/pull/6894)

1. I chose a random file with the command
```
$ bin/elixir scripts/random_file.exs
```

  The file selected was `lib/mix/lib/mix/tasks/deps.compile.ex`

2. Then I ran the code formatter with

```
bin/elixir bin/mix format lib/mix/lib/mix/tasks/deps.compile.ex
```
    
3. Once the changes where reviewed and manual changes made where according to #6643

4. Tests where then ran with
```
make test
```


#### [#6895] - (2017-10-11T15:40:12Z) - [Run code formatter on Assertions](https://github.com/elixir-lang/elixir/pull/6895)



#### [#6888] - (2017-10-11T15:34:35Z) - [run the code formatter on calendar/date](https://github.com/elixir-lang/elixir/pull/6888)



#### [#6858] - (2017-10-11T14:49:16Z) - [Run the code formatter on lib/elixir/test/elixir/kernel/warning_test.exs](https://github.com/elixir-lang/elixir/pull/6858)



#### [#6872] - (2017-10-11T14:48:01Z) - [Run code formatter on lib/mix/lib/mix/utils.ex](https://github.com/elixir-lang/elixir/pull/6872)

Per #6643

#### [#6877] - (2017-10-11T14:47:32Z) - [Run code formatter on CodeTest](https://github.com/elixir-lang/elixir/pull/6877)



#### [#6890] - (2017-10-11T14:28:43Z) - [Run code formatter on lib/elixir/test/elixir/task/supervisor_test.exs](https://github.com/elixir-lang/elixir/pull/6890)

#6643

#### [#6889] - (2017-10-11T14:27:13Z) - [Runs code formatter on NaiveDateTime](https://github.com/elixir-lang/elixir/pull/6889)

Hopefully it is all good :)

#### [#6875] - (2017-10-11T13:25:05Z) - [Run formatter on Logger.Translator](https://github.com/elixir-lang/elixir/pull/6875)



#### [#6887] - (2017-10-11T12:55:24Z) - [Update code format per new style](https://github.com/elixir-lang/elixir/pull/6887)

Changes `lib/iex/test/iex/helpers_test.exs` for the new code format.

#### [#6886] - (2017-10-11T12:09:11Z) - [Format ExUnit.Callbacks](https://github.com/elixir-lang/elixir/pull/6886)

Code formatted according to #6643.

#### [#6882] - (2017-10-11T12:08:30Z) - [Run code formatter on Record](https://github.com/elixir-lang/elixir/pull/6882)



#### [#6885] - (2017-10-11T11:47:38Z) - [Run code formatter on Mix.Tasks.Archive.Build](https://github.com/elixir-lang/elixir/pull/6885)


1. Ran formatter with `bin/elixir bin/mix format lib/mix/lib/mix/tasks/archive.build.ex`
2. Concatenated strings to avoid multiline raise, according to rules and discussion [outlined here](https://github.com/elixir-lang/elixir/issues/6643#issuecomment-335744731)
3. Moved out multiline function call to a variable

#### [#6884] - (2017-10-11T11:46:26Z) - [Run formatter lib/mix/lib/mix/scm/git.ex](https://github.com/elixir-lang/elixir/pull/6884)



#### [#6878] - (2017-10-11T11:24:55Z) - [Run the code formatter on Mix.ProjectStack](https://github.com/elixir-lang/elixir/pull/6878)



#### [#6879] - (2017-10-11T10:53:41Z) - [Better `mix format` error message when it crashes during formatting file](https://github.com/elixir-lang/elixir/pull/6879)

I messed up `.formatter.exs` configuration, and mistakenly included my HTML template files in the formatting path. The `mix format` task died suddenly on me without a nice error message, giving me:

```
$ mix format lib/ui/templates/layout/no_user.html.slim
** (SyntaxError) nofile:5: syntax error before: http
    (elixir) lib/code.ex:329: Code.format_string!/2
    (mix) lib/mix/tasks/format.ex:148: Mix.Tasks.Format.format_file/4
    (elixir) lib/enum.ex:1899: Enum."-reduce/3-lists^foldl/2-0-"/3
    (mix) lib/mix/tasks/format.ex:78: Mix.Tasks.Format.run/1
    (mix) lib/mix/task.ex:317: Mix.Task.run_task/3
    (mix) lib/mix/cli.ex:68: Mix.CLI.run_task/2
```

this change updates the above error message with important information, like the file path that the error happened on. I also kept the original syntax error message and line number as it might come in handy. The message format I cam up with is:

```
$ mix format lib/ui/templates/layout/no_user.html.slim
** (Mix) mix format failed when attempting
to parse the file:

lib/ui/templates/layout/no_user.html.slim

Error at line 5:
  syntax error before: http
```

but I am open to suggestion to improve it.


#### [#6866] - (2017-10-11T10:22:52Z) - [Run the formatter on lib/elixir/test/elixir/calendar_test.exs](https://github.com/elixir-lang/elixir/pull/6866)

Formatter worked just dandy, but I added a new line before a few pipes then re-ran it. 

## 1) After running the formatter once:

![screenshot 2017-10-10 21 35 19](https://user-images.githubusercontent.com/3220620/31422658-22970d20-ae04-11e7-91ef-caef9cde8a62.png)

## 2) After adding a return before the pipe, then rerunning the formatter
![screenshot 2017-10-10 21 36 05](https://user-images.githubusercontent.com/3220620/31422668-2ffaaba2-ae04-11e7-8a49-f1cf0dd19cba.png)

I find #2 easier to read, personally, but if you'd prefer #1 then I'll edit and commit it. 

#### [#6865] - (2017-10-11T10:21:18Z) - [Run the code formatter on Code.Formatter.OperatorsTest](https://github.com/elixir-lang/elixir/pull/6865)



#### [#6864] - (2017-10-11T10:12:28Z) - [Run the formatter on Mix.Compilers.Elixir](https://github.com/elixir-lang/elixir/pull/6864)



#### [#6863] - (2017-10-11T10:10:46Z) - [Run code formatter on lib/ex_unit/lib/ex_unit/formatter.ex](https://github.com/elixir-lang/elixir/pull/6863)



#### [#6855] - (2017-10-11T09:12:03Z) - [Run the code formatter on Inspect](https://github.com/elixir-lang/elixir/pull/6855)



#### [#6842] - (2017-10-11T09:09:11Z) - [Run code formatter on lib/elixir/lib/kernel.ex](https://github.com/elixir-lang/elixir/pull/6842)

Ok, I got the Kernel üò∞ If this is totally wrong, please let me know.

One thing that I recognized is that the Kernel contains a lot of very long strings with interpolations, used for warnings, error messages, etc.

It seems that three different kind of ways are used to construct this strings:

* [String concatenation](https://github.com/elixir-lang/elixir/compare/master...fabrik42:exfmt-kernel?expand=1#diff-e06d5ebc2907d951188e88476f85af51R4174)
* [Using binary type](https://github.com/elixir-lang/elixir/compare/master...fabrik42:exfmt-kernel?expand=1#diff-e06d5ebc2907d951188e88476f85af51R3413)
* [New lines in interpolation](https://github.com/elixir-lang/elixir/compare/master...fabrik42:exfmt-kernel?expand=1#diff-e06d5ebc2907d951188e88476f85af51R1714)

Would it make sense to try to streamline this as much as possible?

#### [#6852] - (2017-10-11T08:23:26Z) - [Run the code formatter on Mix.UmbrellaTest](https://github.com/elixir-lang/elixir/pull/6852)

Formatting file `lib/mix/test/mix/umbrella_test.exs` as per https://github.com/elixir-lang/elixir/issues/6643.

I originally began updating [Mix.UmbrellaTest](https://github.com/elixir-lang/elixir/blob/master/lib/mix/test/mix/umbrella_test.exs) in https://github.com/elixir-lang/elixir/pull/6740 however I prematurely discarded my fork of the so I needed to create a new PR.

I've closed the previous and I'm currently making updates based on @josevalim's feedback.

#### [#6876] - (2017-10-11T08:20:33Z) - [Run the code formatter on Calendar](https://github.com/elixir-lang/elixir/pull/6876)



#### [#6860] - (2017-10-11T08:19:06Z) - [Run the code formatter on Mix.Tasks.Escript.Build](https://github.com/elixir-lang/elixir/pull/6860)



#### [#6874] - (2017-10-11T08:13:56Z) - [Run the code formatter on Mix.Tasks.TestTest](https://github.com/elixir-lang/elixir/pull/6874)

Formatting file `lib/mix/test/mix/tasks/test_test.exs` as per #6643.

#### [#6856] - (2017-10-11T08:12:00Z) - [Run the code formatter on Mix.Tasks.Compile.Erlang](https://github.com/elixir-lang/elixir/pull/6856)



#### [#6867] - (2017-10-11T08:10:53Z) - [Run the code formatter on Stream.Reducers](https://github.com/elixir-lang/elixir/pull/6867)

Ran through the steps in #6643 and extracted some anonymous functions that are passed as arguments in the process.

This is such a great tool! Thanks! üôè 

#### [#6862] - (2017-10-11T08:07:26Z) - [Run the code formatter on OptionParser](https://github.com/elixir-lang/elixir/pull/6862)



#### [#6859] - (2017-10-11T08:00:31Z) - [Run the code formatter on Mix.SCM.Git](https://github.com/elixir-lang/elixir/pull/6859)



#### [#6873] - (2017-10-11T07:53:59Z) - [Run code formatter on Map](https://github.com/elixir-lang/elixir/pull/6873)



#### [#6870] - (2017-10-11T07:13:23Z) - [Run the code formatter on File.Stream](https://github.com/elixir-lang/elixir/pull/6870)

Formatted with:
```$ bin/elixir -v
Erlang/OTP 20 [erts-9.0] [source] [64-bit] [smp:4:4] [ds:4:4:10] [async-threads:10] [hipe] [kernel-poll:false]

Elixir 1.6.0-dev (7b8d5ec) (compiled with OTP 20)```

#### [#6853] - (2017-10-10T23:24:15Z) - [Run Code Formatter on lib/elixir/test/elixir/kernel_test.exs](https://github.com/elixir-lang/elixir/pull/6853)



#### [#6849] - (2017-10-10T23:10:04Z) - [Run formatter on GenServerTest](https://github.com/elixir-lang/elixir/pull/6849)



#### [#6848] - (2017-10-10T23:08:50Z) - [Run formatter on Logger.ErrorHandler](https://github.com/elixir-lang/elixir/pull/6848)



#### [#6847] - (2017-10-10T21:11:50Z) - [Run the code formatter on lib/elixir/test/elixir/code_formatter/calls_test.exs](https://github.com/elixir-lang/elixir/pull/6847)

In response to https://github.com/elixir-lang/elixir/issues/6643 .

#### [#6845] - (2017-10-10T20:48:41Z) - [Run code formatter on EnumTest](https://github.com/elixir-lang/elixir/pull/6845)



#### [#6839] - (2017-10-10T20:47:01Z) - [Run the code formatter on Mix.Tasks.App.TreeTest](https://github.com/elixir-lang/elixir/pull/6839)



#### [#6834] - (2017-10-10T20:46:26Z) - [Run code formatter on profile.eprof.ex](https://github.com/elixir-lang/elixir/pull/6834)



#### [#6843] - (2017-10-10T20:37:01Z) - [Run the code formatter on Mix.CLI](https://github.com/elixir-lang/elixir/pull/6843)

Hello! Following the instructions in https://github.com/elixir-lang/elixir/issues/6643, I ended up running the formatter on the Mix.CLI module.

Let me know if other changes are needed.

Thanks!

#### [#6844] - (2017-10-10T20:35:00Z) - [Run the code formatter on Date.Range](https://github.com/elixir-lang/elixir/pull/6844)



#### [#6840] - (2017-10-10T20:00:01Z) - [Run the Formatter on lib/iex/lib/iex/evaluator.ex](https://github.com/elixir-lang/elixir/pull/6840)

Ran the formatter on lib/iex/lib/iex/evaluator.ex!

#### [#6838] - (2017-10-10T19:58:05Z) - [Run code formatter on lib/elixir/lib/io/ansi/docs.ex](https://github.com/elixir-lang/elixir/pull/6838)

Formatter lib/elixir/lib/io/ansi/docs.ex to #6643

#### [#6837] - (2017-10-10T19:56:44Z) - [Run the code formatter on Access](https://github.com/elixir-lang/elixir/pull/6837)



#### [#6836] - (2017-10-10T19:55:42Z) - [Run code formatter on lib/iex/lib/iex/pry.ex](https://github.com/elixir-lang/elixir/pull/6836)

Ran the formatter.

I was not sure about two decisions:
* The formatting of [this typespec](https://github.com/elixir-lang/elixir/compare/master...fabrik42:exfmt-pry?expand=1#diff-06592ac682e15e56da15969a44f5358eR154)
* I [extracted this tuple](https://github.com/elixir-lang/elixir/compare/master...fabrik42:exfmt-pry?expand=1#diff-06592ac682e15e56da15969a44f5358eR435) to make the function call a single line, but the tuple is within a macro and basically a constant. Does this still make sense? I named the variable according to the param name of the Erlang function.

#### [#6833] - (2017-10-10T19:54:01Z) - [Run code formatter on lib/elixir/test/elixir/kernel/binary_test.exs](https://github.com/elixir-lang/elixir/pull/6833)

Please let me know if I need to change something. :)

#### [#6744] - (2017-10-10T19:03:16Z) - [Run the code formatter on Macro](https://github.com/elixir-lang/elixir/pull/6744)



#### [#6831] - (2017-10-10T18:54:48Z) - [Run code formatter on lib/mix/test/mix/tasks/new_test.exs](https://github.com/elixir-lang/elixir/pull/6831)



#### [#6829] - (2017-10-10T17:56:19Z) - [Run the formatter on Mix.Dep.Fetcher](https://github.com/elixir-lang/elixir/pull/6829)



#### [#6828] - (2017-10-10T17:47:16Z) - [Run code formatter on lib/mix/test/test_helper.exs](https://github.com/elixir-lang/elixir/pull/6828)

There are a couple of gnarly `for` comprehensions in this file that were condensed into a single line. I'm not sure if that's the preferred style or not. Happy to make changes üòÄ 

#### [#6817] - (2017-10-10T17:42:30Z) - [Run code formatter on TaskTest](https://github.com/elixir-lang/elixir/pull/6817)



#### [#6808] - (2017-10-10T17:39:31Z) - [ Run the formatter on lib/elixir/test/elixir/uri_test.exs](https://github.com/elixir-lang/elixir/pull/6808)



#### [#6826] - (2017-10-10T17:06:59Z) - [Run code formatter on GenServer](https://github.com/elixir-lang/elixir/pull/6826)

Couple of places where I don't understand the formatter output...

#### [#6825] - (2017-10-10T16:54:20Z) - [Run the code formatter on lib/mix/tasks/compile.yecc.ex](https://github.com/elixir-lang/elixir/pull/6825)

Formatting file lib/mix/tasks/compile.yecc.ex  #6643 

#### [#6822] - (2017-10-10T16:53:27Z) - [Run the code formattter on lib/ex_unit/lib/ex_unit/case.ex](https://github.com/elixir-lang/elixir/pull/6822)



#### [#6824] - (2017-10-10T16:13:54Z) - [Run code formatter on compile.elixir.ex](https://github.com/elixir-lang/elixir/pull/6824)



#### [#6813] - (2017-10-10T16:10:36Z) - [Run formatter on lib/elixir/unicode/tokenizer.ex](https://github.com/elixir-lang/elixir/pull/6813)



#### [#6820] - (2017-10-10T15:55:06Z) - [Run code formatter on lib/elixir/test/elixir/file_test.exs](https://github.com/elixir-lang/elixir/pull/6820)



#### [#6821] - (2017-10-10T15:53:53Z) - [    Run the code formatter on lib/elixir/lib/file.ex](https://github.com/elixir-lang/elixir/pull/6821)



#### [#6823] - (2017-10-10T15:46:58Z) - [Run the code formatter on Mix.Tasks.RunTest](https://github.com/elixir-lang/elixir/pull/6823)

- 3b8e28b just executed `bin/elixir bin/mix format lib/mix/test/mix/tasks/run_test.exs`
- f7133b9 `Example 3: calls with many arguments` pattern at #6643
- 86a8a7a `Example 1: multi-line data structures` pattern at #6643 

passed tests `make test`

#### [#6819] - (2017-10-10T15:18:58Z) - [Run code formatter on lib/ex_unit/lib/ex_unit/on_exit_handler.ex](https://github.com/elixir-lang/elixir/pull/6819)



#### [#6816] - (2017-10-10T15:02:30Z) - [Run formatter on lib/eex/lib/eex/tokenizer.ex](https://github.com/elixir-lang/elixir/pull/6816)

No manual changes were needed

#### [#6814] - (2017-10-10T14:36:44Z) - [Run code formatter on Mix.Shell.IO](https://github.com/elixir-lang/elixir/pull/6814)



#### [#6818] - (2017-10-10T14:35:57Z) - [improve clarity of group_by docs](https://github.com/elixir-lang/elixir/pull/6818)

Apologies for an immediate follow up PR to #6782, but I had a shower thought on how to make the language more clear after the PR was merged.

Thanks!

#### [#6781] - (2017-10-10T14:26:48Z) - [Run code formatter on EExTest.Compiled](https://github.com/elixir-lang/elixir/pull/6781)



#### [#6761] - (2017-10-10T14:25:13Z) - [Run code formatter on lib/elixir/lib/stream.ex](https://github.com/elixir-lang/elixir/pull/6761)

bin/elixirc lib/elixir/lib/stream.ex -o lib/elixir/ebin
bin/elixir lib/elixir/test/elixir/stream_test.exs
make test

After running all three, this is build passing.

#### [#6702] - (2017-10-10T14:22:31Z) - [Reformat ExUnit.DocTest with mix format](https://github.com/elixir-lang/elixir/pull/6702)

See #6643.

#### [#6811] - (2017-10-10T14:20:50Z) - [Run code formatter on lib/elixir/test/elixir/io/ansi_test.exs](https://github.com/elixir-lang/elixir/pull/6811)



#### [#6793] - (2017-10-10T13:54:33Z) - [Run the code formatter on Mix.TaskTest](https://github.com/elixir-lang/elixir/pull/6793)

Formatted with:
```
$ bin/elixir -v
Erlang/OTP 20 [erts-9.0] [source] [64-bit] [smp:4:4] [ds:4:4:10] [async-threads:10] [hipe] [kernel-poll:false]

Elixir 1.6.0-dev (61b662a29) (compiled with OTP 20)
```

#### [#6810] - (2017-10-10T13:44:31Z) - [Run format on collectable_test.exs](https://github.com/elixir-lang/elixir/pull/6810)

That was easy


#### [#6807] - (2017-10-10T13:37:14Z) - [Run code formatter on Mix.Tasks.DepsGitTest](https://github.com/elixir-lang/elixir/pull/6807)



#### [#6799] - (2017-10-10T13:36:44Z) - [Document defimpl for multiple types](https://github.com/elixir-lang/elixir/pull/6799)

I started to implement `defimplm` for multiple types, then I found that `defimpl` already can do this, but the functionality is not documented.

#### [#6805] - (2017-10-10T12:58:20Z) - [Run the code formatter on Bitwise](https://github.com/elixir-lang/elixir/pull/6805)



#### [#6803] - (2017-10-10T12:48:07Z) - [Run the formatter for ExUnit.Runner](https://github.com/elixir-lang/elixir/pull/6803)



#### [#6804] - (2017-10-10T12:38:54Z) - [Run the code formatter on /lib/logger/lib/logger/utils.ex](https://github.com/elixir-lang/elixir/pull/6804)



#### [#6801] - (2017-10-10T12:36:42Z) - [Run the code formatter on lib/elixir/test/elixir/node_test.exs](https://github.com/elixir-lang/elixir/pull/6801)

Formatting file lib/elixir/test/elixir/node_test.exs as per #6643.

#### [#6802] - (2017-10-10T12:28:26Z) - [Run the code formatter on IEx.ServerTest](https://github.com/elixir-lang/elixir/pull/6802)



#### [#6795] - (2017-10-10T10:24:16Z) - [Run the code formatter on String.Unicode](https://github.com/elixir-lang/elixir/pull/6795)

Formatting file `lib/elixir/unicode/unicode.ex` as per #6643.

#### [#6796] - (2017-10-10T10:23:58Z) - [Run code formatter on Kernel.ParallelCompiler](https://github.com/elixir-lang/elixir/pull/6796)



#### [#6798] - (2017-10-10T10:22:45Z) - [Run the code formatter on IO.ANSI](https://github.com/elixir-lang/elixir/pull/6798)



#### [#6794] - (2017-10-10T10:21:26Z) - [Run formatter on lib/test/mix/tasks/profile.fprof_test.exs](https://github.com/elixir-lang/elixir/pull/6794)

Run formatter on lib/test/mix/tasks/profile.fprof_test.exs

#### [#6791] - (2017-10-10T08:01:17Z) - [Run code formatter on Range](https://github.com/elixir-lang/elixir/pull/6791)



#### [#6790] - (2017-10-10T07:26:15Z) - [Reformat Mix.Dep.Umbrella with mix format](https://github.com/elixir-lang/elixir/pull/6790)



#### [#6789] - (2017-10-10T07:14:58Z) - [Run code formatter on Path](https://github.com/elixir-lang/elixir/pull/6789)



#### [#6778] - (2017-10-10T07:14:03Z) - [Run the code formatter on Mix.Local](https://github.com/elixir-lang/elixir/pull/6778)



#### [#6763] - (2017-10-10T07:13:32Z) - [Run the code formattter on lib/mix/lib/mix/generator.ex](https://github.com/elixir-lang/elixir/pull/6763)



#### [#6731] - (2017-10-10T07:11:55Z) - [Run the code formatter on Mix.DepTest](https://github.com/elixir-lang/elixir/pull/6731)



#### [#6727] - (2017-10-10T07:10:50Z) - [Run the code formatter on mix ](https://github.com/elixir-lang/elixir/pull/6727)



#### [#6788] - (2017-10-10T07:09:05Z) - [Run the formatter on Mix.Tasks.Xref](https://github.com/elixir-lang/elixir/pull/6788)

Previous PR had a hanging build. Let's try this again

#### [#6776] - (2017-10-10T07:08:20Z) - [Run the code formatter on LoggerTest](https://github.com/elixir-lang/elixir/pull/6776)



#### [#6696] - (2017-10-10T07:08:05Z) - [Run the code formatter on Logger.Watcher](https://github.com/elixir-lang/elixir/pull/6696)



#### [#6779] - (2017-10-10T06:58:39Z) - [Run the code formatter on Task.Supervisor](https://github.com/elixir-lang/elixir/pull/6779)



#### [#6780] - (2017-10-10T06:56:32Z) - [Run code formatter on Mix.Tasks.Deps.Clean](https://github.com/elixir-lang/elixir/pull/6780)



#### [#6787] - (2017-10-10T06:55:13Z) - [Run the code formatter on Mix.Task](https://github.com/elixir-lang/elixir/pull/6787)



#### [#6786] - (2017-10-10T06:54:14Z) - [Run formatter on lib/elixir/test/elixir/kernel/with_test.exs](https://github.com/elixir-lang/elixir/pull/6786)



#### [#6785] - (2017-10-10T06:51:26Z) - [Format Kernel.ParallelRequire.](https://github.com/elixir-lang/elixir/pull/6785)



#### [#6784] - (2017-10-10T06:51:05Z) - [Run the code formatter on Mix.Tasks.CleanTest](https://github.com/elixir-lang/elixir/pull/6784)

This PR follows #6643. The randomizing script chose _lib/mix/test/mix/tasks/clean_test.exs_
 
It's a tad bit small, but it does the trick.

BTW, as an extra:

``
$ ./bin/elixir -v
Erlang/OTP 20 [erts-9.0] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:10] [hipe] [kernel-poll:false]

Elixir 1.6.0-dev (48beb79) (compiled with OTP 20)

$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 16.04.3 LTS
Release:        16.04
Codename:       xenial

$ cat /proc/version
**Linux version 4.4.0-43-Microsoft (Microsoft@Microsoft.com) (gcc version 5.4.0 (GCC) ) #1-Microsoft Wed Dec 31 14:42:53 PST 2014**
``

Elixir runs pretty well(except for file access speed) on Ubuntu 16.10 for Windows 10, aka Windows Subsystem for Linux.

#### [#6783] - (2017-10-10T06:50:37Z) - [Format IEx.Helpers](https://github.com/elixir-lang/elixir/pull/6783)

Code formatted according to #6643. 

#### [#6782] - (2017-10-10T06:47:31Z) - [Specify group_by values are ordered but map is not](https://github.com/elixir-lang/elixir/pull/6782)

There was some confusion in #6759 over exactly what was ordered by group_by

Hopefully this is useful. Let me know if you'd like any wording changes.

#### [#6775] - (2017-10-10T06:44:19Z) - [Run the code formatter on Dialyzer.ProtocolOpaque](https://github.com/elixir-lang/elixir/pull/6775)

Not sure why the build failed initially on something unrelated. Is this a flakey test?

#### [#6774] - (2017-10-10T06:43:30Z) - [Run formatter on lib/iex/test/test_helper.exs](https://github.com/elixir-lang/elixir/pull/6774)

I did have to put the comment on line 74 back. The formatter moved it to the beginning of the function body

#### [#6773] - (2017-10-10T06:42:06Z) - [Run formatter on lib/elixir/test/elixir/float_test.exs](https://github.com/elixir-lang/elixir/pull/6773)



#### [#6769] - (2017-10-10T06:41:25Z) - [Run the Formatter on lib/mix/test/mix/project_test.exs](https://github.com/elixir-lang/elixir/pull/6769)

Ran the code formatter as request on lib/mix/test/mix/project_test.exs!

#### [#6770] - (2017-10-09T23:35:43Z) - [Run the code formatter on Regex](https://github.com/elixir-lang/elixir/pull/6770)



#### [#6767] - (2017-10-09T23:13:14Z) - [Run the code formatter on lib/iex/lib/iex/autocomplete.ex](https://github.com/elixir-lang/elixir/pull/6767)



#### [#6745] - (2017-10-09T21:56:04Z) - [Run the code formatter on ExUnit.FiltersTest](https://github.com/elixir-lang/elixir/pull/6745)



#### [#6766] - (2017-10-09T21:34:19Z) - [Run code formatter on Mix.Config.Agent](https://github.com/elixir-lang/elixir/pull/6766)



#### [#6765] - (2017-10-09T21:33:39Z) - [Run code formatter on lib/elixir/test/elixir/path_test.exs](https://github.com/elixir-lang/elixir/pull/6765)



#### [#6764] - (2017-10-09T21:09:00Z) - [Run code formatter on lib/mix/test/fixtures/test_stale/mix.exs](https://github.com/elixir-lang/elixir/pull/6764)



#### [#6762] - (2017-10-09T21:08:04Z) - [Run code formatter on lib/elixir/lib/set.ex](https://github.com/elixir-lang/elixir/pull/6762)

bin/elixirc lib/elixir/lib/set.ex -o lib/elixir/ebin
bin/elixir lib/elixir/test/elixir/set.exs
make test

After running all three, this is build passing!

#### [#6760] - (2017-10-09T21:05:15Z) - [Run code formatter on lib/elixir/lib/string_io.ex](https://github.com/elixir-lang/elixir/pull/6760)

Build passing for all three:
`bin/elixirc lib/elixir/lib/string_io.ex -o lib/elixir/ebin`
`bin/elixir lib/elixir/test/elixir/string_io_test.exs`
`make test`

#### [#6758] - (2017-10-09T21:02:33Z) - [Run code formatter on lib/elixir/lib/supervisor.ex](https://github.com/elixir-lang/elixir/pull/6758)

Just working through the lib files from bottom to top. Hopefully, it all checks out!

#### [#6757] - (2017-10-09T21:01:43Z) - [Run code formatter on lib/elixir/lib/system.ex](https://github.com/elixir-lang/elixir/pull/6757)



#### [#6754] - (2017-10-09T21:00:38Z) - [Run code formatter on lib/mix/lib/mix/remote_converger.ex](https://github.com/elixir-lang/elixir/pull/6754)



#### [#6753] - (2017-10-09T21:00:07Z) - [Run the formatter on lib/elixir/test/elixir/calendar/date_range_test.exs](https://github.com/elixir-lang/elixir/pull/6753)



#### [#6749] - (2017-10-09T20:59:51Z) - [Run the code formatter on Mix.Tasks.Run](https://github.com/elixir-lang/elixir/pull/6749)



#### [#6748] - (2017-10-09T20:59:05Z) - [Run the code formatter on Kernel.LexicalTracker](https://github.com/elixir-lang/elixir/pull/6748)



#### [#6746] - (2017-10-09T20:56:42Z) - [Run the code formatter on GenEvent](https://github.com/elixir-lang/elixir/pull/6746)



#### [#6756] - (2017-10-09T20:41:34Z) - [Run code formatter on lib/elixir/lib/task.ex](https://github.com/elixir-lang/elixir/pull/6756)



#### [#6741] - (2017-10-09T20:39:32Z) - [Run code formatter on lib/mix/test/mix/cli_test.exs](https://github.com/elixir-lang/elixir/pull/6741)



#### [#6736] - (2017-10-09T20:28:18Z) - [Run code formatter on import_test.exs](https://github.com/elixir-lang/elixir/pull/6736)



#### [#6737] - (2017-10-09T20:14:37Z) - [Run code formatter on lib/elixir/kernel/comprehension_test.exs](https://github.com/elixir-lang/elixir/pull/6737)



#### [#6755] - (2017-10-09T20:05:12Z) - [Run code formatter on lib/elixir/lib/uri.ex](https://github.com/elixir-lang/elixir/pull/6755)



#### [#6752] - (2017-10-09T20:02:40Z) - [Run the code formatter on lib/elixir/lib/enum.ex](https://github.com/elixir-lang/elixir/pull/6752)



#### [#6750] - (2017-10-09T19:08:14Z) - [Run the code formattter on lib/elixir/lib/string.ex](https://github.com/elixir-lang/elixir/pull/6750)



#### [#6712] - (2017-10-09T18:09:37Z) - [Run the code formatter on Mix.Tasks.Compile.Protocols](https://github.com/elixir-lang/elixir/pull/6712)



#### [#6743] - (2017-10-09T18:05:52Z) - [Run the code formatter on Kernel.Overridable](https://github.com/elixir-lang/elixir/pull/6743)



#### [#6720] - (2017-10-09T18:04:02Z) - [Run code formatter on lib/logger/lib/logger/formatter.ex](https://github.com/elixir-lang/elixir/pull/6720)



#### [#6708] - (2017-10-09T17:56:48Z) - [Run code formatter on Logger.Backends.Console](https://github.com/elixir-lang/elixir/pull/6708)



#### [#6703] - (2017-10-09T17:54:29Z) - [Run the code formatter on IO.ANSI.DocsTest](https://github.com/elixir-lang/elixir/pull/6703)



#### [#6692] - (2017-10-09T17:53:31Z) - [Run code formatter on EEx.Compiler](https://github.com/elixir-lang/elixir/pull/6692)



#### [#6709] - (2017-10-09T17:52:08Z) - [Run code formatter on IEx.Server](https://github.com/elixir-lang/elixir/pull/6709)



#### [#6674] - (2017-10-09T17:51:32Z) - [Run code formatter on Compile.XrefTest](https://github.com/elixir-lang/elixir/pull/6674)



#### [#6747] - (2017-10-09T17:45:18Z) - [Run the code formatter on Code](https://github.com/elixir-lang/elixir/pull/6747)



#### [#6742] - (2017-10-09T17:38:40Z) - [Run the code formatter on Logger.Backends.ConsoleTest](https://github.com/elixir-lang/elixir/pull/6742)



#### [#6739] - (2017-10-09T17:02:10Z) - [run formatter on Agent.Server](https://github.com/elixir-lang/elixir/pull/6739)



#### [#6706] - (2017-10-09T15:59:08Z) - [Run the code formatter on Logger](https://github.com/elixir-lang/elixir/pull/6706)



#### [#6717] - (2017-10-09T15:52:59Z) - [Run the code formatter on BaseTest](https://github.com/elixir-lang/elixir/pull/6717)



#### [#6681] - (2017-10-09T15:42:50Z) - [Run code formatter on test/elixir/kernel/dialyzer_test.exs](https://github.com/elixir-lang/elixir/pull/6681)



#### [#6722] - (2017-10-09T15:41:32Z) - [Run the code formatter on Kernel.SpecialForms](https://github.com/elixir-lang/elixir/pull/6722)



#### [#6715] - (2017-10-09T15:37:10Z) - [Run the code formatter on Mix.Shell.Process](https://github.com/elixir-lang/elixir/pull/6715)



#### [#6686] - (2017-10-09T15:35:55Z) - [Run the code formatter on MapSet](https://github.com/elixir-lang/elixir/pull/6686)



#### [#6697] - (2017-10-09T15:35:26Z) - [Run code formatter on Logger.WatcherSupervisor](https://github.com/elixir-lang/elixir/pull/6697)



#### [#6726] - (2017-10-09T15:34:55Z) - [run code formatter on mix/tasks/compile.protocols_test.exs](https://github.com/elixir-lang/elixir/pull/6726)

Not a real big fan of 2 lined asserts.
```
assert mark_as_old!("_build/dev/lib/sample/consolidated/Elixir.Compile.Protocol.beam") !=
               @old
```

but left it that way because I saw it in other PRs too.

#### [#6705] - (2017-10-09T15:32:51Z) - [Run the code formatter on Mix.GeneratorTest](https://github.com/elixir-lang/elixir/pull/6705)



#### [#6667] - (2017-10-09T15:25:03Z) - [Run the code formatter on Mix.Tasks.Profile.CprofTest](https://github.com/elixir-lang/elixir/pull/6667)



#### [#6719] - (2017-10-09T15:24:05Z) - [Run the code formatter on Mix.Tasks.Archive.Check](https://github.com/elixir-lang/elixir/pull/6719)



#### [#6710] - (2017-10-09T15:20:43Z) - [run the code formatter on register_test](https://github.com/elixir-lang/elixir/pull/6710)



#### [#6707] - (2017-10-09T15:17:38Z) - [Run code formatter on Logger.Config](https://github.com/elixir-lang/elixir/pull/6707)



#### [#6701] - (2017-10-09T15:15:20Z) - [Run the code formatter on Mix.Tasks.Deps.Tree](https://github.com/elixir-lang/elixir/pull/6701)



#### [#6700] - (2017-10-09T15:13:01Z) - [Run the code formatter on Logger.Case](https://github.com/elixir-lang/elixir/pull/6700)



#### [#6694] - (2017-10-09T15:12:25Z) - [Run the code formatter on IEx.AutocompleteTest](https://github.com/elixir-lang/elixir/pull/6694)



#### [#6735] - (2017-10-09T15:10:41Z) - [Run the code formatter on Mix.PublicKey](https://github.com/elixir-lang/elixir/pull/6735)



#### [#6721] - (2017-10-09T15:09:02Z) - [Fix test race condition accessing tmp directory](https://github.com/elixir-lang/elixir/pull/6721)

Closes #6659.

#### [#6732] - (2017-10-09T15:01:34Z) - [Run the code formatter on RegexTest](https://github.com/elixir-lang/elixir/pull/6732)



#### [#6734] - (2017-10-09T14:55:19Z) - [Ran code formatter on lib/elixir/lib/tuple.ex](https://github.com/elixir-lang/elixir/pull/6734)



#### [#6733] - (2017-10-09T14:50:46Z) - [Run the code formatter on Mix.Tasks.Archive.Check](https://github.com/elixir-lang/elixir/pull/6733)



#### [#6730] - (2017-10-09T14:44:18Z) - [Run the code formatter on Logger.ErrorHandlerTest](https://github.com/elixir-lang/elixir/pull/6730)



#### [#6714] - (2017-10-09T14:05:28Z) - [Run the code formatter in help_test.exs](https://github.com/elixir-lang/elixir/pull/6714)



#### [#6716] - (2017-10-09T13:53:56Z) - [Run the code formatter on ApplicationTest](https://github.com/elixir-lang/elixir/pull/6716)



#### [#6668] - (2017-10-09T13:45:51Z) - [Run code formatter on Compile.YeccTest](https://github.com/elixir-lang/elixir/pull/6668)



#### [#6698] - (2017-10-09T13:39:28Z) - [Run the code formatter on Macro.Env](https://github.com/elixir-lang/elixir/pull/6698)



#### [#6699] - (2017-10-09T13:35:51Z) - [Run the code formatter on Mix.Tasks.Compile.Leex](https://github.com/elixir-lang/elixir/pull/6699)



#### [#6691] - (2017-10-09T13:03:38Z) - [Run the code formatter on Dict](https://github.com/elixir-lang/elixir/pull/6691)



#### [#6690] - (2017-10-09T12:59:05Z) - [Run the code formatter on KeywordTest](https://github.com/elixir-lang/elixir/pull/6690)



#### [#6689] - (2017-10-09T12:57:23Z) - [Run formatter on Dialyzer.Macrocallback](https://github.com/elixir-lang/elixir/pull/6689)



#### [#6687] - (2017-10-09T12:53:56Z) - [Run code formatter on Mix.Shell.QuietTest](https://github.com/elixir-lang/elixir/pull/6687)



#### [#6685] - (2017-10-09T12:52:15Z) - [Formatted lib/mix/lib/mix/tasks/escript.install.ex](https://github.com/elixir-lang/elixir/pull/6685)

No additional changes were necessary.

#### [#6684] - (2017-10-09T12:51:34Z) - [ran formatter](https://github.com/elixir-lang/elixir/pull/6684)

Ran the formatter as in #6643. Inspected the results, but made no manual changes.

```
bin/elixir scripts/random_file.exs

bin/elixir bin/mix format lib/mix/lib/mix/tasks/escript.ex

bin/elixir lib/mix/test/mix/tasks/escript_test.exs
```


#### [#6683] - (2017-10-09T12:50:54Z) - [Run code formatter on Mix.Exceptions](https://github.com/elixir-lang/elixir/pull/6683)



#### [#6682] - (2017-10-09T12:50:21Z) - [Run the code formatter on Mix.Dep.Lock](https://github.com/elixir-lang/elixir/pull/6682)



#### [#6680] - (2017-10-09T12:48:14Z) - [Run code formatter on Mix.Tasks.Loadconfig](https://github.com/elixir-lang/elixir/pull/6680)



#### [#6663] - (2017-10-09T12:16:54Z) - [Run the code formatter on Mix.Tasks.Compile.App](https://github.com/elixir-lang/elixir/pull/6663)



#### [#6678] - (2017-10-09T12:15:13Z) - [Run code formatter on Kernel.AliasTest](https://github.com/elixir-lang/elixir/pull/6678)



#### [#6679] - (2017-10-09T12:14:56Z) - [Run the code formatter on Calendar.Holocene](https://github.com/elixir-lang/elixir/pull/6679)



#### [#6677] - (2017-10-09T12:14:02Z) - [Run the code formatter on List](https://github.com/elixir-lang/elixir/pull/6677)



#### [#6660] - (2017-10-09T12:05:11Z) - [Run the code formatter on Mix.UtilsTest](https://github.com/elixir-lang/elixir/pull/6660)

I moved the anonymous functions out of `in_fixture()` calls and a long string message out of `flunk()`

#### [#6672] - (2017-10-09T12:03:58Z) - [Run the code formatter on IO.ANSI.DocsTest](https://github.com/elixir-lang/elixir/pull/6672)



#### [#6673] - (2017-10-09T12:02:55Z) - [Run the code formatter on Mix.Tasks.Archive.Install](https://github.com/elixir-lang/elixir/pull/6673)



#### [#6676] - (2017-10-09T12:02:12Z) - [Run code formatter on Record.Extractor](https://github.com/elixir-lang/elixir/pull/6676)



#### [#6670] - (2017-10-09T12:00:14Z) - [Run the code formatter on Mix.Dep.ElixirSCM](https://github.com/elixir-lang/elixir/pull/6670)



#### [#6675] - (2017-10-09T11:59:50Z) - [Run the code formatter on Agent](https://github.com/elixir-lang/elixir/pull/6675)



#### [#6671] - (2017-10-09T11:56:41Z) - [Run the code formatter on test_helper.exs](https://github.com/elixir-lang/elixir/pull/6671)



#### [#6666] - (2017-10-09T11:50:48Z) - [Run the code formatter on Version](https://github.com/elixir-lang/elixir/pull/6666)



#### [#6665] - (2017-10-09T11:49:24Z) - [Run the code formatter on Mix.Tasks.Local.Rebar](https://github.com/elixir-lang/elixir/pull/6665)



#### [#6664] - (2017-10-09T11:48:42Z) - [Run the code formatter on Logger.App](https://github.com/elixir-lang/elixir/pull/6664)



#### [#6662] - (2017-10-09T11:22:07Z) - [Run the code formatter on Mix.Tasks.Local](https://github.com/elixir-lang/elixir/pull/6662)



#### [#6661] - (2017-10-09T11:09:19Z) - [Run the code formatter on ExUnitTest](https://github.com/elixir-lang/elixir/pull/6661)



#### [#6657] - (2017-10-09T11:02:42Z) - [Run the code formatter on CodeFormatter.IntegrationTest](https://github.com/elixir-lang/elixir/pull/6657)

Formatting a test for the formatter - so meta!

#### [#6656] - (2017-10-09T11:01:19Z) - [Run the code formatter on Port](https://github.com/elixir-lang/elixir/pull/6656)

This was a quite simple one :)



#### [#6655] - (2017-10-09T11:00:24Z) - [Run the code formatter on Mix.Tasks.Deps](https://github.com/elixir-lang/elixir/pull/6655)

I did made one change in the pattern matching on the anonymous function
in `run/1` for readability after the formatter had been run.

#### [#6658] - (2017-10-09T10:58:26Z) - [Run the code formatter on Mix.Tasks.LoadconfigTest](https://github.com/elixir-lang/elixir/pull/6658)



#### [#6654] - (2017-10-09T10:57:55Z) - [Run the code formatter on Mix.Tasks.DepsPathTest](https://github.com/elixir-lang/elixir/pull/6654)

This formats this file according to the new formatter. One down!

#### [#6652] - (2017-10-09T10:57:02Z) - [Run the code formatter on ExUnit.Server](https://github.com/elixir-lang/elixir/pull/6652)

This PR is an example of what suggested in #6643. The steps I ran were:

1. Chose a file at random with:

   ```bash
   $ bin/elixir scripts/random_file.exs
   Checking lib/ex_unit/lib/ex_unit/server.ex... jackpot!

   The file above needs formatting.
   Please format it with the command below:

      bin/elixir bin/mix format lib/ex_unit/lib/ex_unit/server.ex

   Once formatted, check for any faults and submit a pull request.
   For more information see: https://github.com/elixir-lang/elixir/issues/6643

   Have fun!
   ```

1. Formatted it with `$ bin/elixir bin/mix format lib/ex_unit/lib/ex_unit/server.ex`

1. Adjusted the result manually to make it look good, exactly like described in #6643.


#### [#6641] - (2017-10-09T08:59:16Z) - [Show the multiple clauses for the same callback on IEx.Introspection.b/1](https://github.com/elixir-lang/elixir/pull/6641)

Fixes #6546

#### [#6650] - (2017-10-09T08:56:11Z) - [Improved error msg for process registration](https://github.com/elixir-lang/elixir/pull/6650)

(I hope this doesn't come across as pretentious or pedantic: that's certainly not my intention. I also realize this comes close to bikeshedding territory, but still hope it can be considered an improvement, however minuscule :p )

Improved the error message: the "or" conjuction isn't used that way in English (as it would be in French, for example).

Didn't find a way to keep the list of possibilities as a separate sentence: couldn't lead with "Either" as it is typically used to differentiate between only 2 options.

Finally, leaving the "Oxford comma" properly indicates that the issues is "one of" the presented possibilities.

#### [#6649] - (2017-10-09T08:53:54Z) - [Doctest for List.to_string/1 with deeply nested list](https://github.com/elixir-lang/elixir/pull/6649)



#### [#6642] - (2017-10-08T17:28:37Z) - [Add mix format](https://github.com/elixir-lang/elixir/pull/6642)

All code in this PR has been formatted by the formatter.

#### [#6640] - (2017-10-07T19:21:05Z) - [Small typos in code formatter docs](https://github.com/elixir-lang/elixir/pull/6640)



#### [#6628] - (2017-10-07T18:48:57Z) - [Improving the error message for capture_log when Logger is down](https://github.com/elixir-lang/elixir/pull/6628)

Fixes #6540

#### [#6639] - (2017-10-07T13:33:47Z) - [Add a code formatter](https://github.com/elixir-lang/elixir/pull/6639)

The `mix format` task is coming in another pull request.

#### [#6634] - (2017-10-05T19:29:12Z) - [Implement Access.filter/1](https://github.com/elixir-lang/elixir/pull/6634)

Implements `Access.find/1` and `Access.filter/1`. Examples and documentation provided in the code (aligned with examples and documentation for `Access.at/1`.

#### [#6633] - (2017-10-04T11:39:45Z) - [Clarify that the :trim option defaults to false](https://github.com/elixir-lang/elixir/pull/6633)

Was unsure with the current wording, and the other options have the default documented too!

#### [#6630] - (2017-10-04T10:43:04Z) - [Update Port ### spawn example](https://github.com/elixir-lang/elixir/pull/6630)

The explanation used `echo hello` so it would make sense for the example to use the same.

#### [#6601] - (2017-10-03T10:07:10Z) - [Saving warnings to manifest in Erlang-based compilers and return diag‚Ä¶](https://github.com/elixir-lang/elixir/pull/6601)

‚Ä¶nostics

#### [#6627] - (2017-10-03T04:47:49Z) - [Remove underspecification warning for consolidated protocols](https://github.com/elixir-lang/elixir/pull/6627)

Example warning:

    'Elixir.Collectable':'__protocol__'('impls') -> {'consolidated',[module()]}
        ; ('consolidated?') -> 'true'
        ; ('functions') -> [{'into',1},...]
        ; ('module') -> 'Elixir.Collectable' is a supertype of the success typing: 'Elixir.Collectable':'__protocol__'('consolidated?' | 'functions' | 'impls' | 'module') -> 'Elixir.Collectable' | 'true' | [{'into',1},...] | {'consolidated',['Elixir.BitString' | 'Elixir.File.Stream' | 'Elixir.HashDict' | 'Elixir.HashSet' | 'Elixir.IO.Stream' | 'Elixir.List' | 'Elixir.Map' | 'Elixir.MapSet',...]}

Note that the mismatch is that `module()` is wider than the actual list of consolidated implementations. Since we have this information when consolidating, we can adjust the type spec to prevent this particular warning.

This pull-request also adds a test for changes to the consolidated function specifications.

#### [#6625] - (2017-10-02T08:45:10Z) - [Task.await/2 doc updates](https://github.com/elixir-lang/elixir/pull/6625)

My main reason for submitting this pull-request is that I had some confusion about what happens to the task process when a timeout occurs. Will it stop or will it continue to run? Hopefully, this change will make it more clear.

I also changed "function will exit" to "current process will exit" to make it more clear that the process is exiting.

Finally, I moved all discussion of timeouts into the same paragraph.

Hopefully this is helpful. Thanks! ‚ú® 

#### [#6624] - (2017-10-02T08:33:26Z) - [Small doc fix for Task.shutdown/2](https://github.com/elixir-lang/elixir/pull/6624)



#### [#6623] - (2017-10-01T19:16:50Z) - [Improve the wording in alias error messages](https://github.com/elixir-lang/elixir/pull/6623)

Small changes to improve the wording in alias error messages.

#### [#6621] - (2017-10-01T16:36:34Z) - [Add groups_for_modules when generating Elixir docs](https://github.com/elixir-lang/elixir/pull/6621)

This PR organizes modules in the Elixir docs in subgroups. The first comment below contains a screenshot of how it looks like.

Organizing modules in groups makes it easier for developers to find related functionality and make sense of Elixir standard library. The downside is that if you are looking for a specific module, it may become slightly harder to find (although you can use the search).

All of the groups are listed under the `scripts/docs.ex` file added as part of this PR. Feel free to review those groups and provide feedbacks. Note Kernel and Kernel.SpecialForms do not have a group, for this reason they show first in the sidebar without any group.

I have the following questions in mind:

1. "Data types" may be a misnomer. For example, the `Base` module is not really a data type. On the other hand, it does work on string types. Maybe "Data Functions" or "Data & Functions" may be better names, although they all have the problem of being too generic. Thoughts?

2. Note the "Date & Time" modules have their own section. Is it a good idea? Splitting helps developers find related functionality... but splitting too much probably makes everything too fragmented.

3. Should we have a category for "Collections" or "Enumerables"? Those would include `Enum`, `Keyword`, `List`, `Map`, `MapSet`, `Range` and `Stream`. I am more inclined towards no, because it leads to fragmentation and to more hard to answer questions. For example, Access theoretically works on collections, although it doesn't exploit their collection characteristics. And what about tuples? Which is a collection but not enumerable?

4. `Port` and `Process` are kept under data types but they could be moved to "OTP". `Port` could also be moved to "IO & System". I think though they are primarily about the data types they represent.

What do you think?

/cc @sasa1977 @fishcakez @lexmag @whatyouhide @alco @eksperimental @ericmj


#### [#6620] - (2017-09-30T20:23:32Z) - [The start_link needs one parameter in docs for Agent.](https://github.com/elixir-lang/elixir/pull/6620)



#### [#6609] - (2017-09-30T19:29:45Z) - [Improve accuracy of diagnostic lines in Elixir compile task](https://github.com/elixir-lang/elixir/pull/6609)

Fixes two scenarios in which the diagnostic line numbers are not correct:

  * `UndefinedFunctionError`s would cause the line number to be `nil`, but we can determine the line number from the stack trace
  * When the error originates in a file other than the one that was being compiled, the line number will be the line at which the other file had an exception, which is confusing. Instead, it now sets the line number to `nil`.

#### [#6619] - (2017-09-30T18:27:56Z) - [Typo in Logger module documentation](https://github.com/elixir-lang/elixir/pull/6619)

`:label` instead of `:level`

#### [#6615] - (2017-09-30T13:39:09Z) - [Include lib/*/lib files in Precompiled.zip](https://github.com/elixir-lang/elixir/pull/6615)

Ref https://github.com/elixir-lang/elixir/issues/6562#issuecomment-333213263

I tested it by both manually unpacking and via `asdf`. cc @ericmj 

#### [#6614] - (2017-09-29T11:12:36Z) - [Mix.Tasks.Profile.Eprof: Protect against division by zero](https://github.com/elixir-lang/elixir/pull/6614)

Tests for this Mix task [failed on Windows](https://ci.appveyor.com/project/josevalim/elixir/build/1-master+1142) with `(ArithmeticError) bad argument in arithmetic expression`.

I guess the time precision on Windows is not sufficient enough to measure this small execution times.



#### [#6612] - (2017-09-28T12:04:30Z) - [Improve error message on oversized atom](https://github.com/elixir-lang/elixir/pull/6612)

I'm not sure if it was intentional but I felt that something is missing after colon in error message here:
```elixir
Erlang/OTP 20 [erts-9.0.5] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:10] [hipe] [kernel-poll:false] [dtrace]

Interactive Elixir (1.5.1) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> :aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
** (SyntaxError) iex:1: atom length must be less than system limit:

iex(1)>
```

This change makes invalid atom to be shown after the colon:
```elixir
Erlang/OTP 20 [erts-9.0.5] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:10] [hipe] [kernel-poll:false] [dtrace]

Interactive Elixir (1.6.0-dev) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> :aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
** (SyntaxError) iex:1: atom length must be less than system limit: :aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

iex(1)>
```


#### [#6610] - (2017-09-28T08:33:56Z) - [Raise on EEx with invalid middle expression](https://github.com/elixir-lang/elixir/pull/6610)

In EEx if we evaluate a string with a middle expression without a start block then Elixir enters in an infinite loop consuming 100% CPU.

Example:

```elixir
EEx.eval_string ~S{
  <% if true %>
    foo
  <% else %>
    bar
  <% end %>
}
```

This PR Raises an `EEx.SyntaxError` exception in case there is start expression.

it covers issue #6607 .

#### [#6608] - (2017-09-27T15:07:04Z) - [Fix example for ex_unit assertion](https://github.com/elixir-lang/elixir/pull/6608)

This code example used variables `one` and `two` that weren't previously initialized, and don't match the assertion result message.

#### [#6603] - (2017-09-26T20:55:42Z) - [Save Xref warnings to manifest and return diagnostics from compiler](https://github.com/elixir-lang/elixir/pull/6603)



#### [#6593] - (2017-09-26T09:55:58Z) - [Use a different random seed for each ExUnit test](https://github.com/elixir-lang/elixir/pull/6593)

The runner now uses the configured seed to generate a random seed for each test based on its name and module, adding it to the `SeedManager`, that stores and retrieves it using test pid.

Resolves #6587

#### [#6599] - (2017-09-25T22:43:57Z) - [Fix negative microsecond result from DateTime.from_unix/2](https://github.com/elixir-lang/elixir/pull/6599)

Fixes negative microsecond result when calling `DateTime.from_unix/2` with :microsecond unit and a value which is not a multiple of 1_000_000. 

Before changes:

```
iex(1)> DateTime.from_unix!(-1, :microsecond)
#DateTime<1970-01-01 00:00:00.0000-1Z>
```

After changes:

```
iex(1)> DateTime.from_unix!(-1, :microsecond)
#DateTime<1969-12-31 23:59:59.999999Z>
```

This resolves #6589.

#### [#6598] - (2017-09-25T18:39:29Z) - [Return diagnostics from Compile.Elixir mix task and Compile.All](https://github.com/elixir-lang/elixir/pull/6598)



#### [#6552] - (2017-09-25T08:20:44Z) - [Add support for supervisor fun to Task.Supervisor.async_stream](https://github.com/elixir-lang/elixir/pull/6552)

This PR allows you to pass a 1-arity fun as the `supervisor` argument for the `async_stream` functions, which receives the stream entry and should return a supervisor pid/name, which will then be used as the target supervisor for the task which will process the stream entry.

cc: @josevalim @ericmj 

#### [#6594] - (2017-09-25T07:41:34Z) - [Add link to docs for guards, when an invalid guard expression is used](https://github.com/elixir-lang/elixir/pull/6594)

I believe this should resolve #6583. Linking seemed like the more appropriate solution, since there would be a lot of built-in guard functions to list and wouldn't cover macros the user defined.

#### [#6595] - (2017-09-24T10:22:45Z) - [Fix @impl attribute for default arguments](https://github.com/elixir-lang/elixir/pull/6595)

`Module.compile_impl/6` was ignoring the default attributes when compiling the impl, now it checks the count of default attributes and adds an impl for each one.

I tried to follow the same idea of [`Module.add_doc/6`](https://github.com/elixir-lang/elixir/blob/144df88caedfae891e12fcd3595c61b64783fd12/lib/elixir/lib/module.ex#L641), that resolves the signature of the function by itself. The count of default attributes follows the same logic as [`:elixir_def.expand_defaults/2`](https://github.com/elixir-lang/elixir/blob/144df88caedfae891e12fcd3595c61b64783fd12/lib/elixir/src/elixir_def.erl#L230)

Fixes #6550

#### [#6596] - (2017-09-24T10:07:19Z) - [Support path with spaces as argument to elixir.bat](https://github.com/elixir-lang/elixir/pull/6596)

Erlang parameters (CLI switch '--erl') are used with possible quotes around the argument removed ('%~1').
This causes an error if one arbitrary argument to elixir.bat represents a quoted path with spaces in it:
"[part of path after space] was unexpected at this time."

Enclose the complete expression with quotes to work around this (the quotes are not added to the content).

This behavior is not documented in the [Windows XP Command Line Reference for SET](https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/set.mspx)
but there are other places which document the [SET command](https://ss64.com/nt/set.html).

Fix for #6455

#### [#6573] - (2017-09-22T16:50:27Z) - [Add Mix.Tasks.Profile.Eprof for profiling using eprof](https://github.com/elixir-lang/elixir/pull/6573)

Continuing the work done in https://github.com/elixir-lang/elixir/pull/5834 and discussed in [the Elixir Core Mailing List](https://groups.google.com/forum/#!topic/elixir-lang-core/LeB8G1_CSQI), here is the proposed code for `Mix.Tasks.Profile.Eprof` to profile code using Erlang's `:eprof`.

The logic follows the one done for `Mix.Tasks.Profile.Cprof`, but the functions are not shared following the previous PR.

Some points:
- The output is very similar output from Erlang, I don't know if we want to keep like this or change something.
- `:eprof` offers a `mfa` sorting option, but I didn't implement because it looks confusing when the mfa is transformed to be printed, especially cases like `anonymous fn/0 in :elixir_compiler_7.__FILE__/1`
- Would also be nice a help with the documentation, especially from English spearkers üòÄ 

Resolves #6405

#### [#6446] - (2017-09-21T06:14:53Z) - [Add option :return_errors to ParallelCompiler and ParallelRequire](https://github.com/elixir-lang/elixir/pull/6446)

This is motivated by the goal of allowing Mix compilers to return their diagnostic information in a standardized format. Before this change, `ParallelCompiler` calls `exit({:shutdown, 1})` upon encountering a compilation error, and there's no way to programatically retrieve the errors. This change allows `ParallelCompiler` and `ParallelRequire` to return warnings and errors if the option `:return_errors` is passed. Return values is `{:ok, modules, warnings} | {:error, errors}` when this option is passed. If the option is not passed, the return value is the same as before, and it will exit the process when encountering an error.

There seemed to be a lot of duplication between the code in `ParallelRequire` and `ParallelCompiler`, so to avoid having to duplicate these changes in both places, I added an option `:require` to `ParallelCompiler` to load files via `Code.require_files/1`. Now, `ParallelRequire` simply calls `ParallelCompiler` with this option, reducing code duplication.

#### [#6588] - (2017-09-21T04:39:35Z) - [Fix typo in Task docs](https://github.com/elixir-lang/elixir/pull/6588)



#### [#6548] - (2017-09-18T09:09:19Z) - [Add ExUnit.Callbacks.start_supervised!/2](https://github.com/elixir-lang/elixir/pull/6548)

Closes #6379

#### [#6569] - (2017-09-18T08:28:20Z) - [Detect describe block at given line filter and run all tests in it](https://github.com/elixir-lang/elixir/pull/6569)

Until now, ExUnit's line filter (such as `mix test path/to/file:123`) only detected a test case starting at the given line number. Running all tests in a describe block was only possible using `mix test --only describe:"String.capitalize/1"`.

This PR adds the possibility to run all tests in a describe block by addressing the line starting it. If `describe "String.capitalize/1"` is at line 123, all tests in it can now be run via `mix test path/to/file:123`.

This filter is shorter and more intuitive as it makes the line filter smarter, and is in line with the behavior of other test runners, such as rspec, as well as what IDEs such as RubyMine expect.

Implementation-wise, I added an automatic tag `@ex_unit_describe_line` that is added to each test's tags as `:describe_line` and then used for filtering.

I've also added a test for existing functionality of setting the `:describe` tag and prepending it to the name (`:test` tag).

Please let me know if this makes sense for you, and if there's anything I can improve :)

#### [#6579] - (2017-09-17T21:11:38Z) - [Improve docs on IO.puts/2 function](https://github.com/elixir-lang/elixir/pull/6579)

The purpose of this PR is to add more info about the function IO.puts.  Add info about the return value of the function and also 2 examples of how to use it.

#### [#6578] - (2017-09-17T21:06:48Z) - [Format mix.lock with one dep only per line](https://github.com/elixir-lang/elixir/pull/6578)

As suggested by @josevalim in #6574 I've standardised the format  of `mix.lock` so that each line containing a dependency is in the same format.

So instead of this:

```elixir
%{"foo": ...,
    "bar": ...}
```

we now use this format:

```elixir
%{
  "foo": ...,
  "bar": ...,
}
```

This should improve readability, consistency and also make resolving version control conflicts much easier to deal with (manual or automated).

This change should also make possible implementations of #6554 (which may try to directly resolve conflicts in `mix.lock`) easier to implement since each line containing a dependency is in the same format.

Haven't yet found any other code that needs modification in this PR, but would appreciate any insights on what might break as a result of this change.

#### [#6576] - (2017-09-15T20:34:35Z) - [Fix local.hex --if-missing](https://github.com/elixir-lang/elixir/pull/6576)

When Hex is loaded then `should_install?` should be `false`.

Looks like it never worked properly :(

#### [#6564] - (2017-09-15T10:36:47Z) - [Optimise Keyword.delete/2 and friends](https://github.com/elixir-lang/elixir/pull/6564)

This optimises all functions similar to Keyword.delete/2:

  * Keyword.delete/3
  * Keyword.delete_first/2
  * Keyword.pop/3
  * Keyword.pop_lazy/3
  * Keyword.pop_first/3

There are three major changes for "delete" family:

  * use by-hand recursion instead of non-BIF :lists calls
  * in case we end up not deleting a value, use trow-catch to return the
    original list unmodified (this significantly lowers memory use)
  * build the result through body recursion, this way when we unwind the stack
    we free all the data and leave no garbage behind for the GC.

For the "pop" family:

  * use by-hand recursion instead of non-BIF :lists calls
  * do only a single pass over the list instead of two passes that previous
    fetch + delete algorithm did

In benchmarks, the new Keyword.delete/2 functions is twice as fast as the old
implementation. Since it's frequently used internally by the Keyword module (for
example in Keyword.put/3) this improves the efficiency of all those functions.

Benchmark reference: https://gist.github.com/michalmuskala/f7f38151495acf7ead131f80271359e7

#### [#6572] - (2017-09-15T08:43:33Z) - [Mention multi-line strings in the syntax reference](https://github.com/elixir-lang/elixir/pull/6572)



#### [#6559] - (2017-09-12T13:20:55Z) - [Allow passing empty string as match argument to String.replace/4](https://github.com/elixir-lang/elixir/pull/6559)

## Summary

This patch allows calling `String.replace` with an empty string as the match argument.

## Reason for patch

When I found out that passing an empty string as a match argument to `replace` throws an `ArgumentError` I was surprised by this unexpected behavior. 

Many languages support this feature which allows supplying match arguments coming from dynamic sources.

For example assume we are processing file names and trying to remove the
extension (*assuming `Path.basename/2` function did not exist*):

**Before** patch:

```elixir
inputs = ["README.md", "package.json", "LICENSE"]

inputs
|> Enum.map(&(String.replace(&1, Path.extname(&1), "")))
# ** (ArgumentError) argument error
#    (stdlib) binary.erl:275: :binary.replace/4
#    (elixir) lib/enum.ex:1255: Enum."-map/2-lists^map/1-0-"/2
#    (elixir) lib/enum.ex:1255: Enum."-map/2-lists^map/1-0-"/2
```

To fix it we would have to transform the code to something like this:
 
```elixir
inputs = ["README.md", "package.json", "LICENSE"]
inputs
|> Enum.map(fn (file) ->
  ext = Path.extname(file)
  if ext == "" do
    file
  else
    String.replace(file, ext, ""))
  end
end)

# => ["README", "package", "LICENSE"]
```

**After** patch:

```elixir
inputs = ["README.md", "package.json", "LICENSE"]

inputs
|> Enum.map(&(String.replace(&1, Path.extname(&1), "")))

# => ["README", "package", "LICENSE"]
```

## Examples from other languages

#### Ruby

```ruby
'LICENSE'.gsub('','')
# => 'LICENSE'
```

#### JavaScript

```javascript
'LICENSE'.replace('','')
// => 'LICENSE'
```

#### Go

```golang
fmt.Println(strings.Replace("LICENSE", "", "", -1))
// => "LICENSE"
```

#### Rust

```rust
fn main() {
    let result = str::replace("LICENSE", "", "");
    println!("{}", result); // => "LICENSE"
}
```

#### Java

```java
System.out.println("LICENSE".replace("",""));
// => "LICENSE"
```

#### Lua

```lua
str = "LICENSE"
res = str:gsub("", "")

io.write(res, "\n")
-- "LICENSE"
```

#### SQL

```sql
select replace('LICENSE', '', '');
-- LICENSE
```

#### Swift

```swift
"LICENSE".replacingOccurrences(of: "", with: "") // "LICENSE"
```

#### Objective C

```objc
NSString *str = [@"LICENSE" stringByReplacingOccurrencesOfString:@"" withString:@""];
NSLog (str);
```

## Using empty string match for interspersing

This patch also adds support for interspersing every character using the empty string as match - as in many other languages (Ruby, Rust, Java, Python, Lua...):

#### Ruby

```ruby
'LICENSE'.gsub('','x')
# => 'xLxIxCxExNxSxEx'
```


After this patch:

```elixir
String.replace("LICENSE","","x") 
# => "xLxIxCxExNxSxEx"
```


Thank you for your consideration and time.

---

Edit: added more languages as examples

#### [#6513] - (2017-09-12T12:21:28Z) - [Introduce Time.add/3](https://github.com/elixir-lang/elixir/pull/6513)

It should serve as a "safer" alternative to non-existing `Time.add/3`.
CC @lau 

#### [#6560] - (2017-09-12T11:57:24Z) - [Features/allow multiple registries in supervision tree](https://github.com/elixir-lang/elixir/pull/6560)

Related to #6556 

cc: @josevalim 

#### [#6538] - (2017-09-06T20:38:45Z) - [Warning on the use of length(x) == 0 on guards](https://github.com/elixir-lang/elixir/pull/6538)

Closes #6374 

#### [#6542] - (2017-09-06T18:42:39Z) - [Improve the error message for rescue, catch and else inside def](https://github.com/elixir-lang/elixir/pull/6542)

Fixes #6478 

#### [#6521] - (2017-09-06T18:41:36Z) - [Use :io_lib.scan_format/2 on Logger.Utils.inspect/4](https://github.com/elixir-lang/elixir/pull/6521)

Mentioned on #4617.

It made the code a lot easier to read.

I did not write any tests, since `Logger.Utils.inspect` already has some

There is also room for a performance improvement here.

The way `Logger.Utils.inspect` is used now follows the flow:

- scan the format
- handle the inpects
- unscan the format
- then it is used by `Logger.ErrorHandler.translate`, which calls `io_lib:format` that consequently:
  - scan the format again
  - then finally build it

To optimize, we can call `io_lib:build_text` on the scanned and inspected format
list.

I'll do it soon in this same PR if you could wait a little bit.

#### [#6545] - (2017-09-05T23:12:00Z) - [Fix typo in Task.Supervisor](https://github.com/elixir-lang/elixir/pull/6545)

Just noticed this one while attending the OTP workshop @ ElixirConf 2017 üî® 

#### [#6537] - (2017-09-04T09:39:01Z) - [Warn if catch comes before rescue in try](https://github.com/elixir-lang/elixir/pull/6537)

solves: #6511

#### [#6531] - (2017-09-03T14:33:23Z) - [Loading umbrella project apps optional deps](https://github.com/elixir-lang/elixir/pull/6531)

Fixes #6333

#### [#6468] - (2017-09-03T12:07:59Z) - [Clarify binary comparison](https://github.com/elixir-lang/elixir/pull/6468)



#### [#6534] - (2017-09-01T18:33:57Z) - [Return valid MapSet when union-ing a legacy MapSet](https://github.com/elixir-lang/elixir/pull/6534)

Right now, the `union` function returns a bare map instead of a `MapSet` struct when operating on `MapSet`s with differing versions. This fix wraps the map appropriately.

Although this fixes behaviour at the `MapSet` API level, I'm not sure what level of support there is intended to be for legacy `MapSet`. Some of the functions have potentially unwanted behaviour that results in a hybrid `MapSet` (legacy `MapSet` with `[]` values, or v2 `MapSet` with `true` values) that would fail pattern matching even if both are at the same version.

```
Erlang/OTP 20 [erts-9.0] [source] [64-bit] [smp:4:4] [ds:4:4:10] [async-threads:10] [hipe] [kernel-poll:false]

Interactive Elixir (1.5.1) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> old = %{__struct__: MapSet, map: %{a: true, b: true, c: true, d: true, e: true, f: true}}
#MapSet<[:a, :b, :c, :d, :e, :f]>
iex(2)> new = MapSet.new([:e, :f, :g])
#MapSet<[:e, :f, :g]>
iex(3)> inspect old, structs: false
"%{__struct__: MapSet, map: %{a: true, b: true, c: true, d: true, e: true, f: true}}"
iex(4)> inspect new, structs: false
"%{__struct__: MapSet, map: %{e: [], f: [], g: []}, version: 2}"
iex(5)> old_plus_h = MapSet.put(old, :h)
#MapSet<[:a, :b, :c, :d, :e, :f, :h]>
iex(6)> inspect old_plus_h, structs: false
"%{__struct__: MapSet, map: %{a: true, b: true, c: true, d: true, e: true, f: true, h: []}}"
iex(7)> intersection = MapSet.intersection(new, old)
#MapSet<[:e, :f]>
iex(8)> inspect intersection, structs: false
"%{__struct__: MapSet, map: %{e: true, f: true}, version: 2}"
```

#### [#6530] - (2017-09-01T08:20:54Z) - [Fix more typos and spelling errors](https://github.com/elixir-lang/elixir/pull/6530)

Notes:

standardize on "falsy" because there are more instances of that in the code already

"clean up" isn't a noun, "cleanup" is

"run down" isn't a noun

"take over" isn't a noun

A dependant is a person who is dependent on someone else; "dependent" is the adjective; American English uses "dependent" for both which makes things really simple when code has both "dependent on" and "dependent module"


#### [#6524] - (2017-09-01T08:18:38Z) - [Add newline spacing around documentation example](https://github.com/elixir-lang/elixir/pull/6524)

Fixed some inconsistent spacing in the documentation example for `Tuple.append`.

#### [#6525] - (2017-09-01T08:17:57Z) - [Fix a few spelling errors](https://github.com/elixir-lang/elixir/pull/6525)

found with https://github.com/lucasdemarchi/codespell

#### [#6528] - (2017-09-01T08:17:26Z) - [Use "number" instead of "amount" for count nouns](https://github.com/elixir-lang/elixir/pull/6528)

"amount" is [not grammatical](https://english.stackexchange.com/questions/337989/the-amount-of-vs-the-number-of-etc/337998#337998) when used with count nouns (e.g. days, seconds, bytes, entries, restarts, partitions, cores).

#### [#6518] - (2017-08-31T10:02:12Z) - [Add Port.monitor/1 and Port.demonitor/1 functions](https://github.com/elixir-lang/elixir/pull/6518)

Mentioned on to #4617

#### [#6523] - (2017-08-31T08:34:20Z) - [Update `IO.write/2` docs](https://github.com/elixir-lang/elixir/pull/6523)

When I was reading the documentation for this function a couple days
ago, the line "It returns `:ok` if it succeeds." was really confusing
to me. It made me think there was some other error possibility that I
was missing and should handle.

After looking at the Erlang docs for `:io.put_chars/2`, it looks like
there isn't some additional error case. Only then did I even notice the
typespec that says this function always returns `:ok`. So, I think this
line is misleading, and we should remove it.

#### [#6522] - (2017-08-31T08:22:48Z) - [Fix typo in Inspect.Algebra doc](https://github.com/elixir-lang/elixir/pull/6522)

Hello Elixir core team,

I forge ahead in my mission to revolutionize the language with minimalistic pull requests.

Cheers!

#### [#6517] - (2017-08-30T12:26:57Z) - [Add link to Hex options](https://github.com/elixir-lang/elixir/pull/6517)



#### [#6512] - (2017-08-30T12:11:43Z) - [Fix random seed generation in ExUnit for Windows systems](https://github.com/elixir-lang/elixir/pull/6512)

Windows does not have microsecond-level timestamps. As such, the seed
generated by :os.timestamp is only in the millisecond range, giving
multiples of 1000 for "random" seeds. This change should give the same
results in *nix systems while giving a wider seed variety on Windows.

#### [#6508] - (2017-08-27T19:10:45Z) - [Correct Registry.match/4's typespec of its "pattern" argument](https://github.com/elixir-lang/elixir/pull/6508)

More info: https://github.com/elixir-lang/elixir/issues/6507

#### [#6506] - (2017-08-25T08:14:17Z) - [Fix word in Kernel moduledoc](https://github.com/elixir-lang/elixir/pull/6506)

`ingers` ‚Üí `integers`

#### [#6505] - (2017-08-24T23:33:02Z) - [Add :format metadata to strings and charlist literals](https://github.com/elixir-lang/elixir/pull/6505)



#### [#6502] - (2017-08-23T15:38:52Z) - [Clarify Path.join/2 behavior when dealing with lists](https://github.com/elixir-lang/elixir/pull/6502)

This thing caught me and @michalmuskala:
```
iex(1)> Path.join("a/b/c", ["d", "e"])
"a/b/c/de"
iex(2)> Path.join(["a/b/c", "d", "e"]) 
"a/b/c/d/e"
```

I've expected that right or left part would be joined with path separator between elements.

I think we need either join `left` and `right` parts of the path by calling `join/1` recursively (that looks like a breaking change), or clarify behavior in the docs (as I did for now).

#### [#6498] - (2017-08-23T13:29:14Z) - [Improve doc for Kernel.SpecialForms.&/1](https://github.com/elixir-lang/elixir/pull/6498)

* Add the example of partially applied module function
* Improve local function example
* Improve list example

#### [#6501] - (2017-08-23T10:57:10Z) - [Keep the representation of "float" tokens like we do for "int" tokens](https://github.com/elixir-lang/elixir/pull/6501)



#### [#6499] - (2017-08-23T09:55:13Z) - [Merge integer tokens into the "int" token](https://github.com/elixir-lang/elixir/pull/6499)

This is basically the same as #6492, but reworked after #6495. Integer tokens are now `int`, not `hex`/`binary`/`octal`/`decimal`. Reasons for this change are in #6495.

Note that the `int` token looks like this

```erlang
{int, {Line, {StartColumn, EndColumn}, IntValue}, OriginalRepresentation}
```

so for `0b010` you'd have

```erlang
{int, {_, _, 2}, "0b010"}
```

#### [#6494] - (2017-08-23T07:10:49Z) - [Ignore package tarball](https://github.com/elixir-lang/elixir/pull/6494)



#### [#6495] - (2017-08-22T19:12:30Z) - [Change the format of tokens](https://github.com/elixir-lang/elixir/pull/6495)

Right now, tokens are `{Token, Location}` or `{Token, Location, Value}`. This PR changes `Location` from `{Line, StartColumn, EndColumn}` to `{Line, {StartColumn, EndColumn}, Meta}` where `Meta` can be anything. This will be used for things such as storing the format of integers.

For now all `Meta` are `nil` (we can go with any term that means nothing here), we'll fill it up for some tokens later on.

#### [#6496] - (2017-08-22T15:55:52Z) - [Fix Date.Range.t/0](https://github.com/elixir-lang/elixir/pull/6496)

Why
---

Fields mistakenly referenced nonexistent `Calendar.days` type

How
---

Change `Calendar.days` to `Calendar.iso_days`

#### [#6493] - (2017-08-22T10:25:48Z) - [Fix Enum.reduce/3 documentation](https://github.com/elixir-lang/elixir/pull/6493)

Simple bug in documentation.

#### [#6489] - (2017-08-21T13:20:36Z) - [Fix error in Task.Supervisor.async_stream_nolink docs](https://github.com/elixir-lang/elixir/pull/6489)

Documentation of Task.Supervisor.async_stream_nolink states that spawned tasks will be linked to the current process, when the opposite is in fact true.

#### [#6484] - (2017-08-19T21:35:03Z) - [[Trivial] [Docs] Fix typos](https://github.com/elixir-lang/elixir/pull/6484)

I just saw one in the commit log, so here is the correction. Have a good one!

#### [#6481] - (2017-08-19T14:34:37Z) - [Consistently refer to callback functions as fun](https://github.com/elixir-lang/elixir/pull/6481)

In collections, use `fun` instead of `callback` or `function` for consistency.

#### [#6474] - (2017-08-17T13:45:47Z) - [Remove double space from Supervisor doc](https://github.com/elixir-lang/elixir/pull/6474)

Little double space I found while studying the source code for Supervisor.

I did take note of Valim's request to aggregate these tiny commits into one PR whenever possible. I only happened to find one this time around.


#### [#6471] - (2017-08-16T17:14:21Z) - [Tweak performance of `Enumerable.member?/2` for Map](https://github.com/elixir-lang/elixir/pull/6471)

Recently someone(@dploop) told me that matching a key is much faster than use `maps:find/2` in erlang. So I did a little benchmark. See:
https://gist.github.com/Kabie/e34db1b4722211d1c27d2becbacce325

The pattern match wins in most cases. Only situations like when map is a large flat map(map size around 20~31) and the key does not exist, pattern match is slower. This is an acceptable trade off IMO.

#### [#6464] - (2017-08-16T08:31:46Z) - [Improve docs for multi-lines outputs](https://github.com/elixir-lang/elixir/pull/6464)



#### [#6465] - (2017-08-16T08:23:28Z) - [Reword Supervisor moduledoc line](https://github.com/elixir-lang/elixir/pull/6465)

Hi all,

```when `:restart` is set `:transient`...```

to

```when `:restart` is set to `:transient`...```

Cheers!

#### [#6466] - (2017-08-16T08:19:03Z) - [Remove extraneous 'is' from Supervisor moduledoc](https://github.com/elixir-lang/elixir/pull/6466)

Hey all,

this one is in a longer phrase, but it removes an `is` near its end.

From

```
In this case the supervisor will only be restarted if its
child specification was defined with the `:restart` option is set to `:permanent`
(the default).
```

to 

```
In this case the supervisor will only be restarted if its
child specification was defined with the `:restart` option set to `:permanent`
(the default).
```

Cheers!

#### [#6420] - (2017-08-15T09:54:14Z) - ['mix archive.build' bundles dot files from priv folder](https://github.com/elixir-lang/elixir/pull/6420)



#### [#6458] - (2017-08-15T09:51:01Z) - [Add current stacktrace to whereami/0](https://github.com/elixir-lang/elixir/pull/6458)

Prints the current stacktrace with `whereami/0` output. See #6390.

```
iex> whereami
Location: lib/Foo.ex:17

    15:   def bar do
    16:     require IEx
    17:     IEx.pry
    18:     :blah
    19:   end

Stacktrace:

    (Foo) lib/foo.ex:15: Foo.bar/0
    (Baz) lib/baz.ex:3: Baz.qux/0
```

#### [#6463] - (2017-08-15T09:36:53Z) - [Improve wording in Supervisor moduledoc](https://github.com/elixir-lang/elixir/pull/6463)

`the recommend value is...` ‚Üí `the recommended value is...`

#### [#6462] - (2017-08-15T09:26:38Z) - [Remove double space from Supervisor moduledoc](https://github.com/elixir-lang/elixir/pull/6462)

Hi all,

just a little double space there.

Cheers!

#### [#6452] - (2017-08-15T08:26:39Z) - [Improve docs for Supervisor.child_spec/2](https://github.com/elixir-lang/elixir/pull/6452)



#### [#6460] - (2017-08-13T16:00:04Z) - [Fix spelling](https://github.com/elixir-lang/elixir/pull/6460)

Change *supervisr* -> *supervisor*.

#### [#6441] - (2017-08-12T12:40:06Z) - [Raise exception when passing negative delta to assert_in_delta/4](https://github.com/elixir-lang/elixir/pull/6441)

I agreed with @josevalim's idea of raising an exception here rather
than coercing the negative delta, so I implemented that. As a user, I
would find that coercion to be unexpected behavior, and I personally
felt the value of being explicit here outweighed the convenience of the
coercion. I did, however, put in the exception message a helpful hint
in the case that the user did want the absolute value of that negative
delta instead.

Fixes #6439

#### [#6447] - (2017-08-11T08:56:07Z) - [Fix Time.new spec](https://github.com/elixir-lang/elixir/pull/6447)

This resolves #6444.

#### [#6442] - (2017-08-09T10:08:12Z) - [Update docs `Enum.reduce/2`](https://github.com/elixir-lang/elixir/pull/6442)

The documentation for `Enum.reduce/2` references `Enumerable.reduce/3` for use of a different accumulator. However, the `Enum` module has a `reduce/3` function that does exactly this, so it makes more sense to reference that one instead of the more complicated `Enumerable.reduce/3` function.

#### [#6440] - (2017-08-09T06:49:26Z) - [Fix gen_event docs typo](https://github.com/elixir-lang/elixir/pull/6440)

~Can also just make the fix `provides a`~

#### [#6419] - (2017-08-08T20:40:30Z) - [Fix URI.parse/1 to preserve empty fragments](https://github.com/elixir-lang/elixir/pull/6419)

Problem: The current implementation removes empty fragments.

```elixir
iex> "http://example.com/test#" |> URI.parse |> to_string
"http://example.com/test"

iex> URI.parse("http://example.com/test#") == URI.parse("http://example.com/test")
true
```

[RFC 3986](https://tools.ietf.org/html/rfc3986#section-6.2.3) clearly says: _"[...] two URIs that differ only by the suffix "#" are considered different [...]_"

This is also serious problem with respect to the most common solution to the [httpRange-14 issue](https://en.wikipedia.org/wiki/HTTPRange-14#Use_of_.23). 

I've stumbled across this problem on several occasions during the development on [RDF.ex](https://github.com/marcelotto/rdf-ex).




#### [#6433] - (2017-08-04T10:27:18Z) - [Fix verbal agreement in ExUnit.Case @moduledoc](https://github.com/elixir-lang/elixir/pull/6433)

Replace `how tests behaves` ‚Üí `how tests behave`

#### [#6430] - (2017-08-03T19:04:13Z) - [Add is_binary guard to String.length](https://github.com/elixir-lang/elixir/pull/6430)

This produces a bit more readable message if not a string is passed into `String.length`, then failing in the `next_grapheme_size` function.

#### [#6290] - (2017-08-02T12:55:11Z) - [Separate Calendar.ISO from :calendar](https://github.com/elixir-lang/elixir/pull/6290)

**Work on this PR has been finished. Review at your earliest convenience :grin:!**

I've started working on #5887, which is to alter Calendar.ISO's internals so it no longer depends on `:calendar`.


- [x] The first step was to re-implement `:calendar`'s functions (which are written in Erlang, see the source [here](https://github.com/erlang/otp/blob/master/lib/stdlib/src/calendar.erl#L491)) and translate them to Elixir.

    - [x] ~~This is nearly done, but there still are some bugs somewhere. Right now, 31 calendar-related tests fail because a day too little is added in some situations or something. Who finds the issue before I can will get a free fake internet cookie :grin: ! :cookie:~~ Done! Feature parity reached in (ff20d50).

- [x] The next step will be to replace the parts of the code that assume that only dates above the ISO-year 0 can be used by code that will work properly with negative values:

   - [x] Instead of using `div` and `rem`, the updated code uses `Integer.floor_div` and `Integer.mod`, which treat negative values in the way the algorithm requires (`-10` days does not mean _10 days in year -1_ but _346 days in year -1_).
   - [x] `days_in_prev_years(year)` (in the `:calendar` source: `dy(year)`) is a recursive procedure that is only defined for non-negative integers. if I recall correctly, the Calendrical Calculations Lisp code has a smarter way to solve this.

    - [x] ~~Oh, and one more step: Altering the `(Naive)(Date)(Time).from8601`-calls and `Calendar.date_to_string` to allow working with negative years.~~ <- This is going to be part of a future Pull Request. Deferred to #6294.

- [x] Cleaning up by removing commented references to `:calendar`.

- [x] ~~And finally, we can improve the source code to become more readable/maintainable. For instance, we could use a macro to loop over the months and calculate the proper values for `do_year_to_date(extra_day, day_of_year)`, and its inverse, `days_before_month()`, instead of the hard-coded 'magic numbers' they contain right now.~~ <- This can and should be done in a separate PR as well.



#### [#6418] - (2017-08-02T10:30:49Z) - [Fix Macro.to_string/2 for tuple calls](https://github.com/elixir-lang/elixir/pull/6418)

Calls such as `Foo.{Bar, Baz}` (used in `alias Foo.{Bar, Baz}` for example) were badly formatted by `Macro.to_string/2`. That's fixed in this PR.

#### [#6416] - (2017-08-01T17:19:33Z) - [Improve formatting of Supervisor documentation](https://github.com/elixir-lang/elixir/pull/6416)

Some minor docs improvements. The more important of them is a fixing an indentation that made a text paragraph to format as code. The second one is probably a bit opinionated, changing 10000 to 10_000, now it's more readable and inline with the text.

#### [#6413] - (2017-08-01T08:30:03Z) - [Document :eval_interrupt color in IEx configuration](https://github.com/elixir-lang/elixir/pull/6413)



#### [#6410] - (2017-07-31T22:31:44Z) - [Extract MapSet dummy values to a module attribute](https://github.com/elixir-lang/elixir/pull/6410)

Just a small potential refactor I saw while reading *map_set.ex*.

The dummy value associated to MapSet elements in the underlying map is repeated in a few spots. Also, it could be argued that

```elixir
new_from_list(rest, [{item, @dummy_value} | acc])
```

is more intention-revealing than

```elixir
new_from_list(rest, [{item, []} | acc])
```

Anyway, your call! üòÑ 

#### [#6408] - (2017-07-31T04:43:46Z) - [Correct Date Documentation](https://github.com/elixir-lang/elixir/pull/6408)

Fixes #6404.

#### [#6406] - (2017-07-30T20:34:06Z) - [Add example of using sort_by with multiple "properties"](https://github.com/elixir-lang/elixir/pull/6406)



#### [#6402] - (2017-07-29T22:05:12Z) - [Correct Stack process name from example in Supervisor docs](https://github.com/elixir-lang/elixir/pull/6402)



#### [#6385] - (2017-07-29T22:04:11Z) - [Add mix test --slowest reporting to ExUnit](https://github.com/elixir-lang/elixir/pull/6385)

This adds a `--slowest N` CLI flag to `mix test`, which will print timing information for the slowest test times. To ensure that reported times are accurate enabling slow reporting will automatically set the suite in `--trace` mode.

The `slowest` setting defaults to `0`, disabling it for normal test runs. Setting it to any positive integer will report a cumalitve slow test time and display individual timings for each of the slowest tests.

**Notes**

This has been manually tested/inspected against the ex_unit test suite itself as I was developing it. When the suite is ran with `trace: true` it hangs on a timeout test, so I just ran it with slowest enabled and trace disabled. The timings were fairly consistent, even with async testing.

Here is sample output for an async run of the ex_unit suite:

<img width="1280" alt="screen shot 2017-07-26 at 8 52 53 am" src="https://user-images.githubusercontent.com/270831/28624838-02e79342-71e0-11e7-98f5-36ec97e3f949.png">

It seemed consistent with trace mode to use `ms` for each suite run. It is debatable whether the total run time should be in `ms` or `s`.

Closes #6334

#### [#6401] - (2017-07-29T15:27:06Z) - [Ensure elixir_erl:debug_info/4 does not require elixir running](https://github.com/elixir-lang/elixir/pull/6401)



#### [#6400] - (2017-07-28T21:06:58Z) - [Fix documentation formatting where ` follows \](https://github.com/elixir-lang/elixir/pull/6400)

Found a formatting issue in the Syntax Reference documentation, where charlist does not get a proper section (see https://hexdocs.pm/elixir/syntax-reference.html#strings).

I found that the issue was caused by the preceeding `` `\` `` block. It can be fixed simply by adding a space, so it becomes `` `\ ` ``. I also applied this in the IEx documentation, which suffers from the same problem (see https://hexdocs.pm/iex/IEx.html#module-exiting-the-shell).

This also means warnings like `` lib/iex/lib/iex.ex:269: warning: Closing unclosed backquotes ` at end of input `` no longer appear when generating the documentation.

#### [#6396] - (2017-07-28T08:04:44Z) - [Minor grammar tweak in doc of lib/mix/dep.ex](https://github.com/elixir-lang/elixir/pull/6396)



#### [#6397] - (2017-07-28T07:43:52Z) - [Fix operation passed to assert_no_null_byte](https://github.com/elixir-lang/elixir/pull/6397)

"File.cp_r/3" currently shows up in the File.rm_rf null byte error.

#### [#6389] - (2017-07-27T14:36:42Z) - [List applications in runtime_info](https://github.com/elixir-lang/elixir/pull/6389)

IMHO this could be very useful in a number of use-cases, especially when the dev environment differs from the deployment target.

<img width="259" alt="image" src="https://user-images.githubusercontent.com/173738/28645248-1f941bd2-725d-11e7-91f2-aadf16697c3a.png">


#### [#6387] - (2017-07-26T18:50:56Z) - [Add OTP version to System.build_info/0](https://github.com/elixir-lang/elixir/pull/6387)

Example:

```
$ elixir -v
Erlang/OTP 20 [erts-9.0] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:10] [hipe] [kernel-poll:false]

Elixir 1.6.0-dev (9d3753ded) (compiled with OTP 20)
```

#### [#6384] - (2017-07-26T13:35:39Z) - [Fix small typo in GenServer,Supervisor,Task doc](https://github.com/elixir-lang/elixir/pull/6384)

Hi, just a small typo I came across.

`defauts` -> `defaults`

#### [#6383] - (2017-07-26T11:23:37Z) - [Add missing type information in t/1 example](https://github.com/elixir-lang/elixir/pull/6383)



#### [#6382] - (2017-07-26T09:13:26Z) - [support :infinity timeout on Task streams](https://github.com/elixir-lang/elixir/pull/6382)

Fixes a regression introduced in 1.5. Relevant [thread on Elixir Forum](https://elixirforum.com/t/task-async-stream-timeout-infinity-and-1-5-0/7205) where it was reported.

#### [#6372] - (2017-07-24T22:04:24Z) - [Add heredoc type to heredoc list/binary literals](https://github.com/elixir-lang/elixir/pull/6372)

Sample code:
```
"""
this is a binary
"""

'''
this is a charlist
'''
```

Output from `Code.string_to_quoted/2` with `wrap_literals_in_blocks: true`:
```
{:ok,
 {:__block__, [],
  [{:__block__, [format: :bin_heredoc, line: 1], ["this is a binary\n"]},
   {:__block__, [format: :list_heredoc, line: 5], ['this is a charlist\n']}]}}
```

@josevalim @whatyouhide still a WIP. Would like your buy-in before adding tests. Thanks!

#### [#6368] - (2017-07-21T21:18:55Z) - [Add check for correct types on System.cmd/3](https://github.com/elixir-lang/elixir/pull/6368)

Currently it's possible to pass a charlist instead of a binary as an
argument, and this shouldn't be possible.

Resolves #6367 

#### [#6366] - (2017-07-21T09:53:10Z) - [Replace `succeeds loading` ‚Üí `succeeds in loading` in Code module docs](https://github.com/elixir-lang/elixir/pull/6366)

Replaced `succeeds loading` with `succeeds in loading`.
I believe that's the established usage in contexts such as this.

Cheers!

#### [#6360] - (2017-07-19T16:59:25Z) - [Bring the "e in _" syntax back to try/rescue](https://github.com/elixir-lang/elixir/pull/6360)



#### [#6344] - (2017-07-18T12:40:59Z) - [Augment integer literals with representation info](https://github.com/elixir-lang/elixir/pull/6344)

@josevalim @whatyouhide still a WIP. Would like your feedback. Tried emitting different tokens `binary`, `octal` and `hex` but it makes the code more complicated and resulted in obscure compilation errors.

With this implementation, there are 14 test cases failing, but they should be quite easy to fix since we just need to insert the 4th `base` element in the `number` token tuple used in the test cases. The only downside is that the 4th element may be obscure to the uninformed reader.

```elixir
iex(1)> Code.string_to_quoted("0xEF", wrap_literals_in_blocks: true)
{:ok, {:__block__, [base: 16, line: 1], [239]}}
iex(3)> Code.string_to_quoted("1234", wrap_literals_in_blocks: true)
{:ok, {:__block__, [base: 10, line: 1], [1234]}}
iex(4)> Code.string_to_quoted("0b10", wrap_literals_in_blocks: true)
{:ok, {:__block__, [base: 2, line: 1], [2]}}
iex(5)> Code.string_to_quoted("0o27", wrap_literals_in_blocks: true)
{:ok, {:__block__, [base: 8, line: 1], [23]}}
```

#### [#6355] - (2017-07-18T12:01:07Z) - [Use %module{} syntax where applicable](https://github.com/elixir-lang/elixir/pull/6355)



#### [#6356] - (2017-07-18T11:14:07Z) - [Handle -compile module attribute when specified as a list](https://github.com/elixir-lang/elixir/pull/6356)

I was trying to build ejabberd using Mix but many of the source files contain the following Erlang module attribute.

`-compile([{parse_transform, ejabberd_sql_pt}]).`

These options were not getting matched, and so were not being added to the Erlang module dependency tree resulting in ejabberd_sql_pt not being compiled early enough. 

#### [#6335] - (2017-07-18T10:21:50Z) - [Give a tour of the standard library on Kernel](https://github.com/elixir-lang/elixir/pull/6335)

We choose to change Kernel because that's the entry point
of the Elixir documentation (and it is the best entry point
as it contains all imported functions and quick access to
the other modules in the documentation sidebar).

#### [#6353] - (2017-07-18T09:54:17Z) - [Add Stream.intersperse/2](https://github.com/elixir-lang/elixir/pull/6353)

This PR adds `Stream.intersperse/2`. See [here](https://groups.google.com/forum/#!topic/elixir-lang-core/AsBKS2jgP4w) for the original proposal. 

I tried implementing it as Jos√© suggested, which is based on `%Stream{}` struct. Unfortunately, that won't work well for this case. Basically, `%Stream{}` is suitable to power stream which generates zero or one element for each input element. In this case, we need to generate two elements, and if this is powered by `%Stream{}`, in some cases (in particular when zipping the stream), we might end up loading most of the input enumerable into memory before it is needed. As a result, in this case `%Stream{}` based intersperse converges into an eager version.

Therefore, I opted for this version, which is slightly different from the one I proposed. This version uses `Stream.transform/3` to keep track of whether we're emitting the first element, or any other element. The benefit of this version (compared to the one I originally proposed) is that the accumulator never grows (it's either true or false).

#### [#6347] - (2017-07-18T09:31:22Z) - [Validate variable struct name](https://github.com/elixir-lang/elixir/pull/6347)



#### [#6349] - (2017-07-17T22:04:33Z) - [Add note about precompiled source code for IEx.Helper.open/2](https://github.com/elixir-lang/elixir/pull/6349)

Closes #6348

Similar to: https://github.com/wojtekmach/elixir/blob/b13a58607e2aac7c6c6d7df3344865a406921dac/lib/iex/lib/iex/helpers.ex#L207

#### [#6341] - (2017-07-16T15:23:01Z) - [Allow more than Time structs in Time.diff](https://github.com/elixir-lang/elixir/pull/6341)

For consistency with Time.compare/2 allow other types that contain time. For instance `DateTime` and `NaiveDateTime`.

#### [#6340] - (2017-07-16T12:29:46Z) - [Optimise binary pattern matching in String.Break](https://github.com/elixir-lang/elixir/pull/6340)



#### [#6339] - (2017-07-16T11:42:25Z) - [Fix protocols diff calculation between compilations](https://github.com/elixir-lang/elixir/pull/6339)

This PR fixes a bug when recompiling a mix project where a protocol has been converted into a standard module.

## Steps to reproduce the error

1. Create a new mix project (`mix new bug_demo`)
2. Define a protocol and an implementation somewhere:
    ```elixir
    defprotocol Foo do
      def bar(arg)
    end
    defimpl Foo, for: Integer do
      def bar(_), do: :ok
    end
    ```
3. Compile (`mix compile`)
4. Remove the protocol (and its implementation) and define a module with the same name:
    ```elixir
    defmodule Foo do
    end
    ```
5. Compile (`mix compile`)

### Expected behaviour:

Compile without errors

### Current behaviour: 

It shows the following error:
```
Compiling 1 file (.ex)
Generated bug_demo app
** (EXIT from #PID<0.70.0>) an exception was raised:
    ** (CaseClauseError) no case clause matching: {:error, :not_a_protocol}
        (mix) lib/mix/tasks/compile.protocols.ex:125: Mix.Tasks.Compile.Protocols.consolidate/4
        (elixir) lib/task/supervised.ex:85: Task.Supervised.do_apply/2
        (elixir) lib/task/supervised.ex:36: Task.Supervised.reply/5
        (stdlib) proc_lib.erl:247: :proc_lib.init_p_do_apply/3

14:45:56.930 [error] Task #PID<0.102.0> started from #PID<0.70.0> terminating
** (CaseClauseError) no case clause matching: {:error, :not_a_protocol}
    (mix) lib/mix/tasks/compile.protocols.ex:125: Mix.Tasks.Compile.Protocols.consolidate/4
    (elixir) lib/task/supervised.ex:85: Task.Supervised.do_apply/2
    (elixir) lib/task/supervised.ex:36: Task.Supervised.reply/5
    (stdlib) proc_lib.erl:247: :proc_lib.init_p_do_apply/3
Function: #Function<8.127116546/0 in Mix.Tasks.Compile.Protocols.consolidate/6>
    Args: []
```

## The bug

The bug is located in `Mix.Tasks.Compile.Protocols` module.

It marks a module to be consolidated when an implementation has been removed, without checking if that module is still a protocol.

I have added a test that fails because of that bug. It creates, compiles and removes files and maybe is too expensive for such a specific case. Should it be removed?

#### [#6314] - (2017-07-16T10:50:22Z) - [Use orelse instead of or when expanding in operator](https://github.com/elixir-lang/elixir/pull/6314)

orelse may lead to better code in many occasions. Since we're comparing
to literals, there's no semantic difference.

This also means, the compiler is able to figure out more "will always match"
checks. For example in a situation like the following a warning will be emitted.
This pull request also fixes such warnings in the test suite.

    if true do
      IO.puts("true")
    end

#### [#6331] - (2017-07-15T23:31:48Z) - [Minor updates to Calendar.ISO and test Calendar.Holocene](https://github.com/elixir-lang/elixir/pull/6331)



#### [#6338] - (2017-07-15T17:46:46Z) - [Fix @spec in Defining a specification section from Typespecs documentation](https://github.com/elixir-lang/elixir/pull/6338)

fixes: #6337 

#### [#6336] - (2017-07-15T10:59:59Z) - [Remove remaining mentions of rata die](https://github.com/elixir-lang/elixir/pull/6336)



#### [#6326] - (2017-07-14T14:41:55Z) - [Registry.unregister_match/2](https://github.com/elixir-lang/elixir/pull/6326)

Right now in a duplicate registry using unregister on a key unregisters all key / value pairs. The idea with this function is that it would only unregister particular values that match a given spec.

The primary issue at the moment is that the `true = :ets.delete_object(pid_ets, {self, key, key_ets})` deletes all instances of the key under self, but instead we want N instances of the key where N is the number of key value pairs remaining in the key_ets table.

#### [#6330] - (2017-07-14T14:28:43Z) - [Remove parens in "fn" calls in the Agent docs](https://github.com/elixir-lang/elixir/pull/6330)

Recent editions to Agent have updated examples to notate `fn state` without parens.

Found and updated a loose one that had the previously used notation.

#### [#6328] - (2017-07-14T12:43:07Z) - [Move away from rata die reference and use iso_days instead](https://github.com/elixir-lang/elixir/pull/6328)

Move away from rata die reference and use iso_days instead

We chose to use the year zero in the astronomical year
numbering as a reference point, as it is also the reference
used by Calendar.ISO, the default calendar used by Elixir,

It is also the same epoch used by Erlang's :calendar module.
Note we chose to not call it gregorian epoch due to the confusion
between January 1 AC 1 and 0000-01-01. The latter actually maps
to January 1 BC 1.

We also moved away from Calendar.Julian, which could have been
based on Calendrical Calculations, and chose Calendar.Holocene,
which adds exactly 10,000 years to Calendar.ISO and as such has
a very straigh-forward implementation.

More information:

  + https://en.wikipedia.org/wiki/Year_zero
  + https://en.wikipedia.org/wiki/Holocene_calendar

#### [#6329] - (2017-07-14T10:37:16Z) - [Minor optimisations in MapSet](https://github.com/elixir-lang/elixir/pull/6329)



#### [#6323] - (2017-07-14T08:23:36Z) - [Wrap lists and tuples of size 2 in blocks](https://github.com/elixir-lang/elixir/pull/6323)

Currently, lists and tuples of size 2 do not have metadata on their own, hence, it is hard to format code where comments/newlines precede the lists/tuples of size 2. This PR wraps them in a block using an option.

```elixir
# list literals have no metadata
# so this comment is not preserved
[1,2,3]

# same here
[
  # however, this comment is preserved
  1,
  # because each integer literal has its own block
  2,
  3,
]

# tuples of size > 2 has their own metadata, so this comment is preserved
{:one, :two, :three}

# yet this is not the case for tuples of size 2
{:ok, :some_value}
```

#### [#6324] - (2017-07-13T18:41:54Z) - [Fix typo in Agent @moduledoc](https://github.com/elixir-lang/elixir/pull/6324)

`defauts` ‚Üí `defaults`

#### [#6322] - (2017-07-13T14:02:23Z) - [Force {Enum,Stream}.zip/1 to take a list of enumerables as argument](https://github.com/elixir-lang/elixir/pull/6322)

Before this commit, there wasn't a clear check on these two functions accepting only a list of enumerables as its argument. This lead to things like https://github.com/elixir-lang/elixir/pull/6321.

If merged, will invalidate #6321.

#### [#6315] - (2017-07-12T12:45:51Z) - [Couple minor optimisations in Kernel](https://github.com/elixir-lang/elixir/pull/6315)



#### [#6316] - (2017-07-10T15:30:15Z) - [Fix what I believe to be some errors in the `IEx.break!` documentation/definition](https://github.com/elixir-lang/elixir/pull/6316)

‚Ä¢ "The following call" seems to referring to the preceding call.
‚Ä¢ Second example is missing function arity
‚Ä¢ Documentation states default `stops` value to be 1, but it‚Äôs currently 10.

#### [#6313] - (2017-07-10T12:40:55Z) - [Update docs & typespecs for calendar modules](https://github.com/elixir-lang/elixir/pull/6313)

- change `Date.t` to `Calendar.date` (same for other types)
- add `no_return` to function that raise error
- add doctests to `convert/2`

#### [#6307] - (2017-07-10T12:39:48Z) - [Add breakpoint support to IEx.pry](https://github.com/elixir-lang/elixir/pull/6307)

The main interface is a `IEx.break!/4` function that sets up a breakpoint in `module`, `function` and `arity` with the given number of `stops`.

This function will instrument the given module and load a new version in memory with breakpoints at the given function and arity. If the module is recompiled, all breakpoints are lost.

When a breakpoint is reached, IEx will ask if you want to `pry` the given function and arity. In other words, this works similar to `IEx.pry/0` as the running process becomes the evaluator of IEx commands and is temporarily changed to have a custom group leader. However, differently from `IEx.pry/0`, aliases and imports from the source code won't be available in the shell.

IEx helpers includes many conveniences related to breakpoints. Below they are listed with the full module, such as `IEx.Helpers.breaks/0`, but remember it can be called directly as `breaks()` inside IEx. They are:

  * [x] `break!/2` - sets up a breakpoint for a given `Mod.fun/arity`
  * [x] `break!/4` - sets up a breakpoint for the given module, function, arity
  * [x] `breaks/0` - prints all breakpoints and their ids
  * [x] `continue/0` - continues until the next breakpoint in the same shell
  * [x] `open/0` - opens editor on the current breakpoint
  * [x] `remove_breaks/0` - removes all breakpoints in all modules
  * [x] `remove_breaks/1` - removes all breakpoints in a given module
  * [x] `reset_break/1` - sets the number of stops on the given id to zero
  * [x] `reset_break/3` - sets the number of stops on the given module, function, arity to zero
  * [x] `respawn/0` - starts a new shell (breakpoints will ask for permission once more)
  * [x] `whereami/1` - shows the current location

By default, the number of stops in a breakpoint is 1. Any follow-up call won't stop the code execution unless another breakpoint is set.

Alternatively, the number of be increased by passing the `stops` argument. `IEx.Helpers.reset_break/1` and `IEx.Helpers.reset_break/3` can be used to reset the number back to zero. Note the module remains "instrumented" even after all stops on all breakpoints are consumed. You can remove the instrumentation in a given module by calling `IEx.Helpers.remove_breaks/1` and on all modules by calling `IEx.Helpers.remove_breaks/0`.

To exit a breakpoint, the developer can either invoke `continue()`, which will block the shell until the next breakpoint is found or the process terminates, or invoke `respawn()`, which starts a new IEx shell, freeing up the pried one.

This functionality only works on Elixir code and requires OTP 20+.

## Examples

The following sets up a breakpoint on `URI.decode_query/2`:

    IEx.break!(URI, :decode_query, 2)

The following call will setup a breakpoint that stops once.

To set a breakpoint that will stop 10 times:

    IEx.break!(URI, :decode_query, 10)

`IEx.break!/2` is a convenience macro that allows breakpoints to be given in the `Mod.fun/arity` format:

    require IEx
    IEx.break!(URI.decode_query/2)

Or to set a breakpoint that will stop 10 times:

    IEx.break!(URI.decode_query/2, 10)

This function returns the breakpoint ID and will raise if there is an error setting up the breakpoint.

## Breaks and mix test

To use `IEx.break!/4` during tests, you need to run Mix inside `iex` and pass the `--trace` to `mix test` to avoid running into timeouts:

    iex -S mix test --trace
    iex -S mix test path/to/file:line --trace


#### [#6312] - (2017-07-09T15:40:25Z) - [Improve the failing guards guide](https://github.com/elixir-lang/elixir/pull/6312)

Improve grammar and avoid using the same word *fail* for opposing examples.

#### [#6310] - (2017-07-09T15:32:42Z) - [Fix return type of Mix.Task.alias?/1](https://github.com/elixir-lang/elixir/pull/6310)

This function is currently returning either `nil` or the alias itself from the
mix file, so it doesn't match with the `boolean` return type indicated by the
documentation.

Thanks!

#### [#6308] - (2017-07-08T12:19:36Z) - [Improve documentation for Mix.env](https://github.com/elixir-lang/elixir/pull/6308)



#### [#6305] - (2017-07-07T23:05:38Z) - [Add terminator info to sigil AST node metadata](https://github.com/elixir-lang/elixir/pull/6305)

Currently, we don't have a way to know which sigil terminators are used after the sigils are tokenized. This PR adds an option to detect such terminators by passing an extra `Terminator` element in the sigil token. The parser will detect the presence of the `Terminator` value and insert it into the sigil AST node's metadata appropriately.

Usage:
```elixir
iex(2)> Code.string_to_quoted("~r/foo\\//")
{:ok, {:sigil_r, [line: 1], [{:<<>>, [line: 1], ["foo/"]}, []]}}
iex(3)> Code.string_to_quoted("~r/foo\\//", detect_sigil_terminators: true)
{:ok, {:sigil_r, [terminator: 47, line: 1], [{:<<>>, [line: 1], ["foo/"]}, []]}}
iex(5)> Code.string_to_quoted("~S\"\"\"\nsigil heredoc\n\"\"\"\n", detect_sigil_terminators: true)
{:ok,
 {:sigil_S, [terminator: '"""', line: 1],
  [{:<<>>, [line: 1], ["sigil heredoc\n"]}, []]}}
```

@josevalim @whatyouhide please let me know what you think, would like your buy-in before I start adding tests. Thanks!

#### [#6304] - (2017-07-06T10:13:06Z) - [Minor update to Map.replace/3 and Keyword.replace/3 docs](https://github.com/elixir-lang/elixir/pull/6304)

Re-arranges docs so that happy-path is shown first and matches `replace!/3` docs

#### [#6297] - (2017-07-04T10:23:17Z) - [Increase assert_receive timeouts on travis](https://github.com/elixir-lang/elixir/pull/6297)



#### [#6296] - (2017-07-04T09:43:36Z) - [Add allow_failures to appveyor](https://github.com/elixir-lang/elixir/pull/6296)



#### [#6277] - (2017-07-04T09:02:20Z) - [Fix DateTime.convert/2](https://github.com/elixir-lang/elixir/pull/6277)

- `convert/2` was not switching to the proper calendar
- mimic `NaiveDateTime.convert/2` handling of incompatible calendars
- keep precision when converting DateTime

#### [#6269] - (2017-07-04T08:30:53Z) - [Implement Inspect for DateTime](https://github.com/elixir-lang/elixir/pull/6269)



#### [#6268] - (2017-07-04T08:28:35Z) - [StringIO.get_until bug fix, performance, and tests](https://github.com/elixir-lang/elixir/pull/6268)

This pull-request addresses the following:

1. Adds tests for `StringIO.get_until`. Previously there were no tests for this function.
2. Fixes the same performance/scalability issue that was fixed for `StringIO.read_line` in #6056.
3. Fixes 2 bugs, described below.

## Strategy

Due to the lack of tests and shortage of examples I tried to change the logic of `do_get_until` as little as possible.

I added test coverage to all of the `case` clauses in `do_get_until`. With the exception of the 2 tests listed below, all tests passed before any changes were made to the implementation.

I found `get_until` to be awkward to test. If anyone has feedback on how to improve these tests then please let me know.

## Bug 1: `\r` characters were removed from output

This bug is reproduced by the test titled `"get_until with until_eof and \\r\\n"`.

## Bug 2: `:latin1` encoding should be interpreted as "pure bytes", not Latin1

This bug is reproduced by the test titled `"get_until with raw bytes (latin1)"`.

This is documented in http://erlang.org/doc/apps/stdlib/io_protocol.html.

Also see https://github.com/elixir-lang/elixir/issues/6037#issuecomment-298233279, and https://github.com/elixir-lang/elixir/pull/6056#issuecomment-298357306.




#### [#6261] - (2017-07-04T08:22:28Z) - [Optimise Base encode/decode](https://github.com/elixir-lang/elixir/pull/6261)

* Encode 2 characters at a time when possible
* Decode multiple characters per match
* Inline lower/mixed casing

#### [#6292] - (2017-07-04T07:59:17Z) - [Raise Protocol.UndefinedError on bad functions in Enumerable implementation](https://github.com/elixir-lang/elixir/pull/6292)

Closes https://github.com/elixir-lang/elixir/issues/6291

---

One thing to note is that even with that impelmentation, you might get an arbitrary binary function (for example `&+/2`) that still won't work - there's just no way to know other than trying to execute. And the execution can throw arbitrary errors since the function can be completely arbitrary.

#### [#6293] - (2017-07-04T07:57:07Z) - [Update to Unicode 10](https://github.com/elixir-lang/elixir/pull/6293)



#### [#6281] - (2017-07-03T20:02:37Z) - [Allow markers "/" and "|" to be used in a custom EEx engine](https://github.com/elixir-lang/elixir/pull/6281)

Supports markers `"|"` and `"/"` in `EEx.Engine`.

To be used only within custom Engines. By default raise `EEx.SyntaxError` when not implemented.

`"|"` and `"/"` were chosen because thet should confuse the "" marker, as they should not appear at the beginning of any Elixr expression.



#### [#6284] - (2017-07-02T15:31:55Z) - [Fix comment preservation bug](https://github.com/elixir-lang/elixir/pull/6284)



#### [#6279] - (2017-07-01T09:31:19Z) - [Improve the documentation for try/1](https://github.com/elixir-lang/elixir/pull/6279)



#### [#6272] - (2017-06-30T11:39:07Z) - [Fix optimisation from #6240](https://github.com/elixir-lang/elixir/pull/6272)

It wasn't actually working, because of the wrong pattern match the function
never returned true.

---

This hints, it would be nice to have some tests in place, but I have no idea how to actually test it. It doesn't seem like we test other compiler optimisations either.

#### [#6271] - (2017-06-28T14:35:02Z) - [Improve ExUnit documentation for the :test tag](https://github.com/elixir-lang/elixir/pull/6271)



#### [#6239] - (2017-06-28T08:46:51Z) - [Create behavior for Mix compiler tasks](https://github.com/elixir-lang/elixir/pull/6239)

Though there isn't much immediate benefit to codifying the current behavior, the Mix.Task.Compiler behavior is good to have as documentation for how to implement a compiler. The ultimate goal is to have a callback specification for `run/1` that returns diagnostic information for errors and warnings.

Open questions:

- Should `use Mix.Task.Compiler` include default implementations for `clean/0` and `manifests/0`?
- Should `Mix.Tasks.Compile.All` have implementations for `manifests/0` and `clean/0` that call them for each compiler, or should these be noops?

#### [#6263] - (2017-06-28T08:45:56Z) - [Add wrap_literals_in_blocks option to parser](https://github.com/elixir-lang/elixir/pull/6263)

This PR adds a `metadata_in_literals` option to the parser, which wraps literals like `123`, `:one`, `"one"` or `nil` in a `__block__` tuple along with their metadata. This will be very useful for code formatting purposes since it is now possible to attach comments to a literal based on its line number. The option is invoked from `Code.string_to_quoted/2`. 

@josevalim @whatyouhide currently, this is still a WIP. Would like your feedback on my implementation before moving forward. Also, please let me know if there are any literals that I missed.

Sample code:

```elixir
def test3() do
  if true do
    # comment 1
  else
    # comment 2
  end
  # comment 3
  1
  # comment 4
  "one"
  # comment 5
  :one
end
```

Usage:
```elixir
iex(8)> Code.string_to_quoted(code)
{:ok,
 {:def, [line: 1],
  [{:test3, [line: 1], []},
   [do: {:__block__, [],
     [{:if, [line: 2], [true, [do: nil, else: nil]]}, 1, "one", :one]}]]}}
iex(9)> Code.string_to_quoted(code, [metadata_in_literals: true])
{:ok,
 {:def, [line: 1],
  [{:test3, [line: 1], []},
   [do: {:__block__, [],
     [{:if, [line: 2],
       [{:__block__, [line: 2], [true]},
        [do: {:__block__, [line: 2], [nil]},
         else: {:__block__, [line: 4], [nil]}]]}, {:__block__, [line: 8], [1]},
      {:__block__, [line: 10], ["one"]}, {:__block__, [line: 12], [:one]}]}]]}}
```

@lpil please let me know if the format works for you:

```elixir
defp deps do
  [# Web server
   {:cowboy, "~> 1.0"},
   # Web framework
   {:phoenix, "~> 1.3.0-rc"},
   # XML parser helper
   {:sweet_xml, "~> 0.6"},
   # Statsd metrics sink client
   {:statix, "~> 1.0"}]
end
```

```elixir
iex(11)> Code.string_to_quoted(code)     
{:ok,
 {:defp, [line: 1],
  [{:deps, [line: 1], nil},
   [do: [cowboy: "~> 1.0", phoenix: "~> 1.3.0-rc", sweet_xml: "~> 0.6",
     statix: "~> 1.0"]]]}}
iex(12)> Code.string_to_quoted(code, [metadata_in_literals: true])
{:ok,
 {:defp, [line: 1],
  [{:deps, [line: 1], nil},
   [do: [{{:__block__, [line: 3], [:cowboy]},
      {:__block__, [line: 3], ["~> 1.0"]}},
     {{:__block__, [line: 5], [:phoenix]},
      {:__block__, [line: 5], ["~> 1.3.0-rc"]}},
     {{:__block__, [line: 7], [:sweet_xml]},
      {:__block__, [line: 7], ["~> 0.6"]}},
     {{:__block__, [line: 9], [:statix]},
      {:__block__, [line: 9], ["~> 1.0"]}}]]]}}
```

#### [#6267] - (2017-06-27T06:08:57Z) - [Update map.ex](https://github.com/elixir-lang/elixir/pull/6267)

Clarify documentation on Map.update/4.

#### [#6266] - (2017-06-27T06:08:22Z) - [Add exunit doc about trace mode and test timeouts](https://github.com/elixir-lang/elixir/pull/6266)

Timeouts get disabled in trace mode. I was puzzling over why timeouts weren't working and eventually found relevant code the exunit source that actually disables them. 

#### [#6265] - (2017-06-26T20:29:58Z) - [Add EEx depracation to Deprecations.md](https://github.com/elixir-lang/elixir/pull/6265)

https://github.com/elixir-lang/elixir/pull/6258#discussion_r124097551

#### [#6259] - (2017-06-26T09:15:57Z) - [Emit warning when using %{foo => bar} in typespecs](https://github.com/elixir-lang/elixir/pull/6259)

Related to #4617.

#### [#6260] - (2017-06-25T20:25:49Z) - [Remove a couple TODOs now that we no longer support Erlang 18](https://github.com/elixir-lang/elixir/pull/6260)



#### [#6257] - (2017-06-25T16:53:11Z) - [Use :binary.split/3 in String.Break.split/1](https://github.com/elixir-lang/elixir/pull/6257)

As mentioned in https://github.com/elixir-lang/elixir/issues/4617.

#### [#6253] - (2017-06-25T09:23:22Z) - [Fix stream cycle over empty enumerable](https://github.com/elixir-lang/elixir/pull/6253)



#### [#6249] - (2017-06-24T20:57:20Z) - [Update CI builds to use newly released OTP 20.0](https://github.com/elixir-lang/elixir/pull/6249)



#### [#6240] - (2017-06-23T23:07:17Z) - [Optimize String.replace_* functions](https://github.com/elixir-lang/elixir/pull/6240)

* Skip unnecessary matches on the "rest" size
* Don't prepend/append empty strings

The second one is especially important - doing `"" <> str` will force a copy of
the string. Checking, if the string is empty first, allows us to skip this copy.
Using replace functions with empty replacements is rather common - one example
is the String.trim* family of functions, but even in user code it's quite
frequent.
Removing excessive copy means the speedup can be made arbitrarily large
depending on input. The slowdown for cases with non-empty strings couldn't be
reliably measured.

#### [#6250] - (2017-06-22T18:15:46Z) - [Fix small typo in Unicode docs](https://github.com/elixir-lang/elixir/pull/6250)



#### [#6245] - (2017-06-21T21:55:37Z) - [Fix broken test for Mix.Task run callback](https://github.com/elixir-lang/elixir/pull/6245)

A related test was not updated when improving argument name for Mix.Task.run/1 on https://github.com/elixir-lang/elixir/commit/b18160f7cbc236ed074d5c93875493a14903f3ff.

#### [#6234] - (2017-06-21T15:00:41Z) - [Add :ordered option to async_stream](https://github.com/elixir-lang/elixir/pull/6234)

Closes #6212.

Suggestions on how to better test this would be appreciated.

#### [#6222] - (2017-06-21T08:09:53Z) - [Add preserve_comments option to tokenizer](https://github.com/elixir-lang/elixir/pull/6222)

Adds a `preserve_comments` option to preserve comment tokens. This will be useful for code formatting purposes.

Sample code:

```ruby
def test3() do
  if true do
    # comment 1
  else
    # comment 2
  end
  # comment 3
end
```

Usage:

```
iex(4)> :elixir_tokenizer.tokenize(code, 0, 0, [])
{:ok, 7, 4,
 [{:identifier, {0, 0, 3}, :def}, {:paren_identifier, {0, 4, 9}, :test3},
  {:"(", {0, 9, 10}}, {:")", {0, 10, 11}}, {:do, {0, 12, 14}},
  {:eol, {0, 14, 15}}, {:identifier, {1, 3, 5}, :if}, {true, {1, 6, 10}},
  {:do, {1, 11, 13}}, {:eol, {1, 13, 14}},
  {:block_identifier, {3, 3, 7}, :else}, {:eol, {3, 7, 8}}, {:end, {5, 3, 6}},
  {:eol, {5, 6, 7}}, {:end, {7, 1, 4}}]}
iex(5)> :elixir_tokenizer.tokenize(code, 0, 0, [{:preserve_comments, true}])
{:ok, 7, 4,
 [{:identifier, {0, 0, 3}, :def}, {:paren_identifier, {0, 4, 9}, :test3},
  {:"(", {0, 9, 10}}, {:")", {0, 10, 11}}, {:do, {0, 12, 14}},
  {:eol, {0, 14, 15}}, {:identifier, {1, 3, 5}, :if}, {true, {1, 6, 10}},
  {:do, {1, 11, 13}}, {:eol, {1, 13, 14}},
  {:comment, {2, 5, 16}, '# comment 1'}, {:eol, {2, 16, 17}},
  {:block_identifier, {3, 3, 7}, :else}, {:eol, {3, 7, 8}},
  {:comment, {4, 5, 16}, '# comment 2'}, {:eol, {4, 16, 17}}, {:end, {5, 3, 6}},
  {:eol, {5, 6, 7}}, {:comment, {6, 3, 14}, '# comment 3'}, {:eol, {6, 14, 15}},
  {:end, {7, 1, 4}}]}
```

Comments after dot operator:
```
iex(8)> :elixir_tokenizer.tokenize('foo.#bar\n #last\n+1', 1, 1, [])
{:ok, 3, 3,
 [{:identifier, {1, 1, 4}, :foo}, {:., {1, 4, 5}}, {:identifier, {3, 1, 2}, :+},
  {:number, {3, 2, 3}, 1}]}
iex(9)> :elixir_tokenizer.tokenize('foo.#bar\n #last\n+1', 1, 1, [{:preserve_comments, :true}])
{:ok, 3, 3,
 [{:identifier, {1, 1, 4}, :foo}, {:., {1, 4, 5}},
  {:comment, {1, 5, 9}, '#bar'}, {:comment, {2, 1, 6}, '#last'},
  {:identifier, {3, 1, 2}, :+}, {:number, {3, 2, 3}, 1}]}
iex(10)>
```

#### [#6238] - (2017-06-20T21:07:54Z) - [Inline String.duplicate to :binary.copy BIF](https://github.com/elixir-lang/elixir/pull/6238)

Furthermore, also inline duplicate/2 inside the String module, since it's
used there in couple places.

#### [#6194] - (2017-06-20T15:53:48Z) - [Add missing argument names in function definitions](https://github.com/elixir-lang/elixir/pull/6194)



#### [#6233] - (2017-06-20T15:35:59Z) - [Update link to `:erlang.module_info/0`](https://github.com/elixir-lang/elixir/pull/6233)

It turns out the *link* is auto-generated so I'm not sure how to override the auto-generation. The link, as is, goes to a non-existent page ( try it: https://hexdocs.pm/elixir/Module.html ) so it's not helpful. I've made an obviously bad change here to start the conversation, as soon as I know how to override the auto-linking I'll do that.

#### [#6237] - (2017-06-20T13:03:21Z) - [Prevent describe blocks with the same name in ExUnit](https://github.com/elixir-lang/elixir/pull/6237)

Closes #6236.

#### [#6224] - (2017-06-18T20:40:30Z) - [Add --all-warnings option to Elixir compiler](https://github.com/elixir-lang/elixir/pull/6224)

While implementing the (hacky and buggy) automatic builds and error/warning reporting in ElixirLS, one issue that made it difficult was that warnings are lost after a successful build.  If a file compiles with warnings, the next time you compile, those warnings are not shown unless you‚Äôve changed the source or something it depends on.

This change stores warnings in the build manifest and adds an `--all-warnings` option on the CLI. When set, it will print out old warnings from non-stale files.

#### [#6231] - (2017-06-18T20:33:24Z) - [Make assert_raise fail with broken message/1 implementation](https://github.com/elixir-lang/elixir/pull/6231)

As discussed on the mailing list. I'm open to changing how the error is reported, I wasn't sure of the best way.

Interestingly, this revealed a bug in `ExUnit.MultiError.message/1` implementation. It's fixed in a separate commit.

#### [#6232] - (2017-06-18T15:35:59Z) - [Code: Improve grammar in `require_file` docs](https://github.com/elixir-lang/elixir/pull/6232)



#### [#6230] - (2017-06-18T15:29:25Z) - [Feat/table alignment](https://github.com/elixir-lang/elixir/pull/6230)

I've done this as two commits as the second commit is technically a breaking change for the way the docs are rendered. You can see the result of of the same table being rendered with:

1) elixir 1.4.1 (before this feature)
2) After commit 1
3) After commit 2

![table-alignment](https://user-images.githubusercontent.com/477511/27230407-042a5c60-52a7-11e7-9475-9e425b152218.png)

Commit messages below for convenience.

---

Add table column alignment in IO.ANSI.Docs

This commit adds table alignment in markdown which allows the following
for tables:

    right aligned | center aligned | left aligned
    -: | :-: | :-
    a | b | c

This will output a table in the following format:

    right aligned | center aligned | left aligned
                a |       b        | c

---

Remove duplicate spacings for table alignment

Previously, a table in the format:

    right aligned     | center aligned | left aligned
    ----------------: | :------------: | :-----------
                    a |       b        | c

Would be displayed as:

    right aligned     | center aligned | left aligned
                    a |       b        | c

This commit changes it so it displays as:

    right aligned | center aligned  | left aligned
                a |        b        | c

#### [#6227] - (2017-06-17T15:00:30Z) - [Add Date.range/2](https://github.com/elixir-lang/elixir/pull/6227)

closes #6223 

Adds `Date.Range`, implementing the `Enumerable` module so you can `count/1`, `member?/2`, etc.

Usage example:

```elixir
iex> range = Date.range(~D[2000-01-01], ~D[2001-01-1])
#DateRange<~D[2000-01-01], ~D[2001-01-1]>
iex> Enum.member?(range, ~D[2000-02-01])
true
iex> Enum.member?(range, ~D[2002-02-01])
false
```

As suggested in the issue, the `Date.Range` struct holds also `first_rata_die` and `last_rata_die`, which are later used for faster `count/1`, `member?/2` and `reduce/3` implementations.

Would love some feedback on this, thanks! üòÉ 

#### [#6229] - (2017-06-16T11:19:16Z) - [Do not use exit(msg) in parallel compiler/require](https://github.com/elixir-lang/elixir/pull/6229)

The code is now more idiomatic as we send messages
to the parallel compiler/require instead of passing
information through the exit message.

This also allows us to more clearly distinguish between
EXITs and compilation errors.

#### [#6228] - (2017-06-16T06:03:08Z) - [Fix typo in Enum doctest](https://github.com/elixir-lang/elixir/pull/6228)

Nice to see that expressions are shortcutted when the array is empty but then this happens...

#### [#6220] - (2017-06-14T15:51:42Z) - [Turn EEx.SyntaxError into a warning to keep backwards compatibility](https://github.com/elixir-lang/elixir/pull/6220)

Closes #6216

#### [#6208] - (2017-06-14T15:50:03Z) - [Add missing calls of remove_dot_segments to URI.merge/2](https://github.com/elixir-lang/elixir/pull/6208)

Some `remove_dot_segments` calls were missing in `URI.merge/2` with respect to [RFC3986](https://tools.ietf.org/html/rfc3986#section-5.2.2).

#### [#6193] - (2017-06-14T15:49:09Z) - [Add start_supervised/2 and stop_supervised/1 to ExUnit](https://github.com/elixir-lang/elixir/pull/6193)



#### [#6206] - (2017-06-14T15:27:11Z) - [Show better error when h/1 is used on callback](https://github.com/elixir-lang/elixir/pull/6206)

closes #6204 

## Current behaviour
When calling `h/1` on a `callback`
```
iex(1)> h GenServer.init
No documentation for GenServer.init was found
```

## After this change
```
iex(1)> h GenServer.init
No documentation for function GenServer.init was found, but there is a callback
with the same name.
You can view callback documentations with the b/1 helper.
```

when requesting specific arity
```
iex(1)> h GenServer.init/1
No documentation for function GenServer.init/1 was found, but there is a callback
with the same name.
You can view callback documentations with the b/1 helper.
```

Any feedback is welcome, thanks! :)


#### [#6180] - (2017-06-14T15:22:56Z) - [Raise on incomplete doctests that don't finish on a trailing new line](https://github.com/elixir-lang/elixir/pull/6180)

As discussed in the mailing list.
this is a WIP, since I need to update the line numbers in the test, therefore the `@tag :skip`, but first need to be approved

#### [#6219] - (2017-06-12T10:56:57Z) - [Refactor read-only argument handling in Task.Supervised](https://github.com/elixir-lang/elixir/pull/6219)



#### [#6205] - (2017-06-12T09:06:43Z) - [Clean up the Map module by checking for maps and reusing code](https://github.com/elixir-lang/elixir/pull/6205)



#### [#6214] - (2017-06-12T08:48:22Z) - [Fix message leak in Task.async_stream and friends](https://github.com/elixir-lang/elixir/pull/6214)



#### [#6215] - (2017-06-12T08:05:42Z) - [Use new mix.exs style in docs, core apps mix.exs and generated README](https://github.com/elixir-lang/elixir/pull/6215)



#### [#6218] - (2017-06-12T08:01:48Z) - [Fix typo in Process docs](https://github.com/elixir-lang/elixir/pull/6218)

Fixes a typo in Process docs

#### [#6207] - (2017-06-08T22:43:40Z) - [Minor improvements to match?/2 docs](https://github.com/elixir-lang/elixir/pull/6207)



#### [#6203] - (2017-06-08T13:44:00Z) - [Optimize inspect calls inside interpolation](https://github.com/elixir-lang/elixir/pull/6203)

It is very common to have "#{inspect foo}" calls inside strings,
especially when producing error messages. Since we know Kernel.inspect/2
always returns a string, we can safely drop the wrapping
String.Chars.to_string/1 call that is otherwise always present during
interpolation.

#### [#6197] - (2017-06-07T15:25:41Z) - [Add bugfix to CHANGELOG of IEx](https://github.com/elixir-lang/elixir/pull/6197)

It documments commit 7ad7d3d7c9ae498fee46a3ee9d9281df7c5b491d

#### [#6199] - (2017-06-07T15:24:42Z) - [Rephrase and correct mention to double-underscore macros in Naming Conventions page](https://github.com/elixir-lang/elixir/pull/6199)

These are macros, not variables.
It sorts them alphabetically.

#### [#6196] - (2017-06-07T07:00:32Z) - [Correct Changelog](https://github.com/elixir-lang/elixir/pull/6196)



#### [#6198] - (2017-06-07T06:57:33Z) - [Standardize arguments in Integer.gcd/2](https://github.com/elixir-lang/elixir/pull/6198)

It is already used in throught the module "integer" and not "int"

#### [#6191] - (2017-06-06T20:04:24Z) - [Retire use of Supervisor.Spec](https://github.com/elixir-lang/elixir/pull/6191)



#### [#6184] - (2017-06-05T12:20:53Z) - [Add __protocol__(:impls) to protocols](https://github.com/elixir-lang/elixir/pull/6184)

Implements #6178.

Some questions:

- Keep `Protocol.impls/1` and/or document `protocol.__protocol__(:impls)` in the `Kernel.defprotocol/2` docs?

- I used `[module]` for the spec of the return type of `protocol.__protocol__(:impls)` and `Protocol.impls/1`, is this really correct (since the returned impls aren't really necessarily modules, e.g. `Any`)? Should I be returning the generated impl module names instead of the "types"?

#### [#6189] - (2017-06-05T10:55:48Z) - [Streamline child specs](https://github.com/elixir-lang/elixir/pull/6189)



#### [#6188] - (2017-06-04T17:59:52Z) - [Update Task.start_link/1 docs](https://github.com/elixir-lang/elixir/pull/6188)

Old docs made it seem that a supervisor was necessary. This is clearer (in my opinion) and closer to the docs on `GenServer` module.

#### [#6187] - (2017-06-04T17:41:11Z) - [Add Unix epoch example to DateTime docs ](https://github.com/elixir-lang/elixir/pull/6187)

...showing an easy way to get the Unix epoch.

I thought about adding a function `DateTime.unix_epoch/0` which would just do `DateTime.from_unix!(0)`. But is it really necessary to add another function, when `DateTime.from_unix!(0)` is so simple?

This PR just adds documentation on how to get the unix epoch using the existing `DateTime.from_unix!/0` function.

#### [#6185] - (2017-06-04T11:00:32Z) - [Handle changes to crash reports in OTP 20](https://github.com/elixir-lang/elixir/pull/6185)

* :message_queue_len and :current_stacktrace added
* :messages and :dictionary not always present

#### [#6124] - (2017-06-04T10:11:58Z) - [Replace Keyword.t/0-1 types with built-in keyword/0-1](https://github.com/elixir-lang/elixir/pull/6124)



#### [#6175] - (2017-05-31T14:12:53Z) - [Show bindings when assertions fail in ExUnit](https://github.com/elixir-lang/elixir/pull/6175)

This PR shows the value of non-root-level variables in asserted expressions when an assertion fails:

![screen shot 2017-05-31 at 12 52 01 pm](https://cloud.githubusercontent.com/assets/3890250/26628843/f9c72e46-45ff-11e7-970e-5ec7fe86fbe4.png)


#### [#6176] - (2017-05-31T11:17:05Z) - [Move a private function around so that it's always used in ExUnit tests](https://github.com/elixir-lang/elixir/pull/6176)



#### [#6167] - (2017-05-30T09:03:56Z) - [Store multiple sources in case of module conflicts](https://github.com/elixir-lang/elixir/pull/6167)

Fix for #5983. A test is missing (and will be added tomorrow).

#### [#6168] - (2017-05-30T07:26:45Z) - [Do not start oldshell alongside IEx, closes #5730 (on Windows)](https://github.com/elixir-lang/elixir/pull/6168)

Incorporate commit 82b655a from bin/iex into bin/iex.bat

Original comment:
"Do not start oldshell alongside IEx, closes #5730
Prior to this patch, both oldshell and IEx would start,
which would make them compete for the standard io. This
could be deterministically triggered by pasting input
with multiple lines on the terminal.

This commit guarantees the oldshell is no longer started."

Reorder flags to elixir script in iex.bat to match the order of flags in iex.

#### [#6145] - (2017-05-29T09:33:57Z) - [Mix.Tasks.Local.Hex: Clarify --if-missing docs](https://github.com/elixir-lang/elixir/pull/6145)

I noticed there was a typo in the docs for `mix local.hex --if-missing` and that the sentence was a little confusing as written, so I tried to clarify it.

#### [#6160] - (2017-05-28T19:34:32Z) - [Fix value inspect for name option](https://github.com/elixir-lang/elixir/pull/6160)

I think this would improve the message seen when you pass invalid value for name option. I got confused for a moment with this so I thought this would improve readability.

With something like:
```elixir
defmodule A do
  use GenServer
end
```

Current behavior:
```elixir
GenServer.start(A, [], name: "hello")
** (ArgumentError) expected :name option to be one of:

  * nil
  * atom
  * {:global, term}
  * {:via, module, term}

Got: {"hello", []}

    (elixir) lib/gen_server.ex:674: GenServer.do_start/4
```

Behavior with this PR:
```elixir
GenServer.start(A, [], name: "hello")
** (ArgumentError) expected :name option to be one of:

  * nil
  * atom
  * {:global, term}
  * {:via, module, term}

Got: "hello"

    (elixir) lib/gen_server.ex:681: GenServer.do_start/4
```

#### [#6090] - (2017-05-28T15:35:50Z) - [Provide Enum.chunk_by/4 and Stream.chunk_by/4](https://github.com/elixir-lang/elixir/pull/6090)

As requested by @josevalim in #5888, here is the initial changes I've made in order to implement `Stream.chunk_by/4`.

#### [#6158] - (2017-05-27T20:43:05Z) - [Add Unicode atoms and variables to the language](https://github.com/elixir-lang/elixir/pull/6158)

It follows [Unicode Annex #31](http://unicode.org/reports/tr31/). See the Unicode Syntax document for a more in-depth reference.

#### [#6159] - (2017-05-27T17:34:33Z) - [Make test created by `mix new` actually test your code](https://github.com/elixir-lang/elixir/pull/6159)

The motivation for this change is that we would want the developers to be either consciously testing or not the code.

This change would push you towards this goal by giving you a red build whenever you changed the code for the first time, leading you to explicitly make the decision of fixing your tests to align with the changes you introduced to the code, or consciously decide to remove them.

#### [#6156] - (2017-05-27T08:32:52Z) - [Enum: clarify uniq_by function parameter](https://github.com/elixir-lang/elixir/pull/6156)

I had difficulty understanding what sort of function should actually be passed to the second parameter of `Enum.uniq_by/2`. I believe that this helps to clarify it.

#### [#6154] - (2017-05-26T13:32:02Z) - [Fix escript on windows](https://github.com/elixir-lang/elixir/pull/6154)



#### [#6150] - (2017-05-25T22:50:58Z) - [More work regarding making CI on windows green](https://github.com/elixir-lang/elixir/pull/6150)

With this patch, the only tests left failing are

```
  1) test symlink or copy erases wrong symblinks (Mix.UtilsTest)
     test/mix/utils_test.exs:67
     ** (File.Error) could not remove file "c:/Users/mengx/Source/Repos/elixir/lib/mix/tmp/Mix.UtilsTest/test symlink or copy erases wrong symblinks/_build/archive/ebin": not owner
     stacktrace:
       (elixir) lib/file.ex:894: File.rm!/1
       (mix) lib/mix/utils.ex:385: Mix.Utils.symlink_or_copy/2
       test/mix/utils_test.exs:71: anonymous fn/0 in Mix.UtilsTest."test symlink or copy erases wrong symblinks"/1
       (elixir) lib/file.ex:1268: File.cd!/2
       test/test_helper.exs:108: MixTest.Case.in_fixture/3
       test/mix/utils_test.exs:68: (test)

  2) test escript install and uninstall (Mix.Tasks.EscriptTest)
     test/mix/tasks/escript_test.exs:207
     No message matching {:mix_shell, :info, ["* escript_test"]} after 0ms.
     Process mailbox:
       {:mix_shell, :info, ["Compiling 1 file (.erl)"]}
       {:mix_shell, :info, ["Compiling 1 file (.ex)"]}
       {:mix_shell, :info, ["Generated escript_test app"]}
       {:mix_shell, :yes?, ["Are you sure you want to install escript \"escript_test\"?"]}
       {:mix_shell, :info, ["* creating c:/Users/mengx/Source/Repos/elixir/lib/mix/tmp/.mix/escripts/escript_test"]}
       {:mix_shell, :error, ["\nwarning: you must append \"c:/Users/mengx/Source/Repos/elixir/lib/mix/tmp/.mix/escripts\" to your PATH if you want to invoke escripts by name\n"]}
       {:mix_shell, :info, ["No escripts currently installed."]}
     stacktrace:
       test/mix/tasks/escript_test.exs:226: anonymous fn/0 in Mix.Tasks.EscriptTest."test escript install and uninstall"/1
       (elixir) lib/file.ex:1268: File.cd!/2
       test/test_helper.exs:108: MixTest.Case.in_fixture/3
       test/mix/tasks/escript_test.exs:211: (test)
```

The case with `EEx` (fixed in this PR) is a little crazy, on my local dev environment, under `cmd.exe`, the output is with `\r\n`, yet on AppVeyor, presumably under `powershell.exe`, the output is with `\n`... I felt the only sane way to deal with is do the assert on trailing trimmed text...

There is also https://github.com/elixir-lang/elixir/issues/6149 being a blocker


#### [#6146] - (2017-05-25T10:08:18Z) - [Support erlang modules for use as structs](https://github.com/elixir-lang/elixir/pull/6146)

This pull request allows Erlang modules (or any module that doesn't start with `:"Elixir."`) as part of a function definition.  For example:

```elixir
def b?(%:b{}), do: true
```

This is more of a "fix the last barrier preventing this from working correctly" than a "new feature" pull request.

#### Why would anyone do this?

Private records in Erlang work great (like `#state{}` for `gen_server`), but trying to make record definitions public, user-friendly, and easily interoperable with Elixir is a real annoyance when writing a library you intend to be used by others.

While toying with a few different ideas for better interoperability without using records, I realized that any module that defines `__struct__/0` and `__struct__/1` can use the Elixir `%MODULE{}` syntax (for example, `%:foo{}`).

Pattern matching and con-struct-ion (get it?) work great already.  However, when you want to pattern match against a struct as part of a function definition without specifying `--no-docs`, you receive an error like this during compilation:

```
== Compilation error in file lib/foo.ex ==
** (ArgumentError) expected an Elixir module, got: :foo
    (elixir) lib/module.ex:1129: Module.split/2
    (elixir) lib/module.ex:682: Module.simplify_signature/2
    (stdlib) lists.erl:1354: :lists.mapfoldl/3
    (elixir) lib/module.ex:660: Module.simplify_signature/1
    (elixir) lib/module.ex:639: Module.add_doc/6
    (elixir) lib/module.ex:1154: Module.compile_doc/6
```

This pull request simply allows non-Elixir modules in function signatures which are currently rejected when documentation is enabled.

#### Are you insane?

Probably.

#### Example

```elixir
iex> :foo.fetch(%:foo{bar: %:bar{value: 1}})
{:ok, 1}
```

```elixir
# lib/foo.ex
defmodule :foo do
  @type t() :: %__MODULE__{bar: :bar.t(integer())}
  defstruct [:bar]
  def fetch(%:foo{bar: %:bar{value: value}}) do
    {:ok, value}
  end
end
```

```erlang
% src/bar.erl
-module(bar).

-type t(T) :: #{ '__struct__' := ?MODULE, value := T }.
-export_type([t/1]).

-export(['__struct__'/0]).
-export(['__struct__'/1]).

'__struct__'() ->
    #{ '__struct__' => ?MODULE, value => nil }.

'__struct__'(L) when is_list(L) ->
    '__struct__'(maps:from_list(L));
'__struct__'(M) when is_map(M) ->
    maps:fold(fun maps:update/3, '__struct__'(), M).
```

#### [#6137] - (2017-05-25T10:06:52Z) - [Show specific description for dont_display_result atom in i/1 helper](https://github.com/elixir-lang/elixir/pull/6137)

:"do not show this result in output" is the returned value of functions
that print to screen and do not want to show in screen any returned value.

This commits prints the information about `nil` instead.

#### [#6151] - (2017-05-25T10:02:07Z) - [Fix typo in `Enum.map_every/3`'s doc](https://github.com/elixir-lang/elixir/pull/6151)



#### [#6143] - (2017-05-24T14:48:44Z) - [Add CI for Windows with Appveyor](https://github.com/elixir-lang/elixir/pull/6143)

See #6141 and https://github.com/elixir-lang/elixir/pull/6141#issuecomment-303732946

Here's what it looks like:
https://ci.appveyor.com/project/xiamx/elixir/history

Status badge:
https://www.appveyor.com/docs/status-badges/

#### [#6141] - (2017-05-24T11:25:21Z) - [Test Suite Windows compatibility](https://github.com/elixir-lang/elixir/pull/6141)

Understandably development on Elixir language itself on Windows is less tested because of personal preferences and lack of support in Travis CI... I develop on Windows because I need to occasionally write some C#.

The current test suite does not pass in Windows. This pull request is aimed to address some issues in the test suite..

Please let me know if it's easier to put everything in one branch or separated for different fixes.

#### [#6136] - (2017-05-23T13:16:06Z) - [Update CHANGELOG and Deprecations with v1.5 changes](https://github.com/elixir-lang/elixir/pull/6136)

This makes both documents upto date

#### [#5822] - (2017-05-23T11:00:45Z) - [Inspect Opts Printable String Limit](https://github.com/elixir-lang/elixir/pull/5822)

provide inspect opts printable_limit to avoid performance issues found when inspecting large printable strings

Fixes https://github.com/elixir-lang/elixir/issues/5817

#### [#6135] - (2017-05-23T08:01:07Z) - [Sort deprecation clauses alphabetically in :elixir_dispatch](https://github.com/elixir-lang/elixir/pull/6135)

Hope this helps maintaining the CHANGELOG and Deprecation pages

/cc @whatyouhide

#### [#6131] - (2017-05-23T07:58:19Z) - [Remove in IEX autocompletion default arg. functions with @doc false](https://github.com/elixir-lang/elixir/pull/6131)

If a function is defined with default arguments and @doc set to false,
the original function would be excluded from autocompletion,
but the automatically created functions with smaller arities would still remain

Example.

> iex> String.r<TAB>
> replace/3             replace/4             replace_leading/3
> replace_prefix/3      replace_suffix/3      replace_trailing/3
> reverse/1             rjust/2

rjust/2 is listed,
but it shouldn't, same as rjust/3 (the original function) is not shown.

#### [#6133] - (2017-05-22T22:58:39Z) - [Give a proper syntax error when invalid sigil delimiters are used](https://github.com/elixir-lang/elixir/pull/6133)

Before this PR, we would have:

```elixir
iex> ~s\
** (SyntaxError) iex:1: unexpected token: "~" (column 1, codepoint U+007E)
```

After this commit, we have:

```elixir
iex> ~s\
** (SyntaxError) iex:1: invalid sigil delimiter: "\" (column 3, codepoint U+005C)
```

I'm not sure if we should point to some kind of documentation, or if we should list the possible delimiters, input is welcome.

Closes #6132.

#### [#6134] - (2017-05-22T22:00:14Z) - [Document deprecation of Integer.to_char_list/2 and List.Chars.to_char‚Ä¶](https://github.com/elixir-lang/elixir/pull/6134)

‚Ä¶_list/1

#### [#6100] - (2017-05-22T21:58:47Z) - [Dogfood new defoverridable syntax](https://github.com/elixir-lang/elixir/pull/6100)



#### [#6127] - (2017-05-22T21:58:15Z) - [Add Exception.blame/3 and Exception.blame_mfa/3](https://github.com/elixir-lang/elixir/pull/6127)

Closes #4171. Closes #5737.

Since `Exception.blame/3` is expensive, tools will have to explicitly opt-in to its usage when showing exceptions. In Elixir we will use this new functionality in:

  * [x] ExUnit
  * [x] IEx
  * [x] The exception message itself when blamed
  * [x] The compiler
  * [x] The CLI

Note: this will be included in Elixir v1.5 and it requires OTP 20 (currently RC but will be out before v1.5)

#### [#6129] - (2017-05-22T17:46:50Z) - [Since `self` is passed as an arg, no need to call it again](https://github.com/elixir-lang/elixir/pull/6129)



#### [#6128] - (2017-05-22T08:48:02Z) - [Deprecation of "strip" functions in String module](https://github.com/elixir-lang/elixir/pull/6128)

- Improve warning message in String "trim" functions
- Document deprecation of "strip" functions in String module

Closes #6125

It fixes changes introduced in
  commit 2ee9f53
  Author: Jos√© Valim
  Date:   Sat May 20 09:25:34 2017 +0200
    List strip and just String functions in deprecations page, closes #6125

/cc @josevalim @whatyouhide 

#### [#6121] - (2017-05-19T18:08:38Z) - [Consider unicode non-characters as valid](https://github.com/elixir-lang/elixir/pull/6121)

Hi Maintainers,

New to this community, I'm hoping to improve my understanding of Elixir by working on some issues.

This PR should address the issue raised in #6108, but also breaks the usecase for users that rely on `String.valid?` to check for non-characters...


#### [#6118] - (2017-05-18T13:20:42Z) - [Streamline typespec of EEx.Engine.fetch_assign! and Access.fetch](https://github.com/elixir-lang/elixir/pull/6118)

Whenever EEx templates are used to pass variables via `assigns` whatever
this data structure is will be passed into `EEx.Engine.fetch_assign` and
then into `Access.fetch`.

So it makes sense to use the same typespec for the both. Otherwise
dialyzer will complain about every instance where keyword lists are
passed into functions like `eval_string`, `function_from_file` and
`function_from_string`.

#### [#6117] - (2017-05-18T13:04:35Z) - [Add missing 'require Logger' in ExUnit.CaptureLog doc example](https://github.com/elixir-lang/elixir/pull/6117)

Without `require Logger`, the following won't compile...

```
defmodule AssertionTest do
  use ExUnit.Case

  import ExUnit.CaptureLog
  # require Logger

  test "example" do
    assert capture_log(fn ->
      Logger.error "log msg"
    end) =~ "log msg"
  end

  test "check multiple captures concurrently" do
    fun = fn ->
      for msg <- ["hello", "hi"] do
        assert capture_log(fn -> Logger.error msg end) =~ msg
      end
      Logger.debug "testing"
    end
    assert capture_log(fun) =~ "hello"
    assert capture_log(fun) =~ "testing"
  end
end
```
```
$ mix test
Compiling 1 file (.ex)

== Compilation error on file lib/lsidjflsjdf.ex ==
** (RuntimeError) cannot use ExUnit.Case without starting the ExUnit application, please call ExUnit.start() or explicitly start the :ex_unit app
    expanding macro: ExUnit.Case.__using__/1
    lib/lsidjflsjdf.ex:2: AssertionTest (module)
    (elixir) expanding macro: Kernel.use/1
    lib/lsidjflsjdf.ex:2: AssertionTest (module)
```
With `require Logger`, the compiles & tests run
```
defmodule AssertionTest do
  use ExUnit.Case

  import ExUnit.CaptureLog
  require Logger

  test "example" do
    assert capture_log(fn ->
      Logger.error "log msg"
    end) =~ "log msg"
  end

  test "check multiple captures concurrently" do
    fun = fn ->
      for msg <- ["hello", "hi"] do
        assert capture_log(fn -> Logger.error msg end) =~ msg
      end
      Logger.debug "testing"
    end
    assert capture_log(fun) =~ "hello"
    assert capture_log(fun) =~ "testing"
  end
end
```
```
$ mix test
Compiling 1 file (.ex)
..

Finished in 0.04 seconds
2 tests, 0 failures
```


#### [#6119] - (2017-05-18T10:27:17Z) - [Make sure System.stracktrace is first thing done in the handler](https://github.com/elixir-lang/elixir/pull/6119)

If any of the functions catches an error, we'd get a wrong trace

#### [#6056] - (2017-05-16T14:42:10Z) - [StringIO read_line performance and binread bug fix](https://github.com/elixir-lang/elixir/pull/6056)

This pull request currently consists of 3 separate commits:

1. bf28be6243392a5c40367d329fa7ed233e257a2b Adds test coverage to the existing implementation.
2. 2a475a6a8d1e80b1c8790915b0d08a3eb4357429 Fixes #6037, the performance/scalability problem.
3. c7e821394841c3eda7743f37933a60d501675125 Fixes a bug. `IO.binread` should return raw bytes instead of decoding the input as if it were Latin1. See [this comment](https://github.com/elixir-lang/elixir/issues/6037#issuecomment-298233279).

I can split the last item into a separate pull-request if desired.

Using [this benchmark](https://gist.github.com/balexand/629e37f97865ce404f002199c3b406cd), each `IO.read(pid, :line)` call takes:

```
Before: 2557¬µs when N=5,000 O(N)
After: 14¬µs O(1)
```

`StringIO.get_until` suffers from the same performance problem but I've avoided touching it (and `collect_line`) because it has almost no test coverage. When I delete the entire function the only test that fails is:

```
1) test with get until (ExUnit.CaptureIOTest)
   test/ex_unit/capture_io_test.exs:196
   Assertion with == failed
   code:  capture_io(fn -> :io.scan_erl_form('>') end) == ">"
   left:  ""
   right: ">"
   stacktrace:
     test/ex_unit/capture_io_test.exs:197: (test)
```

I'd be happy to work on `get_until` in a separate pull-request. But first, does `StringIO` even need to support `get_until` or can we delete it? Also, is there any documentation about `get_until` other than http://erlang.org/doc/apps/stdlib/io_protocol.html?

#### [#6113] - (2017-05-15T18:56:03Z) - [Warn when a :__struct__ key is used when building/updating structs](https://github.com/elixir-lang/elixir/pull/6113)

Until now, `%x{__struct__: y}` would ignore the `:__struct__` part and only use/match on `x`, without warnings. With this commit, a warning is emitted in this case and in the respective case when updating (`%SomeStruct{x | __struct__: y}`).

#### [#6111] - (2017-05-15T18:34:55Z) - [Improve doc for Enum.map_every/3 when nth is 0](https://github.com/elixir-lang/elixir/pull/6111)



#### [#6112] - (2017-05-15T14:03:32Z) - [Update project.ex](https://github.com/elixir-lang/elixir/pull/6112)

It should change Mix.Project.apps_path() to  Mix.Project.apps_paths()

#### [#6109] - (2017-05-14T20:20:55Z) - [items in the enumerable are prepended to the args](https://github.com/elixir-lang/elixir/pull/6109)

The items in the `enumerable` are prepended to the `args`

#### [#6110] - (2017-05-14T20:20:24Z) - [Fix test failing introduced in 6a2cfef](https://github.com/elixir-lang/elixir/pull/6110)

Test was broken in this PR: https://github.com/elixir-lang/elixir/pull/6095

#### [#6106] - (2017-05-14T19:33:12Z) - [Use double quote when displaying file paths and extensions](https://github.com/elixir-lang/elixir/pull/6106)

Related to https://github.com/elixir-lang/elixir/pull/6007

#### [#6095] - (2017-05-14T19:32:44Z) - [Remove unnecessary specs for funs with default arguments](https://github.com/elixir-lang/elixir/pull/6095)



#### [#6096] - (2017-05-14T16:51:38Z) - [Standardize messages that suggest to run a command-line command](https://github.com/elixir-lang/elixir/pull/6096)

It tries to avoid the use of different styles such as:
- inline commands sentence with user of double-quotes (ie. Invalid arguments, please run "mix something" for more information)
- inline commands in sentence with use of semi-colon (ie. Invalid arguments, please run: mix something)

Suggested commands go in a new line, indented with 4
white-spaces.

Error messages follow the following format:

```
** (Mix) Invalid arguments given to "mix local.rebar"

Check the proper call syntax with:
    mix help local.rebar
```

#### [#6107] - (2017-05-14T13:05:15Z) - [Refactor Version.parse/1 to not use regexes](https://github.com/elixir-lang/elixir/pull/6107)

Rebuilding the `build` part in `Version.parse/1` may not be the absolute best, but we were basically parsing out the build in `Version.Parser.parse_version/1` only to throw it out and not use it anywhere, and then parsing the build again (with a regex) in `Version.parse/1`. This way, we get rid of the regex and simplify the code a bit.

#### [#6103] - (2017-05-12T06:26:29Z) - [Fix typo in operators docs](https://github.com/elixir-lang/elixir/pull/6103)

Changed "While it's possible to **defined**" to "While it's possible to **define**".

#### [#6102] - (2017-05-11T22:54:17Z) - [Some minor documentation improvements](https://github.com/elixir-lang/elixir/pull/6102)



#### [#6101] - (2017-05-11T21:00:58Z) - [Documentation: add :pid to list of Logger metadata builtins](https://github.com/elixir-lang/elixir/pull/6101)

I added `:pid` to the list of Logger metadata, and was surprised to find that it worked even without doing `Logger.metadata [pid: self(), ...]`, though it isn't mentioned in the docs list of builtins. This adds it to the docs in case it was omitted by mistake.

#### [#6098] - (2017-05-11T17:49:02Z) - [Do not warn about missing @impl for overridable functions](https://github.com/elixir-lang/elixir/pull/6098)

see: #6097

#### [#6091] - (2017-05-11T07:45:49Z) - [Prepend slash to directories in .gitignore files and generated ones](https://github.com/elixir-lang/elixir/pull/6091)

As discussed in the mailing list.


#### [#6093] - (2017-05-11T07:45:23Z) - [Use explicit function names in DocTest tests](https://github.com/elixir-lang/elixir/pull/6093)

Additionally be clearer on when the return value is wrong.

#### [#6092] - (2017-05-11T07:44:44Z) - [Clean up usage of get_stracktrace in elixir_errors.erl](https://github.com/elixir-lang/elixir/pull/6092)

It's possible get_stacktrace won't work outside of catch clauses in the future.

Reference: https://github.com/erlang/otp/pull/1449

#### [#6094] - (2017-05-11T07:44:19Z) - [Improve test for no import options in DocTest tests](https://github.com/elixir-lang/elixir/pull/6094)

It was really confusing that a min function returns a max value

This is a WIP, as I want the approval first to remove the `:skip` tag in "doctest failures" test and correct the test, as it's a pain in the neck to change the line numbers

#### [#6087] - (2017-05-09T19:32:34Z) - [Replace GenEvent.remove_handler/3 with :gen_event in GenEvent.Stream](https://github.com/elixir-lang/elixir/pull/6087)

This suppresses the deprecation warning. Functionality should be equivalent, but please double check :)

#### [#6086] - (2017-05-09T19:31:50Z) - [Properly escape fields passed to defrecord](https://github.com/elixir-lang/elixir/pull/6086)

Should close https://github.com/elixir-lang/elixir/issues/6060.

#### [#6073] - (2017-05-09T15:11:18Z) - [Remove unused ignored entries in .gitignore](https://github.com/elixir-lang/elixir/pull/6073)

1) /.release
Removed long time ago in these two commits.
commit 8ced611aee30a30ed6728a9ef32c0d7094f3a262
Author: Jos√© Valim <jose.valim@plataformatec.com.br>
Date:   Thu Jan 24 08:05:01 2013 -0700
    We no longer have a .release task
commit 85fca3de2ecc36436e655db6afa0acf9bfa51f43
Author: Jos√© Valim <jose.valim@plataformatec.com.br>
Date:   Wed Jan 23 13:53:09 2013 -0700
    Properly declare .PHONY targets

2) /rel/elixir
Removed in this commit.
commit d44e8bd1f6efc54e664c28fdfc864af37e7e3129
Author: Jos√© Valim <jose.valim@plataformatec.com.br>
Date:   Tue Feb 11 10:24:27 2014 +0100
    Remove release files

3) /ebin
Previously used with rebar2

#### [#6080] - (2017-05-09T15:11:00Z) - [Skip autocompletion of module names that are invalid without being quoted](https://github.com/elixir-lang/elixir/pull/6080)

See #6043 

#### [#6084] - (2017-05-09T13:43:39Z) - [Add docs and specs to String.Chars and List.Chars](https://github.com/elixir-lang/elixir/pull/6084)



#### [#6085] - (2017-05-09T09:42:27Z) - [Fix typo in variable names](https://github.com/elixir-lang/elixir/pull/6085)



#### [#6083] - (2017-05-09T09:31:19Z) - [Optimize Regex.escape/1](https://github.com/elixir-lang/elixir/pull/6083)

Use a similar optimization technique to the one in plug https://github.com/elixir-lang/plug/pull/547

This allows us to keep as large parts of the initial binary as possible,
in the case of no escapes, no allocation is needed.

In most cases it should be about twice as fast, in case no escape is needed,
in can be even 10x faster. For small strings, it will be about 15% slower, but
with entire execution in range of 50Œºs, this should be acceptable.

#### [#6075] - (2017-05-08T21:43:53Z) - [Show invalid option in error message when invalid options are expanded](https://github.com/elixir-lang/elixir/pull/6075)

I was working with import/2 in a macro, and it was not easy to see what was wrong. I hope this helps

#### [#6081] - (2017-05-08T20:43:57Z) - [Simplify integer parsing](https://github.com/elixir-lang/elixir/pull/6081)

Separate extracting the sign from the rest of the pass.
This allows drastically limiting the number of generated cases and
reduces the complexity of the code, speeding it up at the same time.

#### [#6077] - (2017-05-08T18:59:26Z) - [Remove any use of Regex in the Version.Parser module](https://github.com/elixir-lang/elixir/pull/6077)



#### [#6074] - (2017-05-08T12:48:46Z) - [Remove custom warning on "use Dict"](https://github.com/elixir-lang/elixir/pull/6074)

This warning is emitted in elixir_dispatch anyways, this currently results in
two warnings emitted for the same `use Dict` in `HashDict`.

#### [#5954] - (2017-05-08T11:03:15Z) - [Reduce MapSet's space usage in Erlang term format](https://github.com/elixir-lang/elixir/pull/5954)

MapSet is internally represented as a map with keys as set's elements and stub values of `true`, like: `%{ :key => true }`.  When MapSet, in it's current format, is written to a DETS file, or serialized using `:erlang.term_to_binary/2`, it's **two times** as big as the smallest possible case! If the stub value is replaced with an empty list, to a format `%{ :key => [] }`, there is a significant space reduction, see: 

```Elixir
iex(1)> ml = for i<- 1..1_000_000, do: {i,[]}, into: %{}; :ok
:ok
iex(2)> mt = for i<- 1..1_000_000, do: {i,true}, into: %{}; :ok
:ok
iex(3)> {:ok, table_ml} = :dets.open_file(:disk_storage_ml, [type: :duplicate_bag]) 
{:ok, :disk_storage_ml}
iex(4)> {:ok, table_mt} = :dets.open_file(:disk_storage_mt, [type: :duplicate_bag])
{:ok, :disk_storage_mt}
iex(5)> size_ml = File.lstat!("disk_storage_ml").size
5432
iex(6)> size_mt = File.lstat!("disk_storage_mt").size
5432
iex(7)> :dets.insert_new(:disk_storage_ml, {1, ml})
true
iex(8)> :dets.insert_new(:disk_storage_mt, {1, mt})
true
iex(9)> size_ml_dets = File.lstat!("disk_storage_ml").size        
6004693
iex(10)> size_mt_dets = File.lstat!("disk_storage_mt").size        
12004693
iex(11)> size_ml_etf = ml |> :erlang.term_to_binary |> byte_size
5999241
iex(12)> size_mt_etf = mt |> :erlang.term_to_binary |> byte_size
11999241
iex(13)> size_ml_dets/size_mt_dets
0.5001954652234755
iex(14)> size_ml_etf/size_mt_etf
0.49996837299959224
```

Since only keys from the map are of any importance, changing from `true` to `[]`,  doesn't change any of the functionality. MapSet is an opaque type, so nobody should be using it's internal format either.

This changes only how much space MapSet uses when it's serialized to ETF format, no RAM usage changes were observed.

#### [#5929] - (2017-05-08T09:20:30Z) - [Improve specs for Process.flag/2-3](https://github.com/elixir-lang/elixir/pull/5929)



#### [#6072] - (2017-05-07T21:38:11Z) - [Silence compilation warnings about the deprecation of HashDict/HashSet](https://github.com/elixir-lang/elixir/pull/6072)

Similar to what was done in 73ae8ed2856f3d324a8f3b044e7d43bce130db4f for `Dict`.

#### [#6071] - (2017-05-07T13:55:40Z) - [Handle OTP 20 GenServer log messages](https://github.com/elixir-lang/elixir/pull/6071)

Always show client pid/name/node when present but only show stacktrace on debug.

Note: Backport to 1.4 when merged

#### [#5965] - (2017-05-07T13:17:22Z) - [Preserve attributes even if `strip_beam` is enabled](https://github.com/elixir-lang/elixir/pull/5965)

Some applications can rely on attributes, so silently stripping them
when building escript can be confusing.
If we still want to strip other debug module information by default,
we have to preserve attributes explicitely.

#### [#6061] - (2017-05-07T08:25:06Z) - [Fix: ExUnit Setup_all fails with 0 exit status (#5967)](https://github.com/elixir-lang/elixir/pull/6061)

Addresses #5967 
- Handle `setup_all` failures as the failure of all test in the case for `RunnerStats` and `CliFormatter` WRT `test_counter` and `failure_counter`

#### [#6067] - (2017-05-05T12:44:53Z) - [Get rid of the requirement-parsing DSL in Version](https://github.com/elixir-lang/elixir/pull/6067)

We don't need the complexity and abstraction of the DSL for such little code. The resulting amount of code is pretty much the same in conciseness, and a few lines of code smaller.

#### [#6052] - (2017-05-01T07:37:50Z) - [Mark variable as unused in Kernel.use/2 example](https://github.com/elixir-lang/elixir/pull/6052)



#### [#6054] - (2017-05-01T07:26:56Z) - [Finish moving documentation links to hexdocs.pm](https://github.com/elixir-lang/elixir/pull/6054)



#### [#6044] - (2017-04-30T22:27:10Z) - [Integer.parse/2 simpler and faster](https://github.com/elixir-lang/elixir/pull/6044)

Improves readability by being more concise ~~and avoiding meta-programming~~. It also improves performance beyond the already fast implementation from #5859.

Some numbers from executing [the benchmark](https://github.com/elixir-lang/elixir/pull/5859#issuecomment-285681896) from #5859 on my Macbook Pro (Mac OS 10.12.4, Erlang 19.3):

```
elixir 1.4.2: 8197¬µs
current master (3e56f6d32): 410¬µs
this pull-request: 149¬µs
```

/cc @fishcakez

#### [#6049] - (2017-04-29T08:08:24Z) - [Add missing `c:` for callback reference in Task.Supervisor doc.](https://github.com/elixir-lang/elixir/pull/6049)



#### [#6009] - (2017-04-28T19:15:43Z) - [Support :on_timeout in Task.async_stream and friends](https://github.com/elixir-lang/elixir/pull/6009)

`:on_timeout` can be `:kill_task | :exit`, where `:exit` is the current behaviour.

#### [#6041] - (2017-04-27T12:08:10Z) - [Changes focus in require explanation](https://github.com/elixir-lang/elixir/pull/6041)

I think from a programmer's perspective, the fact that in order to expand macros the compiler needs to ensure the module is compiled and loaded is not relevant.

The compiler needs the module loaded in memory to have their functions available (a macro is a function prefixed with "MACRO-"), because it may need to call the function early in the expand phase. Note that the module may be loaded in memory when expansion happens:

```elixir
Integer.digits(1) # function
defmodule M do
  Integer.is_odd(1) # macro
end
```

by the time `is_odd` has to be expanded, `Elixir.Integer` is already loaded in the VM, and thus the macro available for dispatch. But Elixir errs, because the code does not opt-in. Since Elixir knows the macro exists, it gives you a better error message ("you need to require in order to use a macro", or "there is a macro with the same name"), than the one it can give if the module is not even loaded ("unknown function").

From my perspective, that is not really the concern of the programmer. The programmer does not care about what the compiler needs to do. For example, the parallel compiler may need to compile a module if needed as well, and the programmer does not need to say so.

What the programmer cares in my view is that _they have to opt-in_. [This is the spot](https://github.com/elixir-lang/elixir/blob/b3957a6b5b9806d877783ddb1b18eeb2712b3b01/lib/elixir/src/elixir_expand.erl#L681) in the source code where opting-in is stored. And that is a design decision that I suppose has as a goal to prevent macros from leaking everywhere. You need to consciously opt-in.

In order to make the macro _available_ in the scope, Elixir may need to compile and load and therefore `require` also ensures the module is loaded and compiled, but that is implementation (again, as I see it).

#### [#6035] - (2017-04-27T11:39:48Z) - [Document default argument operator (`\\`)](https://github.com/elixir-lang/elixir/pull/6035)

While writing this, I noticed that the use of `def` to declare function heads isn't documented, at least for `Kernel.def/2`. I could address that here or open a separate PR.

Closes #6024.

#### [#6038] - (2017-04-27T09:55:53Z) - [Validate the value of the @on_load attribute](https://github.com/elixir-lang/elixir/pull/6038)

I think this could be a way to implement this check:

> `{bad_on_load,Term}`: badly formed `on_load` attribute

from https://github.com/elixir-lang/elixir/issues/5800. Thoughts?

#### [#6039] - (2017-04-27T09:24:44Z) - [Silence compilation warnings about the deprecation of Dict](https://github.com/elixir-lang/elixir/pull/6039)

Trying to slowly remove the clutter, not sure if worth if for you folks.

#### [#6033] - (2017-04-25T15:28:45Z) - [Add extra documentation for developers](https://github.com/elixir-lang/elixir/pull/6033)



#### [#6034] - (2017-04-24T08:29:18Z) - [Better namespacing for overridable test](https://github.com/elixir-lang/elixir/pull/6034)



#### [#6032] - (2017-04-23T16:30:01Z) - [Fix formatting issue in CHANGELOG.md](https://github.com/elixir-lang/elixir/pull/6032)

For some reason, Github wasn't rendering one of the `*` as a bullet point.  Deleting and rewriting the spaces seems to have fixed it.

#### [#6030] - (2017-04-23T12:14:41Z) - [More correction of "Syntax Reference" documentation page](https://github.com/elixir-lang/elixir/pull/6030)



#### [#6028] - (2017-04-22T13:15:49Z) - [Use single-equals when comparing variables in bin/elixir](https://github.com/elixir-lang/elixir/pull/6028)

Double-equals is a Bash-specific alias for "=" and it doesn't work everywhere. We use single-equal in the rest of the script anyways.

#### [#6022] - (2017-04-22T11:34:55Z) - [Make defoverridable/1 accept a module name as an argument](https://github.com/elixir-lang/elixir/pull/6022)

see: #5734

#### [#6005] - (2017-04-21T10:51:54Z) - [Calendar: add support for ISO8601 basic format](https://github.com/elixir-lang/elixir/pull/6005)

## Why?
Currently, Elixir supports the `extended` format for iso_8601 conversion. This format is good for human readability, but there is also basic format, which omits separator characters, which is often use for machine-machine messages (for example timestamps in http headers).  Its easy enough to strip out the separators in a handrolled fashion, but it seems like the language should just support `basic` directly in addition to the already supported `extended` format.

[This document](https://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a003169814.htm) gives a fairly comprehensive overview of the differences b/w extended and basic (essentially adding or omitting ':' in times and '-' in dates). I would also cite the official ISO 8601 documents but these appear to be behind paywalls.

## What?
 - Adds support for `basic` formatting to `DateTime.to_iso8601`, `Time.to_iso8601`, `Date.to_iso8601`, and `NaiveDateTime.to_iso8601`
- Adds corollary support for `basic` format in `Calendar.ISO` functions
 - Adds docs, doctest and changes typespec for above
 - Makes `extended` the default format option for all above


#### [#6014] - (2017-04-21T08:45:24Z) - [Add Process.cancel_timer/2](https://github.com/elixir-lang/elixir/pull/6014)

Same as `:erlang.cancel_timer/2`.

#### [#6017] - (2017-04-20T23:50:00Z) - [Improve variable naming in Kernel functions](https://github.com/elixir-lang/elixir/pull/6017)

I tried to make consistent:

* `left` and `right` as argument names for binary operators (`min/2` and `max/2` were using `first` and `second` for example)
* renamed contrived variable names to more readable ones (`attrs` -> `attributes`, `msg` -> `message`)
* `value` as the name of the argument for unary operator
* `term` as the argument for generic one-argument functions

#### [#6018] - (2017-04-20T15:29:33Z) - [Update the documentation for `archive.install`](https://github.com/elixir-lang/elixir/pull/6018)

Checksum checking cannot be performed on archives being installed
from git/github/hex. This change makes a note of that, using the
same wording from [`escript.install.ex`](https://github.com/elixir-lang/elixir/blob/master/lib/mix/lib/mix/tasks/escript.install.ex#L42)

#### [#6012] - (2017-04-19T11:09:36Z) - [Change module attribute name that stores internal protocol metadata](https://github.com/elixir-lang/elixir/pull/6012)

- Changed from @impl to @__implements_protocols_for
- Required because we want to repurpose @impl - see #5734

#### [#6006] - (2017-04-18T09:47:22Z) - [Avoid warnings in hd/1 and tl/1 tests](https://github.com/elixir-lang/elixir/pull/6006)

It will warn:
> warning: this expression will fail with ArgumentError

Recently introduced in
980a73cc7ff2e5ba522c9d0ac166043f4a97c7c6
f523b485d04624e8d757ff0ae7d97fdd97be5ce9

#### [#6008] - (2017-04-18T07:33:23Z) - [Always use "rm -f" for deleting files in Makefile](https://github.com/elixir-lang/elixir/pull/6008)

i.e:
- Do not use rm -r option when removing files (this is only useful for directories)
- Always use the "-f" option (ignore nonexistent files, and never prompt for confirmation)

#### [#6011] - (2017-04-18T07:30:23Z) - [Use timeout/0 type in Supervisor.Spec.shutdown/0 type](https://github.com/elixir-lang/elixir/pull/6011)



#### [#6010] - (2017-04-18T07:28:45Z) - [Use correct tense in docs](https://github.com/elixir-lang/elixir/pull/6010)



#### [#6007] - (2017-04-17T17:15:18Z) - [Remove the trailing period in installer message](https://github.com/elixir-lang/elixir/pull/6007)

Othewise it outputs

Found existing archive: /home/eksperimental/.mix/archives/hex-0.14.0.

Changing the name of the file.

#### [#6002] - (2017-04-17T10:42:38Z) - [Mention that File.regular? and File.dir? follow symbolic links](https://github.com/elixir-lang/elixir/pull/6002)

I unintentionally deleted some symlinks because I assumed `File.regular?` would return `false` for them, but it does not.

This PR mentions documents the behavior with symlinks.

#### [#5991] - (2017-04-17T08:06:27Z) - [Improve specs in Access module](https://github.com/elixir-lang/elixir/pull/5991)

These are a bit more finely-grained specs.
It completes the whole module.
I have tested it with Dialyzer to remove any warnings it could cause.

Docs for Access.get_and_update/3 and callback, have been improved as well.


#### [#5982] - (2017-04-17T08:04:35Z) - [Create "clean_residual_files" target in Makefile](https://github.com/elixir-lang/elixir/pull/5982)

This commits creates new clean targets.
It removes all the files in the .gitignore file.
It also deals with situations where `make test` was interrumpted, leaving files that are neither gonna be ignored by .gitignore nor gonna be removed by `make clean`.

#### [#5998] - (2017-04-16T22:58:27Z) - [Improve guards in Kernel.pop_in/2](https://github.com/elixir-lang/elixir/pull/5998)

Previously the error message would referer to a private function, as in:

iex> pop_in([1, 2, 3], 3)
** (FunctionClauseError) no function clause matching in Kernel.do_pop_in/2
    (elixir) lib/kernel.ex:1979: Kernel.do_pop_in([1, 2, 3], 3)

now it will metion the public_function:

iex> pop_in([1, 2, 3], 3)
** (FunctionClauseError) no function clause matching in Kernel.pop_in/2
    (elixir) lib/kernel.ex:1976: Kernel.pop_in([1, 2, 3], 3)

#### [#6004] - (2017-04-16T21:15:01Z) - [Correct "mix new" command message in Mix.CLI](https://github.com/elixir-lang/elixir/pull/6004)

PATH is a requirement when running `mix new`

#### [#5997] - (2017-04-16T21:13:44Z) - [Test tl/2 and document use with improper lists](https://github.com/elixir-lang/elixir/pull/5997)



#### [#5996] - (2017-04-16T21:08:47Z) - [Document usage of hd/2 with improper lists + hd/2 tests](https://github.com/elixir-lang/elixir/pull/5996)



#### [#6000] - (2017-04-16T10:54:53Z) - [Parameter rename in Protocol.each_struct_clause_for/3](https://github.com/elixir-lang/elixir/pull/6000)

Easy one.

This function is for structs, when read on itself, `struct` may communicate that better than `other`.

#### [#5981] - (2017-04-16T10:26:41Z) - [Remove temporary files in "clean_man" target in Makefile](https://github.com/elixir-lang/elixir/pull/5981)

The files are generated here
https://github.com/eksperimental/elixir/blob/85b68fe8783fd4b7db3a733cb78b4690cc23e543/Makefile#L237-L247

#### [#5980] - (2017-04-16T10:20:27Z) - [Makefile fixes](https://github.com/elixir-lang/elixir/pull/5980)



#### [#5977] - (2017-04-16T10:19:28Z) - [Improvements to elixirc command](https://github.com/elixir-lang/elixir/pull/5977)



#### [#5984] - (2017-04-12T09:55:21Z) - [Replace calls to :maps.update/3 with Map.replace!/3](https://github.com/elixir-lang/elixir/pull/5984)

Also replace call to `:lists.delete/2` with `List.delete/2`

#### [#5978] - (2017-04-11T12:37:41Z) - [Replace :maps calls with Map in Kernel.struct](https://github.com/elixir-lang/elixir/pull/5978)



#### [#5973] - (2017-04-11T07:32:54Z) - [Rename ambiguous "atom" argument to "tag" in Record module functions](https://github.com/elixir-lang/elixir/pull/5973)

"atom" could be either the "name" or "tag" of a record.

#### [#5976] - (2017-04-10T13:54:39Z) - [Use `negate` instead of `neg` for coherence](https://github.com/elixir-lang/elixir/pull/5976)

@whatyouhide I realized there was a second example using `neg`, I believe it makes sense to use `negate` again, for coherence with the previous definition (though technically they are different examples).

What do you think?

#### [#5974] - (2017-04-10T10:47:34Z) - [Cover calls to anonymous functions in `:.` docs [ci skip]](https://github.com/elixir-lang/elixir/pull/5974)

Title says it all.

I assumed in the first paragraph that invoking an anonymous function is not a "remote call", but I am not 100% sure about the terminology here. If that is incorrect I'll revise :).

#### [#5971] - (2017-04-10T10:29:05Z) - [Document --help option in elixir command and include long version of --version](https://github.com/elixir-lang/elixir/pull/5971)



#### [#5970] - (2017-04-10T10:28:12Z) - [Standardize elixirc bin files](https://github.com/elixir-lang/elixir/pull/5970)

- Use present continuous in elixirc bin files
- Align descriptions of options in elixirc bin files

#### [#5972] - (2017-04-10T10:26:26Z) - [Standardize iex bin files ](https://github.com/elixir-lang/elixir/pull/5972)



#### [#5975] - (2017-04-10T10:24:41Z) - [Make it more clear that file permissions are octal](https://github.com/elixir-lang/elixir/pull/5975)

The font used in the rendered docs does not differentiate `0` and `o`
very well. Put the flags in inline code blocks so that they use a
monospace font that's more unambiguous.

Also, add a short sentence stating that the flags are octal.

## Before

![image](https://cloud.githubusercontent.com/assets/60145/24854696/6538bf80-1dad-11e7-8e39-876f549474ce.png)

## After

![image](https://cloud.githubusercontent.com/assets/60145/24854669/4af31468-1dad-11e7-8758-60c44f46ec83.png)


#### [#5932] - (2017-04-10T05:18:54Z) - [Complete typespecs for Record module](https://github.com/elixir-lang/elixir/pull/5932)



#### [#5946] - (2017-04-09T17:41:38Z) - [Integer.gcd/2 improvements ](https://github.com/elixir-lang/elixir/pull/5946)

* 	Optimize Integer.gcd/2 when dealing with same integers
* 	Add spec for edge-case in Integer.gcd/2
/cc @fxn @lexmag @Qqwy 

#### [#5968] - (2017-04-08T17:57:28Z) - [Minor doc cleanup](https://github.com/elixir-lang/elixir/pull/5968)



#### [#5960] - (2017-04-03T10:16:53Z) - [Removes .gitignore pattern for generated lexer [ci skip]](https://github.com/elixir-lang/elixir/pull/5960)

In the beginning of times Elixir used [`leex`](http://erlang.org/doc/man/leex.html), a tokenizer generator that took as input the .xrl file removed in 2f1f1393c9b6055114eee438e5444e010241a37e.

The Erlang scanner was introduced in 2b48933b9320b8a566c2d8aeaea41174d2b1569d.

#### [#5958] - (2017-04-03T04:43:25Z) - [Comment edit in registry.ex [ci skip]](https://github.com/elixir-lang/elixir/pull/5958)

Small copy change

#### [#5957] - (2017-04-02T00:23:05Z) - [Fix ExUnit.Diff when comparing maps with nil or boolean keys](https://github.com/elixir-lang/elixir/pull/5957)

All of 
```elixir
assert %{nil => 42} == %{}
assert %{true => 42} == %{}
assert %{false => 42} == %{}
```
resulted in a `MatchError`, instead of proper diffs.

#### [#5955] - (2017-03-31T23:21:45Z) - [Add parentheses to the aliases example](https://github.com/elixir-lang/elixir/pull/5955)



#### [#5949] - (2017-03-31T11:43:25Z) - [Improve doc for GenServer.whereis/1](https://github.com/elixir-lang/elixir/pull/5949)

Minor documentation edits around `GenServer.whereis/1`.

#### [#5942] - (2017-03-30T23:47:09Z) - [Add information about after clause timeout limit](https://github.com/elixir-lang/elixir/pull/5942)

Source: http://erlang.org/doc/reference_manual/expressions.html#id80928

#### [#5945] - (2017-03-30T09:38:05Z) - [Adds a test suite for Integer.gcd/2](https://github.com/elixir-lang/elixir/pull/5945)

The current examples for `Integer.gcd/2` have some redundancy, and the function itself has no test suite.

This patch selects some examples just for illustration purposes:

* There is one with coprime numbers.
* There is one where GCD is not 1.
* There is one with negative numbers.
* A couple involving 0s.

Then, the test suite has more stuff.

#### [#5944] - (2017-03-30T09:29:55Z) - [Document the edge case Integer.gcd(0, 0)](https://github.com/elixir-lang/elixir/pull/5944)

The description of `Integer.gcd`

> This is the largest positive integer that divides both `int1` and `int2` without leaving a remainder.

does not cover the edge case where both arguments are 0, because 0 divides no integer (and oftentimes 0 is not considered to be a positive number either, but that is a minor nuance).

The examples section does have a call that demonstrates the behaviour, but I guess users will be less surprised if the description is complete explaining the edge case, and explaining why does it return precisely 0.

This is a convention in its mathematical definition, it could return 7 for that matter, but it is convenient/practical to be defined as 0.

You can double-check this rationale in [Wolfram Alpha](https://www.wolframalpha.com/input/?i=gcd(0,0)) for example (click on "Step-by-step solution").

#### [#5923] - (2017-03-28T12:24:31Z) - [Improve {(Naive)DateTime, Date, Time}.diff/2](https://github.com/elixir-lang/elixir/pull/5923)

- Uses a coherent and more efficient implementation for the difference functions that only converts to `System.time_unit` after the difference has been calculated using rata die / day fractions.
- Fixes a bug in the current implementation of `DateTime.diff`.

Fixes #5920.

#### [#5921] - (2017-03-27T10:58:06Z) - [Improve docs and specs for {(Naive)DateTime, Date, Time}.convert/2](https://github.com/elixir-lang/elixir/pull/5921)

This PR builds on top of the now-merged #5841. Fixes #5919.

It adds/improves documentation and specs to NaiveDateTime.convert, Date.convert, Time.convert and DateTime.convert.



#### [#5918] - (2017-03-27T10:57:16Z) - [Fix warning when asserting a pattern that always match](https://github.com/elixir-lang/elixir/pull/5918)

Assertion macro generated a case statement that can have patterns that
cannot match. For example:

```Elixir
test "warning" do
  assert a = %{a: 1}[:a]
  a #don't complain about unused var
end
```

Would generate the following output
```Bash
warning: this clause cannot match because a previous clause at line 7
always matches
```

#### [#5935] - (2017-03-27T10:01:00Z) - [Revises grammar in Mix.Config config template [ci skip]](https://github.com/elixir-lang/elixir/pull/5935)

Saw the sentence

> You can configure for your application as:

Since I was on it, I believe the connection with the next line naturally flows as a single sentence, because a displayed code snippet is not a paragraph separator necessarily.

Then we can still start with uppercase the third one, reads well because it separates a "my app config" block from "3rd-party config".

#### [#5931] - (2017-03-26T16:26:56Z) - [Be clearer explaining how to create a record with a customized tag](https://github.com/elixir-lang/elixir/pull/5931)

Previously the tag name is the same name as the module the records is defined in,
so it may not be clear.

#### [#5933] - (2017-03-26T13:13:09Z) - [Add missing comma](https://github.com/elixir-lang/elixir/pull/5933)

Just a missing comma in the documentation of `Logger`.

#### [#5930] - (2017-03-25T16:58:33Z) - [Remove unused import in Calendar.ISO](https://github.com/elixir-lang/elixir/pull/5930)

warning: unused import Integer
  lib/calendar/iso.ex:28

Introduced in d017c5ab1222fef2f114f327767c33c9310f7b52
/cc @Qqwy 

#### [#5925] - (2017-03-25T16:03:00Z) - [Replace compile_error/4 with form_error/4 in elixir_erl_compiler](https://github.com/elixir-lang/elixir/pull/5925)



#### [#5928] - (2017-03-25T13:05:55Z) - [Restore (deprecated) Integer.to_char_list/2](https://github.com/elixir-lang/elixir/pull/5928)

A regression was introduced in 9c0d6a that removed `Integer.to_char_list/2`, while it should have been hard-deprecated (in favour of `.to_charlist/2`) to be eventually removed in 2.0.

    ** (UndefinedFunctionError) function Integer.to_char_list/2 is undefined or private. Did you mean one of:

          * to_char_list/1

This patch adds `Integer.to_char_list/2` back, which calls `Integer.to_charlist/2` and is deprectated in dispatch, so it produces a deprecation warning (instead of an UndefinedFunctionError) when called:

    warning: Integer.to_char_list/2 is deprecated, use Integer.to_charlist/2

‚ö†Ô∏è I've added tests for both [`Integer.to_char_list/1`](https://github.com/jeffkreeftmeijer/elixir/blob/e37751ce1230075aae808bcb12dd2f0ac7a22eef/lib/elixir/test/elixir/integer_test.exs#L208-L210) and [`Integer.to_char_list/2`](https://github.com/jeffkreeftmeijer/elixir/blob/e37751ce1230075aae808bcb12dd2f0ac7a22eef/lib/elixir/test/elixir/integer_test.exs#L237-L239), to make sure this doesn't break again. However, these throw deprecation warnings in the test suite and I couldn't find any tests for other deprecated functions, so I'm unsure how this should be properly tested. Could you give me some guidance on that?

#### [#5922] - (2017-03-25T12:44:02Z) - [Properly inline map functions](https://github.com/elixir-lang/elixir/pull/5922)

* add missing "Inlined by the compiler." notifications
* internally inline the replace!/3 function delegating to the BIF
* make compiler inline Map.replace!/3 to :maps.update/3

#### [#5927] - (2017-03-24T21:17:02Z) - [Properly document passing strings to Module.split/1](https://github.com/elixir-lang/elixir/pull/5927)



#### [#5869] - (2017-03-24T18:00:41Z) - [Complete typespecs and guards for Module module](https://github.com/elixir-lang/elixir/pull/5869)

There are plenty of changes, that's why the [WIP], but it all guards and typespecs are complete for this module.

There is a common argument which is the `{<function/macro atom>, <arity>}` tuple,
and it make me think whether we need to create a new `type` for this. 

#### [#5917] - (2017-03-23T17:52:50Z) - [{Map, Keyword}.replace/3 and replace!/3](https://github.com/elixir-lang/elixir/pull/5917)

Culmination of [this discussion on the Elixir Forum](https://elixirforum.com/t/updating-structs-map-put-vs-foo-oldfoo-new-value-vs-put-in/4246?u=qqwy).

~~This Pull Request adds the following:~~

- `Map.put_new!/3` which raises a `KeyExistsError` if the key that should be inserted already exists.
- `Map.put_existing/3` which only puts a value in the given map if the key already existed.
- `Map.put_existing!/3` which only puts a value in the given map if the key already existed, and raises a `KeyError` if it did not.
- `Keyword.put_new!/3` which raises a `KeyExistsError` if the key that should be inserted already exists.
- `Keyword.put_existing/3` which only puts a value in the given keyword list if the key already existed.
- `Keyword.put_existing!/3` which only puts a value in the given keyword list if the key already existed, and raises a `KeyError` if it did not.
- The afore-mentioned `KeyExistsError` exception module.
- Documentation + Doctests for the above.

Note that `Keyword.put_existing` and `Keyword.put_existing!` add a new value to the front of the keyword list without removing the original one. I expect that this is the behaviour we want, but I wanted to draw attention to it to make sure.

----

After discussion below, this is changed to:

- `Map.replace/3` which only puts a value in the given map if the key already existed.
- `Map.replace!/3` which only puts a value in the given map if the key already existed, and raises a `KeyError` if it did not.
- `Keyword.replace/3` which only puts a value in the given keyword list if the key already existed. All earlier values with the same key are deleted from the keyword list.
- `Keyword.replace!/3` which only puts a value in the given keyword list if the key already existed, and raises a `KeyError` if it did not. All earlier values with the same key are deleted from the keyword list.





#### [#5841] - (2017-03-23T16:55:39Z) - [Adds internal Calendar Rata Die format for conversions between Calendars](https://github.com/elixir-lang/elixir/pull/5841)

This Pull Request is a follow-up from @kipcole9 's PR #5603 and the discussion in the [Calendars & Calendar Conversions topic](https://elixirforum.com/t/calendars-calendar-conversions/3119).

The current state of this PR is mainly to rekindle the discussions about this subject: There still are a few choices we must make before this functionality can be included into Elixir.


----

This checklist will be kept updated as the discussion in this topic evolves.

### Checklist:

- [x] The types `Calendar.day_fraction :: {non_neg_integer, pos_integer, extra: %{}}` and `Calendar.rata_die :: {integer, day_fraction, extra :: %{}}` that are used as internal format to convert between times and datetimes, respectively. An in-day _fraction_ is used to ensure that precision is always high enough.
- [x] The callbacks `Calendar.datetime_to_rata_die(year, month, day, hour, minute, second, millisecond, time_zone, zone_abbr, utc_offset, std_offset)` and `Calendar.datetime_from_rata_die(rata_die)`.
- [x] The callbacks `Calendar.time_to_day_fraction(hour, min, second, millisecond)` and `Calendar.time_from_day_fraction(day_fraction)`.
- [x] A `DateTime.compare/2` function that works across calendars by using `datetime_to_rata_die` instead of `to_unix` as is now the case.
- [x] A `DateTime.diff/2` function that returns the difference between two datetimes (across calendars) in the `Calendar.rata_die` format.
- [x] Change functions in new version of Calendar to work with bare arguments/tuples instead of structs to prevent cyclic dependencies.
- [x] Make sure that the timekeeping types in Calendar are also overspecified (just like the datekeeping types already are).
- [x] Add a :calendar field to %Time{}.
- [x] Alter functions that create %Time{} structs to include the new `:calendar` field.
- [x] Add `@callback day_rollover_relative_to_midnight_utc() :: day_fraction` to the Calendar behaviour, which is used to check if `Date`s and `NaiveDateTime`s (rather than only `DateTime`s) can be converted between two calendars.
- [x] Change from_erl, from_iso8601, from_unix, utc_now, utc_today and their bang-variants to versions that take a second optional 'target calendar' argument (defaulting to Calendar.ISO). 
  - [x] DateTime
  - [x] Date
  - [x] Time
  - [x] NaiveDateTime
- [x] Change the `to_*` so they dispatch on their containing calendar's datetime_to_rata_die, before converting to the external format.
  - [x] DateTime
  - [x] Date
  - [x] Time
  - [x] NaiveDateTime
- [x] Mechanism to prevent bogus times/dates: `valid_date?`, `valid_time?`, `valid_datetime?`, `valid_naive_datetime?`.
- [x] Timezone information only handled by DateTime. (see `DateTime.apply_tz_offset`)
- [ ] Documentation for `Date.compare, Time.compare, DateTime.compare, NaiveDateTime.compare` that explain when you can/cannot compare across calendars.
- [ ] ~~~Alter the Rata Die format to contain a map with 'extra' data that can be used to keep metadata during the conversion if the source and target calendar both understand the given options.~~~
- [ ] Expansive tests for the above, including another Calendar (visible during testing only) to convert between.
- [ ] fixed specs for the altered and new functions.

### To be discussed:

- [x] Should we include a second (simple!) Calendar implementation to be able to test/explain (doctests) conversions properly?
  - -> In tests only.
- [x] How is checked that a newly-created (Naive)(Date)(Time)-struct is valid? Add `valid_datetime?` etc. to the Calendar behaviour?
  - -> `valid_time?`, `valid_date?`, `valid_datetime?`, `valid_naive_datetime?`.
- [x] Who is responsible for handling timezones: DateTime or the Calendar? Or a new Chronology module?
  - -> Deferred to a later time when we have empirical evidence; keep this in DateTime for now.

----

### This Pull Request will add the following to Elixir:
(This list is superseded by above checklist)

- The types `Calendar.day_fraction :: {non_neg_integer, pos_integer}` and `Calendar.rata_die :: {integer, day_fraction}` that are used as internal format to convert between times and datetimes, respectively. An in-day fraction is used to ensure that precision is always high enough.
- The callbacks `Calendar.datetime_to_rata_die(datetime)` and `Calendar.datetime_from_rata_die(rata_die)`.
- The callbacks `Calendar.time_to_day_fraction(time)` and `Calendar.time_from_day_fraction(day_fraction)`. Note that these are not used by other code yet, as the `%Time{}` struct does not contain Calendar information. (See below).
- A `DateTime.compare/2` function that works across calendars by using `datetime_to_rata_die` instead of `to_unix` as is now the case.
- A `DateTime.diff/2` function that returns the difference between two datetimes (across calendars) in the `Calendar.rata_die` format.
- ~~~Two functions in `Integer`, namely `Integer.div_mod/2` and `Integer.gcd/2` that are required in multiple places in the calendar code, so I extracted them there.~~~
- Doctests for the above.

### Important to note: 

- `Date`s are by design _not_ convertible across calendars. If you want to convert a date, you'll need to convert it to a DateTime (and thus pick some reference time to use). The reference time you pick matters, as not all calendars roll over to the next day on midnight (some do at noon, others at dusk, etc). Without specifying a reference time, the result might therefore be ambiguous. What reference time to pick is an explicit choice that the developer should make, in my opinion.
- `NaiveDateTimes` are not convertible for exactly the same reason: They will only be unambiguous if their timezone is specified.
- This PR explicitly does _not_ add all the behaviour that @kipcole9 ¬¥s PR had. Iterating over days or other ranges of time etc. would be wonderful, but embellishment is only useful once we've agreed on the base. 


### Other things I've stumbled upon and would like to note:

- In the current Elixir, `Time` does not contain nor use Calendar information at all. I think it would be a good idea to add this (staying backwards compatible of course), because this implicit, hard-coded dependency on it using Calendar.ISO underwater means that constructing functions like `NaiveDateTime.new(date, time)` do not make sense when used for other calendars. More importantly, it will make it possible to construct and compare times across calendars, etc, as Calendar can then dispatch to the proper Calendar behaviour based on the `:calendar` field of the map passed to its functions.
- The implementation of `Calendar.ISO`'s `datetime_to_rata_die` and `datetime_from_rata_die` do not handle leap seconds, as there is no way for Elixir to know about them. The only possibility for a calendar that does support leap seconds that I can think of, is a 3rd party package that reads its info from the `:tzdata` package. Calendar.ISO's conversions will be off by at most `86400/864001`th of a day during a leap second day. (And will be correct again after that day).
- Functions like `NaiveDateTime.compare(left, right)` and `Date.compare(left, right)` do not care if the calendars of `left` and `right` are the same. This is something that should be fixed (regardless of whatever happens to the rest of this Pull Request). (**EDIT:** #5842 was made)
- There are multiple other functions in Date, Time and DateTime that implicitly depend on a Calendar.ISO format being used, such as `from_erl`, `to_erl`, `to_unix`, etc. This means that these modules are taking care of three different concerns right now. For instance, DateTime is:
  - the module containing functions that only work on ISO DateTimes.
  - the module containing functions that should work with any DateTimes, regardless of struct used (any map goes as long as it contains the expected fields).
  - The module being responsible for the creation and manipulation of the `%DateTime{}` struct.

We might therefore want to split these modules, into e.g. `DateTime` and `Calendar.ISO.DateTime`. But this will be somewhat problematic in terms of backwards compatibility. Any ideas?

-----

All help and feedback is greatly welcome! :-)






#### [#5915] - (2017-03-23T15:35:58Z) - [Use GenServer.stop/3 instead of :gen.stop/3 in Agent.stop/3](https://github.com/elixir-lang/elixir/pull/5915)

`GenServer.stop/3` is available and it calls `:gen.stop/3` anyways, but at least this way we consistently call out to the `GenServer` module :)

#### [#5916] - (2017-03-23T15:30:47Z) - [Replace compile_error/4 with form_error/4 in elixir_import](https://github.com/elixir-lang/elixir/pull/5916)



#### [#5895] - (2017-03-22T15:53:19Z) - [Mix archive.install parse file before installing](https://github.com/elixir-lang/elixir/pull/5895)

This allows to ignore file naming convention and install correctly even if file name is changed.
Solves https://github.com/elixir-lang/elixir/issues/5882

#### [#5818] - (2017-03-22T00:18:59Z) - [Enum refactoring](https://github.com/elixir-lang/elixir/pull/5818)

* Avoid do_ names in enum implementation
* Refactor enum list functions to body-recursive where sensible
  The reasoning is the same as in #3811 and 99e0d8e

#### [#5911] - (2017-03-21T23:21:00Z) - [Perform only single protocol dispatching on Enum.fetch/2](https://github.com/elixir-lang/elixir/pull/5911)

Extracted from https://github.com/elixir-lang/elixir/pull/5818

#### [#5908] - (2017-03-21T19:32:01Z) - [Document and test function/0 built-in type](https://github.com/elixir-lang/elixir/pull/5908)

Originally discussed in https://github.com/elixir-lang/elixir/pull/5876

#### [#5907] - (2017-03-21T18:41:08Z) - [Validate options for comprehension](https://github.com/elixir-lang/elixir/pull/5907)

This change raises error when invalid keys are give to "for" loops and
prevents silent errors.

#### [#5910] - (2017-03-21T18:29:42Z) - [Add space after semi-colon in Issue Template](https://github.com/elixir-lang/elixir/pull/5910)

It will make it easier for people to fill out the template

#### [#5906] - (2017-03-21T18:28:03Z) - [Clarify starting value in scan/2 documentation](https://github.com/elixir-lang/elixir/pull/5906)

Because scan/2 and scan/3 examples had similar input and output, readers could mistake
the default value to be 0. The new code clarifies that.

p.s. Why don't we implement scan/2 by taking first the value and calling scan/3?

#### [#5904] - (2017-03-20T13:47:43Z) - [Improve docs for Process.link/1](https://github.com/elixir-lang/elixir/pull/5904)

Closes #5889.

#### [#5903] - (2017-03-19T14:57:09Z) - [Use passed value for raise_merge_reserved!/3](https://github.com/elixir-lang/elixir/pull/5903)

While working on #5901, I found that the wrong value was passed to `ExUnit.Callbacks.raise_merge_reserved!/3`, which caused the current value to be used in the error message instead of the one passed in the context. With a setup block like this:

    setup do
      {:ok, file: "foo"}
    end

The error message uses the current `:file` value (the path to the test file) instead of the passed one ("foo"):

     ** (RuntimeError) ExUnit callback in MyAppTest is trying to set reserved field :file to "/path/to/test/my_app_test.exs"

This one-character patch uses the passed value instead, resulting in an error message like this:

     ** (RuntimeError) ExUnit callback in MyAppTest is trying to set reserved field :file to "foo"

#### [#5901] - (2017-03-19T11:47:35Z) - [Add original values to context merging in ExUnit](https://github.com/elixir-lang/elixir/pull/5901)

Closes #5898.

Since 58377cd, `ExUnit.Callbacks.__merge/3` is a recursive function which drops the `:ok` atom from the passed value if the value is an ok-tuple. This caused potential errors raised by `raise_merge_failed!/2` to show only part of the passed value in the error message.

Returning `{:ok, "foo"}` from a setup block produced an error like this:

    ** (RuntimeError) expected [...] got \"foo\" instead

This patch adds `ExUnit.Callbacks.__merge/4`, which is called by `__merge__/3` with adds the original value as the fourth argument, to be able to display the full value:

    ** (RuntimeError) expected [...] got {:ok, \"foo\"} instead

#### [#5899] - (2017-03-18T20:22:16Z) - [Optimize Map.merge/3 by choosing merge direction](https://github.com/elixir-lang/elixir/pull/5899)

This produces order of magnitude improvement on the best case, where source map is empty.

You can see benchmark [script](https://github.com/tsubery/misc_bench/pull/1) and results on [travis](https://travis-ci.org/tsubery/misc_bench/builds/212359883).

#### [#5900] - (2017-03-18T10:44:27Z) - [Fix documentation of Kernel.use](https://github.com/elixir-lang/elixir/pull/5900)



#### [#5896] - (2017-03-17T09:43:57Z) - [Underscore unused variables in test suite](https://github.com/elixir-lang/elixir/pull/5896)

Prevents compiler warnings when running tests

#### [#5894] - (2017-03-16T18:25:24Z) - [Fix the behaviour of defdelegate/2 with default arguments](https://github.com/elixir-lang/elixir/pull/5894)

When default arguements (`\\`) are used with `defdelegate/2`, a function is generated for each default argument and each generated function calls the delegate target function with the same arity. For example:

```elixir
defdelegate demonitor(monitor_ref, options \\ []), to: :erlang
```

will be expanded to

```elixir
def demonitor(monitor_ref), do: :erlang.demonitor(monitor_ref)
def demonitor(monitor_ref, options), do: :erlang.demonitor(monitor_ref, options)
```

However, this seems to "break" the expectation that optional arguments set: when a function has optional arguments, all the additional functions with lower arity that are generated by the default arguments only call the function with maximum arity with the default values provided for the optional arguments.

This means that if `:erlang.demonitor/1` had a different behaviour than `:erlang.demonitor/2`, then it would be hard to guess why because the expectation is that `demonitor(monitor_ref)` only calls `demonitor(monitor_ref, [])`, ending up always to `:erlang.demonitor/2`.

This PR fixes this by leaving the signature of the functions to delegate untouched (with optional arguments if present).

With this PR, `defdelegate demonitor(monitor_ref, options \\ []), to :erlang` will become

```elixir
def demonitor(monitor_ref, options \\ []) do
  :erlang.demonitor(monitor_ref, options)
end
```

#### [#5893] - (2017-03-16T17:20:57Z) - [Add float overflow error message to Tokenizer](https://github.com/elixir-lang/elixir/pull/5893)

Changes the error message to be

```Elixir
Interactive Elixir (1.5.0-dev) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> 1.0e310
** (SyntaxError) iex:1: float number out of range 1.0e310
```
Instead of 
```Elixir
Interactive Elixir (1.4.2) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> 1.0e310           
** (ArgumentError) argument error
             :erlang.list_to_float('1.0e310')
    (elixir) src/elixir_tokenizer.erl:765: :elixir_tokenizer.tokenize_number/4
    (elixir) src/elixir_tokenizer.erl:423: :elixir_tokenizer.tokenize/5
```




#### [#5875] - (2017-03-16T17:04:19Z) - [Typespecs changes](https://github.com/elixir-lang/elixir/pull/5875)



#### [#5885] - (2017-03-16T16:41:47Z) - [Use defdelegate/2 whenever possible in Process module](https://github.com/elixir-lang/elixir/pull/5885)

Originally discussed in https://github.com/elixir-lang/elixir/pull/5880#discussion_r106071471

#### [#5891] - (2017-03-16T16:10:07Z) - [Improve docs of Process.monitor/1](https://github.com/elixir-lang/elixir/pull/5891)

I always forget the shape of the monitor message, and find it extremely frustrating it's not there, when I try to look it up in the docs.

#### [#5892] - (2017-03-16T16:08:45Z) - [Add metadata: :all option to Logger.Backends.Console](https://github.com/elixir-lang/elixir/pull/5892)

Hi Jos√© and friends!

As discussed on [elixir-lang-core](https://groups.google.com/d/msg/elixir-lang-core/CjVhZj0j7kk/m5bqZ3qfAwAJ) this pull-request adds a `:all` option to the `metadata` configuration option for `Logger.Backends.Console`.

In addition I added a test that verifies that you can configure the `format` option with a `{module, :func}` format.

I want to mention that I had some trouble running the tests. Unless I did a forced compile before running the tests I got random failing tests so I ended up running my tests using:
```
MIX_ENV=test mix do compile --force, test -- test/logger/backends/console_test.exs
```

Best regards

Simon Boisen
CTO, Lix Technologies

#### [#5890] - (2017-03-16T15:45:33Z) - [Remove unnecessary indirection in Task.find/2](https://github.com/elixir-lang/elixir/pull/5890)



#### [#5878] - (2017-03-16T08:50:45Z) - [Reword String.to_float documentation](https://github.com/elixir-lang/elixir/pull/5878)

Clarify the difference between ```String.to_float/1``` and
```Float.parse/1```


#### [#5884] - (2017-03-16T08:49:34Z) - [Add spec to Process.sleep/1](https://github.com/elixir-lang/elixir/pull/5884)

Originally discussed in https://github.com/elixir-lang/elixir/pull/5880#discussion_r106071314

#### [#5886] - (2017-03-16T08:48:55Z) - [Inline functions in Process module](https://github.com/elixir-lang/elixir/pull/5886)



#### [#5879] - (2017-03-16T08:46:20Z) - [Add nonempty_charlist/0 built-in type](https://github.com/elixir-lang/elixir/pull/5879)

I think this is the only built-in type that we've been missing.


#### [#5883] - (2017-03-16T08:40:07Z) - [Fix typespec for Task.async/1, Task.Supervisor.async/2 and friends](https://github.com/elixir-lang/elixir/pull/5883)



#### [#5877] - (2017-03-14T09:35:03Z) - [Typo in uri.ex](https://github.com/elixir-lang/elixir/pull/5877)



#### [#5874] - (2017-03-14T09:33:33Z) - [Add missing word in URI module doc](https://github.com/elixir-lang/elixir/pull/5874)

Fixes missing words removed in https://github.com/elixir-lang/elixir/commit/b191f6bf1f767f93c752370a851f45549a8d6b45

#### [#5868] - (2017-03-13T15:13:26Z) - [Add guard to OptionParser.split/1](https://github.com/elixir-lang/elixir/pull/5868)



#### [#5867] - (2017-03-13T15:01:22Z) - [Improve File.cp_r/3 regarding callback argument](https://github.com/elixir-lang/elixir/pull/5867)



#### [#5862] - (2017-03-13T14:27:09Z) - [Expose generated seed and max_cases options](https://github.com/elixir-lang/elixir/pull/5862)

This PR adds `:seed` and `:max_cases` to the existing `ExUnit.configuration/0` function.

#### [#5865] - (2017-03-12T20:20:46Z) - [Ensures NaiveDateTime.to_iso8601/1 raises for non-Calendar.ISO structs.](https://github.com/elixir-lang/elixir/pull/5865)

fixes #5864:

-  `NaiveDateTime.to_iso8601/1`  will raise a descriptive ArgumentError when a NaiveDateTimes that follow a non-Calendar.ISO calendar is passed to it.
- A test to ensure that this indeed works as intended.
- (Tests for the happy path where a NDT that has Calendar.ISO are not added, as the doctests of `NaiveDateTime.to_iso8601/1` already cover this).

#### [#5866] - (2017-03-12T17:43:35Z) - [Minor fixup of Enum.map_join/3 docs.](https://github.com/elixir-lang/elixir/pull/5866)

The docs weren't quite correct, the binary convertibility of the
enumerable does not come into play in this function, only the result
of the `mapper` function call on each element of the enumerable.

#### [#5863] - (2017-03-11T19:39:00Z) - [Typo in Deprecations.md](https://github.com/elixir-lang/elixir/pull/5863)



#### [#5860] - (2017-03-11T18:59:26Z) - [Provide a Mix Task example with use of args](https://github.com/elixir-lang/elixir/pull/5860)

A question came up in the Elixir slack regarding command line arguments to mix tasks. I thought it would be useful to provide the use of args in the example.

#### [#5853] - (2017-03-11T17:43:36Z) - [OptionParser: Reduce number of params in functions](https://github.com/elixir-lang/elixir/pull/5853)

This commit also mark `OptionParser.get_option_key/2` as private,
this function is not documented and it seems that is only used internally.

#### [#5861] - (2017-03-11T16:12:41Z) - [Add more clarity on how reduce works through each iteration](https://github.com/elixir-lang/elixir/pull/5861)

`Enum.reduce` will emit the result of the previous function as the accumulator for the next item. This point didn't seem very evident to me when I was looking up the `Enum.reduce` related documentation [here](https://hexdocs.pm/elixir/Enum.html#reduce/2). This PR is an attempt to make this more clearer for anyone who wants to better understand how `Enum.reduce` works through each iteration.

Thanks to @josevalim for the wonderful explanation wrt the usage of `Enum.reduce` as part of [this stackoverflow question](http://stackoverflow.com/questions/29924170/elixir-looping-through-and-adding-to-map). It helped me better understand how `Enum.reduce` actually works.

#### [#5859] - (2017-03-10T19:34:18Z) - [Optimise integer parsing](https://github.com/elixir-lang/elixir/pull/5859)

* Use single binary match context
* Do minimal pattern matches and maths

#### [#5858] - (2017-03-10T09:53:47Z) - [Implicitly document dependency sources](https://github.com/elixir-lang/elixir/pull/5858)



#### [#5855] - (2017-03-09T22:55:44Z) - [Propose new styling for generated applications](https://github.com/elixir-lang/elixir/pull/5855)

Instead of:

```elixir
defmodule HelloWorld.Mixfile do
  use Mix.Project

  def project do
    [app: :hello_world,
     version: "0.1.0",
     elixir: "~> 1.5-dev",
     build_embedded: Mix.env == :prod,
     start_permanent: Mix.env == :prod,
     deps: deps()]
  end

  # Configuration for the OTP application
  #
  # Type "mix help compile.app" for more information
  def application do
    # Specify extra applications you'll use from Erlang/Elixir
    [extra_applications: [:logger]]
  end

  # Dependencies can be Hex packages:
  #
  #   {:my_dep, "~> 0.3.0"}
  #
  # Or git/path repositories:
  #
  #   {:my_dep, git: "https://github.com/elixir-lang/my_dep.git", tag: "0.1.0"}
  #
  # Type "mix help deps" for more examples and options
  defp deps do
    []
  end
end
```

we propose:

```elixir
defmodule HelloWorld.Mixfile do
  use Mix.Project

  def project do
    [
      app: :hello_world,
      version: "0.1.0",
      elixir: "~> 1.5-dev",
      start_permanent: Mix.env == :prod,
      deps: deps()
    ]
  end

  # Run "mix help compile.app" to learn about applications.
  def application do
    [
      extra_applications: [:logger]
    ]
  end

  # Run "mix help deps" to learn about dependencies.
  defp deps do
    [
      # {:dep_example, "~> 0.3.0"},
      # {:dep_example, git: "https://github.com/elixir-lang/my_dep.git", tag: "0.1.0"},
    ]
  end
end
```

The changes are:

  * Use new line after `[` and `]` for multi-line constructs for easier manipulation. If accepted, this will be a new rule throughout the Elixir codebase (but please do no send pull request for changing the style, those won't be merged)

  * Rely less on comments and more on the available documentation


#### [#5848] - (2017-03-08T18:48:52Z) - [Update documentation of the Process module](https://github.com/elixir-lang/elixir/pull/5848)

Expands the documentation for `Process.sleep/1` with a sentence on suspended processes, as referenced in #5847.

#### [#5850] - (2017-03-08T08:36:38Z) - [Fix typo in mix deps.compile moduledoc](https://github.com/elixir-lang/elixir/pull/5850)

Missing "to" in deps.compile task description.

#### [#5840] - (2017-03-05T22:35:30Z) - [Fix a few typos in Deprecations.md](https://github.com/elixir-lang/elixir/pull/5840)



#### [#5834] - (2017-03-05T15:35:21Z) - [Add Mix.Tasks.Profile.Cprof and its tests](https://github.com/elixir-lang/elixir/pull/5834)

As spoken in [the Elixir Core Mailing List](https://groups.google.com/forum/#!topic/elixir-lang-core/LeB8G1_CSQI) here's the proposed `Mix.Tasks.Profile.Cprof` to profile code using Erlang's `:cprof` and its tests. 

The logic was largely reused from `Mix.Tasks.Profile.Fprof`, but the functions are not shared (i.e., there are equal private functions in both tasks). 

I'd like some feedback on the Module parsing from the cmd args to actual atoms (the `parse_func_spec` function mainly). Some of this was done based on suggestions by @whatyouhide on Slack.

Thanks!

#### [#5807] - (2017-03-05T10:13:14Z) - [Add deprecations in CHANGELOG.md](https://github.com/elixir-lang/elixir/pull/5807)



#### [#5836] - (2017-03-05T10:09:30Z) - [Add instructions to RELEASE to update Deprecations page](https://github.com/elixir-lang/elixir/pull/5836)

Additionally correct link in master

#### [#5837] - (2017-03-05T10:08:37Z) - [Add line break in NOTE in Deprecations page](https://github.com/elixir-lang/elixir/pull/5837)



#### [#5838] - (2017-03-05T10:08:16Z) - [Add test for OptionParser.parse/2 when it raises](https://github.com/elixir-lang/elixir/pull/5838)



#### [#5839] - (2017-03-05T10:07:55Z) - [Use clearer comment in OptionParser example](https://github.com/elixir-lang/elixir/pull/5839)



#### [#5835] - (2017-03-04T21:41:21Z) - [Add MapSet.map_set?/1 function](https://github.com/elixir-lang/elixir/pull/5835)

I wanted a function to check if an object is a map set, so I added one!

    iex(1)> MapSet.new() |> MapSet.map_set?()
    true

## Should this edge case a bug?

While adding both ExUnit and DocTest tests, I did bump into an edge case.

    # it's likely no one intentionally builds a MapSet w/ non-true values
    # but I did think of it as a use case
    iex(9)> maybe_map_set = %{__struct__: MapSet, map: %{a: false}}
    #MapSet<[:a]>

    # it walks and talks like a MapSet
    iex(10)> maybe_map_set |> MapSet.map_set?
    true
    iex(11)> %MapSet{} = maybe_map_set
    #MapSet<[:a]>

    # but this just looks weird!
    iex(12)> maybe_map_set |> Map.values
    [MapSet, %{a: false}]


#### [#5808] - (2017-03-04T09:36:33Z) - [Add Deprecations page](https://github.com/elixir-lang/elixir/pull/5808)

First draft.
I need your input where you see the __"???"__

let me know what you all think

#### [#5802] - (2017-03-03T20:33:55Z) - [Implement own version of List.starts_with?/2](https://github.com/elixir-lang/elixir/pull/5802)

As discussed in the mailing list.
The function raises if `prefix` is an improper list.

Please let me know if that's the best way to detect an improper list.
I think it fits well, because we make use of the `length` results to avoid traversing and comparing elements unnecessarily.

#### [#5829] - (2017-03-03T20:19:26Z) - [Strip debug information from escripts by default and add option :strip_beam](https://github.com/elixir-lang/elixir/pull/5829)

This is a PR for #5688.  I went with `:strip_beam` because BEAM can work as a plural/collective noun, but I will change it to `:strip_beams` if you want.

#### [#5828] - (2017-03-02T20:45:11Z) - [Update InvalidVersionError & InvalidRequirementError messages](https://github.com/elixir-lang/elixir/pull/5828)

Before this, I got an unhelpful error message:

```
iex> "1.0.0\n1.1.0\n" |> String.split("\n") |> Enum.map(&Version.parse!/1)
** (Version.InvalidVersionError)
```

now it's:

```
** (Version.InvalidVersionError) expected a valid version string, got: ""
```

#### [#5827] - (2017-03-01T11:06:33Z) - [Fix dir? documentation](https://github.com/elixir-lang/elixir/pull/5827)

`File.dir` != `File.dir?`

#### [#5826] - (2017-03-01T09:13:00Z) - [Fix Integer invalid base error message](https://github.com/elixir-lang/elixir/pull/5826)



#### [#5825] - (2017-02-28T22:35:15Z) - [Support of ETS guard conditions for Registry.match](https://github.com/elixir-lang/elixir/pull/5825)

PR according to [Elixir Core Mailing List Proposal](https://groups.google.com/forum/#!topic/elixir-lang-core/SXNog8I-UYw)

#### [#5824] - (2017-02-28T18:06:30Z) - [Replace 'parenthise' (sic) with 'wrap_in_parenthesis'](https://github.com/elixir-lang/elixir/pull/5824)



#### [#5820] - (2017-02-28T15:08:54Z) - [Improve Float ceil/round/floor error messages](https://github.com/elixir-lang/elixir/pull/5820)

In the case where precision is out of valid range, the default message is FunctionClause error.
With this commit an ArgumentError will be raised when precision is out of valid range.

This change aligns the behavior with Integer.parse, Float.parse that return ArgumentError on invalid input.

#### [#5819] - (2017-02-27T15:40:10Z) - [Add a security warning to Code.eval_string](https://github.com/elixir-lang/elixir/pull/5819)

This PR adds a warning to the `Code.eval_string` docs about the security consequences of evaling untrusted strings.

You might think that this is obvious or unnecessary, but I've been finding serious security bugs caused by running `eval_string` on untrusted input: https://github.com/tonini/alchemist-server/issues/14; https://github.com/msaraiva/atom-elixir/issues/67

#### [#5821] - (2017-02-27T12:08:32Z) - [Add space after comparison operator in Version example](https://github.com/elixir-lang/elixir/pull/5821)



#### [#5812] - (2017-02-26T14:30:41Z) - [Prevent creation of DateTime above year 10k](https://github.com/elixir-lang/elixir/pull/5812)

This aligns the behavior with NaiveDateTime and prevents exception when
calling DateTime.to_iso8601. It will catch the common case of
interpreting timestamps with the wrong accuracy, i.e. using
DateTime.from_unix(ts) when ts is in microsecond accuracy.

#### [#5816] - (2017-02-24T14:34:14Z) - [Allow comma as the decimal sign for Time, NaiveDateTime, DateTime per ISO 8601](https://github.com/elixir-lang/elixir/pull/5816)

ISO 8601:
>  the decimal fraction shall be divided from the integer part by the decimal sign specified in ISO 31-0, i.e. the comma [,] or full stop [.]. Of these, the comma is the preferred sign.

This PR allows parsing ISO 8601 Time, NaiveDateTime, DateTime with commas.

#### [#5814] - (2017-02-24T10:31:47Z) - [Refer to :net_kernel.monitor_node from Node.monitor](https://github.com/elixir-lang/elixir/pull/5814)



#### [#5811] - (2017-02-23T11:44:05Z) - [Add argument guard for Task.Supervisor.start_child/3](https://github.com/elixir-lang/elixir/pull/5811)

Fixing issue #5801 by adding argument guard for `Task.Supervisor.start_child/3`.


#### [#5810] - (2017-02-23T08:42:45Z) - [Fix typespec of DateTime.from_unix!](https://github.com/elixir-lang/elixir/pull/5810)

It supports negative integers.

#### [#5806] - (2017-02-23T08:06:21Z) - [[trivial][docs] The default implementation of `Enumerable.count/1` does not use `===`](https://github.com/elixir-lang/elixir/pull/5806)

The documentation of `Enumerable.count/1` mentioned that its default implementation makes use of `===`, which is not the case and a bit confusing. The documentation was probably copied and adapted from `Enumerable.member?/2`, whose default implementation _does_ use `===`.

#### [#5789] - (2017-02-21T09:49:57Z) - [Add `List.starts_with?/2`](https://github.com/elixir-lang/elixir/pull/5789)

This is basically just a rename of Erlang's `:lists.prefix/2`.

#### [#5797] - (2017-02-20T16:04:33Z) - [Unify formatting of some common expansion errors](https://github.com/elixir-lang/elixir/pull/5797)

These errors can now be formatted via either `elixir_expand:format_error/1` or
`elixir_clauses:format_error/1`.

#### [#5796] - (2017-02-20T10:54:24Z) - [Unify the error we raise when cond/case/etc don't receive clauses](https://github.com/elixir-lang/elixir/pull/5796)

Before this, we raised one error if we passed a list with some non-clauses in it, and a different error if we passed a non-list.

#### [#5795] - (2017-02-19T21:29:13Z) - [Rename KV to Opts in the Erlang part of the codebase](https://github.com/elixir-lang/elixir/pull/5795)



#### [#5794] - (2017-02-19T21:06:28Z) - [Make the error for local calls in matches/guards uniform](https://github.com/elixir-lang/elixir/pull/5794)

The error for local calls in matches was showing the call, but the one for local calls in guards wasn't.

#### [#5793] - (2017-02-19T18:48:01Z) - [Replace elixir_errors:compile_error/4 with form_error/4 in elixir_exp](https://github.com/elixir-lang/elixir/pull/5793)



#### [#5792] - (2017-02-19T17:43:09Z) - [Move many expansion errors tests from errors_test to expansion_test](https://github.com/elixir-lang/elixir/pull/5792)

I also added a few missing tests that cover errors that happen during expansion.

#### [#5791] - (2017-02-19T11:08:19Z) - [Correctly inspect options for "quote" when an error happens](https://github.com/elixir-lang/elixir/pull/5791)



#### [#5780] - (2017-02-19T00:34:39Z) - [Fix bug in URI.merge](https://github.com/elixir-lang/elixir/pull/5780)

It seems like current implementation miss the case when ref does not have `scheme`, but has `authority`

This PR is for fixing it

#### [#5790] - (2017-02-18T23:31:59Z) - [Get rid of the need for "with" translation](https://github.com/elixir-lang/elixir/pull/5790)



#### [#5788] - (2017-02-18T16:29:04Z) - [Replace compile_error/4 with form_error/4 in elixir_bitstring](https://github.com/elixir-lang/elixir/pull/5788)



#### [#5787] - (2017-02-18T16:19:27Z) - [Rename get_pairs/4 ‚Äì> get_clauses/4 in elixir_clauses](https://github.com/elixir-lang/elixir/pull/5787)



#### [#5786] - (2017-02-18T10:58:37Z) - [Validate type for literal binaries in <<>> during expansion](https://github.com/elixir-lang/elixir/pull/5786)



#### [#5785] - (2017-02-18T09:51:52Z) - [Raise for invalid literals in <<>> during expansion](https://github.com/elixir-lang/elixir/pull/5785)



#### [#5784] - (2017-02-18T08:35:36Z) - [Fix minor typo in Inspect.Algebra doc](https://github.com/elixir-lang/elixir/pull/5784)



#### [#5783] - (2017-02-17T22:16:43Z) - [Raise for size() with literal binaries in <<>> during expansion](https://github.com/elixir-lang/elixir/pull/5783)



#### [#5782] - (2017-02-17T09:36:38Z) - [Enhance the guard guide](https://github.com/elixir-lang/elixir/pull/5782)

Explain the difference between multiple guard clauses and boolean expression
guards in case of failing expressions.

#### [#5779] - (2017-02-16T11:40:14Z) - [Improve some namings and add comments around Task.Supervised](https://github.com/elixir-lang/elixir/pull/5779)



#### [#5739] - (2017-02-16T11:02:00Z) - [Add File.read_link/1 and File.read_link!/1](https://github.com/elixir-lang/elixir/pull/5739)

I have encountered multiple situations where I need to read a link rather than follow it. I think it should be available in Elixir.File rather than having to drop down to Erlang.

#### [#5778] - (2017-02-15T19:50:46Z) - [Hard-deprecate gen_event handlers as ExUnit formatters](https://github.com/elixir-lang/elixir/pull/5778)



#### [#5776] - (2017-02-15T18:40:45Z) - [Remove some rescue-related errors from elixir_translator](https://github.com/elixir-lang/elixir/pull/5776)

I also added tests for such errors in `Kernel.ExpansionTest`.

#### [#5774] - (2017-02-15T16:34:04Z) - [Move "unbound variable ^foo" to elixir_exp](https://github.com/elixir-lang/elixir/pull/5774)



#### [#5765] - (2017-02-15T16:06:54Z) - [Improving the function header def args compilation error](https://github.com/elixir-lang/elixir/pull/5765)

The code:

    def f (x), do: x

was printing the function header definition error because it is parsed
to this:

    def f((x), do: x)

So we made an additional description to the compilation error.

This commit fixes #5761

#### [#5775] - (2017-02-15T15:47:02Z) - [Fix arguments in operators section of syntax reference](https://github.com/elixir-lang/elixir/pull/5775)



#### [#5773] - (2017-02-15T11:00:24Z) - [Check for "unbound variable _" in elixir_exp](https://github.com/elixir-lang/elixir/pull/5773)

I also had to adjust the check for `_ -> ...` clauses in `cond` because right now, it performs such check after expanding the clauses, but with the change in this commit then the `unbound variable _` error would fire first. With this commit, we check for `_ -> ...` clauses before expanding the clauses, which may not be ideal since the clauses could expand to `_ -> ...` but it's a compromise we're willing to make (after all, this error is just a friendlier error than `unbound variable _`, not a necessary one).

#### [#5771] - (2017-02-14T19:25:23Z) - [Drop support for "rescue exception in _"](https://github.com/elixir-lang/elixir/pull/5771)

We never officially supported this, but "accidentally" supported it because of how we implemented `rescue exception` (without `in`). With this commit, we move this step from expansion to `elixir_try`.

#### [#5770] - (2017-02-14T15:44:54Z) - [Explain custom console formatters](https://github.com/elixir-lang/elixir/pull/5770)

Resolves https://github.com/elixir-lang/elixir/issues/5754 although it's a closed issue I think calling out the `:format` option is a good idea.

My first elixir PR so I welcome all feedback.

#### [#5767] - (2017-02-14T10:32:08Z) - [Move compile error for _ in cond to elixir_exp](https://github.com/elixir-lang/elixir/pull/5767)

@josevalim do you think we should remove the test for this error from [`errors_test.exs`](https://github.com/elixir-lang/elixir/blob/68739491bf154f7b369c54206a98e05849fad7e5/lib/elixir/test/elixir/kernel/errors_test.exs#L788-L793)?

#### [#5769] - (2017-02-14T00:01:09Z) - [Stop aliasing :filename to FN in the Path module](https://github.com/elixir-lang/elixir/pull/5769)

In the same vein as
https://github.com/elixir-lang/elixir/pull/5768

#### [#5764] - (2017-02-13T23:22:54Z) - [Move local-calls compile errors from elixir_translator to elixir_exp](https://github.com/elixir-lang/elixir/pull/5764)



#### [#5768] - (2017-02-13T22:47:10Z) - [Stop aliasing :file to F in the File module](https://github.com/elixir-lang/elixir/pull/5768)

This improves readability while still keeping the code short and concise. Single-letter aliases are hard to follow (you have to lookup the `alias` call) and IMO it is misleading to alias what looks like an Elixir module (`F`) to what is an Erlang module.

Thoughts are welcome :)

#### [#5766] - (2017-02-13T19:39:51Z) - [[ci skip] Fix doc in Mix.Config](https://github.com/elixir-lang/elixir/pull/5766)



#### [#5759] - (2017-02-11T19:38:38Z) - [Fixed typo in Registry.start_link arity](https://github.com/elixir-lang/elixir/pull/5759)

This will allow link on Hex.pm to work properly.

#### [#5758] - (2017-02-11T18:09:44Z) - [Revise @doc to reflect current compile/5 params](https://github.com/elixir-lang/elixir/pull/5758)

For example, the callback was removed, and opts added, in 85f5269a, but
the function documentation wasn't updated to reflect those changes.

#### [#5740] - (2017-02-11T18:04:42Z) - [Update .travis.yml to test on macOS](https://github.com/elixir-lang/elixir/pull/5740)



#### [#5755] - (2017-02-11T18:02:58Z) - [Add hard links](https://github.com/elixir-lang/elixir/pull/5755)

As proposed in https://groups.google.com/d/msg/elixir-lang-core/bSDn7lNlOv8/nnybSV27CAAJ

#### [#5751] - (2017-02-11T17:59:39Z) - [Warning for duplicated deps on project root level](https://github.com/elixir-lang/elixir/pull/5751)

This PR closes #5741

#### [#5747] - (2017-02-10T19:39:15Z) - [Implement IEx.Info protocol for calendar types](https://github.com/elixir-lang/elixir/pull/5747)

There's an implementation for Date, Time and NaiveDateTime.
Implementation for DateTime is omitted since it doesn't define the Inspect
protocol.

Closes #5743

#### [#5756] - (2017-02-10T13:26:43Z) - [Added example to Enum.into/3](https://github.com/elixir-lang/elixir/pull/5756)

Making clear how Enum.into/3 can be used with maps.

#### [#5753] - (2017-02-09T19:47:10Z) - [Call respawn/0 using parentheses in the docs](https://github.com/elixir-lang/elixir/pull/5753)

Calling `respawn/0` as currently suggested in the 
docs raises a warning to remove the ambiguity.

#### [#5750] - (2017-02-08T18:33:31Z) - [Comment that the "in" operator on ranges succeeds only on integers](https://github.com/elixir-lang/elixir/pull/5750)

Alternatively, the note could be "Note that only integers can be `in` a range", what do you think ?


Also, thank you very much for the `not in` ‚ù§Ô∏è 

#### [#5744] - (2017-02-07T16:13:21Z) - [Correctly inspect functions with undef arity in Logger.Translator](https://github.com/elixir-lang/elixir/pull/5744)

@josevalim I am not sure if this is the best course of action. This will work, but we keep relying on internals a lot (`Inspect.Function.escape_name/1`). Maybe this is fine. An alternative solution, which I am not a fan of though, would be to do

```elixir
defp format_mfa(mod, fun, :undefined) do
  Exception.format_mfa(mod, fun, 0) |> String.replace_suffix("/0", "/?")
end
```

Thoughts?

#### [#5736] - (2017-02-05T11:19:51Z) - [fix doc](https://github.com/elixir-lang/elixir/pull/5736)



#### [#5733] - (2017-02-04T08:42:53Z) - [Fix typo and grammar in Mix.Tasks.Compile.App doc](https://github.com/elixir-lang/elixir/pull/5733)



#### [#5729] - (2017-02-03T11:19:24Z) - [Rename Mix.Dep.Converger.topsort/1 to topological_sort/1](https://github.com/elixir-lang/elixir/pull/5729)

`topsort` should be renamed `top_sort` but I took the liberty to rename it `topological_sort` for clarity

#### [#5724] - (2017-02-01T19:22:52Z) - [Improve docs for Application](https://github.com/elixir-lang/elixir/pull/5724)



#### [#5723] - (2017-01-31T17:02:44Z) - [Fix map elements order in the example for Map.put_new/3](https://github.com/elixir-lang/elixir/pull/5723)

Even the example for Map.put_new/3 asserts as true in the tests, the correct output is a map with sorted keys.

#### [#5720] - (2017-01-31T10:05:28Z) - [Fix redefined function source location](https://github.com/elixir-lang/elixir/pull/5720)

When functions are redefined in a different file, the translation uses
the first definition source location for all subsequent definitions.
This manifests itself as warnings that are ascribed to the wrong file.

Fixes https://github.com/elixir-lang/elixir/issues/5719

#### [#5715] - (2017-01-30T09:53:40Z) - [Fix deps.get infinite loop on depedency cycles](https://github.com/elixir-lang/elixir/pull/5715)

When Hex.RemoteConverger is called with circular dependency it tries to
flatten the graph and ends up in an infinite loop. This can be prevented
by running the topological sort before calling the remote converger.

Solves issue:
https://github.com/elixir-lang/elixir/issues/5487

#### [#5702] - (2017-01-29T18:13:31Z) - [Introduce :trim_bom option for File.stream!/2](https://github.com/elixir-lang/elixir/pull/5702)

Relates to #5695.

#### [#5714] - (2017-01-28T23:51:51Z) - [Fixed codestyle for OptionParser tests](https://github.com/elixir-lang/elixir/pull/5714)

In PR #5709 @whatyouhide mentioned that this tests are violating new style guide, this PR should fix it.

#### [#5709] - (2017-01-28T21:40:10Z) - [Implement allow_inexistent_atoms? for OptionParser](https://github.com/elixir-lang/elixir/pull/5709)

Fixes #5708.

Should be merged or closed after discussion reaches result :).

#### [#5713] - (2017-01-28T21:21:23Z) - [Fix bug that allows upper case letters in app name](https://github.com/elixir-lang/elixir/pull/5713)

The following command should fail.

    $ mix new invAlid

According to [this function](https://github.com/elixir-lang/elixir/blob/c1acfe9827f12ef58f7f301baad7497472cb4bc9/lib/mix/lib/mix/tasks/new.ex#L160), app names should only include lowercase letters, numbers, and underscore.

This pull request updates the function to enforce "only include lowercase letters, numbers, and underscore".

## Step 1 -- Add a test

    assert_raise Mix.Error, ~r"only lowercase letters, numbers and underscore", fn ->
      Mix.Tasks.New.run ["invAlid"]
    end

## Step 2 -- The test should fail

    $ bin/elixir lib/mix/test/mix/tasks/new_test.exs
    .......

      1) test new with invalid args (Mix.Tasks.NewTest)
         lib/mix/test/mix/tasks/new_test.exs:117
         Expected exception Mix.Error but nothing was raised
         stacktrace:
           (elixir) lib/file.ex:1186: File.cd!/2
           lib/mix/test/mix/tasks/new_test.exs:118: (test)



    Finished in 0.7 seconds (0.3s on load, 0.3s on tests)
    8 tests, 1 failure

## Step 3 -- Fix the bug

Change regex from this `~r/^[a-z][\w_]*$/` to this `~r/^[a-z][a-z0-9_]*$/`

Example:

    # no error :(
    iex(1)> unless "invAlid" =~ ~r/^[a-z][\w_]*$/, do: raise "only lowercase letters, numbers and underscore"
    nil

    # error :)
    iex(2)> unless "invAlid" =~ ~r/^[a-z][a-z0-9_]*$/, do: raise "only lowercase letters, numbers and underscore"
    ** (RuntimeError) only lowercase letters, numbers and underscore

## Step 4 -- Test passes

    $ bin/elixirc lib/mix/lib/mix/tasks/new.ex -o lib/mix/ebin
    warning: redefining module Mix.Tasks.New (current version loaded from bin/../lib/mix/ebin/Elixir.Mix.Tasks.New.beam)
      lib/mix/lib/mix/tasks/new.ex:1

    $ bin/elixir lib/mix/test/mix/tasks/new_test.exs
    ........

    Finished in 0.7 seconds (0.3s on load, 0.3s on tests)
    8 tests, 0 failures


#### [#5694] - (2017-01-28T13:29:16Z) - [Add Application.start_phase/3 callback and associated docs](https://github.com/elixir-lang/elixir/pull/5694)

This callback from the `:application` module wasn't originally included in `Application`.  In addition, the mix docs did not include information on how to define start phases or included applications, even though it was possible to define and use them.

I think these additions would be useful as the underlying functionality is already there and works, just without documentation (in Elixir).

#### [#5706] - (2017-01-27T12:50:56Z) - [Make IO.ANSI.ansicode and IO.ANSI.ansilist public types](https://github.com/elixir-lang/elixir/pull/5706)

The public `@type` for `IO.ANSI.ansidata` references `IO.ANSI.ansilist` and `IO.ANSI.ansicode`, so dialyzer complains about missing type for them when referencing `IO.ANSI.ansidata`:

```
Unknown types:
  'Elixir.IO.ANSI':ansicode/0
```

From https://hexdocs.pm/elixir/IO.ANSI.html#t:ansidata/0 it seems as though the intention was for them to be public, so I made them public. This is not the forum for this, necessarily, but I do not think public types should be able to reference private types. An `@spec` should also not be able to reference a `@typep` for a public function. I believe something should have warned or errored from this usage. 

#### [#5705] - (2017-01-26T22:56:42Z) - [Hard deprecate GenEvent and provide alternatives in its docs](https://github.com/elixir-lang/elixir/pull/5705)

As discussed on IRC with @josevalim.

#### [#5698] - (2017-01-26T11:59:17Z) - [Run `make clean` for erlang.mk](https://github.com/elixir-lang/elixir/pull/5698)

/cc @Gazler 

#### [#5703] - (2017-01-26T10:16:58Z) - [Fix Kernel.binary_part/3 spec](https://github.com/elixir-lang/elixir/pull/5703)

The `start` argument for `Kernel.binary_part/3` can be `0`, therefore I think `non_neg_integer` is a more accurate type spec for it than `pos_integer`.

#### [#5699] - (2017-01-25T09:14:14Z) - [Create list of args based on Macro.var](https://github.com/elixir-lang/elixir/pull/5699)

Adds a way to generate a list of variables on a whim.

The idea is pretty much copied from the Elixir Koans https://github.com/elixirkoans/elixir-koans/blob/master/lib/koans.ex#L46 

#5689 

#### [#5674] - (2017-01-24T18:16:19Z) - [Add --if-missing flag to local.hex mix task](https://github.com/elixir-lang/elixir/pull/5674)

In automation scripts like `make`, `--force` flag causes reinstallation of Hex
every time `mix` is run (to avoid hanging on prompt), which is unnecessary.
Locating that Hex is installed from make tasks is not a trivial task,
so adding `mix local.hex --if-missing` would be much more convenient.

#### [#5681] - (2017-01-23T20:54:18Z) - [Add an example for Task.async_stream/3](https://github.com/elixir-lang/elixir/pull/5681)

Not sure how you like to write examples. Perhaps this sort of example doesn't belong in the main docs. Let me know.

#### [#5687] - (2017-01-23T14:50:58Z) - [Only pass overrides from parent to child rebar dep](https://github.com/elixir-lang/elixir/pull/5687)



#### [#5693] - (2017-01-23T14:46:28Z) - [Use `elixir --version` instead of `elixir -v`](https://github.com/elixir-lang/elixir/pull/5693)

...in ISSUE_TEMPLATE
In the same vein as https://github.com/elixir-lang/elixir-lang.github.com/commit/779d43c077bfa73028d03983175cef0a4a70d214

#### [#5678] - (2017-01-23T11:37:24Z) - [Support rebar3 dependency package declaration](https://github.com/elixir-lang/elixir/pull/5678)

Currently only {app, ‚Äú~> 1.0.0‚Äù, {pkg, hex_package}} is supported. This
change will also support {app, {pkg, hex_package}}.

#### [#5663] - (2017-01-22T18:05:38Z) - [Minor Docs Fixup - MapSet](https://github.com/elixir-lang/elixir/pull/5663)

Made the function signatures and docs normalize on `map_set` (not `set` or `mapset`). Most of the documentation in this module used`map_set`, so I made everything use that. However, the documentation code generally uses `set` in the examples, so I could see an argument to have everything say `set` instead. I don't have a strong opinion one way or the other, I just want the docs to be consistent üòÑ 

#### [#5690] - (2017-01-21T23:15:32Z) - [Tolerate missing git repo "info/" when setting sparse configuration (#5525)](https://github.com/elixir-lang/elixir/pull/5690)

I traced the cause of #5525 (for me, anyway) to my global git template, which didn't have an `info/` subdirectory; this caused `Mix.SCM.Git.sparse_toggle/1`'s write to a file in `info/` to fail, causing the same three test failures reported in that issue.

The fix just adds a `File.mkdir_p!/` to make sure the directory exists before writing.

I also modified an existing sparse-checkout test (temporarily adding a git template without `info/`) to show the failure when the fix isn't present; I'm happy to rework this test if you don't think it's the right approach (or remove it entirely).

#### [#5629] - (2017-01-21T21:23:38Z) - [Correctly inspect function calls with weird atoms](https://github.com/elixir-lang/elixir/pull/5629)

With this commit, we fix the inspection (both in `Macro.to_string/2` as well as `Exception.format_mfa/3`) of function calls with "weird" atoms like:

    Foo."Bar"() # was inspected as Foo.Bar()
    Foo."..."() # was inspecetd as Foo....()

and many others.

This is a rework of #5606, which was aimed at #5605.

@josevalim: I went with implementing `Inspect.Atom.classify/1`, but tailored the result to function calls specifically (`:callable`, `:non_callable`) as it turns out this is enough to reuse the logic in `Inspect.Atom.inspect/1` as well. 

#### [#5683] - (2017-01-19T23:29:52Z) - [Fix `Kernel.defprotocol` documentation bug.](https://github.com/elixir-lang/elixir/pull/5683)

Defining a protocol implementation for binaries is done with `for: BitString`, not `for: Binary`.

#### [#5679] - (2017-01-19T11:01:22Z) - [Fix dialyzer underspec warning with __protocol__/1](https://github.com/elixir-lang/elixir/pull/5679)

## Context

When running dialyzer with `-Wunderspecs` against code that contains protocol definitions, one will receive warnings about the generated `__protocol__/1` function like below:

```
lib/collectable.ex:1: The specification for 'Elixir.Collectable':'__protocol__'/1 states that the function might also return 'true' but the inferred return is 'Elixir.Collectable' | 'false' | [{'into',1},...]
```

The stated spec generated in the macro, which is technically correct, contains:

```elixir
 @spec __protocol__(:consolidated?) :: boolean
```

The macro-generated function returns only `false` before consolidation, and only `true` after consolidation. The [typical solution](http://stackoverflow.com/questions/37668522/how-to-avoid-dialyzer-errors-for-protocols) to avoid this dialyzer warning is to add an attribute to the protocol:

```elixir
@dialyzer {:no_warn_function, __protocol__: 1}
```

However, should the Elixir implementation of this generated function introduce a new type warning, codebases containing that workaround would not detect the warning.

## Solution

The solution I propose is to narrow the return type: At the protocol definition phase (in the macro), the return type for that particular clause of `__protocol__/1` is `false`. During consolidation, the spec attribute is updated to reflect the new return type of `true`.

#### [#5677] - (2017-01-19T10:57:49Z) - [Documentation signature and typespec improvements](https://github.com/elixir-lang/elixir/pull/5677)

Improve the documentation-level signatures for functions that take
generic argument types (e.g. `map`, `arg`) by adding empty function
heads with more specific argument names (e.g. `date`).

Also, fix references to the nonexistent `Calendar.native_datetime` type;
it's spelled `Calendar.native_date_time`.

And lastly, fix up some of the DateTime typespecs that still referred to
`DateTime.t` when they now expect `Calendar.date_time`.

#### [#5630] - (2017-01-18T12:32:30Z) - [Fix Macro.underscore/1 for screaming snake case](https://github.com/elixir-lang/elixir/pull/5630)

We had some unexpected behavior when trying to use `Macro.underscore/1`
for screaming snake case strings. This commit fixes that!

Resolves #5627 

#### [#5662] - (2017-01-18T12:31:36Z) - [Fix Macro.camelize/1 for screaming snake case](https://github.com/elixir-lang/elixir/pull/5662)

The screaming snake case was keeping its original format after being
camelized. As mentioned in issue #5627. This change allows it to behave
like the all lower snake case when camelized.

Amos King @adkron <amos@binarynoggin.com>

#### [#5667] - (2017-01-18T11:05:15Z) - [Improve error when using non-arith guard BIF in match](https://github.com/elixir-lang/elixir/pull/5667)

Only arith BIFs are allowed in matches.

Partial fix for #5666.

#### [#5668] - (2017-01-17T22:57:51Z) - [Rephrase doc in Macro](https://github.com/elixir-lang/elixir/pull/5668)

Hi all,

please see if this change makes sense.
The break in the phrase looked like a bit of a typo.

Cheers!

#### [#5660] - (2017-01-16T12:01:14Z) - [comment to Enum.flat_map/2 about flattening](https://github.com/elixir-lang/elixir/pull/5660)

Flat_map/2 doesn't contain info about flattening, but flat_map_reduce/2 does. It was not consistent.

#### [#5659] - (2017-01-16T12:00:48Z) - [Fix Mix.Shell.IO.yes? documenation](https://github.com/elixir-lang/elixir/pull/5659)

This is the actual regex:
https://github.com/elixir-lang/elixir/blob/master/lib/mix/lib/mix/shell/io.ex#L68

IMHO, this behaviour to return true on emply line seems surprising. I can imagine someone writing
 ```IO.yes?("launch_nukes?")```

#### [#5655] - (2017-01-15T16:02:38Z) - [Logger docs: recommend using thunks for expensive computations](https://github.com/elixir-lang/elixir/pull/5655)

In a [mailing list conversation](https://groups.google.com/d/msg/elixir-lang-core/LNZNyUGTdno/9PpvJ8htCQAJ) we decided Logger docs should encourage lazily evaluated messages over potentially expensive computations that might not get used. This change aims to do that.

#### [#5658] - (2017-01-15T15:59:21Z) - [Fix port message format](https://github.com/elixir-lang/elixir/pull/5658)

In the documentation it states that the port data format is

    {port, {:port, data}}

but the examples show it is

    {port, {:data, data}}

Fixed this in the documentation.

#### [#5657] - (2017-01-15T10:39:47Z) - [Fix wrong word in System.cmd docs](https://github.com/elixir-lang/elixir/pull/5657)

Changed "problem" to "program".

#### [#5654] - (2017-01-15T00:56:29Z) - [Fix translation of maps used as map keys](https://github.com/elixir-lang/elixir/pull/5654)

Fixes [issue 5602](#5602).
Erlang does not accept map_field_exact tag for map used as map keys
since it does not perform any matching on map keys.

For example this fails:
```
$ erl
Erlang/OTP 19 [erts-8.2] [source-a2c5a92] [64-bit] [smp:8:8]
[async-threads:10] [hipe] [kernel-poll:false]

Eshell V8.2  (abort with ^G)
1> #{ #{1 => X} := 3 } = #{ #{1 => 2} => 3 }.
* 1: illegal map key in pattern
```

#### [#5653] - (2017-01-13T23:59:42Z) - [Fix typo in IEx.pry/0 documentation](https://github.com/elixir-lang/elixir/pull/5653)

Hello, the sentence in `IEx.pry/0` documentation seems malformed. I fixed it based on my understanding of its meaning.

#### [#5648] - (2017-01-12T21:39:13Z) - [Optimize elixir compiler setup for large projects](https://github.com/elixir-lang/elixir/pull/5648)

When preparing file lists for compilation, the code groups file paths according the their status: removed, changed_mtime, or new. 
Before this change, the code would traverse the previous list of files and the current list of files inner loop. This leads to inefficient N^2 complexity. This happens twice when makeing a list of removed files and when making a list of new files. Using sets we can reduce the complexity to average N.
According to the benchmarks on my machine (Intel core i7 6700k), with a project that has 10k files, this optimization consistently saves 700-800 ms.


#### [#5646] - (2017-01-12T17:57:17Z) - [Make MapSet.new doc more descriptive](https://github.com/elixir-lang/elixir/pull/5646)

It changes the documentation of [MapSet.new](https://hexdocs.pm/elixir/MapSet.html#new/1) function to show it takes any enumerable and not just a mapset.
It also makes it consistent with Map.new

#### [#5647] - (2017-01-12T16:40:24Z) - [Fix typo in URITest test name](https://github.com/elixir-lang/elixir/pull/5647)

Hi all,

`to_stirng` ‚Üí `to_string` in test name.

Cheers!

#### [#5644] - (2017-01-11T10:15:41Z) - [Fix a typo in IEx.Evaluator.prune_stacktrace](https://github.com/elixir-lang/elixir/pull/5644)

Found it while skimming over the IEx code. It's just a comment in a
private function, so you guys decide whether this pollutes git history.

‚úåÔ∏è

#### [#5643] - (2017-01-11T08:51:33Z) - [Fix e/1 IEx helper to not return :ok](https://github.com/elixir-lang/elixir/pull/5643)

This PR makes the new `e/1` IEX helper not return `:ok`.

Before:

```
iex(1)> e Elixir.Tuple
append/2        delete_at/2     duplicate/2     insert_at/3     to_list/1       
:ok
```

After:

```
iex(1)> e Elixir.Tuple
append/2        delete_at/2     duplicate/2     insert_at/3     to_list/1       
```

#### [#5638] - (2017-01-10T23:50:10Z) - [Adding export helper. Solves #5633](https://github.com/elixir-lang/elixir/pull/5638)

- [x]  `e/1` function that list functions and macros in the same way the autocomplete.
- [x]  make `module_info_funs/1` public
- [x]  rename `module_info_funs/1` to `exports/1`
- [x]  tests


#### [#5642] - (2017-01-10T19:08:00Z) - [Fix a typo in Map](https://github.com/elixir-lang/elixir/pull/5642)

Fix a typo in the docs for `Map.split`.

#### [#5639] - (2017-01-10T10:01:57Z) - [Fix Path.join/1 for lists of one element](https://github.com/elixir-lang/elixir/pull/5639)

Also fix the spec for `Path.join/1` to mention that the input list of paths has to be non-empty, and fix the documentation to mention that this function takes a list of paths (`Path.t`), not strings like it said before.

Closes #5637.

#### [#5635] - (2017-01-09T19:23:03Z) - [Fix typespecs in Calendar](https://github.com/elixir-lang/elixir/pull/5635)

resolves #5634 

#### [#5636] - (2017-01-09T16:16:07Z) - [Remove dead paren from URI comment](https://github.com/elixir-lang/elixir/pull/5636)

Hi all, 

just a paren on the loose inside a comment.

Cheers!

#### [#5632] - (2017-01-09T09:00:02Z) - [IEx.Helper documention improvement](https://github.com/elixir-lang/elixir/pull/5632)

Affect from v1.4 to master.

Changed:

- Let IEx.Helper.import_file/2 not to generate doc
- Add description of import_file_if_available/1 to `moduledoc`

I'm really sorry not to align `import_file_if_available/1`,
however, I think it's too hard to read to developer who update this. ;)

Thanks to read and Happy new year, all XD

#### [#5626] - (2017-01-08T17:15:49Z) - [Add `-` to Regex.escape/1](https://github.com/elixir-lang/elixir/pull/5626)

We were not escaping the `-` character, commonly found in character
classes, in cases where it is being used on its own. I've added a test
for this new escape behavior, and also implemented the change.

Resolves #5624

#### [#5625] - (2017-01-08T09:27:12Z) - [Add link to version spec to mix deps documentation](https://github.com/elixir-lang/elixir/pull/5625)

It wasn't clear what is the valid syntax for version requirements.

#### [#5623] - (2017-01-07T13:52:21Z) - [Fix broken hash link in Registry doc](https://github.com/elixir-lang/elixir/pull/5623)

While going through the Registry doc, I found a broken hash link which might be caused by a bug in `ex_doc`. Specifically, when a closing back tick is followed by a close parenthesis, the latter becomes part of the link. Instead of working around the problem, I decided to remove the parentheses altogether to avoid any ambiguity.

#### [#5620] - (2017-01-07T09:23:13Z) - [Support "left not in right" syntax](https://github.com/elixir-lang/elixir/pull/5620)

As discussed in #5544.

* Adds `left not in right`, which is translated into `not(left in right)` in the tokenizer/parser.
* Updates all existing uses of `not left in right` into the new form, since we plan to deprecate the former.
* `Macro.to_string/2` now translates `not(left in right)` to `left not in right`.
* Adds documentation for `left not in right`.

#### [#5613] - (2017-01-05T22:05:29Z) - [Optimize Enumerable.count/1 implementation for File.Stream](https://github.com/elixir-lang/elixir/pull/5613)

Results of initial benchmarks using https://github.com/michalmuskala/file_count_optim
```
-##### With input Huge (1000000 lines) #####
Name                  ips        average  deviation         median
proposed             4.02      248.64 ms     ¬±3.62%      248.58 ms
recur_count          3.40      294.41 ms     ¬±4.37%      290.18 ms
read_line            1.22      817.86 ms     ¬±3.91%      806.50 ms
current              1.08      925.23 ms     ¬±5.24%      911.27 ms

Comparison:
proposed             4.02
recur_count          3.40 - 1.18x slower
read_line            1.22 - 3.29x slower
current              1.08 - 3.72x slower

-##### With input Medium (10000 lines) #####
Name                  ips        average  deviation         median
proposed           452.59        2.21 ms    ¬±11.83%        2.15 ms
recur_count        313.31        3.19 ms     ¬±6.88%        3.15 ms
read_line          109.97        9.09 ms     ¬±6.11%        8.94 ms
current            101.86        9.82 ms    ¬±14.58%        9.45 ms

Comparison:
proposed           452.59
recur_count        313.31 - 1.44x slower
read_line          109.97 - 4.12x slower
current            101.86 - 4.44x slower

-##### With input Small (100 lines) #####
Name                  ips        average  deviation         median
proposed          13.59 K       73.61 Œºs    ¬±29.75%       68.00 Œºs
recur_count       11.99 K       83.41 Œºs    ¬±27.13%       77.00 Œºs
read_line          6.49 K      154.07 Œºs    ¬±22.86%      142.00 Œºs
current            5.83 K      171.60 Œºs    ¬±41.22%      157.00 Œºs

Comparison:
proposed          13.59 K
recur_count       11.99 K - 1.13x slower
read_line          6.49 K - 2.09x slower
current            5.83 K - 2.33x slower
```

#### [#5614] - (2017-01-05T09:18:10Z) - [Simplify ExUnit.Case moduledoc](https://github.com/elixir-lang/elixir/pull/5614)



#### [#5611] - (2017-01-04T11:28:16Z) - [Update typespec for System.get_env/1](https://github.com/elixir-lang/elixir/pull/5611)

Ref: https://github.com/elixir-lang/elixir/pull/5610#discussion_r94416531

#### [#5607] - (2017-01-03T20:45:55Z) - [Adding "/" special case in unix's Path.relative](https://github.com/elixir-lang/elixir/pull/5607)

Now, `Path.relative("/")` returns `"."` instead of the empty string for unix systems.

I'm afraid that even if it's a simple change, that could a breaking change.

#### [#5600] - (2016-12-28T19:14:45Z) - [Remove isolated multiple space from VersionTest](https://github.com/elixir-lang/elixir/pull/5600)

Hi all, 

`use___ExUnit.Case, async: true` ‚Üí `use ExUnit.Case, async: true` with no lines around justifying the multiple space.

Cheers!



#### [#5599] - (2016-12-28T11:19:50Z) - [Eliminate import, alias, require translation](https://github.com/elixir-lang/elixir/pull/5599)



#### [#5598] - (2016-12-28T11:19:13Z) - [Improve validation of aliases](https://github.com/elixir-lang/elixir/pull/5598)



#### [#5591] - (2016-12-27T19:57:54Z) - [Fix removal of aliases](https://github.com/elixir-lang/elixir/pull/5591)

Closes #5587.

#### [#5597] - (2016-12-27T17:16:12Z) - [Remove redundancy from Version doc](https://github.com/elixir-lang/elixir/pull/5597)

Hi all,

`‚Ä¶the default is to allow always allow‚Ä¶` ‚Üí `‚Ä¶the default is to always allow‚Ä¶`

Happy new year!

#### [#5595] - (2016-12-27T12:06:41Z) - [Fix a typo in Kernel](https://github.com/elixir-lang/elixir/pull/5595)



#### [#5594] - (2016-12-27T09:46:39Z) - [Fix ceil function with zero as input](https://github.com/elixir-lang/elixir/pull/5594)

Fix for [issue](https://github.com/elixir-lang/elixir/issues/5593).
Zero has sepcial encoding as IEEE754 floating point number with a 0 value for exponent. This encoding requires special handling in current Float.round implementation.

#### [#5589] - (2016-12-26T10:41:23Z) - [Fix a typo in IEx.Server](https://github.com/elixir-lang/elixir/pull/5589)



#### [#5581] - (2016-12-25T12:54:37Z) - [Update docs for `File.dir?/1`](https://github.com/elixir-lang/elixir/pull/5581)

The documentation for the `File.dir?/1` function didn't explicitly
state that certain shell conventions (like `~`) would not be
automatically expanded in this function, so I'm adding more
clear documentation including examples for how to use this function.

Closes #5565 

#### [#5584] - (2016-12-22T21:52:52Z) - [Test against Erlang 19.2 (newest release)](https://github.com/elixir-lang/elixir/pull/5584)

:tada:

(wasn't available on Travis immediately but it is now :) )

#### [#5583] - (2016-12-22T21:19:00Z) - [Doctests for basic agent functionality](https://github.com/elixir-lang/elixir/pull/5583)

Read the docs and thought it'd be nice to have usage examples
right there so why not make it doc tests :)

It's a bit repetetive as you always need to start the agent and
I figured even for start/start_link it'd be nice to show that
the value now lives there but that might be discussion worthy.

I also started out always calling Agent.stop to stop the agent
(the other agent tests do that) but the GenServer tests don't
seem to shut it down every time so I thought it might be okay
here in favor of less clutter and to have more clarity :)

Happy about feedback!

#### [#5585] - (2016-12-22T17:09:28Z) - [Clarify how to use test_stdlib instead of test_elixir](https://github.com/elixir-lang/elixir/pull/5585)

I always thought test_elixir was broken as from the directory
structure I'd have expected it to only run the tests in elixir
e.g. the standard library which is what I mostly touch around
here :) However, it always ran almost everything.

A look at the Makefile reveals that this seems intentional but
that there's also test_stdlib, which seems for to point out in
the README imo.

as always, thanks for elixir :green_heart: 

#### [#5566] - (2016-12-21T21:23:26Z) - [Ignore left part of comma if empty in "mix do"](https://github.com/elixir-lang/elixir/pull/5566)

Fixes #5551

#### [#5578] - (2016-12-21T17:25:34Z) - [Add System.stop/1 over :init.stop like System.halt/1 over :erlang.halt](https://github.com/elixir-lang/elixir/pull/5578)

Hello! I'm wondering why there is already [`System.halt`][1] which is equivalent of Erlang's [`halt`][2] for quick shutdown, but there is no equivalent of Erlang's [`init:stop`][3] for clean and smooth shutdown. I even have not found any notes about `:init.stop` in the Elixir documentation. Is this not needed in Elixir for some reason?

This is sure not so big deal, but I really feel some inconsistency in this place :) I've prepared this PR for the case you feel this logical to have both `halt/1` and `stop/1` in the Elixir module. Thanks for your attention!

  [1]: https://hexdocs.pm/elixir/System.html#halt/1
  [2]: http://erlang.org/doc/man/erlang.html#halt-0
  [3]: http://erlang.org/doc/man/init.html#stop-0

#### [#5579] - (2016-12-21T15:06:13Z) - [Add explanation how to quit the IEx shell](https://github.com/elixir-lang/elixir/pull/5579)

This is definitely missing in the IEx documentation. Nobody knows for sure how to do this )

I've also noticed the `q` option is missing in the `BREAK` menu. But I can't find the menu definition in the source files.


#### [#5574] - (2016-12-18T12:33:36Z) - [Talk a bit about keyword syntax in the Keyword module](https://github.com/elixir-lang/elixir/pull/5574)

We do this for maps for example, maybe it's worth doing for keywords as well. Not sure this is the best place since `{:ok, foo: :bar}` is allowed as well, but I think it's a good start anyways :)

#### [#5572] - (2016-12-18T11:20:25Z) - [Add examples and polish docs for the Collectable protocol](https://github.com/elixir-lang/elixir/pull/5572)

I think it was pretty cryptic how to use the `Collectable` protocol, so I added a couple of examples in the style of what we do in the `Enumerable` protocol. Let me know what you think!

#### [#5571] - (2016-12-17T22:01:25Z) - [Fixed typos in ansi docs test names](https://github.com/elixir-lang/elixir/pull/5571)



#### [#5570] - (2016-12-17T22:00:34Z) - [Fixed typo in Guards guide](https://github.com/elixir-lang/elixir/pull/5570)



#### [#5569] - (2016-12-17T21:35:47Z) - [Fixed typo in elixir_def:format_error/1](https://github.com/elixir-lang/elixir/pull/5569)



#### [#5568] - (2016-12-16T16:04:58Z) - [Correct documentation referencing System.schedulers_online/1 to System.schedulers_online/0.](https://github.com/elixir-lang/elixir/pull/5568)

Noticed some errors in the documentation of `Task.async_stream` and friends...

#### [#5561] - (2016-12-16T14:36:20Z) - [Better behavior for the default test task when no tests were found](https://github.com/elixir-lang/elixir/pull/5561)

This born in a discussion on this issue #5556.

- [x] Show a warning instead of an error when the test helper is not found
- [x] Improve the message for when no test path is given
- [x] Test scenarios for each of the above

#### [#5567] - (2016-12-16T09:29:59Z) - [Optimize Enum.count/2](https://github.com/elixir-lang/elixir/pull/5567)

reduce/3 has clauses specialized for various enumerable types, so should be
much faster than the general Enumerable.reduce/3 case, especially that we don't
need additional facilities like terminating the reduction early.

Comparing 3 implementations:

  * map based

        elements |> Enum.map(&(if check(&1), do: 1, else: 0)) |> Enum.sum

  * count/2 based

        elements |> Enum.count(&check/1)

  * filter based

        elements |> Enum.filter(&check/1) |> Enum.count

We get following results before and after the change:

len   | map       | count before | count after | filter
------|-----------|--------------|-------------|------------
10    | 2.1706 Œºs | 7.0754 Œºs    | 1.6304 Œºs   | 1.9765 Œºs
100   | 19.921 Œºs | 27.579 Œºs    | 13.057 Œºs   | 14.591 Œºs
1000  | 168.93 Œºs | 178.93 Œºs    | 130.76 Œºs   | 163.43 Œºs
10000 | 2128.9 Œºs | 1822.1 Œºs    | 1298.2 Œºs   | 1664.6 Œºs

The most idiomatic code is now also the fastest.

#### [#5564] - (2016-12-16T09:14:30Z) - [Fix typo](https://github.com/elixir-lang/elixir/pull/5564)

Hi, just a small typo I came across. Cheers.

#### [#5562] - (2016-12-14T10:32:39Z) - [Fix whitespace inconsistencies outside Elixir lib](https://github.com/elixir-lang/elixir/pull/5562)

Fixing white-space inconsistencies around operators, parentheses and trailing white-space on all projects outside elixir.

#### [#5559] - (2016-12-14T00:07:12Z) - [Fix whitespace inconsistencies](https://github.com/elixir-lang/elixir/pull/5559)



#### [#5558] - (2016-12-13T13:45:17Z) - [Minor grammar tweak](https://github.com/elixir-lang/elixir/pull/5558)

Heya

A small wording tweak :)

Cheers,
Louis

#### [#5557] - (2016-12-13T12:53:43Z) - [Add detail on usage restrictions to Module.defines?/{2,3}](https://github.com/elixir-lang/elixir/pull/5557)

Hello!

This caught me out today. I thought it would be good to document this caveat :)

Thanks,
Louis

#### [#5555] - (2016-12-12T08:27:28Z) - [Make the example a valid mix project](https://github.com/elixir-lang/elixir/pull/5555)

I couldn't build the example code without using `use Mix.Project`.
I could build it with using `use Mix.Project`.

```
/Users/niku/sandbox% cat mix.exs
defmodule MyApp.Mixfile do
  def project do
    [app: :my_app,
     version: "0.0.1",
     escript: escript()]
  end

  def escript do
    [main_module: MyApp.CLI]
  end
end

defmodule MyApp.CLI do
  def main(_args) do
    IO.puts("Hello from MyApp!")
  end
end
/Users/niku/sandbox% mix escript.build
** (Mix) Could not find a Mix.Project, please ensure a mix.exs file is available
```

```
/Users/niku/sandbox% cat mix.exs
defmodule MyApp.Mixfile do
  use Mix.Project

  def project do
    [app: :my_app,
     version: "0.0.1",
     escript: escript()]
  end

  def escript do
    [main_module: MyApp.CLI]
  end
end

defmodule MyApp.CLI do
  def main(_args) do
    IO.puts("Hello from MyApp!")
  end
end
/Users/niku/sandbox% mix escript.build
Generated my_app app
Generated escript my_app with MIX_ENV=dev
```


#### [#5553] - (2016-12-10T17:16:38Z) - [Highlight that :gen.stop/3 is synchronous](https://github.com/elixir-lang/elixir/pull/5553)

It's an important information, that makes the concerned functions much more
useful in contexts where synchronous termination is important, such as cleaning
up related processes in tests.

#### [#5550] - (2016-12-07T23:20:36Z) - [:transient supervisor restart clarification](https://github.com/elixir-lang/elixir/pull/5550)

Clarify that `:transient` supervisor will not be restarted when reaches `max_restart_intensity` because of `:shutdown` exit reason.

It would be nice to have someone who will proofread changes :).

#### [#5540] - (2016-12-06T16:09:20Z) - [Use Elixir apps from deps when building escripts](https://github.com/elixir-lang/elixir/pull/5540)

Not really sure if this is a feasible solution for https://github.com/elixir-lang/elixir/issues/5538, but at least it *appears* to be a working solution so I figured a PR wouldn't hurt üòÑ 

#### [#5542] - (2016-12-06T08:26:40Z) - [Fix typo in Access doc](https://github.com/elixir-lang/elixir/pull/5542)



#### [#5543] - (2016-12-06T08:25:21Z) - [Typo on Process module doc](https://github.com/elixir-lang/elixir/pull/5543)

`when a processes` -> `when a process`

#### [#5541] - (2016-12-05T21:23:35Z) - [Improve IEx width configuration width](https://github.com/elixir-lang/elixir/pull/5541)

The name of the field and documentation are a bit misleading. The width configruation parameter is actually the maximum width. It might makes sense to change the field name to max_width instead of width.

#### [#5539] - (2016-12-05T18:37:43Z) - [Remove redundant preposition from Access doc](https://github.com/elixir-lang/elixir/pull/5539)

Hi all,

`can also be used ‚Ä¶ to for updating`  ‚Üí `can also be used ‚Ä¶
  for updating`

Cheers!



#### [#5534] - (2016-12-05T12:47:13Z) - [Use :extra_applications instead of :applications in escript.build](https://github.com/elixir-lang/elixir/pull/5534)

I wonder, could this veeery simple change be a solution for #5529? ü§î :)

#### [#5537] - (2016-12-05T12:29:20Z) - [Remove double space from application doc](https://github.com/elixir-lang/elixir/pull/5537)

Hi all,

`automatically__load` ‚Üí `automatically load`.

Cheers!
Gustavo

#### [#5532] - (2016-12-05T09:54:37Z) - [Don't deprecate {:ok, keywords | map} results in ExUnit callbacks anymore](https://github.com/elixir-lang/elixir/pull/5532)



#### [#5530] - (2016-12-05T09:50:49Z) - [Improve syntax error for "fn do ... end"](https://github.com/elixir-lang/elixir/pull/5530)

<strike>I took a stab at #5527 but I am definitely not sure this is the way to go, would love opinions on this as I'm sure I will learn something out of it :).</strike>

Closes #5527.

Btw, it doesn't work for `fn (...) do ... end`, but it should still be a worthy improvement.

#### [#5531] - (2016-12-04T19:52:50Z) - [Tidy up tests for Code](https://github.com/elixir-lang/elixir/pull/5531)

What I did:

  * Better test names
  * Removed a few duplicate tests
  * Used a few `describe/2` blocks to organize tests a bit more

I am not sure how much these type of PR is appreciated, I think it's good to have organized tests that are easy to understand and navigate but maybe other members of the team feel that this is not worth it. Let me know! :D

#### [#5498] - (2016-12-04T15:47:47Z) - [Use proper case for proper nouns and acronysms](https://github.com/elixir-lang/elixir/pull/5498)

Along then same lines of #4754

#### [#5528] - (2016-12-04T15:45:55Z) - [Fix system_test](https://github.com/elixir-lang/elixir/pull/5528)

Git since v2.11 no longer defaults to 7-hexdigits for short object
abbreviation.

See https://github.com/git/git/commit/e6c587c733b4634030b353f4024794b08bc86892

#### [#5524] - (2016-12-03T16:23:58Z) - [Move a bunch of hard deprecations to elixir_dispatch](https://github.com/elixir-lang/elixir/pull/5524)



#### [#5522] - (2016-12-02T20:48:01Z) - [Fix typo in Application start callback doc](https://github.com/elixir-lang/elixir/pull/5522)

Hi all,

`from another mode` ‚Üí `from another node` 

Cheers!

#### [#5521] - (2016-12-02T20:47:32Z) - [Remove extra article from Application start callback doc](https://github.com/elixir-lang/elixir/pull/5521)

Hi all,

`when an the application` ‚Üí `when an application`.

Cheers!

#### [#5505] - (2016-12-02T13:28:38Z) - [Add links to Erlang modules](https://github.com/elixir-lang/elixir/pull/5505)

command used to find these cases:

    $ ag '(?<!\[)`\:[^`]+`\s+module'

#### [#5502] - (2016-12-02T10:26:12Z) - [Allude to other valid guards in Guard Page docs](https://github.com/elixir-lang/elixir/pull/5502)



#### [#5517] - (2016-12-01T20:51:47Z) - [Hard-deprecate the "char_list" spelling](https://github.com/elixir-lang/elixir/pull/5517)

I am not sure about a couple things, I will leave comments under those :)

#### [#5518] - (2016-12-01T16:34:57Z) - [Improve IEx autocompletion to handle manual imports.](https://github.com/elixir-lang/elixir/pull/5518)

Follow up to #5488 and #5504.

#### [#5516] - (2016-12-01T11:59:43Z) - [Deprecate String.rjust/2,3 and String.ljust/2,3](https://github.com/elixir-lang/elixir/pull/5516)



#### [#5513] - (2016-12-01T09:28:09Z) - [Hard-deprecate the Set module](https://github.com/elixir-lang/elixir/pull/5513)

This was due to be (hard-)deprecated in 1.4 but it wasn't, should we backport it to the 1.4 branch?

#### [#5514] - (2016-12-01T09:24:48Z) - [Soft-deprecate GenEvent](https://github.com/elixir-lang/elixir/pull/5514)

Should we give people pointers to alternatives to GenEvent or to things like @josevalim's [blog post](http://blog.plataformatec.com.br/2016/11/replacing-genevent-by-a-supervisor-genserver/) in the docs for GenEvent?

#### [#5508] - (2016-12-01T09:16:49Z) - [Hard-deprecate String.*strip/1,2 functions](https://github.com/elixir-lang/elixir/pull/5508)

First in a set of deprecations to be implemented for 1.5. I'd love to take care of all of them if no one argues against that :)

Also, I am not 100% sure we should keep the implementation in both `elixir_rewrite` as well as `String`, but it seems to be what we do for other rewrites. Suggestions?

#### [#5504] - (2016-12-01T09:06:14Z) - [Improve IEx autocompletion to handle variable names.](https://github.com/elixir-lang/elixir/pull/5504)

Follow up to #5488.

#### [#5512] - (2016-11-30T22:59:00Z) - [Make unregister semantics clearer for dup registries](https://github.com/elixir-lang/elixir/pull/5512)



#### [#5510] - (2016-11-30T20:20:02Z) - [Fix typo in Tuple moduledoc](https://github.com/elixir-lang/elixir/pull/5510)

Hi all,

`Tuples are ordered collection` ‚Üí `Tuples are ordered collections`

Cheers!

#### [#5506] - (2016-11-30T16:17:16Z) - [Add white-space before =, ==](https://github.com/elixir-lang/elixir/pull/5506)



#### [#5491] - (2016-11-29T22:41:09Z) - [Standardize links](https://github.com/elixir-lang/elixir/pull/5491)



#### [#5495] - (2016-11-29T22:38:40Z) - [Improve wording in Module and Map docs](https://github.com/elixir-lang/elixir/pull/5495)



#### [#5492] - (2016-11-29T22:35:41Z) - [Use proper case for Erlang error messages](https://github.com/elixir-lang/elixir/pull/5492)



#### [#5494] - (2016-11-29T22:29:53Z) - [Add missing arity to functions and types](https://github.com/elixir-lang/elixir/pull/5494)



#### [#5499] - (2016-11-29T22:08:52Z) - [Remove white-space between fn and parenthesis](https://github.com/elixir-lang/elixir/pull/5499)



#### [#5501] - (2016-11-29T22:07:15Z) - [Do not use backticks in error messages](https://github.com/elixir-lang/elixir/pull/5501)



#### [#5500] - (2016-11-29T22:04:21Z) - [Correct tense in verbs](https://github.com/elixir-lang/elixir/pull/5500)



#### [#5497] - (2016-11-29T22:02:41Z) - [Add backticks to ranges in docs](https://github.com/elixir-lang/elixir/pull/5497)



#### [#5493] - (2016-11-29T22:00:16Z) - [Update links for learning Markdown](https://github.com/elixir-lang/elixir/pull/5493)

- Plain links were not being autolinked
- Links have been updated since GitHub seems to have removed the first one and now old links are
  redirecting to different pages

NOTE: I'm not too sure about whether we should include the the second link as it overlaps with the first one

#### [#5488] - (2016-11-29T16:37:53Z) - [Improve IEx autocomplete to support navigating map atom keys](https://github.com/elixir-lang/elixir/pull/5488)

Eventually we may want to take this a step further and support autocompletion of the variable names themselves but I don't have time today to look into that and that would probably be a separate PR.

I noticed that 1.4.0.rc-0 was just released...any chance this could be included in 1.4?  This is a feature I've long wanted and I'd be sad to see it pushed out months :(.

#### [#5486] - (2016-11-27T21:32:49Z) - [Document how to show all the entries in IEx](https://github.com/elixir-lang/elixir/pull/5486)

It wasn't clear to me from documentation how to print all of the entries in IEx. As it's useful option while debugging, might be useful to have it in IEx documentation as example. 

#### [#5479] - (2016-11-25T09:33:40Z) - [Raise when given non-keyword-lists in Keyword.merge/3](https://github.com/elixir-lang/elixir/pull/5479)

Similar to
https://github.com/elixir-lang/elixir/pull/5466

It makes sure a valid keyword is given as both arguments.

Additionally, it adds tests to make sure Keyword.merge/2 and /3
work exactly the same way.

Related issue:
https://github.com/elixir-lang/elixir/issues/5395

#### [#5484] - (2016-11-24T15:35:42Z) - [Fix small typo on CHANGELOG.md](https://github.com/elixir-lang/elixir/pull/5484)



#### [#5483] - (2016-11-23T22:26:35Z) - [Add clarification to Enum.uniq_by](https://github.com/elixir-lang/elixir/pull/5483)

When I was using `Enum.uniq_by` the following example in the docs helped me understand that the first occurrence of each element was preserved.

```elixir
iex> Enum.uniq_by([{1, :x}, {2, :y}, {1, :z}], fn {x, _} -> x end)
[{1, :x}, {2, :y}]
```

However, the correctness of my code depended on this behavior. So I had to double-check with the source to make sure that this was the case.

I we should explicitly say the first occurrence is kept.

Thoughts?

#### [#5482] - (2016-11-23T15:04:28Z) - [Remove double line-break in List](https://github.com/elixir-lang/elixir/pull/5482)

Hey all,

another PR of highly questionable usefulness.

Removed a double line-break inside a `@doc`.

Cheers!

#### [#5481] - (2016-11-22T23:36:06Z) - [Disable warnings_as_errors for rebar3 dependencies](https://github.com/elixir-lang/elixir/pull/5481)

Closes #4913.

REBAR_CONFIG bug fixed in rebar3 https://github.com/erlang/rebar3/pull/1387. On the next rebar3 release we need to update `mix local.rebar`.

#### [#5478] - (2016-11-22T21:09:52Z) - [Add underscore when file names, variables and atoms](https://github.com/elixir-lang/elixir/pull/5478)

As requested by @lexmag 
https://github.com/elixir-lang/elixir/pull/5284#issuecomment-261787701

#### [#5480] - (2016-11-22T19:29:00Z) - [Improve Stream.interval/1 documentation](https://github.com/elixir-lang/elixir/pull/5480)

By warning about its blocking behavior and suggesting the use of `Stream.iterate/2` for generating number sequences.

#### [#5477] - (2016-11-21T20:15:53Z) - [optimized reduce for range](https://github.com/elixir-lang/elixir/pull/5477)

After @josevalim [commit](https://github.com/elixir-lang/elixir/commit/a4682f383d104c350df5c9313aec5d8c953abeb2) yesterday I was playing around with this trying to optimize it a bit more.

What I got seems to be around 30% faster testing with a "noop" reduce function like 

```
def noop(_x, acc) do
  acc
end
```

Here is also the implementation as a [gist](https://gist.github.com/gustf/84d57a8501234587bd8bf9e97268b7ca) that I used for testing.

Example result I got was
```
iex(30)> :timer.tc(ReduceTest, :reduce_new, [1..10000000, 1, &ReduceTest.noop/2]) 
{331031, 1}
iex(31)> :timer.tc(ReduceTest, :reduce_new, [10000000..1, 1, &ReduceTest.noop/2]) 
{339605, 1}
iex(32)> :timer.tc(ReduceTest, :reduce, [1..10000000, 1, &ReduceTest.noop/2])    
{474536, 1}
iex(33)> :timer.tc(ReduceTest, :reduce, [10000000..1, 1, &ReduceTest.noop/2])    
{481838, 1}
```

I am not sure about the "loop unrolling" on lines `1784-1786` and `1796-1798`, as they are a bit of an obfuscation. But they gave 10-15% of the speedup, so I kept them for now.

#### [#5476] - (2016-11-21T18:31:44Z) - [Use red or green background for whitespace-only diffs](https://github.com/elixir-lang/elixir/pull/5476)

Closes #5191.

#### [#5473] - (2016-11-21T14:20:38Z) - [Automatically inflect the list of applications, closes #5249](https://github.com/elixir-lang/elixir/pull/5473)

Before merging this, we need to validate two design decisions:

  1. The list of applications is built per environment. This means test only dependencies, such as `{:meck, "> 0.0.0", only: :test}`, will be added to the list of applications when compiled for test (**and only for test**). This means `:meck` no longer needs to be started manually.

  2. To disable a dependency from being added to the list of applications, we can pass the `runtime: false` to the dependency. Such as `{:mech, "> 0.0.0", only: :test, runtime: false}`. This will disable it from being added to any environment, specially test in this case. Is `:runtime` the best name here?

The reason I decided to go with `1.` is because inflecting the list of dependencies becomes hard otherwise. For example, if we decide to only include the list of production dependencies, what would happen if a dependency is runs **only** in production? Then the application would never boot for dev and test. Then you could say: well, maybe we should add only production dependencies that also belong to the current environment. Which means we would have per-environment behaviour anyway so I decided to go all the way by including all deps in the current environment because it is simpler (simpler to explain, understand and code).

Thoughts?

#### [#5474] - (2016-11-21T12:13:45Z) - [Validate the :build_per_environment option in Mix.Project.build_path/1](https://github.com/elixir-lang/elixir/pull/5474)



#### [#5475] - (2016-11-21T11:51:23Z) - [fix typo](https://github.com/elixir-lang/elixir/pull/5475)



#### [#5470] - (2016-11-21T10:51:19Z) - [Improve options validation in Mix.Tasks.Compile.Elixir](https://github.com/elixir-lang/elixir/pull/5470)

On the road to #5388.

I'm on the fence on what to do with `:elixirc_options` here, since they're not set and changed here. Not sure where would be the best place to validate those üòï 

#### [#5471] - (2016-11-20T21:58:07Z) - [Improve option validation in Erlang-related compilers](https://github.com/elixir-lang/elixir/pull/5471)

On the road to #5388.

#### [#5472] - (2016-11-20T21:00:13Z) - [Validate options in Code.compiler_options/1](https://github.com/elixir-lang/elixir/pull/5472)

\cc @josevalim, related to #5470, since `Code.compiler_options/1` is called down the road it may be worth improving the already existing validation there as well.

#### [#5469] - (2016-11-20T19:30:44Z) - [Improve error messages when validating Mixfiles' application/0](https://github.com/elixir-lang/elixir/pull/5469)

On the road to #5388.

#### [#5466] - (2016-11-20T14:33:10Z) - [Raise when given non-keyword-lists in Keyword.merge/2](https://github.com/elixir-lang/elixir/pull/5466)

Closes #5395

#### [#5452] - (2016-11-20T13:57:03Z) - [Fix converger order](https://github.com/elixir-lang/elixir/pull/5452)

Only reverse at the end instead of doing multiple reverses that will
mess with the full order of dependencies.

#### [#5468] - (2016-11-19T23:08:20Z) - [Refactor and warn on unused module attributes](https://github.com/elixir-lang/elixir/pull/5468)

Fixes #5463.


#### [#5457] - (2016-11-19T19:45:00Z) - [Don't print `cd .` to shell](https://github.com/elixir-lang/elixir/pull/5457)

Not an amazing PR by any means üòõ 

#### [#5465] - (2016-11-19T17:34:57Z) - [Add specs to a few Logger functions](https://github.com/elixir-lang/elixir/pull/5465)

I would love this for documentation purposes, I am just wondering if users may not be supposed to know what these functions return (since they're just for side effects, most of them). I still think it's nice to have it documented and public though :)

#### [#5467] - (2016-11-19T14:19:43Z) - [Remove double space from Path](https://github.com/elixir-lang/elixir/pull/5467)

Hi all,

just a double space there.

Thanks!

#### [#5460] - (2016-11-17T14:43:44Z) - [Fix the doc of arithmetic division (`/`)](https://github.com/elixir-lang/elixir/pull/5460)

It raises `ArithmeticError`, not `ArgumentError`.

#### [#5459] - (2016-11-17T13:47:59Z) - [Fix the example of `div/2`](https://github.com/elixir-lang/elixir/pull/5459)



#### [#5456] - (2016-11-17T09:07:42Z) - [Add Elixir 1.2's multi alias to the docs](https://github.com/elixir-lang/elixir/pull/5456)

Gives an example of aliasing multiple modles on a single line

#### [#5455] - (2016-11-16T17:21:56Z) - [Add doc example for Module.eval_quoted with __ENV__ as first argument](https://github.com/elixir-lang/elixir/pull/5455)

The usage with __ENV__ as the first argument to Module.eval_quoted was found in [Ecto's schema.ex](https://github.com/elixir-ecto/ecto/blob/master/lib/ecto/schema.ex#L392) but that was not reflected in the docs.

I thought I might add an example for that. Is it ok?

#### [#5454] - (2016-11-16T15:57:15Z) - [Remove duplicated assertion and improve formatting](https://github.com/elixir-lang/elixir/pull/5454)

Hi all,

in `KernelTest`, found a duplicated assertion, and also a pair of lists that were formatted differently from each other.

Cheers!

#### [#5451] - (2016-11-15T23:32:18Z) - [Remove double space from KernelTest](https://github.com/elixir-lang/elixir/pull/5451)

Hi all,

a double space. Sorry I missed that in my last PR.

Cheers!





#### [#5450] - (2016-11-15T16:48:34Z) - [Fix the spec and guards for Inspect.Algebra.surround_many/6](https://github.com/elixir-lang/elixir/pull/5450)

The old spec said that the `left`, `right`, and `separator` arguments had to be binaries but they can instead be documents. I missed this in #5446 üòõ 

#### [#5446] - (2016-11-15T15:11:21Z) - [Generally improve code readability in Inspect.Algebra](https://github.com/elixir-lang/elixir/pull/5446)

- Renamed a few single-letter variables
- Slightly polished some docs
- Added a few guards here and there

I am not very sure about all the guards, for example some functions call `concat/2` directly and `concat/2` checks for `is_doc/1`, so maybe we could skip the check in the caller function. What's your opinion on this?

One more thing: some functions return `Inspect.Algebra.t`, some return `doc_*` (like `doc_cons`). Since those are private types, couldn't we say everything returns `t` (so that we can flexibly change in the future as well) since it's technically true, just a superset of the real return value?

#### [#5355] - (2016-11-15T11:11:13Z) - [Syntax highlighting of IEx results](https://github.com/elixir-lang/elixir/pull/5355)

Hello!

This weekend I took a stab at adding syntax highling to the repl, inspired by a thread on the mailing list a while back. Here's what I have so far- is this along the right lines?

Additionally there are a few problems.
- After these changes the Inspect protocol seems to wrap far too early. I don't understand how `Inspect.Algebra` works, so I wasn't sure how to resolve this.

![wrap](https://cloud.githubusercontent.com/assets/6134406/19656283/3eb5f478-9a17-11e6-957f-a74386f136ad.png)
- There is additional color configuration for IEx. I'm unsure how this should be changed to fit with syntax highlighting.


#### [#5449] - (2016-11-15T09:18:29Z) - [Fix typo on String.replace doc](https://github.com/elixir-lang/elixir/pull/5449)

From `insert_replace` to `insert_replaced`.

#### [#5447] - (2016-11-14T22:34:50Z) - [Allow Logger passed functions to return metadata](https://github.com/elixir-lang/elixir/pull/5447)

As discussed [here](https://groups.google.com/forum/?utm_medium=email&utm_source=footer#!msg/elixir-lang-core/20EavTVJYsw/DO0N_05qAwAJ). This allows Logger passed functions to return metadata as well. At [Timber](http://timber.io) we're logging a lot of structured data, and about to release a library that assists users in doing so. The advantage is that we can purge expensive metadata code during compile time as well.

Example:

```elixir
Logger.info(fn ->
  {"my message", [extra: :metadata]}
end
```

#### [#5448] - (2016-11-14T21:55:22Z) - [Inline do in def sequence for KernelTest](https://github.com/elixir-lang/elixir/pull/5448)

Hi all,

came across this sequence of defs which was neither aligned nor inlined, so to speak.

This PR removes the spaces.

If you prefer to align all do's, I'll be happy to change it to that.

Cheers!

#### [#5442] - (2016-11-14T10:32:09Z) - [Document implicit function try](https://github.com/elixir-lang/elixir/pull/5442)

Inspired by this comment: https://github.com/elixir-lang/elixir/pull/5441#issuecomment-259980455 :)

#### [#5445] - (2016-11-14T10:18:24Z) - [Polish docs and examples in Inspect.Algebra](https://github.com/elixir-lang/elixir/pull/5445)



#### [#5434] - (2016-11-09T21:57:21Z) - [Fix typo in Kernel](https://github.com/elixir-lang/elixir/pull/5434)

Hi all,

just a little typo in the doc for `defstruct`.

Thanks!

#### [#5433] - (2016-11-09T18:34:55Z) - [Rename vars in Kernel](https://github.com/elixir-lang/elixir/pull/5433)

Hi all,

I've seen recent PRs making a few var names more declarative, and wonder what you think of these.

I was trying to understand `define/4` in `Kernel`, and came across vars `ue` and `uc` which, at least to me, weren't quickly self-evident.

So I wonder if I even interpreted them right, and also if you think this improves things at all.

If so...great.

#### [#5424] - (2016-11-09T18:32:46Z) - [Document when some functions raise in Kernel module](https://github.com/elixir-lang/elixir/pull/5424)

Additional some examples changed to not to use "iex>" since
warnings will be emited with inlined functions.

#### [#5432] - (2016-11-09T13:07:01Z) - [Improve a line in Kernel comment](https://github.com/elixir-lang/elixir/pull/5432)

Two suggestions for wording in the `module_nesting` function comment.

Thanks for Elixir!

#### [#5420] - (2016-11-08T19:33:43Z) - [Improve docs, specs and guards for get_and_update functions](https://github.com/elixir-lang/elixir/pull/5420)

Improves docs, specs and guards for Kernel.get_and_update_in/3 and Access.get_and_update/3

#### [#5425] - (2016-11-08T18:14:20Z) - [Update defdelegate/2 docs to reflect deprecated features](https://github.com/elixir-lang/elixir/pull/5425)

I removed the examples that used deprecated features,
as well as mention which options have been deprecated.

#### [#5412] - (2016-11-08T14:27:46Z) - [Two fixes in `record/1`](https://github.com/elixir-lang/elixir/pull/5412)

Each in separate commit:
* Document use of `record/1` with atom argument.
  (it was not)
* In `record/1` used with record argument, raise ArgumentError on record size mismatch.
  (when a given record matched the record tag, but not the size, FunctionClauseError was raised in private Record.join_keyword/3)

#### [#5430] - (2016-11-08T14:26:51Z) - [Fix consistency in Calendar](https://github.com/elixir-lang/elixir/pull/5430)

All /0 types don't use parens and all atoms, such as :lt, are wrapped
properly in backtics

Reference: https://github.com/elixir-lang/elixir/commit/35f492b746d0446b28274382ea359ffd1d55c278#commitcomment-19738734

#### [#5429] - (2016-11-08T00:07:09Z) - [Simplify Kernel.match?/2](https://github.com/elixir-lang/elixir/pull/5429)

There's no need for a special handling of the underscore as the pattern,
the case expression is able of optimizing such cases too.

Additionally the right was never evaluated with underscore as the
pattern, which could lead to subtle bugs.

Currently match?(_, foo) will emit a pattern warning since both branches
of the case are exactly the same. This means such expressions had to be
removed from the test suite. They were replaced with the equivalent:

    fn _ -> true end

#### [#5428] - (2016-11-07T09:25:37Z) - [fixed a typo](https://github.com/elixir-lang/elixir/pull/5428)



#### [#5423] - (2016-11-07T07:52:20Z) - [Choose more descriptive name for Kernel.defstruct/1 result var](https://github.com/elixir-lang/elixir/pull/5423)



#### [#5422] - (2016-11-07T07:50:21Z) - [Mention how to use multiple type variables in Typespecs](https://github.com/elixir-lang/elixir/pull/5422)



#### [#5427] - (2016-11-07T07:47:25Z) - [Fix typo on Mix.Tasks.Deps.Update doc](https://github.com/elixir-lang/elixir/pull/5427)



#### [#5419] - (2016-11-06T23:07:46Z) - [Small improvements to Kernel module docs](https://github.com/elixir-lang/elixir/pull/5419)



#### [#5416] - (2016-11-06T16:55:59Z) - [Make tokenizer recognize VC merge conflict marks](https://github.com/elixir-lang/elixir/pull/5416)

The <<<<<<< symbol is used by all major VC systems including [git](https://help.github.com/articles/resolving-a-merge-conflict-from-the-command-line/), [subversion](https://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-conflicts.html) and [mercurial](https://www.mercurial-scm.org/wiki/TutorialConflict).

As proposed on the [mailing list](https://groups.google.com/forum/#!msg/elixir-lang-core/NHLXsV1e4uI/eHARgyRdBQAJ)

#### [#5418] - (2016-11-06T14:24:38Z) - [Mention true, false and nil literals in typespecs](https://github.com/elixir-lang/elixir/pull/5418)

These were missing from the docs. I'm not sure if mentioning them all in one line is the right way to do it, or should each be on a separate line.

#### [#5417] - (2016-11-05T00:08:42Z) - [Remove code for Erlang version which is no longer supported](https://github.com/elixir-lang/elixir/pull/5417)

As discussed in
https://github.com/elixir-lang/elixir/commit/c4ea85d7e5d01e17c0cd2c9d7efcb48395b16fdc#commitcomment-19701579

#### [#5414] - (2016-11-04T18:44:40Z) - [Remove use of underscore before ordinal numbers in functions and vars](https://github.com/elixir-lang/elixir/pull/5414)

this corrects the very few cases left for functions and vars, but doesn't include a few tests that still keep this.

#### [#5074] - (2016-11-04T14:55:38Z) - [Add RemoteConverger.post_converge/0 callback](https://github.com/elixir-lang/elixir/pull/5074)



#### [#5386] - (2016-11-04T14:50:43Z) - [Give a meaningful error when doctest has invalid prompt](https://github.com/elixir-lang/elixir/pull/5386)

Launching iex with:

  $ iex --sname foo

The following code will break doctests

```
  iex(foo@HOST)1> :foo
  :foo
```

and will give a non descriptive error.
That's because "skip_iex_number" never found the ")>" piece, so it
consumes the line all the way to the end until it's empty.


#### [#5408] - (2016-11-04T14:07:09Z) - [Fix Record.defrecord/3 example](https://github.com/elixir-lang/elixir/pull/5408)

Module must be imported, otherwise the `user` macros won't be available.

#### [#5411] - (2016-11-04T09:47:25Z) - [Fix the docs of Supervisor.start_link/2](https://github.com/elixir-lang/elixir/pull/5411)



#### [#5409] - (2016-11-04T09:15:56Z) - [Fix typo in Registry doc](https://github.com/elixir-lang/elixir/pull/5409)



#### [#5407] - (2016-11-03T21:52:11Z) - [Improve the docs for File.open/2 and File.open!/2](https://github.com/elixir-lang/elixir/pull/5407)

I mentioned that the second argument can be a function and renamed variables to make that clearer. I also added a spec for when the second argument is a function to `File.open!/2`.

#### [#5391] - (2016-11-03T21:09:29Z) - [Complete specs and guards for Kernel module and some submodules](https://github.com/elixir-lang/elixir/pull/5391)

Cover the specs and add guards to functions for the Kernel module, and for some submodules,

- lib/elixir/lib/kernel/error_handler.ex
- lib/elixir/lib/kernel/lexical_tracker.ex
- lib/elixir/lib/kernel/typespec.ex
- lib/elixir/lib/kernel/utils.ex

I think for we don't need to do anything
- kernel/special_forms.ex

some submodules have been left untouched
- kernel/parallel_compiler.ex
- kernel/parallel_require.ex


There are a few specs that the compiler cannot understand, marked as:
`# TODO: FIX: following line gives error`

Once this is merged, I will update in a new PR the documentation based on the specs.
Specially the one with `no_return`.

I'm still unsure about the specs for some macros and that needs reviewing.

#### [#5398] - (2016-11-03T20:15:37Z) - [Improve documentation of File.open* functions](https://github.com/elixir-lang/elixir/pull/5398)



#### [#5402] - (2016-11-03T19:57:02Z) - [Standardize of use verbs in bulleted lists](https://github.com/elixir-lang/elixir/pull/5402)



#### [#5404] - (2016-11-03T14:32:59Z) - [Implements Date.day_of_week/1](https://github.com/elixir-lang/elixir/pull/5404)



#### [#5406] - (2016-11-03T14:04:58Z) - [Fix typo in Kernel doc](https://github.com/elixir-lang/elixir/pull/5406)

Just a little typo, `it` ‚Üí `is` in the phrase
`If the left operand is not a proper list,`...

Thanks for Elixir!

#### [#5405] - (2016-11-03T13:54:37Z) - [Fix typo in Registry docs](https://github.com/elixir-lang/elixir/pull/5405)



#### [#5400] - (2016-11-03T12:29:55Z) - [Improve Module docs: keep same order in Module's @callback example](https://github.com/elixir-lang/elixir/pull/5400)

Order should be the same when defining the callback as when implementing it

#### [#5403] - (2016-11-03T11:25:18Z) - [Use Macro.to_string/1 when printing bad struct keys](https://github.com/elixir-lang/elixir/pull/5403)

In reference to https://github.com/elixir-lang/elixir/pull/5379#issuecomment-257079870 and https://github.com/elixir-lang/elixir/issues/5378

#### [#5401] - (2016-11-03T10:14:00Z) - [Fix return value for GenServer.handle_info doc](https://github.com/elixir-lang/elixir/pull/5401)



#### [#5399] - (2016-11-02T19:57:09Z) - [Improve guard in Enum.sort_by/3](https://github.com/elixir-lang/elixir/pull/5399)



#### [#5397] - (2016-11-02T18:56:41Z) - [Add Makefile variable to control ExDoc output format.](https://github.com/elixir-lang/elixir/pull/5397)

e.g.
$ make docs_elixir DOCS_FORMAT=epub

#### [#5396] - (2016-11-02T14:55:04Z) - [Clarification of aliases' non-visibility if defined in dependency](https://github.com/elixir-lang/elixir/pull/5396)

See https://elixirforum.com/t/task-aliases-in-mix-ex-of-dependencies-ignored/2218

#### [#5394] - (2016-11-02T10:46:29Z) - [Fix :count support in OptionParser.to_argv](https://github.com/elixir-lang/elixir/pull/5394)

## First Draft for Issue: #5327 

Added an opts argument to OptionParser.to_argv. This way a user can point out args of `:count` type.
If guys agree with the approach I could add the appropriate documentation.

#### [#5392] - (2016-11-01T16:34:39Z) - [ActuallCompiled -> ActuallyCompiled](https://github.com/elixir-lang/elixir/pull/5392)



#### [#5389] - (2016-11-01T16:19:30Z) - [Teach ExUnit.DocTest to handle fenced code block closings.](https://github.com/elixir-lang/elixir/pull/5389)

Previously it was having a hard time discerning what to do with them, and included them in the compiled code for the doctest.

[Discussed and vetted](https://groups.google.com/forum/#!msg/elixir-lang-core/EsRK3n7sifo/MtaX0CRaBwAJ) on #elixir-lang-core.


#### [#5367] - (2016-10-31T21:23:41Z) - [Introduce Task.async_stream/3 and Task.async_stream/5](https://github.com/elixir-lang/elixir/pull/5367)



#### [#5390] - (2016-10-31T19:54:54Z) - [Correct docs for Node.connect/1](https://github.com/elixir-lang/elixir/pull/5390)



#### [#5365] - (2016-10-30T16:43:37Z) - [Add the MapSet.t/1 type and use it where possible](https://github.com/elixir-lang/elixir/pull/5365)

I added the `MapSet.t/1` opaque type (so that a set of specific values can be represented) and reworked the specs for the functions in the `MapSet` module to use the new type.


#### [#5372] - (2016-10-30T14:13:29Z) - [Format improvements in Kernel.SpecialForms.<<>>/2 docs](https://github.com/elixir-lang/elixir/pull/5372)

Adds backticks and italics


#### [#5387] - (2016-10-29T21:12:35Z) - [Complements the docs of Version.compare/2](https://github.com/elixir-lang/elixir/pull/5387)

This patch complements the current docs of `Version.compare/2` by specifying how versions compare when patch or build segments are present.


#### [#5380] - (2016-10-29T19:02:20Z) - [Use iex> prompt in IEx.Helpers examples](https://github.com/elixir-lang/elixir/pull/5380)



#### [#5381] - (2016-10-29T19:00:20Z) - [Correct tense in Mix.Tasks.Test cmd line options](https://github.com/elixir-lang/elixir/pull/5381)



#### [#5377] - (2016-10-29T18:59:58Z) - [Various fixes](https://github.com/elixir-lang/elixir/pull/5377)

I would advice not to merge the squash the commits in this PR


#### [#5376] - (2016-10-29T14:19:25Z) - [Spell built-in instead of builtin](https://github.com/elixir-lang/elixir/pull/5376)



#### [#5382] - (2016-10-28T21:50:14Z) - [Various corrections 2](https://github.com/elixir-lang/elixir/pull/5382)



#### [#5362] - (2016-10-28T19:11:09Z) - [Improve Typespecs page and test every document type](https://github.com/elixir-lang/elixir/pull/5362)

Closes https://github.com/elixir-lang/elixir/issues/5351

Typespecs page:
- Remove literal float
- Replace improper_list/2 with nonempty_improper_list/2
- Add nonempty_maybe_improper_list/2 and nonempty_maybe_improper_list/0
- Reword documentation and comments
- Group and reorder types a bit
- Reword documentation and comments

Tests:
- Add tests for every single type described in Typespecs page
- Also test the AST


#### [#5373] - (2016-10-28T19:09:23Z) - [Properly spell UTF-8](https://github.com/elixir-lang/elixir/pull/5373)

Following spelling convention in https://github.com/elixir-lang/elixir/pull/4754


#### [#5369] - (2016-10-28T19:08:53Z) - [Edit pass over access.ex](https://github.com/elixir-lang/elixir/pull/5369)

I have read the code in _access.ex_ from top to bottom and since I was on it I edited little things here and there in passing.

This is a summary of the patch:
- Small grammar/typo corrections.
- Specify in some places what happens if a given key is not present.
- Some functions document they accept _anything_ that implements the `Access` behaviour, but according to their patterns only structs match (in addition to maps and keyword lists). Some edits revise this, which is also coherent with the sentence "_The implementation should be added to the
  module that defines the struct being accessed_".
- There is a bunch of functions that are meant to be used by `get_in/2` and friends but their documentation didn't specifically say they return _functions_ with that purpose.
- There are some clusters of functions whose implementation kind of "goes together" and had little inconsistencies I have unified to pursue visual coherence in the listing:
  - Sometimes a guard is used to check arguments (like `is_map/1`), sometimes that is done via pattern matching. I have unified them (with guards, to pick one).
  - Sometimes the implementations delegate to the analogous ones in `Map` or `Keyword`, and sometimes those implementations are duplicated here. I have unified for delegation.
  - The order of definition dispatches first structs, then maps, then keyword lists. `pop/2` was an exception, so I have reordered its clauses.
  - Some of them are one-liners and most use regular function definition syntax, except for `pop/2`, which exceptionally used the short one-liner syntax. I have unified this one as well.

While I like the resulting visual consistency, its need may be perceived differently by you guys, please feel free to ask me to revert anything in the patch.


#### [#5370] - (2016-10-28T14:10:17Z) - [Remove space around * in bit syntax in Macro.to_string/2](https://github.com/elixir-lang/elixir/pull/5370)

As discussed in https://github.com/elixir-lang/elixir/pull/5362#discussion_r85313529


#### [#5363] - (2016-10-27T07:43:31Z) - [Fix typo in Mix.Dep.Converger doc](https://github.com/elixir-lang/elixir/pull/5363)



#### [#5361] - (2016-10-26T22:33:39Z) - [Fix typo on Mix.Tasks.Deps.Tree doc](https://github.com/elixir-lang/elixir/pull/5361)



#### [#5348] - (2016-10-26T16:50:15Z) - [[WIP] Complete specs and guards for EEx](https://github.com/elixir-lang/elixir/pull/5348)

This PR covers all specs for the EEx project. 
Additionally it adds guards to functions whenever applicable.


#### [#5359] - (2016-10-26T10:00:02Z) - [Fix typo in Mix.Tasks.Deps.Precompile doc](https://github.com/elixir-lang/elixir/pull/5359)



#### [#5358] - (2016-10-26T08:19:04Z) - [Fix typo in MapSet doc](https://github.com/elixir-lang/elixir/pull/5358)



#### [#5334] - (2016-10-25T12:25:31Z) - [ExUnit.OnExitHandler: improve specs and guards](https://github.com/elixir-lang/elixir/pull/5334)

Additionally it unifies the variables `name` and `ref` across functions by calling it `name_or_ref`.


#### [#5354] - (2016-10-24T15:13:55Z) - [Append with cons instead of prepend + reverse in inspect](https://github.com/elixir-lang/elixir/pull/5354)

As discussed on IRC

\cc @josevalim 


#### [#5352] - (2016-10-24T08:49:55Z) - [Use sigils in Date/DateTime/NaiveDateTime.compare/2 doctests](https://github.com/elixir-lang/elixir/pull/5352)



#### [#5349] - (2016-10-24T06:55:44Z) - [Add Date/Time/NaiveDateTime.compare/2](https://github.com/elixir-lang/elixir/pull/5349)

Fixes #5344


#### [#5347] - (2016-10-22T21:34:24Z) - [Add --format option to `mix test` command](https://github.com/elixir-lang/elixir/pull/5347)

I'm attempting to add ExUnit test integration to the IntelliJ Elixir plugin (https://github.com/KronicDeth/intellij-elixir) and it requires a custom formatter. I was unable to figure out an easy way to run the ExUnit tests from the IDE using a custom formatter without requiring the user to make changes to the project itself, which is not ideal for an IDE plugin.

It seems useful to have the formatter be a CLI option for `mix test`, as it is for Rspec: https://www.relishapp.com/rspec/rspec-core/v/2-4/docs/command-line/format-option .

I added the option `--format`, which can be passed more than once in case the user wants to use multiple formatters (though I'm not sure why one would want to).

I'm still an Elixir amateur, and feedback is very welcome.


#### [#5345] - (2016-10-20T20:45:38Z) - [Add missing space](https://github.com/elixir-lang/elixir/pull/5345)

Missing space in docs for defstruct


#### [#5336] - (2016-10-20T13:50:18Z) - [Fix ExUnit case when dealing with timeout 0](https://github.com/elixir-lang/elixir/pull/5336)

Agent is returning `nil` when it should be `[]`.

Before the fix

``` console
$ mix test --timeout 0

  1) TestTest: failure on setup_all callback, tests invalidated
     ** (EXIT from #PID<0.122.0>) an exception was raised:
         ** (Protocol.UndefinedError) protocol Enumerable not implemented for nil
             (elixir) lib/enum.ex:1: Enumerable.impl_for!/1
             (elixir) lib/enum.ex:116: Enumerable.reduce/3
             (elixir) lib/enum.ex:1768: Enum.reverse/2
             (ex_unit) lib/ex_unit/on_exit_handler.ex:29: ExUnit.OnExitHandler.run/2
             (ex_unit) lib/ex_unit/runner.ex:307: ExUnit.Runner.exec_on_exit/3
             (ex_unit) lib/ex_unit/runner.ex:231: ExUnit.Runner.run_test/3
             (elixir) lib/enum.ex:645: Enum."-each/2-lists^foreach/1-0-"/2
             (elixir) lib/enum.ex:645: Enum.each/2
             (ex_unit) lib/ex_unit/runner.ex:162: anonymous fn/4 in ExUnit.Runner.spawn_case/3



Finished in 0.04 seconds
1 failure

Randomized with seed 146783

07:52:46.207 [error] Process #PID<0.122.0> raised an exception
** (Protocol.UndefinedError) protocol Enumerable not implemented for nil
    (elixir) lib/enum.ex:1: Enumerable.impl_for!/1
    (elixir) lib/enum.ex:116: Enumerable.reduce/3
    (elixir) lib/enum.ex:1768: Enum.reverse/2
    (ex_unit) lib/ex_unit/on_exit_handler.ex:29: ExUnit.OnExitHandler.run/2
    (ex_unit) lib/ex_unit/runner.ex:307: ExUnit.Runner.exec_on_exit/3
    (ex_unit) lib/ex_unit/runner.ex:231: ExUnit.Runner.run_test/3
    (elixir) lib/enum.ex:645: Enum."-each/2-lists^foreach/1-0-"/2
    (elixir) lib/enum.ex:645: Enum.each/2
    (ex_unit) lib/ex_unit/runner.ex:162: anonymous fn/4 in ExUnit.Runner.spawn_case/3
```

After the fix

``` console
$ mix test --timeout 0

  1) test the truth (TestTest)
     test/test_test.exs:6
     ** (ExUnit.TimeoutError) test timed out after 0ms. You can change the timeout:

       1. per test by setting "@tag timeout: x"
       2. per case by setting "@moduletag timeout: x"
       3. globally via "ExUnit.start(timeout: x)" configuration
       4. or set it to infinity per run by calling "mix test --trace"
          (useful when using IEx.pry)

     Timeouts are given as integers in milliseconds.

     stacktrace:
       (stdlib) gen.erl:168: :gen.do_call/4
       (elixir) lib/gen_server.ex:717: GenServer.call/3
       (ex_unit) lib/ex_unit/runner.ex:244: anonymous fn/3 in ExUnit.Runner.spawn_test/3



Finished in 0.04 seconds
1 test, 1 failure

Randomized with seed 793170
```


#### [#5340] - (2016-10-19T13:38:23Z) - [Test against Erlang 19.1](https://github.com/elixir-lang/elixir/pull/5340)

Browsing the repo just noticed that the latest Erlang minor release was missing and thought it'd be a good idea to add it :)


#### [#5338] - (2016-10-19T11:03:37Z) - [Fix ExUnit "test invalidated" message typo](https://github.com/elixir-lang/elixir/pull/5338)



#### [#5335] - (2016-10-18T07:38:39Z) - [File doc changes](https://github.com/elixir-lang/elixir/pull/5335)

- "It returns" -> "Returns" for consistency with the rest of the file
- Remove extra space in example for `File.stream!`


#### [#5332] - (2016-10-18T01:17:17Z) - [Improve specs and guards in Code module](https://github.com/elixir-lang/elixir/pull/5332)



#### [#5331] - (2016-10-18T01:12:22Z) - [GenEvent: improve specs and guards](https://github.com/elixir-lang/elixir/pull/5331)



#### [#5333] - (2016-10-17T14:30:35Z) - [Page Typespecs: Sort alphabetically literals, basic and built-in types](https://github.com/elixir-lang/elixir/pull/5333)



#### [#5326] - (2016-10-17T10:32:14Z) - [Add/correct arities (part 3)](https://github.com/elixir-lang/elixir/pull/5326)

- Add missing arities to functions, callbacks and types
- ~~Remove backticks from wildcard function references such as in
  "`start*` functions", to use italics instead "_start*_  functions"~~

For posterity, the command used to find out these errors:

``` console
$ ag "\`[^ /]+\`\s+(fun|function|callback|type|typespec|helper)"
```


#### [#5329] - (2016-10-17T09:12:51Z) - [ExUnit.Callbacks: improve guards, specs and small docs correction](https://github.com/elixir-lang/elixir/pull/5329)



#### [#5330] - (2016-10-17T08:59:14Z) - [fix examples in module_nesting comment in Kernel](https://github.com/elixir-lang/elixir/pull/5330)



#### [#5323] - (2016-10-14T17:59:13Z) - [Kernel.++/2: comment on improper lists being returned](https://github.com/elixir-lang/elixir/pull/5323)

There is one thing that could be improved, and it is the summary of the function:

> Concatenates two lists.

where right operand does not necessarily need to be a list


#### [#5316] - (2016-10-14T09:46:46Z) - [Link to callbacks](https://github.com/elixir-lang/elixir/pull/5316)



#### [#5317] - (2016-10-14T09:42:21Z) - [Documentation: Add arity, correct arity, and link to callbacks and types](https://github.com/elixir-lang/elixir/pull/5317)

Continuation of https://github.com/elixir-lang/elixir/pull/5301


#### [#5299] - (2016-10-14T09:39:55Z) - [File.rmdir!/1: give a less confusing error message when directory is not empty](https://github.com/elixir-lang/elixir/pull/5299)

Closes https://github.com/elixir-lang/elixir/issues/5296


#### [#5321] - (2016-10-14T09:35:10Z) - [Reword ISO 8601 and add link to standard](https://github.com/elixir-lang/elixir/pull/5321)

- Corrects spelling of "ISO 8601", a space must be used, as that's the name of the standard
- It adds a link to standard (pdf file)
- it changes "ISO 8601" to "ISO 8601:2004" where the year was ommited


#### [#5322] - (2016-10-14T08:47:45Z) - [Rewording and spelling of 3 docs](https://github.com/elixir-lang/elixir/pull/5322)



#### [#5320] - (2016-10-13T15:24:19Z) - [Fix typo: :sasl_logger_tty_h -> :sasl_report_tty_h](https://github.com/elixir-lang/elixir/pull/5320)

#5319


#### [#5298] - (2016-10-13T10:40:45Z) - [Support add() and diff() for NaiveDateTime](https://github.com/elixir-lang/elixir/pull/5298)

Fixes https://github.com/elixir-lang/elixir/issues/5260

Feedback is more than welcome.  I'm sure I did several silly things here.


#### [#5300] - (2016-10-13T08:05:38Z) - [Enforce rule of only guards should start with "is_"](https://github.com/elixir-lang/elixir/pull/5300)



#### [#5315] - (2016-10-13T07:51:09Z) - [Add backticks to Kernel module](https://github.com/elixir-lang/elixir/pull/5315)



#### [#5311] - (2016-10-12T20:40:11Z) - [Add tuple to Access.t](https://github.com/elixir-lang/elixir/pull/5311)

The following clearly works:

``` elixir
iex(1)> get_in({nil, %{a: :b}}, [Access.elem(1), :a])
:b
```

However code like this fails to dialyze, due to `tuple` not being an allowed alternative in `Access.t`.


#### [#5301] - (2016-10-12T20:23:06Z) - [Correct arity in docs: functions and types](https://github.com/elixir-lang/elixir/pull/5301)



#### [#5314] - (2016-10-12T16:56:12Z) - [Reword "latest  moment possible" to "latest  possible moment"](https://github.com/elixir-lang/elixir/pull/5314)



#### [#5313] - (2016-10-12T16:41:55Z) - [Add backticks to Stack server](https://github.com/elixir-lang/elixir/pull/5313)



#### [#5312] - (2016-10-12T16:34:29Z) - [ISSUE TEMPLATE: remove mailing list as a source for getting help](https://github.com/elixir-lang/elixir/pull/5312)



#### [#5305] - (2016-10-12T08:04:01Z) - [ExUnit includes tests when configured with [include: :skip]](https://github.com/elixir-lang/elixir/pull/5305)

Currently any tests tagged with `@tag :skip` will be skipped even if ExUnit is configured with `[include: :skip]`.

For instance:

```
ExUnit.configure include: :skip

@tag :skip
test "never run" do
  raise "oops"
end
```

Produces:

``` bash
Including tags: [:skip]

Finished in 0.05 seconds
1 test, 0 failures, 1 skipped
```

This seems confusing. I have changed the behavior in this PR to allow skipped tests to be included. However, if that is not the desired behavior then I would suggest at least emitting a warning instead of erroneously emitting `Including tags: [:skip]`. I'd be happy to make that change. Let me know. Thanks.

P.S. I do have a valid use case for this behavior which lead me to discover the issue. I'd be happy to elaborate if you need more information.


#### [#5303] - (2016-10-11T22:55:16Z) - [Use singular time units](https://github.com/elixir-lang/elixir/pull/5303)

related to: https://github.com/elixir-lang/elixir/pull/5244


#### [#5308] - (2016-10-11T22:49:47Z) - [Reword "pseudo-variables" with "compilation environment macros"](https://github.com/elixir-lang/elixir/pull/5308)

As discussed in https://github.com/elixir-lang/elixir/pull/5301#pullrequestreview-3711427


#### [#5275] - (2016-10-11T10:21:09Z) - [Update applications built by mix new](https://github.com/elixir-lang/elixir/pull/5275)

- Include a link to ExDoc and update links to hexdocs.pm
- Generate @moduledoc and @doc with doctests
- For --sup projects, move the application module to Mod.Application

/cc @elixir-lang/elixir 


#### [#5302] - (2016-10-10T14:50:17Z) - [Fix typo in README.md](https://github.com/elixir-lang/elixir/pull/5302)

Fixed `comitters` => `committers`


#### [#5295] - (2016-10-09T09:02:31Z) - [Compile or/2 and and/2 to case/2 when in non-guard context](https://github.com/elixir-lang/elixir/pull/5295)



#### [#5292] - (2016-10-07T10:33:53Z) - [Improve `Task.yield/2` docs to suggest `Task.shutdown/1`](https://github.com/elixir-lang/elixir/pull/5292)

As discussed on the mailing list:

https://groups.google.com/forum/#!topic/elixir-lang-core/0uaxTaVN-bw


#### [#5294] - (2016-10-06T22:58:28Z) - [Add an example of Regex.scan/3 using unicode](https://github.com/elixir-lang/elixir/pull/5294)

Issue #5293


#### [#5291] - (2016-10-05T11:31:09Z) - [Improve changelog entry.](https://github.com/elixir-lang/elixir/pull/5291)

There were a few other functions added in #5140.


#### [#5290] - (2016-10-04T14:15:19Z) - [Mix: use gmake on FreeBSD instead of make](https://github.com/elixir-lang/elixir/pull/5290)

Using `make` will fails for Erlang projects using `erlang.mk`.


#### [#5289] - (2016-10-04T14:12:07Z) - [Implement Stream.zip/1 and Enum.zip/1](https://github.com/elixir-lang/elixir/pull/5289)

Similar to the corresponding `zip/2` functions, except allows any number of
input enumerables.

Based on a [suggestion by Jos√©](https://groups.google.com/d/msg/phoenix-core/2EWFCMYxDBk/KLRWbYOEBQAJ) on the phoenix-core mailing list.


#### [#5286] - (2016-10-04T12:17:11Z) - [Fix Dialyzer warnings on protocol calls with opaque arguments](https://github.com/elixir-lang/elixir/pull/5286)

Prior to this change, calling a protocol function with an opaque type would yield a warning, as Dialyzer concludes that the `impl_for/1` function can't handle opaque arguments, since all clauses would destructure their arguments in some way.

By adding a catch-all clause that does not destructure its argument, Dialyzer no longer draws this conclusion, and the warnings go away.

As noted in the protocol.ex comment, this is technically a hack as it relies on Dialyzer not being smart enough. However, I would not expect it to break soon, if ever.

Of course, there is a non-hacky way of solving this problem, which is to not declare any type that implements a protocol as opaque in the first place. However, I believe the Elixir team will agree that such a restriction is undesirable.


#### [#5269] - (2016-10-04T07:34:22Z) - [Fixes a silly typo in the docs](https://github.com/elixir-lang/elixir/pull/5269)

The "(or `start/3`)" bit in the gen_server docs broke both the `)` from
showing up in the HTML, and the `start/3` link from working correctly.
Adding a space "(or `start/3` )" fixes both of those problems.


#### [#5283] - (2016-10-02T18:07:02Z) - [Typo: "before being merged" instead of "before merged"](https://github.com/elixir-lang/elixir/pull/5283)



#### [#5284] - (2016-10-02T17:58:54Z) - [Consistency: Use underscore after "my" adjective in underscore](https://github.com/elixir-lang/elixir/pull/5284)

Additionally, the are still some other changes that could be done of the same kind, but they are all part of tests.
let me know if you want to have consistency in tests as well.

``` elixir
$ ag -s "my[a-z0-9]"
...

lib/elixir/test/elixir/kernel/typespec_test.exs
43:    assert_raise CompileError, ~r"invalid type specification: mytype = 1", fn ->
45:        @type mytype = 1
53:        @type mytype :: "foobar"
74:      @type mytype :: term
77:    assert [type: {:mytype, {:type, _, :term, []}, []}] =
101:      @type mytype :: 10
103:    assert [type: {:mytype, {:integer, _, 10}, []}] =
109:      @type mytype :: -10
112:    assert [type: {:mytype, {:op, _, :-, {:integer, _, 10}}, []}] =
129:      @type mytype :: binary
132:    assert [type: {:mytype, {:type, _, :binary, []}, []}] =
138:      @type mytype :: <<>>
141:    assert [type: {:mytype, {:type, _, :binary, [{:integer, _, 0}, {:integer, _, 0}]}, []}] =
147:      @type mytype :: <<_::3>>
150:    assert [type: {:mytype, {:type, _, :binary, [{:integer, _, 3}, {:integer, _, 0}]}, []}] =
156:      @type mytype :: <<_ :: _ * 8>>
159:    assert [type: {:mytype, {:type, _, :binary, [{:integer, _, 0}, {:integer, _, 8}]}, []}] =
165:      @type mytype :: <<_::3, _::_*8>>
168:    assert [type: {:mytype, {:type, _, :binary, [{:integer, _, 3}, {:integer, _, 8}]}, []}] =
175:        @type mytype :: <<_::3*8>>
182:      @type mytype :: 1..10
185:    assert [type: {:mytype, {:type, _, :range, [{:integer, _, 1}, {:integer, _, 10}]}, []}] =
232:        @type mytype :: %ThisModuleDoesNotExist{}
238:        @type mytype :: %TestTypespec{}
247:        @type mytype :: %TestTypespec{no_field: :world}
299:        @type mytype :: record(:this_record_does_not_exist, [])
309:        @type mytype :: record(:timestamp, no_field: :foo)
324:      @type mytype :: []
325:      @type mytype1 :: [integer]
326:      @type mytype2 :: [integer, ...]
329:    assert [type: {:mytype, {:type, _, nil, []}, []},
330:            type: {:mytype1, {:type, _, :list, [{:type, _, :integer, []}]}, []},
331:            type: {:mytype2, {:type, _, :nonempty_list, [{:type, _, :integer, []}]}, []}] =
337:      @type mytype :: (... -> any)
340:    assert [type: {:mytype, {:type, _, :fun, []}, []}] =
346:      @type mytype :: (integer, integer -> integer)
349:    assert [type: {:mytype, {:type, _, :fun, [{:type, _, :product,
357:      @type mytype :: (() -> integer)
360:    assert [type: {:mytype, {:type, _, :fun, [{:type, _, :product, []},
367:      @type mytype :: (... -> integer)
370:    assert [type: {:mytype, {:type, _, :fun, [{:type, _, :any},
402:      @type mytype(x) :: x
403:      @type mytype1(x) :: list(x)
404:      @type mytype2(x, y) :: {x, y}
407:    assert [type: {:mytype, {:var, _, :x}, [{:var, _, :x}]},
408:            type: {:mytype1, {:type, _, :list, [{:var, _, :x}]}, [{:var, _, :x}]},
409:            type: {:mytype2, {:type, _, :tuple, [{:var, _, :x}, {:var, _, :y}]}, [{:var, _, :x}, {:var, _, :y}]}] =
415:      @type mytype :: (named :: integer)
416:      @type mytype1 :: (a :: integer -> integer)
419:    assert [type: {:mytype, {:ann_type, _, [{:var, _, :named}, {:type, _, :integer, []}]}, []},
420:            type: {:mytype1, {:type, _, :fun, [{:type, _, :product, [{:ann_type, _, [{:var, _, :a}, {:type, _, :integer, []}]}]}, {:type, _, :integer, []}]}, []}] =
426:      @opaque mytype(x) :: x
429:    assert [opaque: {:mytype, {:var, _, :x}, [{:var, _, :x}]}] =
435:      @type mytype :: tuple
436:      @opaque mytype1 :: {}
439:    assert [opaque: {:mytype1, _, []},
440:            type: {:mytype, _, []}, ] =
481:      @type mytype :: tuple
482:      @type mytype(a) :: [a]
483:      assert Kernel.Typespec.defines_type?(__MODULE__, :mytype, 0)
484:      assert Kernel.Typespec.defines_type?(__MODULE__, :mytype, 1)
485:      refute Kernel.Typespec.defines_type?(__MODULE__, :mytype, 2)

lib/elixir/test/elixir/exception_test.exs
76:      Code.eval_string("def foo do end", [], file: "myfile")
79:    assert Exception.format_stacktrace(System.stacktrace) =~ "myfile:1: (file)"
84:      Code.eval_string("defmodule FmtStack do raise ArgumentError, ~s(oops) end", [], file: "myfile")
87:    assert Exception.format_stacktrace(System.stacktrace) =~ "myfile:1: (module)"

lib/elixir/test/elixir/uri_test.exs
108:                path: "/mydirectory/myfile.txt", query: nil, fragment: nil,
110:           URI.parse("ftp://user001:secretpassword@private.ftp-servers.example.com/mydirectory/myfile.txt")
116:                path: "/mydirectory/myfile.txt", query: nil, fragment: nil, port: 22} ==
117:           URI.parse("sftp://user001:secretpassword@private.ftp-servers.example.com/mydirectory/myfile.txt")
123:                path: "/mydirectory/myfile.txt", query: nil, fragment: nil, port: 69} ==
124:           URI.parse("tftp://user001:secretpassword@private.ftp-servers.example.com/mydirectory/myfile.txt")
```


#### [#5281] - (2016-10-01T20:46:01Z) - [More helpful error message when Process.register/2 fails](https://github.com/elixir-lang/elixir/pull/5281)

Hey :wave:

This PR improves the error message displayed when call to `Process.register/2` fails for any reason.

Currently the error is:

```
iex(2)> Process.register(self(), :test)
** (ArgumentError) argument error
             :erlang.register(:test, #PID<0.170.0>)
    (elixir) lib/process.ex:414: Process.register/2
```

The new message is as follows:

```
iex(2)> Process.register(self(), :test)
** (ArgumentError) could not register the process #PID<0.81.0> with name :test. Or the process is not alive, or the name is already taken, or the process has already been named
    (elixir) lib/process.ex:429: Process.register(#PID<0.81.0>, :test)
```

Detailed conversation about the different error cases can be found in PR #5278 

Thanks,
Ville


#### [#5280] - (2016-10-01T08:38:07Z) - [Flush error_logger before capturing](https://github.com/elixir-lang/elixir/pull/5280)

/cc @myronmarston 


#### [#5262] - (2016-10-01T08:37:00Z) - [Switch Logger to Erlang's gen_event](https://github.com/elixir-lang/elixir/pull/5262)

Closes #5255.


#### [#5273] - (2016-09-30T09:51:00Z) - [Check directory existence in mix task new](https://github.com/elixir-lang/elixir/pull/5273)

Fix for #5272


#### [#5250] - (2016-09-29T20:30:18Z) - [Log error on unhandled GenServer message by default](https://github.com/elixir-lang/elixir/pull/5250)



#### [#5270] - (2016-09-29T08:48:01Z) - [Fix Macro.to_string when printing keywords](https://github.com/elixir-lang/elixir/pull/5270)

It was incorrect when given a literal atom resembling an alias.

Fixes #5268


#### [#5263] - (2016-09-28T10:19:33Z) - [Fix typespec for Mix.ProjectStack.project()](https://github.com/elixir-lang/elixir/pull/5263)

#### What does this PR do?

Fixes typespec for Mix.ProjectStack.project()
#### Where should the reviewer start?

[This type is a tuple](https://github.com/elixir-lang/elixir/blob/v1.3.3/lib/mix/lib/mix/project_stack.ex#L8):

```
@typep project :: {module, config, file}
```

[This method returns a map](https://github.com/elixir-lang/elixir/blob/v1.3.3/lib/mix/lib/mix/project_stack.ex#L65):

```
@spec peek() :: project | nil
def peek do
  get fn %{stack: stack} ->
    case stack do
      [h | _] -> take(h)
      [] -> nil
    end
  end
end
```
#### How should this be manually tested?

Easiest would be to clone this project => [ProjectStackTypespec](https://github.com/amorphid/project_stack_typespec)

```
$ git clone git@github.com:amorphid/project_stack_typespec.git
$ cd project_stack_typespec
$ mix deps.get
$ mix dialyzer.plt
$ mix dialyzer

  Starting Dialyzer...
  ...
  example.ex:8: The pattern _stack@1 = #{'config':=_config@1, 'name':=_, 'file':=_} can never match the type 'nil' | {atom(),[{atom(),_}],binary()}
  ...

```


#### [#5252] - (2016-09-25T18:13:44Z) - [Fix Task.shutdown/1,2 infinite block when no monitor](https://github.com/elixir-lang/elixir/pull/5252)

If the monitor no longer exists Task.shutdown/2 would block forever
waiting for it. Always setup new monitor and try to get the right down
result.


#### [#5241] - (2016-09-24T14:28:29Z) - [Add info about protocols in the i/1 IEx Helpers](https://github.com/elixir-lang/elixir/pull/5241)

With this PR, we show info about the protocols that a given data structure implements and in case that data structure is a module that is also a protocol, we show all the data structures that implement that protocols as well.

Opening this really early to get feedback on the feel of it and especially on how we find the protocols that a given data structure implements. I noticed that, as far as I can tell, using `Protocol.extract_protocols/1` + `Protocol.extract_impls/2` doesn't pick up protocols defined on the fly in the shell, but I may be getting something wrong or we may not care about this :)

Wdyt roughly? Style and implementation details will be refined before merging btw :)


#### [#5245] - (2016-09-23T06:48:44Z) - [exit(child, :kill) -> Process.exit(child, :kill)](https://github.com/elixir-lang/elixir/pull/5245)

Because consistency! <3


#### [#5244] - (2016-09-22T20:28:13Z) - [Use singular names for time units, as in Erlang/OTP 19.1. Fix #5236](https://github.com/elixir-lang/elixir/pull/5244)



#### [#5243] - (2016-09-22T13:42:03Z) - [Fix precision note in "Operators" doc](https://github.com/elixir-lang/elixir/pull/5243)

The current wording implies that e.g. `3.3` will be converted to `3`, which isn't the case.


#### [#5242] - (2016-09-22T08:25:20Z) - [Correct operator type name in sorting order](https://github.com/elixir-lang/elixir/pull/5242)

based on 
https://github.com/elixir-lang/elixir/pull/5238/files#diff-50948d471af46f8f79bf8d175641fa42R67
by @fboyer 


#### [#5238] - (2016-09-21T21:07:01Z) - [Clarify some of the subtleties linked to term ordering in the docs](https://github.com/elixir-lang/elixir/pull/5238)

As it was discussed with @whatyouhide in #5222, here is a quick attempt to add the missing key information around term ordering in the docs without directly copying the Erlang docs.

Let me know if you have any suggestions and/or comments.

Cheers!


#### [#5237] - (2016-09-21T19:46:57Z) - [Add documentation: `Enum.random` accepting ranges](https://github.com/elixir-lang/elixir/pull/5237)

Based on
https://hashrocket.com/blog/posts/the-adventures-of-generating-random-numbers-in-erlang-and-elixir

There was no documentation about `Enum.random` accepting ranges and that it will not expand the range so it is safe to pass something like `Enum.random(1..100_000)`. This PR adds this documentation as well as a doctest.


#### [#5235] - (2016-09-21T08:27:34Z) - [Fixing spelling mistakes of specially -> especially.](https://github.com/elixir-lang/elixir/pull/5235)



#### [#5233] - (2016-09-20T19:33:33Z) - [Polish the example in the docs for Mix.Config.config/3](https://github.com/elixir-lang/elixir/pull/5233)

In the docs for `Mix.Config.config/2` we show that we actually _merge_ the configuration. In the example for `Mix.Config.config/3` however this is not as clear (and users could maybe think that config is replaced, not merged). This PR makes the example in `config/3` more similar to `config/2`. :)


#### [#5230] - (2016-09-20T11:02:36Z) - [Add a section about comparison operators in the "Operators" page](https://github.com/elixir-lang/elixir/pull/5230)

As discussed in #5222.


#### [#5231] - (2016-09-20T09:09:24Z) - [Add light foreground and background colors to IO.ANSI](https://github.com/elixir-lang/elixir/pull/5231)

I added a very basic spec, as well. I didn't see where these values were being tested explicitly, if they are.

If this can be merged, it might be nice to convert some of the warnings (I'm looking at mix, in particular) from `[:red, :bright]`, which is essentially bold light red to `[:light_red]`, which is... light red and seems more appropriate.

I would be more than happy to help with that work, as well, should you wish for it to be done.


#### [#5229] - (2016-09-19T09:32:28Z) - [Extended test suite for Enum.concat/2](https://github.com/elixir-lang/elixir/pull/5229)

Those match some missing cases. 


#### [#5227] - (2016-09-19T06:47:13Z) - [fix calendar moduledocs typo](https://github.com/elixir-lang/elixir/pull/5227)



#### [#5226] - (2016-09-18T10:18:24Z) - [Fix small typo](https://github.com/elixir-lang/elixir/pull/5226)



#### [#5223] - (2016-09-15T18:02:19Z) - [Fix recently introduced typo](https://github.com/elixir-lang/elixir/pull/5223)

Fix typo üê± 


#### [#5220] - (2016-09-15T12:27:15Z) - [change mix cmd to use --app instead of --only](https://github.com/elixir-lang/elixir/pull/5220)

Discussion in 
https://github.com/elixir-lang/elixir/pull/5211


#### [#5218] - (2016-09-15T09:12:02Z) - [Return given value in Module.put_attribute/3](https://github.com/elixir-lang/elixir/pull/5218)



#### [#5219] - (2016-09-15T08:19:01Z) - [Fix `struct` built-in type documentation](https://github.com/elixir-lang/elixir/pull/5219)

As discussed in https://github.com/elixir-ecto/ecto/pull/1689


#### [#5217] - (2016-09-14T19:04:53Z) - [Document additional options for String.split/3](https://github.com/elixir-lang/elixir/pull/5217)

Issue #5213


#### [#5215] - (2016-09-14T14:26:15Z) - [Polish the docs for dependency options in Mix.Tasks.Deps](https://github.com/elixir-lang/elixir/pull/5215)



#### [#5214] - (2016-09-14T11:45:32Z) - [Fix some `exported from case` from erlang source](https://github.com/elixir-lang/elixir/pull/5214)

Some erlang code were emiting a warning message when some
variables were defined inside the case statement.


#### [#5211] - (2016-09-14T08:31:24Z) - [Allow a list of apps to be passed to mix cmd](https://github.com/elixir-lang/elixir/pull/5211)

Allows a list of apps to be passed to mix cmd and limits the execution of the cmd to only apps in the list. Defaults to all if list is empty.

example
`mix cmd --app1 --app2 mix test`

Todo:
Update tests


#### [#5207] - (2016-09-11T16:09:22Z) - [Fix operators table](https://github.com/elixir-lang/elixir/pull/5207)



#### [#5206] - (2016-09-11T12:30:49Z) - [Polish the documentation for a bunch of Mix.* modules](https://github.com/elixir-lang/elixir/pull/5206)

The most important change is listing a few options supported by `project/0` in the documentation for the `Mix.Project` module. I've wanted to do this for a while since it's hard to get a grasp of what _can_ be returned in `project/0`; this is not a comprehensive list but I hope it can still be helpful and at least point people to the right direction :)


#### [#5204] - (2016-09-11T08:58:58Z) - [Explain race condition in assert_receive to user when it happens](https://github.com/elixir-lang/elixir/pull/5204)

Fixes #5199

When using assert_receive, it is possible for the following sequence of
events:
1. `after` timeout triggers, indicating messages was not received
2. Process receive messages
3. `Process.info(self(), :messages)` is called and gets message
`assert_receive` was waiting for.

Previously, `assert_receive` would not check the output `Process.info(self, :messages)` for the expected pattern, so it would print a confusing error message that said "No message matching <pattern> after <timeout>ms", but then show a matching message in the "Process mailbox" section.  Now, for this special race-condition, a long-form explanation that the message is being delivered at or near the timeout is being printed, along with how this could impact production and how to fix it if it only impacts tests.
## Design Review

So, there are multiple points where I'd like feedback on the design:
1. Should the failure message be so long and wordy.  (I would gladly taking editing/technical writing changes.)
2. Should the corrective actions list use `Macro` to try to give the exact new code to use, since option (1) doesn't say explicitly how to increase the timeout to one `assert_receive`.
3. Should I still use the overridden `failure_message` when the race condition occurs (and then append the part starting from ", but a matching [...]" OR is the way I did it okay, because it's such an exceptional case that the new explanation should always be used.
4. I can consistently trigger the bug by having the timeout for `Process.send_after` and the `assert_receive` timeout be the same, but is that a fluke of my setup?  I don't want this to become a flaky test that sometimes fails the build and requires manual rebuilds.  Should I be simulating the race condition instead of activating it directly?


#### [#5203] - (2016-09-10T16:08:31Z) - [Refactor some error messages in OptionParser](https://github.com/elixir-lang/elixir/pull/5203)

@josevalim decided to go with a PR anyways, I prefer if someone else gives this a look before merging anyways :)


#### [#5201] - (2016-09-10T10:45:11Z) - [Fix the name of the last argument to defmodule/2 and defprotocol/2](https://github.com/elixir-lang/elixir/pull/5201)

This makes the code slightly uglier but I think the documentation benefits from it. Wdyt? :)


#### [#5200] - (2016-09-10T10:08:12Z) - [Improve the i/1 IEx helper for module-like atoms](https://github.com/elixir-lang/elixir/pull/5200)

For atoms such as `LooksLikeAModule`, we don't show the raw representation (`:"Elixir.LooksLikeAModule"`). With this commit, we do. What does everyone think about this change? :)


#### [#5194] - (2016-09-09T23:25:14Z) - [Keep mtime when copying files](https://github.com/elixir-lang/elixir/pull/5194)

Fixes #5193 


#### [#5198] - (2016-09-09T21:38:15Z) - [Change argument 'val' to 'value' in Map.put/3](https://github.com/elixir-lang/elixir/pull/5198)

```
Puts the given `value` under `key` in `map`.
```

The documentation for Map.put/3 refers to the `value` function argument, even though it is actually called `val`. We should rename it to `value` for consistency with other examples.


#### [#5158] - (2016-09-09T14:38:19Z) - [Update Logger.metadata\1 documentation](https://github.com/elixir-lang/elixir/pull/5158)

Logger.metadata\1 recently got the ability to remove a key. Just updating the docs to inform users of this.


#### [#5196] - (2016-09-09T14:37:41Z) - [Remove deprecated module compile time information](https://github.com/elixir-lang/elixir/pull/5196)

Addresses the second item of #4617 


#### [#5195] - (2016-09-08T19:50:41Z) - [Fix String.splitter/3 doctests formatting](https://github.com/elixir-lang/elixir/pull/5195)



#### [#5182] - (2016-09-07T20:39:12Z) - [Introduce Process.send_after/4](https://github.com/elixir-lang/elixir/pull/5182)

For some reason the `/4` version was missing.


#### [#5185] - (2016-09-07T20:38:51Z) - [exclude git sparse tests when git < 1.7.4](https://github.com/elixir-lang/elixir/pull/5185)

fixes https://github.com/elixir-lang/elixir/issues/5176


#### [#5189] - (2016-09-07T15:29:54Z) - [Remove `b(Dict)` example](https://github.com/elixir-lang/elixir/pull/5189)

Because:

```
iex(2)> b(Dict)
No callbacks for Dict were found
```


#### [#5186] - (2016-09-07T10:35:08Z) - [Specify that the timeout is expressed in milliseconds for increased clarity](https://github.com/elixir-lang/elixir/pull/5186)

Noticed it was missing in the `refute_receive` docs and also looked and added it to the `receive` docs. It was already specified for `assert_receive`.

Anywhere else that I should check that might benefit from this addition? Feedback on way to introduce this/wording welcome as always :)


#### [#5187] - (2016-09-06T19:50:47Z) - [Correct small inaccuracy in EEx.Engine moduledoc](https://github.com/elixir-lang/elixir/pull/5187)

Those pesky off by 1 errors. :)


#### [#5179] - (2016-09-03T23:55:39Z) - [Produce meaningful warning when with's else clauses have no effect](https://github.com/elixir-lang/elixir/pull/5179)

Isolated example:

``` elixir
defmodule Foo do
  def foo(arg) do
    with foo = arg do
      foo
    else
      _ -> :not_ok
    end
  end
end
```

which translates to:

``` elixir
defmodule Foo do
  def foo(arg) do
    case (foo = arg; {:ok, foo}) do
      {:ok, result} -> result
      {:error, _} -> :not_ok
    end
  end
end
```

I have found which part should be marked as `generated` to suppress the "this clause cannot match because of different types/sizes" warning.
However, I think we can make it even better: with this patch that code produces meaningful warning and also we simply dropping else clauses.
Thoughts?

Closes #5164.


#### [#5180] - (2016-09-02T16:09:47Z) - [Minor grammatical improvements to documentation writing guide](https://github.com/elixir-lang/elixir/pull/5180)



#### [#5183] - (2016-09-01T21:31:47Z) - [Align multiline when in specs to the standard](https://github.com/elixir-lang/elixir/pull/5183)

As discovered in https://github.com/elixir-lang/elixir/pull/5182 some `when`s where misaligned.

I'm not sure if that's the right way to indent all of them, so suggestions are welcome.

\cc @lexmag 


#### [#5175] - (2016-08-31T22:51:57Z) - [Minor grammatical improvements to the doctest documentation](https://github.com/elixir-lang/elixir/pull/5175)



#### [#5178] - (2016-08-31T17:56:22Z) - [Fix typos in file.ex](https://github.com/elixir-lang/elixir/pull/5178)



#### [#5177] - (2016-08-31T14:34:10Z) - [Update helpers.ex](https://github.com/elixir-lang/elixir/pull/5177)

Corrected typo in n1/2 documentation


#### [#5174] - (2016-08-30T02:59:37Z) - [Ignore .fetch in project root](https://github.com/elixir-lang/elixir/pull/5174)

This PR adds `.fetch` to the Git ignore directory in case people find themselves editing deps inside the dependency directory. If you edit something in the `deps/` directory, then commit it, future updates will cause the following error:

```
error: The following untracked working tree files would be overwritten by checkout:
        .fetch
Please move or remove them before you can switch branches.
```

This is a easy fix to help people avoid shooting themselves in the foot (like I did).


#### [#5172] - (2016-08-29T11:46:53Z) - [To avoid confusion with `List.delete_at/2`](https://github.com/elixir-lang/elixir/pull/5172)

As `List.delete([1, 2, 2, 3], 2)` and `List.delete_at([1, 2, 2, 3], 2)` has same result.
I think `List.delete([4, 5, 5, 6], 5)` is a better example to avoid misunderstanding.


#### [#5170] - (2016-08-28T15:34:59Z) - [Wrap fn calls in parens in Macro.to_string/1,2](https://github.com/elixir-lang/elixir/pull/5170)

Right now, application of anonymous function literals in `Macro.to_string/2` is represented like this:

``` elixir
Macro.to_string(quote do: (fn x -> x end).(1))
#=> "fn x -> x end.(1)"
```

While this is valid, I think it's far more common (and personally, much less confusing) to have such calls with the literal `fn` wrapped in parens:

``` elixir
(fn x -> x end).(1)
```

This PR makes `Macro.to_string/2` behave like this. Sorry I jumped the mailing list for discussing this, but the feature was quite small to implement and I wanted to try it out first anyways, so I thought a PR would be ok :)


#### [#5169] - (2016-08-28T15:28:30Z) - [Polish some code around Stream.zip/2](https://github.com/elixir-lang/elixir/pull/5169)

Minor (and a bit random) improvements, but they may still be worth it :)


#### [#5167] - (2016-08-27T20:51:47Z) - [Add a "Guards" page to the docs](https://github.com/elixir-lang/elixir/pull/5167)

Final part of #5129 :)

\cc @fishcakez 


#### [#5168] - (2016-08-27T20:09:03Z) - [Mention the optional function in the docs for Macro.to_string/2](https://github.com/elixir-lang/elixir/pull/5168)

The optional function was not documented at all. If we plan on having `Macro.to_string/2` public (which I assume we do since, well, it's public :bowtie:) I think we should document it properly :)


#### [#5166] - (2016-08-27T04:14:47Z) - [Fix typo in `List`](https://github.com/elixir-lang/elixir/pull/5166)

Fixes typo 'convertion', replacing with 'conversion'.


#### [#5156] - (2016-08-26T21:51:25Z) - [Improve UndefinedFunctionError when using macros without require](https://github.com/elixir-lang/elixir/pull/5156)

Should be a start for #5152 :) Let me know what you think!


#### [#5165] - (2016-08-26T18:20:58Z) - [Don't crash in macro_exported?/3 when dealing with Erlang modules](https://github.com/elixir-lang/elixir/pull/5165)

Right now, `Kernel.macro_exported?/3` blindly calls `__info__/1` on the given module, but since `__info__/1` is defined by Elixir when compiling modules, this breaks if an Erlang module is passed to `macro_exported?/3`. This commit fixes this behaviour by always returning `false` in `macro_exported?/3` when an Erlang module is given.

This is mildly related to #5156, which is gonna be a bit simpler once we merge this.

\cc @josevalim 


#### [#5162] - (2016-08-25T23:21:32Z) - [Update special_forms.ex documentation](https://github.com/elixir-lang/elixir/pull/5162)

Add the punctuation mark "," after link words


#### [#5160] - (2016-08-25T00:12:07Z) - [Fix a typo in the ExDoc for File.stream!/3](https://github.com/elixir-lang/elixir/pull/5160)

Fix a typo in the name of a parameter in the ExDoc comment for `File.stream!/3`


#### [#5151] - (2016-08-23T16:29:26Z) - [Add example of sending/handling custom messages to GenServer documentation](https://github.com/elixir-lang/elixir/pull/5151)

Adding hint how to use `Process.send_after` with GenServer.
It could save hours of time for newcomers like me.


#### [#5146] - (2016-08-23T11:05:25Z) - [Improve docs for iex helper v/0, v/1 giving examples](https://github.com/elixir-lang/elixir/pull/5146)



#### [#5147] - (2016-08-21T14:04:52Z) - [Minor grammatical improvements to mix task docs](https://github.com/elixir-lang/elixir/pull/5147)



#### [#5063] - (2016-08-20T02:24:07Z) - [add git sparse checkout](https://github.com/elixir-lang/elixir/pull/5063)

This is a start to adding sparse checkout to the GIT SCM.

Sparse checkout can be used for picking a dep from a repo which may contain many deps in sub folders

For example.

The git repository
https://github.com/nerves-project/toolchains
contains many toolchains including 
`nerves_toolchain_armv5tejl_unknown_linux_musleabi`

To use git and single out that subfolder int he repo as the dependency destination we could use sparse

`{:nerves_toolchain_armv5tejl_unknown_linux_musleabi, github: "nerves-project/toolchains", sparse: "nerves_toolchain_armv5tejl_unknown_linux_musleabi"}`


#### [#5142] - (2016-08-18T22:36:37Z) - [Add a page in the docs about operators](https://github.com/elixir-lang/elixir/pull/5142)

This is a first shot (really unpolished) at https://github.com/elixir-lang/elixir/issues/5129. I like the format and I like the "Final note" section, I'm not sure the rest of the team agrees on putting "advices/recommendations" in a documentation page though.

Also, I'm not sure what @fishcakez meant with "guards" in #5129, so I skipped them for now üòÑ 

Btw, \cc @ericmj as well who suggested me to add the list of possible operators to define in the docs a long time ago, sorry for the delay Eric! üòÉ 


#### [#5145] - (2016-08-18T21:54:37Z) - [fix #5144](https://github.com/elixir-lang/elixir/pull/5145)

Mention in <<>> macro documentation that also float
can use 'little' and 'big' modifiers.


#### [#5140] - (2016-08-15T19:30:21Z) - [Add `min/2`, `max/2` and `min_max/2` to `Enum`.](https://github.com/elixir-lang/elixir/pull/5140)

As discussed on the [mailing list](https://groups.google.com/forum/#!topic/elixir-lang-core/goQuIjs00YE).

The new 2nd argument is a function that is called when the enumerable is empty. It defaults to raising `Enum.EmptyError` to preserve existing behavior.

One thing I'm unsure of: should we add `min_by/3`, `max_by/3` and `min_max_by/3` as well?


#### [#5116] - (2016-08-15T12:18:09Z) - [Add proper location to generated code on 19](https://github.com/elixir-lang/elixir/pull/5116)

This still needs a proper test, but I'm opening it early, because I expect a lot of discussion around this anyway.

This fixes one major issue - missing file/line info in stacktraces following a dynamic remote dispatch on nullary functions. For example a code like `x.foo` (when x is not an atom or a map) will produce a stacktrace with top function missing the file/line info, since the code in dispatch is all marked with `[{generated, true}, {location, 0}]`. A runnable example can be found here: https://gist.github.com/michalmuskala/44e2af7d90df09e27cc9abba0c75154b

This changes how we add the generated annotation on erlang 19 by keeping the proper line information. This adds the missing stacktrace information.

Unfortunately this means we'll be generating different code on different erlang versions. This is already done today (to some extent) with struct typespecs. The typespec check is a compile-time one, i.e. elixir compiled on 18 will always emit code for erlang 18.
The change I propose here is a runtime one - even if elixir and stdlib are compiled against erlang 18, we'll be able to emit 19 code when user compiles code on erlang 19. 

\cc @fishcakez, @ericmj 


#### [#5141] - (2016-08-14T12:27:14Z) - [Support Enum.map_every/3 and Stream.map_every/3](https://github.com/elixir-lang/elixir/pull/5141)

This pull request adds map_every/3 to Enum and Stream module, fixex #5138


#### [#5139] - (2016-08-13T21:17:58Z) - [Spelling correction in GenServer reply docs](https://github.com/elixir-lang/elixir/pull/5139)

Trivial change to the docs. 


#### [#5134] - (2016-08-13T12:06:48Z) - [Use String.to_existing_atom/1 for option conversion](https://github.com/elixir-lang/elixir/pull/5134)



#### [#5117] - (2016-08-12T14:06:20Z) - [Implements `Integer.mod/2` and `Integer.floor_div/2`.](https://github.com/elixir-lang/elixir/pull/5117)

Implements `Integer.mod/2` and `Integer.floor_div/2` as simple functions.

Also includes:
- documentation (+doctests)
- typespecs
- tests
- updated documentation and doctests for `Kernel.rem/2` and `Kernel.div/2`

Does not include:
- Crazy guard-safe macros. (See #5112 )


#### [#5128] - (2016-08-12T14:03:27Z) - [Enhancement: negative integer support in `DateTime.from_unix`](https://github.com/elixir-lang/elixir/pull/5128)

Fixes #5124:
- Unix times back to -62167219200000000 microseconds (0 Gregorian seconds) are now supported by `DateTime.from_unix/2`.
- For lower integers, `:error` will be returned instead of `{:ok, datetime}`. The bang-version of the method will raise an ArgumentError in these cases.
- Usage of negative Unix times has been documented.
- A couple of tests were added to ensure that this is indeed the behaviour that is happening.
- `DateTime.to_unix` has similarly been altered to support all DateTimes with `year >= 0`, which matches the new cutoff-point for `DateTime.from_unix`.
- When passing a DateTime with a negative year to `DateTime.from_unix`, a descriptive ArgumentError is raised.


#### [#5133] - (2016-08-11T19:48:21Z) - [Resolves issue with autocompletion on structs not working in IEx](https://github.com/elixir-lang/elixir/pull/5133)

Fix for #5132 

I'm not 100% sure the tests are right, or if there are any unusual implications with this fix, but all tests are passing. 


#### [#5131] - (2016-08-11T15:51:42Z) - [Use dialyzer attributes instead of ExUnit exclude tag](https://github.com/elixir-lang/elixir/pull/5131)

I prefer this approach because:
- Supports custom OTP builds where a non-standard version of dialyzer/erts is used
- Easier to handle once bug is fixed
- Only ignores warnings for the bug and doesn't hide other issues that can crop up, e.g. helpful for #5116 (skipping the test hides bugs introduced in that PR at the moment)
- Shows how to hide the warnings if someone wants to


#### [#5127] - (2016-08-11T07:46:54Z) - [Do not re-compile a compiled pattern for String.split/3](https://github.com/elixir-lang/elixir/pull/5127)

Fixes #5126 


#### [#5123] - (2016-08-10T11:55:03Z) - [Enhancing error message for token matching failure](https://github.com/elixir-lang/elixir/pull/5123)

Updated error message and tests to fix #5122


#### [#5118] - (2016-08-10T09:09:01Z) - [Introduce List.pop_at/3](https://github.com/elixir-lang/elixir/pull/5118)



#### [#5121] - (2016-08-10T07:44:12Z) - [ISSUE_TEMPLATE.md: Add Elixir Forum to list of help channels](https://github.com/elixir-lang/elixir/pull/5121)



#### [#5120] - (2016-08-10T07:37:40Z) - [Minor grammatical improvements to mix docs](https://github.com/elixir-lang/elixir/pull/5120)



#### [#5113] - (2016-08-08T23:07:50Z) - [Omit redundant information if both sides in assertion are exactly equal](https://github.com/elixir-lang/elixir/pull/5113)

<img width="602" alt="screen shot 2016-08-09 at 00 52 54" src="https://cloud.githubusercontent.com/assets/248290/17499116/c349d70a-5dcb-11e6-80ca-098d15a0398d.png">

Closes #5084.

CC @fishcakez 


#### [#5111] - (2016-08-08T18:16:26Z) - [Add examples in the docs for the i/1 IEx helper](https://github.com/elixir-lang/elixir/pull/5111)

All other helper functions/macros like `h` or `b` have examples. So I feelt like there should be examples in the same style for `i` too.

(And I also fixed a typo).


#### [#5109] - (2016-08-07T23:43:42Z) - [Minor grammatical improvements to Mix.Project documentation](https://github.com/elixir-lang/elixir/pull/5109)



#### [#5106] - (2016-08-07T18:24:41Z) - [Expand DocTest's RegExp to allow Unicode and Multi-line inside opaque inspect types](https://github.com/elixir-lang/elixir/pull/5106)

- DocTest Regex changed to:
  - Allow Unicode
  - Allow multiline statements.
    - Doctest will still match if Inspect output ends with a `\n`.
  - Instead of enforcing `#Name<...>` now enforces `#Name<...` (Trailing `>` no longer required) for opaque inspect types.

Fixes #5103. Fixes #5100.

Also contains some very poetic specs. :innocent: 


#### [#5105] - (2016-08-07T08:35:01Z) - [Correct link to mix environments](https://github.com/elixir-lang/elixir/pull/5105)

My mistake. 


#### [#5102] - (2016-08-06T21:17:59Z) - [Minor grammatical improvements to Mix documentation](https://github.com/elixir-lang/elixir/pull/5102)



#### [#5098] - (2016-08-06T21:14:45Z) - [mix xref provides "did you mean?" for missing functions](https://github.com/elixir-lang/elixir/pull/5098)

Implements part of #5096.

Had to slightly modify the code for `UndefinedFunctionException` to allow non-autoloaded modules to work properly. Looking into module name suggestions now.


#### [#5101] - (2016-08-06T16:14:15Z) - [Use "amount" instead of "n" to describe amount of values to drop](https://github.com/elixir-lang/elixir/pull/5101)



#### [#5093] - (2016-08-04T18:24:33Z) - [Do not consider remote typespecs as a compile-time dependency](https://github.com/elixir-lang/elixir/pull/5093)

Fixes #5087.

Also adds some comments to the cases in which a compile time dependency must be added for a typespec (structs, records). Perhaps the documentation should be altered to suggest using a remote type instead of a struct or record macro to avoid this case, if possible.

Also, I am pushing a commit with the added test first, to show that it fails on the current master. I will then immediately push the commit with the actual fix.


#### [#5092] - (2016-08-04T13:48:38Z) - [Change example for drop_while](https://github.com/elixir-lang/elixir/pull/5092)

While yielding the right result, the current example for `drop_while` is misleading and can cause confusion between `drop_while` and `reject`.


#### [#5091] - (2016-08-04T11:41:53Z) - [Document that consolidate_protocols is enabled by default](https://github.com/elixir-lang/elixir/pull/5091)

Didn't know about this (and apparently several other people who
asked me if I had it enabled as well) so I thought it'd be good
to mention, I like defaults being mentioned in the docs
in general :)

As [by this default configuration](https://github.com/elixir-lang/elixir/blob/843783a890f00fcbd014170cada06a7c1d3aafd4/lib/mix/lib/mix/project.ex#L490-L507). I also think it'd be nice to mention the project default configuration in Mix.Project docs, but that's prone to error. I thought about making `default_config` public, and adding a doc test for it. Sure, annoying to update but that way the docs would stay up to date and people would have an easy reference for the default configuration without digging through the code. I'd be happy to add that in as well if desired :)

Also for compile/app.start might want to add the other default values in the docs.

Thanks!
Tobi


#### [#5089] - (2016-08-03T18:20:30Z) - [Use :stdio instead of group_leader() as default device](https://github.com/elixir-lang/elixir/pull/5089)

As discussed on IRC, I'm opening this PR as a place for further discussion on the issue.

This commit basically reverts the change introduced in: https://github.com/elixir-lang/elixir/commit/249f83e82b4953e6e7807dc1c14726c017cdd987

Using :stdio gives us much better error in case the data is not
printable, and the function signature is more understandable when
accessed with h/1.

As an example of better error message let's look at the error before the change:

``` elixir
iex(1)> IO.puts([:io])
** (ArgumentError) argument error
    (stdlib) :io.put_chars(#PID<0.50.0>, :unicode, [[:io], 10])
```

And after:

``` elixir
iex(1)> IO.puts([:io])
** (ArgumentError) argument error
    (stdlib) :io.put_chars(:standard_io, :unicode, [[:io], 10])
```

Notice the device is a PID when using `group_leader()` and a more understandable atom when using `:stdio`.

\cc @fishcakez 


#### [#5086] - (2016-08-03T18:07:45Z) - [Do not wait for self in parallel compiler](https://github.com/elixir-lang/elixir/pull/5086)

Closes #5053.

If the module we are waiting `on` is in the list of modules we are currently `defining`, simply send `:found` so that the compiler process can produce whatever error it would outside of the parallel compiler.

This fixes the issue described in #5053 and should also improve any other potential future similar issues.


#### [#5085] - (2016-08-03T08:32:03Z) - [use positive in @doc of Enum.sort/2](https://github.com/elixir-lang/elixir/pull/5085)

positives are slightly easier to understand than negavites.

I find it more in intuitively to describe the second argument this way, because it's easier to understand that it

> determines whether the first precedes

than it is to understand that it

> determines whether the first doesn't follow the second

`true` meaning _yes_ and `false` meaning _no_ in both cases. 


#### [#5081] - (2016-08-01T21:50:42Z) - [Add example difference between :one_for_one and :simple_one_for_one](https://github.com/elixir-lang/elixir/pull/5081)

I thought this extra iex example might be useful in understanding the difference between :one_for_one, where the child is created when the supervisor is created, vs. :simple_one_for_one where the child acts as a template and creating the supervisor in that case does not create any active child processes until start_child is called.


#### [#5080] - (2016-08-01T15:23:19Z) - [Support interrupting IEx evaluation](https://github.com/elixir-lang/elixir/pull/5080)

Doing an interrupt (Ctrl-G then "i") while IEx is busy evaluating something currently makes it crash. This PR makes IEx.Server trap the `interrupt` signal and kill the evaluation (same behavior as the Erlang shell). Fixes: https://github.com/elixir-lang/elixir/issues/4991

I tested:
- Interrupt while waiting for input

``` elixir
iex(local@Ando)1>
User switch command
 --> i
 --> c
** (EXIT) interrupted
iex(local@Ando)1>
```
- Interrupt while evaluating

``` elixir
iex(local@Ando)1> Process.sleep(10000000)

User switch command
 --> i
 --> c
** (EXIT) interrupted
iex(local@Ando)1>
```
- Interrupt in etop (original issue)

``` elixir
iex(local@Ando)2> :etop.start

========================================================================================
 local@Ando                                                                14:51:52
 Load:  cpu         0               Memory:  total       16566    binary         42
        procs      50                        processes    4626    code         5823
        runq        0                        atom          258    ets           425

Pid            Name or Initial Func    Time    Reds  Memory    MsgQ Current Function
----------------------------------------------------------------------------------------
<0.4.0>        erl_prim_loader          '-'  340915  426488       0 erl_prim_loader:loop
<0.36.0>       code_server              '-'  124864  284592       0 code_server:loop/1
<0.31.0>       application_controll     '-'   50106  426696       0 gen_server:loop/6
<0.54.0>       user_drv                 '-'    3950   18728       0 user_drv:server_loop
<0.35.0>       kernel_sup               '-'    1988    6296       0 gen_server:loop/6
<0.89.0>       etop_server              '-'    1780   24752       0 etop:data_handler/2
<0.0.0>        init                     '-'    1584   34448       0 init:loop/1
<0.56.0>       group:server/3           '-'    1387   21848       0 group:server_loop/3
<0.50.0>       file_server_2            '-'    1243   13800       0 gen_server:loop/6
<0.45.0>       auth                     '-'     873   10744       0 gen_server:loop/6
========================================================================================


User switch command
 --> i
 --> c
** (EXIT) interrupted
iex(local@Ando)2>
```
- Pry

``` elixir
iex(local@Ando)3> require IEx
IEx
iex(local@Ando)4> f = fn -> IEx.pry() end
#Function<20.52032458/0 in :erl_eval.expr/5>
iex(local@Ando)5> f.()
Request to pry #PID<0.95.0> at iex:4
Allow? [Yn] Y

Interactive Elixir (1.4.0-dev) - press Ctrl+C to exit (type h() ENTER for help)
pry(local@Ando)1> respawn
warning: variable "respawn" does not exist and is being expanded to "respawn()", please use parentheses to remove the ambiguity or change the variable name
  iex:1


Interactive Elixir (1.4.0-dev) - press Ctrl+C to exit (type h() ENTER for help)
:ok
iex(local@Ando)1>
```
- Remote shell

``` elixir
iex(local@Ando)2>
User switch command
 --> r 'remote@Ando' 'Elixir.IEx'
 --> c
Interactive Elixir (1.4.0-dev) - press Ctrl+C to exit (type h() ENTER for help)
iex(remote@Ando)1> Process.sleep(1000000)

User switch command
 --> i
 --> j
   1  {erlang,apply,[#Fun<Elixir.IEx.CLI.1.103769006>,[]]}
   2* {remote@Ando,'Elixir.IEx',start,[]}
 --> c
** (EXIT) interrupted
iex(remote@Ando)1>
```


#### [#5075] - (2016-07-30T09:33:26Z) - [Cleanup lib/mix/lib/mix/compilers/elixir.ex](https://github.com/elixir-lang/elixir/pull/5075)

Per TODO and https://github.com/elixir-lang/elixir/commit/f8e88ebe6014511a4276699c4705f6d0bb8dcc9b#commitcomment-18420581.

`:file.consult` also used in these files, but there are no TODOs there

```
lib/mix/lib/mix/dep/loader.ex
lib/mix/lib/mix/rebar.ex
lib/mix/lib/mix/tasks/compile.app.ex
lib/mix/test/mix/tasks/compile.app_test.exs
```


#### [#5077] - (2016-07-30T08:53:36Z) - [Fix for issue 5069](https://github.com/elixir-lang/elixir/pull/5077)

In response to issue number #5069  I implemented a check which sees if the incoming string is "" and if trim is true.


#### [#5070] - (2016-07-27T16:46:33Z) - [Fix typo in documentation](https://github.com/elixir-lang/elixir/pull/5070)



#### [#5068] - (2016-07-27T14:11:17Z) - [Raise on incorrect digits](https://github.com/elixir-lang/elixir/pull/5068)

Right now `Integer.undigits/2` may yield results that are hard to reason about:

```
iex(1)> Integer.undigits([10,10]) 
110
iex(2)> Integer.undigits([1,10]) 
20
```


#### [#5066] - (2016-07-27T09:27:22Z) - [Add missing is_function guards to stdlib](https://github.com/elixir-lang/elixir/pull/5066)



#### [#5067] - (2016-07-27T09:26:45Z) - [Mark struct update syntax as generated](https://github.com/elixir-lang/elixir/pull/5067)

With changes to OTP 19, dialyzer started emitting warnings for
the struct update syntax where variable could only be that struct.
For example:

```
def foo(%Foo{} = struct), do: %Foo{struct | bar: :baz}
```

I'm not 100% sure this is the correct fix. I'm not sure how to test this properly. Do we have some way of testing for dialyzer warnings?


#### [#5064] - (2016-07-26T18:23:34Z) - [Fix typespecs for Stream.chunk/2](https://github.com/elixir-lang/elixir/pull/5064)

```
iex> [1,2,3] |> Stream.chunk(0)
** (FunctionClauseError) no function clause matching in Stream.chunk/4
    (elixir) lib/stream.ex:160: Stream.chunk([1, 2, 3], 0, 0, nil)
```

Typespecs for parameter `n` in `Stream.chunk/2` should match `n` in `Stream.chunk/4`, which is  `pos_integer`.


#### [#5062] - (2016-07-26T09:14:47Z) - [Expand message for mix deps.unlock](https://github.com/elixir-lang/elixir/pull/5062)

I just accidentially realized that it's possible to pass `--unused` to `mix deps.unlock`. This PR aligns the error message with `mix deps.clean`.


#### [#5060] - (2016-07-26T08:27:20Z) - [Enum.split_while/2: Improve guard](https://github.com/elixir-lang/elixir/pull/5060)



#### [#5059] - (2016-07-26T08:26:46Z) - [Update :test_started and :test_finished event docs](https://github.com/elixir-lang/elixir/pull/5059)

The `:test_started` and `:test_finished` events in the `moduledoc` refer to a `test_case` in the prose. In reality, those events receive an `ExUnit.Test` struct.


#### [#5057] - (2016-07-25T22:26:43Z) - [Optimize  Enum.split_with/2 for lists](https://github.com/elixir-lang/elixir/pull/5057)

- examples added to docs

An increase in speed between 16-40% when treating lists
You can see the benchmarks here: https://gist.github.com/eksperimental/e13e69620e5c5b5bf0da6d978ff4f9de


#### [#5055] - (2016-07-25T09:23:33Z) - [Eliminate "if" warning](https://github.com/elixir-lang/elixir/pull/5055)

warning: the variable "alias" is unsafe as it has been set inside a case/cond/receive/if/&&/||.
Please explicitly return the variable value instead.
...
Unsafe variable found at:
  lib/option_parser.ex:350


#### [#5054] - (2016-07-24T23:14:16Z) - [{Enum, Stream}.{take_every, drop_every}/2 little improvements](https://github.com/elixir-lang/elixir/pull/5054)

- **Correct typespec return value in Enum.take_every/2, Enum.drop_every/2**
  All functions where one arg. is not any() will raise FunctionClauseError, and we don't specify it as :: `no_return`
- **Add bodyless function to Stream.take_every/2, Stream.drop_every/2**


#### [#5051] - (2016-07-22T20:14:45Z) - [Perform some checks on the value of @moduledoc, @typedoc, and @doc](https://github.com/elixir-lang/elixir/pull/5051)

Aimed towards #5049.

`@doc` was being checked by `Module.add_doc/6` but `@moduledoc` and `@typedoc` weren't.

I think it makes sense to perform all these checks as soon as possible (i.e., when setting the proper attribute with `@`) and raise a helpful error message when we can.

Wdyt?


#### [#5052] - (2016-07-22T20:01:54Z) - [Fix broken GenServer using :via registry.](https://github.com/elixir-lang/elixir/pull/5052)

Bug introduced in d9cdeeb2f135abcac87a30b35169efe5d3d7e94c
Variable `module` in the case clause shadows argument of the function.
Servers using `:via` simply do crash on start(_link).
In the mentioned commit similar change in supervisor.ex was correct.


#### [#5050] - (2016-07-22T13:29:09Z) - [mix xref: loadpaths before compile](https://github.com/elixir-lang/elixir/pull/5050)

Closes #5045.


#### [#5048] - (2016-07-21T20:17:07Z) - [Integer.digits/2: Make example even clearer](https://github.com/elixir-lang/elixir/pull/5048)

Based on suggestion in https://github.com/elixir-lang/elixir/issues/5046


#### [#5044] - (2016-07-21T13:47:58Z) - [Deprecate Dict, HashDict, and HashSet](https://github.com/elixir-lang/elixir/pull/5044)

First of all, üéâ!

Then, I would really love some feedback, especially on the error messages and on how we handle the functions that `use Dict` generates. :)


#### [#5041] - (2016-07-20T18:50:39Z) - [Clarify comment in the supervisor example included in the Supervisor moduledoc](https://github.com/elixir-lang/elixir/pull/5041)

Based on my confusion in #5020, I've updated the sentence above the list containing the child spec in the supervisor example. Hopefully this makes things a little easier to understand.


#### [#5039] - (2016-07-20T18:16:42Z) - [Deprecate some functions here and there for v1.4](https://github.com/elixir-lang/elixir/pull/5039)

Follow up to #5037. I'm keeping the big ones - `HashDict`, `HashSet`, `Dict` - for later :)

Btw, question: would it make sense to **not** use `@doc false` on these deprecated functions, so that they show up in the docs, and mention they're deprecated in the docs themselves? I know they will show up in autocomplete as well and that's bad, but I'm afraid when people look at old code that uses these function and try to find them they will have a hard time üòï This is what we do with the `Behaviour` module btw, that's why I was wondering :)


#### [#5037] - (2016-07-20T14:20:15Z) - [Deprecated the Behaviour module and its macros](https://github.com/elixir-lang/elixir/pull/5037)

First of a bunch of PRs where we deprecated stuff that we wanted to deprecate for version 1.4 :)


#### [#5038] - (2016-07-20T13:58:02Z) - [Rename a variable in OptionParser to make its type clearer](https://github.com/elixir-lang/elixir/pull/5038)

We used `strict` all over the place, and that variable held a boolean. I renamed it to `strict?` to make it more idiomatic and clearer.


#### [#5036] - (2016-07-20T13:01:43Z) - [Don't process -pr in a special way in mix run and mix profile.fprof](https://github.com/elixir-lang/elixir/pull/5036)

Follow up to #5025. We don't need this anymore now (80aec928) that we support splitting of `-abc` into `-a -b -c`.


#### [#5025] - (2016-07-20T08:39:52Z) - [Expand multi-letter aliases in OptionParser](https://github.com/elixir-lang/elixir/pull/5025)

This is work towards closing #4920.

Before this PR, `-abc` is processed by `OptionParser` as an alias. With this PR, we deprecate this behaviour: if `-abc` still matches an alias, we warn, otherwise, we split it into `-a -b -c`.

This is a WIP because I don't like this implementation but I can't seem to come up with something better and am a bit stuck :)

The current implementation just rewrites the `argv` by expanding the alias (which I believed was a good and clean way to do things so that we don't have to go too deep), but it duplicates some work such as splitting the option (`split_option/1`) or converting to underscored/atom.

What are your feelings? Sorry I opened this in not quite a good state, but at least we can get the discussion started üòï 


#### [#5016] - (2016-07-19T16:47:19Z) - [Document :sys module and give example on how to use it](https://github.com/elixir-lang/elixir/pull/5016)

This is just a first iteration. After my experience with https://github.com/elixir-lang/elixir/pull/5010 I figured there will be a lot of changes anyway.

I'm not sure which functions from `:sys` should be documented, I think I listed those that are most useful for debugging processes. As to custom install handler, it's not clear to me, what such handler would do, so I left it out for now.

Closes #4918


#### [#5022] - (2016-07-19T16:46:48Z) - [Fix a bug in String.replace_leading/3 and String.replace_trailing/3](https://github.com/elixir-lang/elixir/pull/5022)

Closes #5019.

These function would end up in infinite recursion if the "match" argument to replace was an empty string. With this commit, we explicitly check for that empty string and possibly raise an `ArgumentError` exception.


#### [#5032] - (2016-07-19T16:42:07Z) - [Enum slice docs + fix typespec](https://github.com/elixir-lang/elixir/pull/5032)

closes https://github.com/elixir-lang/elixir/issues/5023


#### [#5031] - (2016-07-18T21:25:00Z) - [Naming inconsistencies in Enum.group_by/3](https://github.com/elixir-lang/elixir/pull/5031)

Renamed `mapper_fun` to `value_fun` in function head, to match doctest and other function definitions.
Renamed `fun` to `key_fun` in docs, to match function definitions.

See http://elixir-lang.org/docs/stable/elixir/Enum.html#group_by/3


#### [#5027] - (2016-07-18T16:26:59Z) - [Give helpful error message if a string is used to name a GenServer / Supervisor](https://github.com/elixir-lang/elixir/pull/5027)

Hi, this is my second PR related to #3932.
It should add helpful messages for GenServer and Supervisor.
Thanks!


#### [#5029] - (2016-07-18T15:04:05Z) - [Use underscore in function names: dirsep => dir_sep](https://github.com/elixir-lang/elixir/pull/5029)

Following changes in https://github.com/elixir-lang/elixir/pull/4885


#### [#5017] - (2016-07-17T13:49:50Z) - [Enum.slice/2 and Enum.slice/3 rewrite](https://github.com/elixir-lang/elixir/pull/5017)

slice/2,3 have been rewritten changing the approach.
Previous approach was based on count (now named "n") number of elements to be fetched,
and slice/2 would call slice/3.
This leads to the problem of having to recalculate the amount of elements in the enumerable
when dealing with negative indexes.
The new aproach uses slice/2 as the main funtion, and deal with start and finish indexes.
When a negative index is needed, we determine the number of elements, and we convert it to indexes.

Benchmarks for the new implemetation can be seen here:

Runing time: https://gist.github.com/eksperimental/e7cda7722d42e43c4c2f69825149c7df#file-enum_slice_benchmarking_report_new-txt-L773

Comparison: https://gist.github.com/eksperimental/e7cda7722d42e43c4c2f69825149c7df#file-enum_slice_benchmarking_report_new-txt-L1540


#### [#5021] - (2016-07-17T13:37:06Z) - [Don't escape record literals on keyword conversion](https://github.com/elixir-lang/elixir/pull/5021)

Literal values in records should not be escaped.
This lead to structs (and other non-literals in AST) being returned
as AST, which was unexpected and incorrect.

Before:

``` elixir
defmodule Struct do
  defstruct foo: nil
end
defmodule Test do
  import Record
  defrecord :bar, data: %Struct{}
end

iex> require Test
iex> Test.bar(Test.bar())
[data: {:%{}, [], [__struct__: Struct, foo: nil]}]
```

After:

``` elixir
iex> require Test
iex> Test.bar(Test.bar())
[data: %Struct{foo: nil}]
```


#### [#5018] - (2016-07-16T21:14:09Z) - [Docs and typespec for Kernel.get_and_update_in/3 now mention :pop](https://github.com/elixir-lang/elixir/pull/5018)

Solves #5013 


#### [#5010] - (2016-07-16T17:41:18Z) - [Add :label option to IO.inspect/2](https://github.com/elixir-lang/elixir/pull/5010)

This option will decorate the output with additional string, so
it's easy to distinguish between different IO.inspect calls.

``` elixir
IO.inspect("foo", tag: "bar")
#=> bar: "foo"
```

Closes #5009


#### [#5014] - (2016-07-16T15:10:20Z) - [Enum fetch more optimizations](https://github.com/elixir-lang/elixir/pull/5014)

This PR does two optimizations,

First commit adds a clause to check for lists, when dealing with negative indexes
Second commit, revert's a change by @lexmag,
I think lists should be prioritized in Enum over ranges. In addition to this, I'm doing it based on the idea that checking for a range in a guard is more expensive than checking for a list, so it's better to leave it for as late as possible (just before the fallback guard that would deal with any other enumerable).

Benchmarks accompany this PR, between each commit.
https://gist.github.com/eksperimental/3f9c58a5b27fa9ff05abcd1df4678b1a

for the final results before this PR and after.
https://gist.github.com/eksperimental/3f9c58a5b27fa9ff05abcd1df4678b1a#file-enum_fetch_benchmarking_report_new-txt-L1172-L1360

the gain is considerable for out-of-bound and negative indexes.


#### [#5015] - (2016-07-16T09:15:31Z) - [Remove redundant parameter](https://github.com/elixir-lang/elixir/pull/5015)

Looks like parse_digit has a parameter that isn't being used.


#### [#5012] - (2016-07-15T13:01:56Z) - [Remove typo](https://github.com/elixir-lang/elixir/pull/5012)



#### [#5011] - (2016-07-15T12:50:26Z) - [Fix a typo: sych -> such](https://github.com/elixir-lang/elixir/pull/5011)



#### [#4998] - (2016-07-15T10:07:34Z) - [Fix docs for \N and \g{N} in String.replace/4 and Regex.replace/4](https://github.com/elixir-lang/elixir/pull/4998)

We were being a bit inconsistent with the use of backslashes to escape the backslash in `\N` and `\g{N}`. This commit should fix that. Should close #4975.


#### [#5005] - (2016-07-15T08:54:31Z) - [Return nil in Enum.find_index/2 if the element is not found in a Stream](https://github.com/elixir-lang/elixir/pull/5005)

Fix issue #5004 add test to include checks


#### [#5008] - (2016-07-15T07:36:05Z) - [Remove nonexisting struct field `local` from type of `Macro.Env.t`](https://github.com/elixir-lang/elixir/pull/5008)

Migrating Erlang/OTP from 18.3 to 19.0, dialyzer (now much smarter than before!) starts to complain about the following perfectly legitimate expression:

``` ex
Macro.Env.location(__ENV__)
```

The actual warning I got:

```
lib/foo.ex:3: The call 'Elixir.Macro.Env':location(#{'__struct__':='Elixir.Macro.Env', 'aliases':=[], 'context':='nil', 'context_modules':=['Elixir.Foo',...], 'export_vars':='nil', 'file':=<<_:264>>, 'function':={'f',0}, 'functions':=[{'Elixir.Kernel',[{atom(),0 | 1 | 2 | 3},...]},...], 'lexical_tracker':=_, 'line':=3, 'macro_aliases':=[], 'macros':=[{'Elixir.Kernel',[{atom(),0 | 1 | 2 | 3},...]},...], 'module':='Elixir.Foo', 'requires':=['Elixir.Kernel' | 'Elixir.Kernel.Typespec',...], 'vars':=[]}) breaks the contract (t()) -> 'Elixir.Keyword':t()
```

This is a bit cryptic but it says that the map given to `Macro.Env.location/1` does not have `local` field and thus is not a `Macro.Env.t`.

So this PR cleans up the `local` field from the type definition.
I'm not sure whether the auxiliary type `local` should also be removed since it is an exported type; it's kept as is.
(Should I also remove the `@type local` line?)

Just for reference:
- `local` field was removed by [this commit](https://github.com/elixir-lang/elixir/commit/a7dbfd1e82d2061a9e1a88e8896c3d11f3fc9a0a#diff-064a5928dd68c7eb919b932c9a2a02b5L95).
- Tried Elixir 1.3.1 and latest master.

Thanks in advance!


#### [#5007] - (2016-07-15T00:28:00Z) - [Make Enum.sort/2 example use a stable sort function, to avoid confusion](https://github.com/elixir-lang/elixir/pull/5007)

It all started when an old version of the Enum.sort/2 docs confused me in the way they described the semantics of the sort function in Enum.sort/2.  The new docs are much better, and I think they're clear enough, but fishcakez pointed out that the example uses a non-stable sort function.  We can make it stable with no loss in clarity, so we should do so.


#### [#5006] - (2016-07-14T16:06:15Z) - [Fix examples in mix.generator doc](https://github.com/elixir-lang/elixir/pull/5006)

The generated functions are private, so the examples will throw the error about an undefined function.


#### [#5000] - (2016-07-13T09:10:21Z) - [Clarify optional callbacks documentation](https://github.com/elixir-lang/elixir/pull/5000)

It's simply not true that any default implementation will be provided.
Behaviour modules should explicitly check if the function is defined,
and handle that case.


#### [#5001] - (2016-07-12T22:12:17Z) - [Allow 0 as URI scheme default port](https://github.com/elixir-lang/elixir/pull/5001)

I'm patching up Hackney/HTTPoison to support HTTP over Unix Domain Sockets, using the (informal) 'http+unix' URI scheme.

In order to comply with Erlang 19's spec for opening an `inet:local_address()` socket using `gen_tcp` (http://erlang.org/doc/man/inet.html#type-local_address) I want to make sure the port number is set to 0 by default by calling `URI.default_port("http+unix", 0)`. Unfortunately the `URI.default` functions did not foresee this use-case :)


#### [#4994] - (2016-07-12T21:10:21Z) - [Give helpful error message if a string is used to name a GenServer](https://github.com/elixir-lang/elixir/pull/4994)

I'm new to Elixir, but I wanted to see if I can help with any issues, so here is my PR for this.
I can change supervisor.ex and gen_server.ex as well if you think the implementation is ok.
Thanks!

Mentioned in #3932 


#### [#4997] - (2016-07-12T09:23:30Z) - [Rename Enum.partition/2 to Enum.split_with/2](https://github.com/elixir-lang/elixir/pull/4997)

This PR closes #4996. `Enum.partition/2` has been soft-deprecated and will be deprecated by v1.5.

Before merging this I think it would be worth asking, is `split_with/2` the best name? I can't think of any clearly better alternatives, just want to raise the question before getting this in. Maybe `split_in_two/2` to be superclear? Not sure. üòï 


#### [#4995] - (2016-07-12T07:49:47Z) - [Add ANSI escape sequence 27 for turning off reverse video](https://github.com/elixir-lang/elixir/pull/4995)

[_IO.ANSI.inverse_](http://elixir-lang.org/docs/stable/elixir/IO.ANSI.html#inverse/0) (and its synonym, [_IO.ANSI.reverse_](http://elixir-lang.org/docs/stable/elixir/IO.ANSI.html#reverse/0)) for ANSI escape sequence `7` were already implemented, but not the escape sequence that disables their effect (`27`).


#### [#4992] - (2016-07-11T09:58:52Z) - [Improve error message for Keyword.get_and_update/3](https://github.com/elixir-lang/elixir/pull/4992)

A follow up for #4965


#### [#4965] - (2016-07-10T15:51:40Z) - [Improve error message on bad return in Map.get_and_update/3](https://github.com/elixir-lang/elixir/pull/4965)

Current error message is quite unhelpful for new comers

```
Map.get_and_update(%{a: 1}, :a, fn value -> value end)
** (MatchError) no match of right hand side value: 1
    (elixir) lib/map.ex:513: Map.get_and_update/3
```

This change introduces an improved message:

```
** (RuntimeError) must return a two-element tuple or :pop, got: 1
    (elixir) lib/map.ex:699: Map.get_and_update/3
```


#### [#4988] - (2016-07-10T10:07:35Z) - [Typespec.md: spell it "two-element tuple"](https://github.com/elixir-lang/elixir/pull/4988)

That's the way we do it across the project.


#### [#4950] - (2016-07-10T09:41:32Z) - [Optimize Enum.fetch/2 for negative and out of bound indexes](https://github.com/elixir-lang/elixir/pull/4950)

This function has been highly-optimized, through thorough benchmarking.

There were serious issues when dealing with big lists and maps when an out of
bound or a negative index was given. Eg. fetching an out-of-bound index in a
1,000-element map, was reduced to 0.18% of the original item. Or same case
with a 1,000-element list time was reduced to a 10,5%.

Enumerables are no longer reversed when dealing with negative indexes.
The much cheaper `Enum.count/1` function is used now.

Benchmark .exs file are published here:
https://gist.github.com/eksperimental/dd5d4fec5988ba51f2191e5a754ed710

They have been done with lists and maps of the following configurations: 0, 1,
100, 1K, 100K, 1M elements, and indexes being 0 or positive and negative,
retrieving first, middle, last elements and and out-of-bound indexes.

There is one remark to mention about the benchmarks. In list and maps with 1K,
100K, and 1M elements, it shouldn't take into acount the porcentages in the
table when dealing with fist (negative index) and last (negative index). The
worst case scenario for negative indexes in the previous implementation was when
it was given the negative represenation of the first element in the enumerable.
Since the list was reversed, it was the last element in the reversed this. But
since the new implementation avoids using reverse, the worst case scenario from
the previous implementation (the first element with negative index) should be
compared to the worst case scenario (the last element with negative index), and
the best case scenarios should be compared as well (the last element with
negative index of previous implementation, with the first element with negative
index of the current implementation).

To faciliate this a table is provided, that shows that in every single case the
current implementation outperforms the previous one.

```
Elixir v1.3.1                                    | Elixir v1.4.0-dev

:"Enum.fetch/2: list, 1000 elements"
benchmark name      iterations   average time    | benchmark name      iterations   average time
last (neg index)       1000000   4.16 ¬µs/op      | first (neg index)      5000000   1.59 ¬µs/op
first (neg index)       500000   15.51 ¬µs/op     | last (neg index)        500000   12.53 ¬µs/op

:"Enum.fetch/2: list_big, 100000 elements"
last (neg index)         10000   349.24 ¬µs/op    | first (neg index)        50000   146.11 ¬µs/op
first (neg index)         5000   1428.20 ¬µs/op   | last (neg index)          5000   1249.18 ¬µs/op

:"Enum.fetch/2: list_huge, 1000000 elements"
last (neg index)           500   9655.58 ¬µs/op   | first (neg index)         5000   1601.54 ¬µs/op
first (neg index)          500   20617.46 ¬µs/op  | last (neg index)           500   12761.61 ¬µs/op

:"Enum.fetch/2: map, 1000 elements"
last (neg index)         50000   123.35 ¬µs/op    | first (neg index)       200000   26.71 ¬µs/op
first (neg index)        50000   123.22 ¬µs/op    | last (neg index)         50000   94.47 ¬µs/op

:"Enum.fetch/2: map_big, 100000 elements"
last (neg index)           500   12032.04 ¬µs/op  | first (neg index)         1000   3228.43 ¬µs/op
first (neg index)          500   12622.49 ¬µs/op  | last (neg index)           500   10026.25 ¬µs/op

:"Enum.fetch/2: map_huge, 1000000 elements"
last (neg index)            50   126813.58 ¬µs/op | first (neg index)          100   32006.77 ¬µs/op
first (neg index)           50   132636.08 ¬µs/op | last (neg index)            50   107091.40 ¬µs/op
```

**Decrease in performace.**
There are very few cases where performance was decreased.

**:"Enum.fetch/2: list, 1000 elements"**

```
 middle                      +3.91%
 first                       +4.00%
```

**:"Enum.fetch/2: list_big, 100000 elements"**

```
 last                        +1.25%   (1077.57 vs. 1091.07 ¬µs/op)
 middle                      +1.37%   (543.61 vs. 551.08 ¬µs/op)
 first                       +43.48%  (0.05 vs. 0.08 ¬µs/op)
```

**:"Enum.fetch/2: list_empty, 0 elements"**

```
 middle                      +1.55%
```

**:"Enum.fetch/2: list_huge, 1000000 elements"**

```
 last                        +0.08%  (11518.49 vs. 11527.60 ¬µs/op)
 first                       +30.74% (0.05 vs. 0.07 ¬µs/op)
```

**:"Enum.fetch/2: list_single, 1 elements"**

```
 last                        +7.12%  (0.06 vs. 0.06 ¬µs/op)
```

**:"Enum.fetch/2: map, 1000 elements"**

```
 first                       +2.47%
 middle                      +3.15%
```

When the decrease is > 5%, the absolute difference is maximum 0.03 ¬µs/op.


#### [#4985] - (2016-07-10T09:14:47Z) - [Mention offset arg. in Enum.with_index/2 and Stream.with_index/2 docs](https://github.com/elixir-lang/elixir/pull/4985)



#### [#4987] - (2016-07-10T09:08:53Z) - [Enum test file: Correct/move range related tests](https://github.com/elixir-lang/elixir/pull/4987)



#### [#4986] - (2016-07-10T08:37:26Z) - [Correct Enum.slice/2 doc](https://github.com/elixir-lang/elixir/pull/4986)



#### [#4984] - (2016-07-10T07:53:26Z) - [Standardize `mix escript` task's shortdoc](https://github.com/elixir-lang/elixir/pull/4984)

Correct verb tense, and remove trailing period.


#### [#4978] - (2016-07-10T07:19:57Z) - [Using ~r{} instread of ~r// to fix syntax highlight on Regex.split/3's doc example](https://github.com/elixir-lang/elixir/pull/4978)

As mentioned in #4976.


#### [#4979] - (2016-07-10T07:14:59Z) - [Update Enum.index/0 type to be `integer`](https://github.com/elixir-lang/elixir/pull/4979)



#### [#4980] - (2016-07-10T07:14:34Z) - [Enum: Improve function guards in drop/2, drop_every/2, take_every/2](https://github.com/elixir-lang/elixir/pull/4980)



#### [#4981] - (2016-07-10T07:13:32Z) - [Run Travis against every supported minor Erlang version](https://github.com/elixir-lang/elixir/pull/4981)

After my add Erlang 19 PR (#4972) there was discussion about
adding more erlang versions to the test matrix. I'm in favor,
but didn't want too many on my first go. As other people
seem to agree and [as suggested](https://github.com/elixir-lang/elixir/pull/4972#issuecomment-231571052) by @eksperimental this now
tests all supported minor versions (latest patch level)

> I propose to add support for
> 18.0, 18.1, 18.2.1, 18.3, 19.0


#### [#4982] - (2016-07-10T06:37:38Z) - [typo fix](https://github.com/elixir-lang/elixir/pull/4982)

Replace "type" with "typo".


#### [#4973] - (2016-07-09T19:32:34Z) - [Enhance in/2 to support |/2](https://github.com/elixir-lang/elixir/pull/4973)

Closes #4968.


#### [#4974] - (2016-07-09T16:41:05Z) - [Fix tiny bug in documentation](https://github.com/elixir-lang/elixir/pull/4974)

Now documentation looks like this:
![image](https://cloud.githubusercontent.com/assets/883341/16708884/b686e6c2-4609-11e6-9eba-b40d4201f787.png)

After fix will look like this:
![image](https://cloud.githubusercontent.com/assets/883341/16708877/9af7df24-4609-11e6-82c0-c85cbcce4a32.png)


#### [#4972] - (2016-07-09T13:23:21Z) - [Run travis tests against Erlang 19](https://github.com/elixir-lang/elixir/pull/4972)

With some of the incompatibilities expected from a major version
thought this might be a good idea, and the builds are fast enough
so I think travis won't mind :)

(not sure if this is wanted, I just noted that they were only running against 18, so I thought adding the new major might be a good idea :) )

Tobi


#### [#4971] - (2016-07-09T13:22:47Z) - [Task.await/1 returns the reply of a task](https://github.com/elixir-lang/elixir/pull/4971)

- Added documentation and doctest

have I mentioned how much I :heart: doctests?

Thanks for all your work on Elixir everyone :)

Tobi


#### [#4969] - (2016-07-09T08:13:43Z) - [Add parenthesis on Keyword doc example to match rest of the code](https://github.com/elixir-lang/elixir/pull/4969)

Same fix on `Keyword.pop_first/3` as @josevalim did in this [commit](https://github.com/elixir-lang/elixir/commit/0c2f3a4e5c2398954601f96d2d72f89a854e7038#diff-726c8befd520c8fdcebc6de0c11aac4bL658) for `Keyword.pop/3`.


#### [#4964] - (2016-07-08T22:42:35Z) - [Polish the docs for Kernel.use/2](https://github.com/elixir-lang/elixir/pull/4964)

Opening this as a PR instead of just pushing it to ask for feedback on a couple of things, I pointed them out in the comments. :)


#### [#4962] - (2016-07-08T16:48:30Z) - [Enum to list](https://github.com/elixir-lang/elixir/pull/4962)

- Enum.to_list/1: Optimize for ranges
- Add tests for Enum.reverse/1, Enum.reverse/2 and Enum.to_list/1


#### [#4966] - (2016-07-08T16:26:05Z) - [Add typespecs for Keyword.{split/2, take/2, drop/2, to_list/1}](https://github.com/elixir-lang/elixir/pull/4966)

As typespces for

```
Keyword.split/2
Keyword.take/2
Keyword.drop/2
Keyword.to_list/1
```

are missing in the latest [doc](http://elixir-lang.org/docs/master/elixir/Keyword.html#split/2) of module `Keyword`.


#### [#4958] - (2016-07-08T08:35:47Z) - [Force defmodule to not be tail-call optimized](https://github.com/elixir-lang/elixir/pull/4958)

Implements what (I think? üòÑ) was discussed in https://github.com/elixir-lang/elixir/pull/4941. Let me know what you think!


#### [#4961] - (2016-07-08T06:58:34Z) - [Optimize Enum.reverse/1](https://github.com/elixir-lang/elixir/pull/4961)

Private function Enum.do_reverse/2 abstracts the code now, and we call it directly from Enum.reduce/1
Avoiding calling Enum.reduce/2 and having unnecessary is_list/1 guard checks.


#### [#4960] - (2016-07-07T18:26:35Z) - [The else clause in with supports guards](https://github.com/elixir-lang/elixir/pull/4960)

Closes #4957.


#### [#4951] - (2016-07-07T16:08:33Z) - [Enum.fetch/2: Optimized for ranges](https://github.com/elixir-lang/elixir/pull/4951)



#### [#4956] - (2016-07-07T07:46:55Z) - [[ci skip] Fix typespecs not showing up for Stream.into/3](https://github.com/elixir-lang/elixir/pull/4956)

The typespecs for [Stream.into/3](http://elixir-lang.org/docs/master/elixir/Stream.html#into/3) is not showing up due to missing typespecs for the last argument. 


#### [#4954] - (2016-07-06T20:24:04Z) - [Fixed small error in docs representation](https://github.com/elixir-lang/elixir/pull/4954)



#### [#4949] - (2016-07-06T08:39:45Z) - [Fix color_background/3 exception tests](https://github.com/elixir-lang/elixir/pull/4949)

The tests for out of range inputs for color_background/3 were actually calling color_background/1.  This PR fixes it.


#### [#4946] - (2016-07-05T22:42:19Z) - [Improve error message when importing non-existent or private function](https://github.com/elixir-lang/elixir/pull/4946)

Before, when importing private function, the compiler was informing that is doesn't exist.


#### [#4948] - (2016-07-05T19:30:05Z) - [Add docs for Access.pop()](https://github.com/elixir-lang/elixir/pull/4948)



#### [#4936] - (2016-07-05T19:14:54Z) - [Add support for NO_PROXY to Mix.Utils.read_path](https://github.com/elixir-lang/elixir/pull/4936)

This fixes the corner-case where mix needs to access files that are unreachable from the proxy server.

An example is if you have a git repo on the local network, but still need to use the proxy server to fetch the rest of your dependencies. 


#### [#4944] - (2016-07-05T19:00:51Z) - [Make batch style more consistent](https://github.com/elixir-lang/elixir/pull/4944)

- use lowercase for batch keywords (e.g., `set`, `if`, `not`, `setlocal`, `endlocal`, etc.)
- use two-space indents
- remove extra spaces except where used for alignment
- remove trailing whitespace
- add newline at end of file
- don't use colon after `goto` before label name (e.g., `goto end`, not `goto :end`)


#### [#4947] - (2016-07-05T18:07:06Z) - [Polish the docs for the %{} special form](https://github.com/elixir-lang/elixir/pull/4947)

Most of these docs were just a repetition of the docs that are now in the `Map` module, so we can just point to the `Map` module.


#### [#4945] - (2016-07-05T15:22:03Z) - [Add specs for String.replace_* functions](https://github.com/elixir-lang/elixir/pull/4945)

As mentioned in https://github.com/elixir-lang/elixir/issues/4943.


#### [#4942] - (2016-07-05T15:17:12Z) - [Add Windows ANSI detection](https://github.com/elixir-lang/elixir/pull/4942)

Windows 10 console now supports ANSI!

This PR adds code to detect:
- if running in a terminal
- if `powershell` is available (needed to test for ANSI support)
- if ANSI is supported

If and only if all of the above are true, the `-elixir ansi_enabled true` launch option is added to the `erl.exe` and `werl.exe` command lines.

Tested on Windows 10 and Windows 8.


#### [#4925] - (2016-07-05T12:12:13Z) - [Clearer "no process" error](https://github.com/elixir-lang/elixir/pull/4925)

As proposed by @fishcakez in https://github.com/elixir-ecto/db_connection/issues/48#issuecomment-229505806


#### [#4940] - (2016-07-05T08:16:20Z) - [Replace lhs/rhs with left/right in ExUnit.Formatter](https://github.com/elixir-lang/elixir/pull/4940)



#### [#4939] - (2016-07-05T07:44:51Z) - [Adds documentation for Access behaviour Callbacks](https://github.com/elixir-lang/elixir/pull/4939)

This Pull Request adds documentation to the callbacks that need to be defined when implementing the Access behaviour. See #4937 .

I fully expect that some further changes are necessary before this can be merged.

Mayor points of concern:
- Why _is_ there actually a separate `get` callback? I tried thinking hard about a case where it couldn't be implemented using `fetch` but I was unable to come up with something. It has to have a reason; I hope someone can show an example, which also probably is useful in the documentation.
- I refer to implementations of Map and Keyword, which are the two implementations of the Access protocol that ship with Elixir (that I know of). Is this a good idea, or did I overdo it by adding it at every callback documentation?
- Is the documentation of `get_and_update` clear enough like this? It is a very complex function, so maybe it can be clarified further.
- Is the behavior of `get_and_update` supposed to be the same to `Map.get_and_update` when being passed `:pop` (i.e. removing the stored value instead of updating it) ?
- Does it need examples? Can we provide examples for callbacks?


#### [#4938] - (2016-07-04T20:04:57Z) - [[ci skip] Fix typespecs for List.keymember?/3](https://github.com/elixir-lang/elixir/pull/4938)

Fix return type for [List.keymember?/3](http://elixir-lang.org/docs/master/elixir/List.html#keymember?/3). 

Function ends with `?` should return a `boolean` type as described in the [Naming Conventions](http://elixir-lang.org/docs/stable/elixir/naming-conventions.html) page.

> Trailing question mark (foo?)
> 
> Functions that return a boolean are named with a trailing question mark.
> 
> Examples: Keyword.keyword?/1, Mix.debug?/0, String.contains?/2


#### [#4927] - (2016-07-04T18:27:50Z) - [Optimize Enum.random/1, Enum.take_random/2 for ranges](https://github.com/elixir-lang/elixir/pull/4927)

Private function Enum.random_index/2 has been replaced with Enum.random_integer/2
and the deterministic examples had to be updated.


#### [#4934] - (2016-07-03T20:23:11Z) - [Add Stream.uniq_by/2 and deprecate Stream.uniq/2](https://github.com/elixir-lang/elixir/pull/4934)

Closes #4933. Also fixes up a missing newline in the `Enum.uniq_by/2` docs.

/cc @josevalim 


#### [#4932] - (2016-07-03T20:06:06Z) - [add filter option to deps.unlock](https://github.com/elixir-lang/elixir/pull/4932)



#### [#4930] - (2016-07-03T17:12:22Z) - [mix test --listen-on-stdin will no longer exit on failure](https://github.com/elixir-lang/elixir/pull/4930)

Closes #4929.

/cc @josevalim 


#### [#4931] - (2016-07-03T16:45:17Z) - [[ci skip] Fix typespecs for Kernel.pop_in/2](https://github.com/elixir-lang/elixir/pull/4931)

As discussed in #4928  


#### [#4868] - (2016-07-03T07:38:03Z) - [Integer.(un)digits/2 improvements](https://github.com/elixir-lang/elixir/pull/4868)

This PR fixes
- fixes a bug in `Integer.undigits/2`
- corrects docs for `Integer.digits/2`, `Integer.undigits/2`
- optimizers `Integer.digits/2`, `Integer.undigits/2`
- improves `Integer.digits/2` by allowing negative digits

This is a backward non-compatible proposal, but I think it is worth mentioning it.
I think it is a bit weird the behaviour of allowing negative digits other than the first one in `Integer.undigits/2`
such as in this example: `Integer.undigits([1, -4, -5])`
what's the use of that?
It's weird that negative integers were allowed in Integer.undigits/2, and  a negative integer was not allowed in `Integer.digits/2`.

If we agree only on allowing the first element in the list to be a negative integer, then we could optimize this function when dealing with HUGE lists and when base is 10, as shown in the commented code.
https://github.com/elixir-lang/elixir/blob/569fd8ad0eb5ea38749c8fe432f8c1880bcfd34e/lib/elixir/lib/integer.ex#L121-L130


#### [#4924] - (2016-07-02T15:38:06Z) - [Polish and fix docs for OptionParser](https://github.com/elixir-lang/elixir/pull/4924)

I also
- fixed some style in just a couple of lines of code
- renamed a couple of variables for clarity


#### [#4923] - (2016-07-02T14:42:22Z) - [Deprecate -pr CLI option in favour of --parallel](https://github.com/elixir-lang/elixir/pull/4923)

This is a first step towards implementing https://github.com/elixir-lang/elixir/issues/4920. It splits the `-pr` option in `mix run` and `elixir`/`elixir.bat` into `-p` and `-r`, still having backwards compatibility. I'd love some early feedback. Couple of things to note:
- the code in `Mix.Tasks.Run` that checks if `-pr` is present in the argv and replaces it with `-p -r` is not nice but very temporary as we can drop it as soon as we'll be able to parse `-pr` as `-p -r` in `OptionParser`
- support for explicit `-pr` in `elixir` and `elixir.bat` is necessary I think, given they don't go through `OptionParser`

Wdyt?


#### [#4922] - (2016-07-01T21:31:41Z) - [Remove defmacrop support in leftover code in elixir_def_overridable](https://github.com/elixir-lang/elixir/pull/4922)

Support for private overridable macros was officially dropped in 3c88c16 we forgot to remove it from some code in `elixir_def_overridable.erl` (which is now harmless but superfluous code).


#### [#4921] - (2016-07-01T19:00:23Z) - [mix test --listen-on-stdin](https://github.com/elixir-lang/elixir/pull/4921)

Closes #4919 

/cc @josevalim 


#### [#4917] - (2016-07-01T13:30:48Z) - [Hexdocs -> HexDocs](https://github.com/elixir-lang/elixir/pull/4917)

Following this conversation -> https://github.com/elixir-lang/elixir/pull/4906/files/9c42bed6cc2a30643fe6ac44dd805babf4f84e1e#r69283526


#### [#4901] - (2016-07-01T10:50:09Z) - [Enhance difference highlighting for proper lists](https://github.com/elixir-lang/elixir/pull/4901)

With this path we unify script building for keywords and proper lists, which gives better highlighting as well (see on the animation we have **less noisy diff**). Next step is to make improper lists work with this algorithm, thus we unify list handling and remove a lot of code.

![untitled](https://cloud.githubusercontent.com/assets/248290/16428911/64c18704-3d74-11e6-9d3e-3e09f2e85db1.gif)


#### [#4908] - (2016-06-29T11:34:57Z) - [Polish the docs for the Record module](https://github.com/elixir-lang/elixir/pull/4908)



#### [#4905] - (2016-06-29T09:02:53Z) - [Fix adjectives in ExUnit](https://github.com/elixir-lang/elixir/pull/4905)

since `@moduledoc` is false, I hope we can change this.

Luckily [not many people using this](https://github.com/search?l=elixir&q=%22invalids_counter%22+OR+%22failures_counter%22+OR+%22tests_counter%22&ref=searchresults&type=Code&utf8=%E2%9C%93)


#### [#4906] - (2016-06-29T08:52:13Z) - [Add Hexdocs link to generated new project README](https://github.com/elixir-lang/elixir/pull/4906)



#### [#4903] - (2016-06-29T08:16:33Z) - [Fix typo in List module](https://github.com/elixir-lang/elixir/pull/4903)



#### [#4885] - (2016-06-28T07:53:00Z) - [Use underscore in functions and variables](https://github.com/elixir-lang/elixir/pull/4885)



#### [#4893] - (2016-06-27T18:25:00Z) - [Revert mix do to enforce space after comma](https://github.com/elixir-lang/elixir/pull/4893)

I reverted the `mix do` behavior, this should fix #4861.
Sorry for messing up! :sweat: 


#### [#4895] - (2016-06-27T07:19:37Z) - [Fix race condition in IEx.Server](https://github.com/elixir-lang/elixir/pull/4895)

Hi, guys!

You could read more about this issue here: https://stackoverflow.com/questions/37974476/how-to-make-custom-prompt-take-effect-at-iex-start

I'm new to elixir so I'm not sure if I did it correctly. Feedback is highly appreciated :smile:


#### [#4891] - (2016-06-26T15:31:27Z) - [Support module attributes in remote types](https://github.com/elixir-lang/elixir/pull/4891)

For example, `@for.t` in protocols or similar use cases. This PR closes #4874.

I'm open to feedback on the error message we should give if the module attribute doesn't expand to a module :)

For the record, this was broken in https://github.com/elixir-lang/elixir/commit/a3c429f9b9a476f995b23328430a1dcca55d1799, when we stopped expanding module attributes in `Macro.expand_once/2`.


#### [#4889] - (2016-06-26T10:03:59Z) - [Improve doctest failure messages for exception assertions](https://github.com/elixir-lang/elixir/pull/4889)

**Before:**

```
Doctest failed: expected exception Mix.Error with message "mix deps.clean expects dependencies as arguments or a flag indicating which dependencies to clean. The --all option will clean all dependencies while the --unused option cleans unused dependencies" but got Mix.Error with message "`mix deps.clean` expects dependencies as arguments or a flag indicating which dependencies to clean. The '--all' option will clean all dependencies while the '--unused' option cleans unused dependencies"
```

**After:**

```
Doctest failed: wrong message for Mix.Error
expected:
  "mix deps.clean expects dependencies as arguments or a flag indicating which dependencies to clean. The --all option will clean all dependencies while the --unused option cleans unused dependencies"
actual:
  "`mix deps.clean` expects dependencies as arguments or a flag indicating which dependencies to clean. The '--all' option will clean all dependencies while the '--unused' option cleans unused dependencies"
```


#### [#4888] - (2016-06-25T23:02:07Z) - [Fix documentation for Date.new](https://github.com/elixir-lang/elixir/pull/4888)

Adapting docs of `Date.new`, according to https://github.com/elixir-lang/elixir/blob/master/lib/elixir/lib/calendar.ex#L343 and https://github.com/elixir-lang/elixir/blob/master/lib/elixir/lib/calendar.ex#L615


#### [#4886] - (2016-06-25T11:13:55Z) - [Improve test for application properties validation](https://github.com/elixir-lang/elixir/pull/4886)



#### [#4887] - (2016-06-25T11:11:38Z) - [Allow to set BINDIR for binaries and SHARE_PREFIX for manpages](https://github.com/elixir-lang/elixir/pull/4887)

This makes packaging elixir easier for distributions which have
a more specialized filesystem layout like exherbo.


#### [#4883] - (2016-06-25T07:03:35Z) - [Properly spell PID](https://github.com/elixir-lang/elixir/pull/4883)

Along then same line of #4754


#### [#4882] - (2016-06-25T07:03:16Z) - [Spell properly BEAM](https://github.com/elixir-lang/elixir/pull/4882)

Along then same line of https://github.com/elixir-lang/elixir/pull/4754


#### [#4884] - (2016-06-25T03:49:12Z) - [Remove unused import in kernel/overridable_test.exs](https://github.com/elixir-lang/elixir/pull/4884)

It seems like the `import ExUnit.CaptureIO` is not needed in this test file.
This pull request just removes that line.


#### [#4881] - (2016-06-25T02:08:59Z) - [DocTest: Add missing double quotes to doc_test ExUnit.AssertionError](https://github.com/elixir-lang/elixir/pull/4881)



#### [#4880] - (2016-06-25T02:08:43Z) - [Name variables in callbacks](https://github.com/elixir-lang/elixir/pull/4880)



#### [#4872] - (2016-06-24T22:39:18Z) - [Deprecate support for making private functions overridable](https://github.com/elixir-lang/elixir/pull/4872)

We already don't support private macros so not supporting private functions anymore seems reasonable. Less magic!


#### [#4877] - (2016-06-24T22:37:30Z) - [`import_if_available/2` for use with .iex.exs](https://github.com/elixir-lang/elixir/pull/4877)

As discussed with @josevalim on IRC earlier this evening.

I'm not sure about mentioning it in the "There are many other helpers available:" section, since it's probably not useful as an interactive command.


#### [#4876] - (2016-06-24T22:07:09Z) - [Generate error for no pid given to Genserver.reply](https://github.com/elixir-lang/elixir/pull/4876)

Prior to this change it is possible to send any two-pair tuple to
`GenServer.reply/2` and it will happily reply with `:ok`.  This
leads to some hard to track-down bugs if you pass it the wrong
data.  With this small check developers may be able to get a bit
more of a heads up to what is going wrong sooner.

For more information on how I came accross this:
https://github.com/benfalk/data_pool/commit/dcf81d1a87a363952715deeed3caa18ec0efccd9


#### [#4863] - (2016-06-24T08:21:39Z) - [Stop appending a trailing dot when autocompleting modules in IEx.](https://github.com/elixir-lang/elixir/pull/4863)

I find this behavior to be surprising and annoying. I regularly type `h [first few chars of mod name]<tab><enter>` in IEx to read the read the moduledoc of a particular module, and the trailing period gets in the way every time.

Here's a demonstration showing what happens to me regularly when I try to read the `@moduledoc` for a module:

![iex_autocomplete_original](https://cloud.githubusercontent.com/assets/49391/16309353/43595d2c-391d-11e6-9ac9-8ecfc25af232.gif)

With this change, it avoids this problem:

![iex_autocomplete_improved](https://cloud.githubusercontent.com/assets/49391/16309338/391c69bc-391d-11e6-910e-213a789389ab.gif)

Now, I know the existing behavior must be intentional (after all, it's been there a long time and was specified by tests) so I'm fully expecting that this may not be merged.  If the elixir-core team feels the existing behavior is best, that's fine.  Figured I'd open the PR and see if @josevalim and the team are open to changing, it, though, since I've found it so consistently annoying.


#### [#4870] - (2016-06-24T06:17:23Z) - [Raise an ArgumentError when overriding an undefined function](https://github.com/elixir-lang/elixir/pull/4870)

I also added a test for this behaviour as there was none. Related to #4856.


#### [#4869] - (2016-06-23T22:37:42Z) - [Enum.take_random/2: Update docs and optipmize](https://github.com/elixir-lang/elixir/pull/4869)



#### [#4856] - (2016-06-23T22:21:25Z) - [Raise an error when trying to make private macros overridable](https://github.com/elixir-lang/elixir/pull/4856)

Part of what discussed in #4830. I'm raising a `RuntimeError` as you can see in the code but I think that a `CompileError` would be more appropriate, however the neighbour code raises a `RuntimeError` for a very similar situation; should I make both `CompileError`s? 

(I will also add a test later for the neighbour error, which apparently has no tests)


#### [#4866] - (2016-06-23T21:44:22Z) - [Add missing backquote in Module docs](https://github.com/elixir-lang/elixir/pull/4866)

I guess this could be backported to 1.3.x cuz the docs will look off


#### [#4867] - (2016-06-23T21:25:33Z) - [Enum.splitter/3: add doctest example](https://github.com/elixir-lang/elixir/pull/4867)



#### [#4855] - (2016-06-23T08:09:16Z) - [Skip/fix tests on OTP 19](https://github.com/elixir-lang/elixir/pull/4855)

Addresses #4851.

In addition to the original issues from #4851, a test for `IEx` related to the `h` helper and callback functions was failing. I am currently skipping that test, but we can update `h` to use a similar approach to `callbacks_for_beam` in `elixir/test_helper.exs` as a fallback as part of this PR. That way it will continue to work for in memory and disk modules in <19, but it will only work for disk modules in >19.

I've also posted to erlang-questions asking why callbacks are no longer in the attributes, since I cannot find any reference to such a change in the changelog for 19, the github, or the erlang issue tracker. It seems this may be an unexpected change?

/cc @josevalim 


#### [#4860] - (2016-06-23T07:59:49Z) - [Fix h helper for binary operators, closes #4859](https://github.com/elixir-lang/elixir/pull/4860)

As reported in #4859, the `h` helper was not working with `==/2`, or `div/2`
It seems the regression is here since 1.3.0-rc.0.


#### [#4852] - (2016-06-22T17:01:25Z) - [Clarify Enum.group_by/3 deprecation message](https://github.com/elixir-lang/elixir/pull/4852)

When upgrading one of my projects to Elixir v1.3, I found the `Enum.group_by/3` deprecation message to be a bit confusing. It says to `please use a map instead`, but a map is used by default with the new form of `Enum.group_by/3`. The user only needs to remove the map as an argument to the function.

I think this makes it a little more clear what do to. I'm open to any suggestions here.


#### [#4848] - (2016-06-22T09:40:24Z) - [Support (exported) macros with defoverridable/super](https://github.com/elixir-lang/elixir/pull/4848)

This is a WIP PR that I'd really like to collect feedback on; it's a possible _partial_ fix for #4830 as it fixes `super()` and `defoverridable` for public macros but not private macros.

Is this a good way to approach this? :)


#### [#4843] - (2016-06-22T07:34:13Z) - [Make iex c helper compile in memory by default, closes #4836](https://github.com/elixir-lang/elixir/pull/4843)

As discussed in #4836 I updated the `c/1` helper to compile in memory.


#### [#4847] - (2016-06-22T07:30:54Z) - [Improve with/else error message on invalid form](https://github.com/elixir-lang/elixir/pull/4847)

When upgrading my code to Elixir 1.3, I forgot to use clauses in my `else` when replacing `if/else` by `with/else`,
and got an error message difficult to parse, so I added a clause to get something more readable.

Before: 

```
== Compilation error on file web/models/app.ex ==
** (FunctionClauseError) no function clause matching in :elixir_with.expand_else/2
    (elixir) src/elixir_with.erl:58: :elixir_with.expand_else({:changeset, [line: 34]$
 nil}, %Macro.Env{aliases: [], context: nil, context_modules: [BuildyPush.App], expor$
_vars: nil, file: "/home/daniel/tmp/push-server/web/models/app.ex", function: {:valid$
te_settings, 1}, functions: [{Ecto.Changeset, [add_error: 3, add_error: 4, apply_chan$
es: 1, assoc_constraint: 2, assoc_constraint: 3, cast: 3, cast: 4, cast_assoc: 2, cas$
_assoc: 3, cast_embed: 2, cast_embed: 3, change: 1, change: 2, check_constraint: 2, c$
eck_constraint: 3, delete_change: 2, exclusion_constraint: 2, exclusion_constraint: 3$
 fetch_change: 2, fetch_field: 2, force_change: 3, foreign_key_constraint: 2, foreign$
key_constraint: 3, get_change: 2, get_change: 3, get_field: 2, get_field: 3, merge: 2$
 no_assoc_constraint: 2, no_assoc_constraint: 3, optimistic_lock: 2, optimistic_lock: 
3, prepare_changes: 2, put_assoc: 3, put_assoc: 4, put_change: 3, put_embed: 3, put_e$
bed: 4, traverse_errors: 2, unique_constraint: 2, unique_constraint: 3, ...]}, {Ecto, 
[assoc: 2, assoc_loaded?: 1, build_assoc: 2, build_assoc: 3, get_meta: 2, primary_key$
 1, primary_key!: 1, put_meta: 2]}, {Kernel, [!=: 2, !==: 2, *: 2, +: 1, +: 2, ++: 2, 
-: 1, -: 2, --: 2, /: 2, <: 2, <=: 2, ==: 2, ===: 2, =~: 2, >: 2, >=: 2, abs: 1, appl$
: 2, apply: 3, binary_part: 3, bit_size: 1, byte_size: 1, div: 2, elem: 2, exit: 1, f$
nction_exported?: 3, get_and_update_in: 3, get_in: 2, hd: 1, inspect: 1, inspect: 2, $
s_atom: 1, is_binary: 1, is_bitstring: 1, is_boolean: 1, is_float: 1, is_function: 1, 
is_function: 2, is_integer: 1, ...]}], lexical_tracker: #PID<0.284.0>, line: 28, macr$
_aliases: [], macros: [{Ecto.Query, [from: 1, from: 2]}, {Ecto.Schema, [embedded_sche$
a: 1, schema: 2]}, {Kernel, [!: 1, &&: 2, ..: 2, <>: 2, @: 1, alias!: 1, and: 2, bind$
ng: 0, binding: 1, def: 1, def: 2, defdelegate: 2, defexception: 1, defimpl: 2, defim$
l: 3, defmacro: 1, defmacro: 2, defmacrop: 1, defmacrop: 2, defmodule: 2, defoverrida$
le: 1, defp: 1, defp: 2, defprotocol: 2, defstruct: 1, destructure: 2, get_and_update_
in: 2, if: 2, in: 2, is_nil: 1, match?: 2, or: 2, pop_in: 1, put_in: 2, raise: 1, rais
e: 2, ...]}], module: BuildyPush.App, requires: [BuildyPush.Web, Ecto, Ecto.Changeset,
 Ecto.Query, Ecto.Schema, Kernel, Kernel.Typespec], vars: [changeset: nil]})
    (elixir) src/elixir_with.erl:48: :elixir_with.expand/3
    web/models/app.ex:28: (module)
    (stdlib) erl_eval.erl:670: :erl_eval.do_apply/6
    (elixir) lib/kernel/parallel_compiler.ex:116: anonymous fn/4 in Kernel.ParallelCom
piler.spawn_compilers/1
```

After:

```
== Compilation error on file web/models/app.ex ==
** (CompileError) web/models/app.ex:29: expected -> clauses in else block
    (elixir) src/elixir_with.erl:48: :elixir_with.expand/3
    web/models/app.ex:28: (module)
    (stdlib) erl_eval.erl:670: :erl_eval.do_apply/6
    (elixir) lib/kernel/parallel_compiler.ex:116: anonymous fn/4 in Kernel.ParallelCom
piler.spawn_compilers/1
```


#### [#4838] - (2016-06-21T14:32:26Z) - [Add example escript module to doc](https://github.com/elixir-lang/elixir/pull/4838)

I was a little confused on what the escript module was actually supposed to look like, so I added a small example module based on the Mixfile module above


#### [#4835] - (2016-06-20T20:36:25Z) - [Improve lexical tracker test](https://github.com/elixir-lang/elixir/pull/4835)

Ensures that we're testing typespec/lexical tracker interaction more throughly.

/cc @josevalim 


#### [#4831] - (2016-06-20T20:31:08Z) - [Add warning for an invalid path on deps.clean task](https://github.com/elixir-lang/elixir/pull/4831)

I think it could be useful to warn when the user makes a typo like `mix deps.clean pheonix` instead of just printing `* Cleaning pheonix` even if the `File.rm_rf!` did nothing.

I‚Äôv decided to just check if the path is a directory instead of checking in the app‚Äôs dependencies because a user could want to clean an old dependency not present in the app.

The message could be something else, english is not my first language üòÑ


#### [#4825] - (2016-06-17T23:01:00Z) - [Add docs for the "set" datatype in the MapSet module](https://github.com/elixir-lang/elixir/pull/4825)



#### [#4823] - (2016-06-17T23:00:48Z) - [Clarify some confusion regarding the === operator.](https://github.com/elixir-lang/elixir/pull/4823)

- The new `Map` module doc added in #4820 called `===`
  the match operator but `=` is the match operator.
- I looked at the docs for `===` to see what it is called
  and it did not really give it a name. It did, however,
  use the confusing expression "returns true if the two
  times are match".  "Are match" is not a very clear explanation.
- The [Erlang docs](http://erlang.org/doc/reference_manual/expressions.html#id80318) describe the equivalent `=:=` operator as
  "Exactly equal to", so I think "exact equality operator" is a
  better name for this.


#### [#4824] - (2016-06-17T13:31:58Z) - [Fix the name of the ExUnit.DescribeTest module](https://github.com/elixir-lang/elixir/pull/4824)

It was ExUnit.BundleTest, in memory of ancient times when "describe" was called "bundle". üòõ 


#### [#4822] - (2016-06-17T11:26:06Z) - [Ensure we get test process reply when it's finished in time](https://github.com/elixir-lang/elixir/pull/4822)

\cc @fishcakez


#### [#4821] - (2016-06-16T23:13:55Z) - [Add docs for the "tuple" data type to the Tuple module](https://github.com/elixir-lang/elixir/pull/4821)

\cc @josevalim 


#### [#4820] - (2016-06-16T23:11:14Z) - [Document the "map" data type in the Map module](https://github.com/elixir-lang/elixir/pull/4820)

\cc @josevalim 


#### [#4819] - (2016-06-15T21:27:16Z) - [Add timeout handling to on_exit callback in ExUnit](https://github.com/elixir-lang/elixir/pull/4819)



#### [#4817] - (2016-06-15T21:23:50Z) - [Add more is_function checks to Enum](https://github.com/elixir-lang/elixir/pull/4817)

This adds more `is_function` checks to public functions in Enum module.

Ref: https://github.com/elixir-lang/elixir/pull/4802#issuecomment-226252470


#### [#4818] - (2016-06-15T19:42:55Z) - [more mix xref doc improvements](https://github.com/elixir-lang/elixir/pull/4818)

Just a couple of typos and grammatical improvements.

/cc @josevalim 


#### [#4811] - (2016-06-15T18:55:37Z) - [mix xref graph](https://github.com/elixir-lang/elixir/pull/4811)

Implements #4810.

Maybe it would be nice to also emit whether it's a runtime or compile time dep as edge_info in --format dot? I'm not sure it's worth the extra effort. Thoughts?

/cc @josevalim @michalmuskala 


#### [#4816] - (2016-06-15T16:41:01Z) - [Simplify code to remove warning: unsafe in 'case'](https://github.com/elixir-lang/elixir/pull/4816)

When reading the code I noticed 3 warnings from erlang:
1. variable `FinalAnn` unsafe in `case`
2. variable `FinalLocation` unsafe in `case`
3. variable `FinalDefaults` unsafe in `case`

Which can be eliminated with pattern matching at the return of the case statement. 


#### [#4802] - (2016-06-15T14:37:24Z) - [Some improvements to the Map module](https://github.com/elixir-lang/elixir/pull/4802)

In this PR I mostly
- polished docs for the `Map` module (first commit)
- added some `is_function/2` guards to some functions in `Map` (second commit)
- made some errors better in `Map` (e.g., `:erlang.error({:badkey, key})` becomes `raise KeyError, ...` (third commit)

The first commit should be an instamerge, but I was not 100% sure about the other two as they may be considered to break backwards compatibilty (I'm not sure because people shouldn't rely on unspecified behaviours). This is why I split the PR into separate commits, I can nuke them singularly if needed :)


#### [#4813] - (2016-06-15T07:30:33Z) - [`yecc` instead of `yeec`](https://github.com/elixir-lang/elixir/pull/4813)

Typo. should be `yecc` instead of `yeec` in the documentation


#### [#4805] - (2016-06-14T06:45:41Z) - [Fix failing Kernel.DialyzerTest under Windows](https://github.com/elixir-lang/elixir/pull/4805)

Under Windows (7 Pro, 64 bit) the Kernel.DialyzerTest fails:

```
  1) Kernel.DialyzerTest: failure on setup_all callback, tests invalidated
     ** (ErlangError) erlang error: {:dialyzer_error, 'The HOME environment variable needs to be set so that Dialyzer knows where to find the default PLT'}
     stacktrace:
       dialyzer.erl:173: :dialyzer.run/1
       lib/elixir/test/elixir/kernel/dialyzer_test.exs:21: Kernel.DialyzerTest.__ex_unit_setup_all_0/1
       lib/elixir/test/elixir/kernel/dialyzer_test.exs:3: Kernel.DialyzerTest.__ex_unit__/2
```

Actually this is an erlang error: [dialyzer expects the environment variable HOME set](https://github.com/erlang/otp/blob/e1489c448b7486cdcfec6a89fea238d88e6ce2f3/lib/dialyzer/src/dialyzer_plt.erl#L229-L232).
But Windows does not have this environment variable available.
(It has HOMEDRIVE and HOMEPATH.)

This commit makes the DialyzerTest pass by setting the HOME environment variable (when necessary).

Using System.user_home to set the HOME env var works because System.user_home uses `:elixir_config.get(:home)`.
`elixir_config` gets the value of `:home` from `init:get_argument(home)` (see file `lib\elixir\src\elixir.erl`)
And - finally - erlang honors these environment variables when computing `home`
(see https://github.com/erlang/otp/blob/maint/erts/etc/common/erlexec.c#L1548-L1549).

Erlang sometimes uses `os:getenv("HOME")` and sometimes `init:get_argument(home)` to get the home directory of the user.


#### [#4806] - (2016-06-14T06:45:00Z) - [Fix failing SigilsTest for newline under Windows](https://github.com/elixir-lang/elixir/pull/4806)

SigilsTest fails for newline under Windows

```
  1) test sigil S (Kernel.SigilsTest)
     lib/elixir/test/elixir/kernel/sigils_test.exs:18
     Assertion with == failed
     code: ~S"foo\\\r\nbar" == "foo\\\nbar"
     lhs:  "foo\\\r\nbar"
     rhs:  "foo\\\nbar"
     stacktrace:
       lib/elixir/test/elixir/kernel/sigils_test.exs:32: (test)
```

[Newlines](https://en.wikipedia.org/wiki/Newline).
[Github](https://help.github.com/articles/dealing-with-line-endings/#platform-windows) recommends setting `core.autocrlf true` on Windows for cross-platform projects.
[Git documentation](https://git-scm.com/book/tr/v2/Customizing-Git-Git-Configuration#Formatting-and-Whitespace) also recommends this setting on Windows.
Using this setting let the SigilsTest fail because the sigil contains a newline which is `\r\n` under Windows and not `\n`.

Use os dependent tests for newline.


#### [#4809] - (2016-06-14T06:44:32Z) - [Check for recursive imports in config files.](https://github.com/elixir-lang/elixir/pull/4809)

- Closes [#4757](https://github.com/elixir-lang/elixir/issues/4757)
- Note that signature of `Code.eval_file/1` has been modified to allow
  pass-through of options to `Code.eval_string/3`.


#### [#4808] - (2016-06-12T21:51:59Z) - [mix xref command-style](https://github.com/elixir-lang/elixir/pull/4808)

/cc @josevalim 


#### [#4807] - (2016-06-12T21:38:51Z) - [Make sure struct expansion results in a remote dispatch](https://github.com/elixir-lang/elixir/pull/4807)

/cc @josevalim 


#### [#4804] - (2016-06-12T19:26:07Z) - [Make sure with/1 does not leak variables to else](https://github.com/elixir-lang/elixir/pull/4804)

Closes #4801.


#### [#4803] - (2016-06-12T17:58:12Z) - [Improve Kernel.LexicalTracker module docs](https://github.com/elixir-lang/elixir/pull/4803)

After chatting with alisdair on IRC I realized this comment was out of date, so I updated it. :)


#### [#4797] - (2016-06-12T17:33:30Z) - [mix archive.install from scm](https://github.com/elixir-lang/elixir/pull/4797)

Implements the rest of #4734.

/cc @josevalim 


#### [#4800] - (2016-06-12T13:37:39Z) - [Include with when warning about unsafe variables](https://github.com/elixir-lang/elixir/pull/4800)

The unsafe variable warning can be triggered from the following `with`:

```
state = true

with true  <-state, state = !state,
do: state,
else: (other -> {other, state})
```


#### [#3517] - (2016-06-11T20:31:03Z) - [Emit warning when variable is being expanded to function call](https://github.com/elixir-lang/elixir/pull/3517)

Closes #3268.


#### [#4742] - (2016-06-11T19:58:03Z) - [Add mix escript.install from SCM](https://github.com/elixir-lang/elixir/pull/4742)

Implements #4734.

/cc @josevalim @ericmj 


#### [#4791] - (2016-06-11T11:13:20Z) - [More informative message for DOT tree generation](https://github.com/elixir-lang/elixir/pull/4791)

Added an SVG example for converting the generated `.dot` file.

The intention of this is that users don't have to instantly go and hunt
for the docs if they already have graphviz installed.

This should work as is on Windows too, once installed and in the path.


#### [#4780] - (2016-06-11T11:12:15Z) - [Clean deps when deps.compile is run with --force](https://github.com/elixir-lang/elixir/pull/4780)

@josevalim @ericmj  this is a first stab.
~~The test does not pass, but I wanted to check if I am on track.~~

~~The condition `if "--force" in args do` gets hit, but I wonder why the file does not disappear.~~
~~I wonder if I am placing the "tracer-file" in the right place?~~

It should be working now.
To verify that the cleaning happens I add a tracer file and ensure its removed afterwards.

Any feedback/ideas/suggestions welcome ‚ù§Ô∏è 


#### [#4796] - (2016-06-11T10:42:52Z) - [Add a is_map/1 guard to Map.take/2, Map.drop/2, and Map.split/2](https://github.com/elixir-lang/elixir/pull/4796)

Without this, it was fine to not pass a map as the first argument to `Map.take/2`, `Map.drop/2`, and `Map.split/2` if the second argument was an empty enumerable of keys:

``` elixir
iex> Map.take(:foo, [])
%{}
iex> Map.take(:foo, [:bar])
** (BadMapError) expected a map, got: :foo
```

With this commit, we always check for the first argument to be a map:

``` elixir
iex> Map.take(:foo, [])
** (BadMapError) expected a map, got: :foo
```


#### [#4790] - (2016-06-08T21:56:30Z) - [Clarify docs: mix task receives arguments as a list](https://github.com/elixir-lang/elixir/pull/4790)



#### [#4764] - (2016-06-08T11:55:28Z) - [Option for `mix app.tree` and `mix deps.tree` to be output as DOT file](https://github.com/elixir-lang/elixir/pull/4764)

Inspired by @josevalim's ElixirConf.EU keynote.

This is currently a work in progress, but feedback is more than welcome.
- [x] return a string from the utils function so that the caller can write the result to a file
- [x] if a file is written where should it go? `/tmp/app_tree.dot` or `/tmp/deps_tree.dot`?
- [x] if a `dot` executable exists should we also make an `.svg`?

/cc @mootpointer


#### [#4786] - (2016-06-08T08:50:10Z) - [add DateTime.to_unix/2 can accept non-UTC DateTime structs](https://github.com/elixir-lang/elixir/pull/4786)

This PR has two commits. One is general fixes of invalid types in the examples (e.g. invalid microsecond fields). The other commit makes it possible to use DateTime.to_unix with any DateTime struct, not just UTC.


#### [#4788] - (2016-06-08T08:46:37Z) - [Use 0.1.0 as default first version in `mix new` task](https://github.com/elixir-lang/elixir/pull/4788)

Triggered from this tweet: https://twitter.com/HugoGiraudel/status/738694810350014464

> This is your friendly reminder that semantic versioning starts at 0.1.0, not 0.0.1. You can‚Äôt start with a bug fix.

Also documented in Semantic Versioning's FAQ (http://semver.org/#how-should-i-deal-with-revisions-in-the-0yz-initial-development-phase)

> The simplest thing to do is start your initial development release at 0.1.0 and then increment the minor version for each subsequent release.


#### [#4785] - (2016-06-07T22:15:43Z) - [Enhance difference highlighting for keywords](https://github.com/elixir-lang/elixir/pull/4785)

Closes #4682.

**Before:**
<img width="522" alt="screen shot 2016-06-07 at 23 11 41" src="https://cloud.githubusercontent.com/assets/248290/15874796/4656213c-2d05-11e6-8da8-ebfb7c8710a2.png">

**After:**
<img width="527" alt="screen shot 2016-06-07 at 23 10 21" src="https://cloud.githubusercontent.com/assets/248290/15874800/482370d2-2d05-11e6-9c31-ea805063a19f.png">


#### [#4782] - (2016-06-06T15:54:04Z) - [Add a "Behaviours" page to the documentation](https://github.com/elixir-lang/elixir/pull/4782)

@josevalim and I discussed this on IRC. There were three options for where to add this documentation:
1. in the documentation for `Module` - I don't like this because it's hard to find in the documentation and it gets buried with all the rest of the information already present in the docs for `Module`
2. in the "Typespecs" page - I don't like this because behaviours and typespec only have a small-ish intersection (the actually specs for callbacks), but behaviours extend beyond specs IMO
3. as a separate page - I like this, and it's what I went with üòÉ 


#### [#4781] - (2016-06-05T08:57:31Z) - [Add a reference to String.to_integer in the doc](https://github.com/elixir-lang/elixir/pull/4781)

The documentation for `Float.parse` has a mention of `String.to_float`, this patch adds a similar reference for `Integer.parse` in the function documentation.


#### [#4767] - (2016-06-04T20:08:56Z) - [Ensure paths stored in manifest are relative](https://github.com/elixir-lang/elixir/pull/4767)



#### [#4779] - (2016-06-04T18:30:46Z) - [use ETF for elixir_scm and protocols manifests](https://github.com/elixir-lang/elixir/pull/4779)

/cc @josevalim


#### [#4778] - (2016-06-04T14:31:37Z) - [Use heuristic for compiler errors](https://github.com/elixir-lang/elixir/pull/4778)

@josevalim


#### [#4777] - (2016-06-04T14:25:32Z) - [Fix parallel compiler to only send found message once](https://github.com/elixir-lang/elixir/pull/4777)

When a module waits a struct, only the module or struct found message
will be sent, not both.


#### [#4765] - (2016-06-04T08:43:49Z) - [Enum.take_random/2: Correct typespec, guards and optimize](https://github.com/elixir-lang/elixir/pull/4765)



#### [#4775] - (2016-06-04T08:42:09Z) - [Default microsecond fields for Time, NaiveDateTime, DateTime](https://github.com/elixir-lang/elixir/pull/4775)

Make microsecond fields for Time, NaiveDateTime, DateTime default to `{0, 0}` which is equivalent to "nil microsecond".

Closes #4769


#### [#4763] - (2016-06-03T07:59:48Z) - [Fix Kernel.SpecialForms.try documentation](https://github.com/elixir-lang/elixir/pull/4763)



#### [#4760] - (2016-06-02T23:54:07Z) - [Fix failing tests for System.cmd/3 on windows](https://github.com/elixir-lang/elixir/pull/4760)

As mentioned in https://github.com/elixir-lang/elixir/issues/4753 Windows echo is not a separate executable
it is a builtin to the shell (cmd.exe).

Create separate System.cmd/3 tests for windows which use the cmd.exe the echo a message.
Also change after block of test "cmd/2 with absolute and relative paths win" - sometimes File.rm_rf!
failed with 'permission denied'.


#### [#4761] - (2016-06-02T23:53:26Z) - [ApplicationTest fails under Windows](https://github.com/elixir-lang/elixir/pull/4761)

```
  2) test application directory (ApplicationTest)
     test/elixir/application_test.exs:53
     Assertion with == failed
     code: String.downcase(Application.app_dir(:elixir)) == String.downcase(Path.join(root, "bin/../lib/elixir"))
     lhs:  "d:/home/docs/dev/git_repos/robi-wan-elixir/lib/elixir"
     rhs:  "d:/home/docs/dev/git_repos/robi-wan-elixir/bin/../lib/elixir"
     stacktrace:
       test/elixir/application_test.exs:55: (test)
```

`Application.app_dir(:elixir)` delivers under Windows (7 Pro 64bit) an absolute path:

```
iex(1)> Application.app_dir(:elixir)
"d:/home/docs/dev/git_repos/robi-wan-elixir/lib/elixir"
```

Under Linux (Ubuntu 16.04 64bit) it delivers a relative path:

```
iex(1)> Application.app_dir(:elixir)
"/home/robi-wan/development/work/robi-wan-elixir/bin/../lib/elixir"
```

`Application.app_dir/1` uses `:code.lib_dir` to retrieve the code path.
So maybe the different types of paths (relative vs absolute) are caused by Erlang.

Suggestion to fix the tests under Windows: Use `Path.expand/1` to convert
the path (on the right hand side of the assertion) to an absolute path.


#### [#4762] - (2016-06-02T22:50:23Z) - [Use flush/0 in Logger instead of GenEvent.which_handlers](https://github.com/elixir-lang/elixir/pull/4762)

Use flush/0 instead of GenEvent.which_handlers(:error_logger) in Logger.add_backend/2 and Logger.remove_backend/2
See: https://groups.google.com/forum/#!topic/elixir-lang-talk/TrekCMxEZAE for more info


#### [#4758] - (2016-06-02T18:56:00Z) - [Provide information about how to force install hex and rebar.](https://github.com/elixir-lang/elixir/pull/4758)

As mentioned in this mailing list thread:

https://groups.google.com/d/msg/elixir-lang-core/JptOMxrLxcs/95mR6YYJDAAJ

...I could not figure out what the command to force install rebar was.
Including the information in the prompt will help users figure this out
without having to ask like I did.


#### [#4756] - (2016-06-02T11:02:52Z) - [Remove reference to iso8601 T separator for Date](https://github.com/elixir-lang/elixir/pull/4756)

The `T` separator is only relevant for Time and Datetime formats.


#### [#4752] - (2016-06-01T22:55:20Z) - [Correct use of indefinite article a/an](https://github.com/elixir-lang/elixir/pull/4752)



#### [#4749] - (2016-06-01T22:39:02Z) - [Standardize links](https://github.com/elixir-lang/elixir/pull/4749)

- Fix erlang.org to always be www.erlang.org
- Convert to link plain URL


#### [#4751] - (2016-06-01T22:36:23Z) - [Remove backticks in message to stdout/stderr](https://github.com/elixir-lang/elixir/pull/4751)



#### [#4750] - (2016-06-01T21:59:59Z) - [Add backticks where needed](https://github.com/elixir-lang/elixir/pull/4750)

Typical use cases are `true`, `false`, `nil`


#### [#4744] - (2016-06-01T20:50:56Z) - [Small fixes](https://github.com/elixir-lang/elixir/pull/4744)

- Remove use of em-dash(‚Äî) in favour of parenthesis
- Remove double words (on on)
- Add missing arity in function mention
- Fix wrongly closed backtick


#### [#4746] - (2016-06-01T20:47:54Z) - [Correct module, function and tasks doc summaries to use proper tense](https://github.com/elixir-lang/elixir/pull/4746)



#### [#4745] - (2016-06-01T20:46:26Z) - [Correct casing in error messages](https://github.com/elixir-lang/elixir/pull/4745)

- Mix error messages to start with uppercase;
- all other raise message should start with lowercase.


#### [#4747] - (2016-06-01T20:41:46Z) - [Remove spaces between "fn" and "("](https://github.com/elixir-lang/elixir/pull/4747)



#### [#4748] - (2016-06-01T20:40:19Z) - [Use uppercase letter in Hexadecimal values](https://github.com/elixir-lang/elixir/pull/4748)

Convert hex to use uppercase after "x", ie: 0xffff to 0xFFFF, and \u{0fffe} to \u{0FFFE}


#### [#4743] - (2016-06-01T20:29:48Z) - [Fix indentation in doctest in DateTime](https://github.com/elixir-lang/elixir/pull/4743)



#### [#4739] - (2016-06-01T07:51:19Z) - [Mention @optional_callbacks in the documentation for Module](https://github.com/elixir-lang/elixir/pull/4739)

Would close #4737.

\cc @josevalim and @lexmag, just wanted to check with you if it's ok to not align the `-`s in the list of reserved attributes (since we're gonna change all of those anyways just to move them to the right).


#### [#4738] - (2016-06-01T01:24:32Z) - [Fix Enum and Mix.Dep documentation](https://github.com/elixir-lang/elixir/pull/4738)



#### [#4736] - (2016-05-31T21:50:21Z) - [Fix reference to "archive" in Mix.Tasks.Escript.Install](https://github.com/elixir-lang/elixir/pull/4736)

Seems like a missed find/replace from archive.install?


#### [#4732] - (2016-05-31T20:30:26Z) - [Fixed typo in Logger reset_metadata documentation](https://github.com/elixir-lang/elixir/pull/4732)

The word "the" is repeated


#### [#4731] - (2016-05-31T19:11:37Z) - [Add docs for `Enum.chunk/3` with count greater than number of elements](https://github.com/elixir-lang/elixir/pull/4731)



#### [#4728] - (2016-05-31T11:44:17Z) - [Batch IO with console backend and handle unicode errors](https://github.com/elixir-lang/elixir/pull/4728)

This takes the async logging to :user further by:
- Buffering formatted events while we wait for a reply from the device
- Dropping events when buffer is full
- Handling a unicode error only when we need to, fortunately :user sends the old buffer back so don't need to hold onto it

/cc @josevalim @olafura


#### [#4730] - (2016-05-30T23:47:17Z) - [Fix default encoding for put_chars in StringIO](https://github.com/elixir-lang/elixir/pull/4730)

StringIO is a unicode device. I wonder how many people rely on this bug? `IO.binwrite/2` says do not use this on a unicode device.


#### [#4729] - (2016-05-30T19:55:08Z) - [mix profile.fprof --warmup](https://github.com/elixir-lang/elixir/pull/4729)

Implements #4723.

Had to modify an existing test that was profiling a file which defined a module, because now that warmup happens by default it was causing a module redefined error during the test suite. Let me know if there is some other way that should have been solved.

/cc @josevalim 


#### [#4725] - (2016-05-30T18:18:10Z) - [Always optimize in/2 for literals](https://github.com/elixir-lang/elixir/pull/4725)



#### [#4721] - (2016-05-30T17:45:58Z) - [Update Enum tests](https://github.com/elixir-lang/elixir/pull/4721)

Note: This is a housekeeping request, not intended to introduce any functional changes.

I had an idea, which we can shoot down or I can fully commit to if you like it: Basically I think that it would be nice if functions are specified with signature, and sorted in order within the test file. Would make it easier to find tests and have a cleaner code base.

I know some functions are already following this pattern, so this kind of a manual housekeeping task.

Summary of changes:
- Reorder test in alphabetical order.
- Specify signature for function being tested.
- Add missing tests where applicable.
- Reorder the function definitions in the main Enum file as well.


#### [#4724] - (2016-05-30T17:04:28Z) - [Fix Calendar @moduledoc about date subdivision overspecification.](https://github.com/elixir-lang/elixir/pull/4724)

This Pull Request fixes the grammar in the [Calendar documentation](http://elixir-lang.org/docs/master/elixir/Calendar.html), as well as making it more clear what is meant by `number in numbers`.


#### [#4726] - (2016-05-30T17:01:24Z) - [Update CHANGELOG.md](https://github.com/elixir-lang/elixir/pull/4726)

Tiny typo. Changed "modules" to "module" (plural to singular).


#### [#4720] - (2016-05-30T15:12:59Z) - [Better logger for console with direct access](https://github.com/elixir-lang/elixir/pull/4720)

Hi I've been doing some experiments that you can try out and veryify the result:
https://github.com/olafura/test_io

With sending messages directly to user_drv we are able to have less blocking, significantly less cpu time and less memory usage over all.

I'm making these changes to Logger and not IO directly since IO does a lot more than just print things to the console.

It's not faster per se at putting thing on the terminal but that is something that is going to be difficult to make faster according to my tests.

We might want to handle these reply cases:
https://github.com/erlang/otp/blob/maint/lib/stdlib/src/io.erl#L573
I'm currently pushing everything back to self so it won't be blocking


#### [#4722] - (2016-05-30T14:36:35Z) - [Switch date sigil in Changelog to correct YYYY-MM-DD](https://github.com/elixir-lang/elixir/pull/4722)

ref: https://twitter.com/erniemiller/status/737285233272328192

special thanks to @JEG2 and @ernie


#### [#4719] - (2016-05-30T09:48:47Z) - [Implement Access.at/1](https://github.com/elixir-lang/elixir/pull/4719)

It was described, but not implemented, on #4009

`Access.at/1` can be used to access any index in a list.

```
  ## Examples

      iex> list = [%{name: "john"}, %{name: "mary"}]
      iex> get_in(list, [Access.at(1), :name])
      "mary"
      iex> get_and_update_in(list, [Access.at(0), :name], fn
      ...>   prev -> {prev, String.upcase(prev)}
      ...> end)
      {"john", [%{name: "JOHN"}, %{name: "mary"}]}
      iex> pop_in(list, [Access.at(0), :name])
      {"john", [%{}, %{name: "mary"}]}
```


#### [#4718] - (2016-05-29T19:56:07Z) - [This example confused me before I understood it was using another library](https://github.com/elixir-lang/elixir/pull/4718)

Perhaps that could be made clear?


#### [#4717] - (2016-05-29T14:29:16Z) - [Update CHANGELOG.md](https://github.com/elixir-lang/elixir/pull/4717)

Just a bit that seemed worded oddly to me. :)


#### [#4715] - (2016-05-29T10:30:21Z) - [Fixes indentation around in the URI module](https://github.com/elixir-lang/elixir/pull/4715)

\cc @lexmag and @josevalim, since I'm in favour of the indentation we discussed, here's a fix for a bunch of cases in `URI` :)


#### [#4714] - (2016-05-29T08:44:50Z) - [Refactor things here and there in the URI module](https://github.com/elixir-lang/elixir/pull/4714)

Mainly:
- renamed a bunch to make them clearer (especially one-letter variables)
- renamed a couple of private functions so that their name is more expressive
- added guards to some functions

I also slightly refactored a couple of things and moved a private function around to be closed to where it's used. I left a couple of comments in the code for a few things I'm not super sure about :)

\cc @lexmag, I'd appreciate your input on this :)


#### [#4713] - (2016-05-28T22:21:52Z) - [Spelling, grammar and missing negation in Calendar docs](https://github.com/elixir-lang/elixir/pull/4713)



#### [#4711] - (2016-05-28T20:22:14Z) - [Add specs to the URI module](https://github.com/elixir-lang/elixir/pull/4711)

Only the spec for `URI.query_decoder/1` worries me as it returns a function which is however semantically a stream (and this is what we mention in the documentation), so I chose to return `Stream.t`. Is this ok? Should we update `Stream.t` to include functions?


#### [#4710] - (2016-05-28T18:49:36Z) - [Polish the docs for the URI module](https://github.com/elixir-lang/elixir/pull/4710)



#### [#4703] - (2016-05-28T18:05:08Z) - [Separated ExUnit difference highlighting](https://github.com/elixir-lang/elixir/pull/4703)

**Before:**
<img width="545" alt="screen shot 2016-05-27 at 22 16 41" src="https://cloud.githubusercontent.com/assets/248290/15620218/50510c2e-2459-11e6-8a15-c8a43aeadfd3.png">
**After:**
<img width="536" alt="screen shot 2016-05-27 at 22 20 28" src="https://cloud.githubusercontent.com/assets/248290/15620219/5154195e-2459-11e6-948c-5c46a909d5bf.png">


#### [#4709] - (2016-05-28T16:39:23Z) - [Enhance the ExUnit.AssertionError message.](https://github.com/elixir-lang/elixir/pull/4709)

I would like to pad the message better, at the moment it ends up looking like this:

```
iex(2)> assert :a == :b
** (ExUnit.AssertionError) Assertion with == failed
code: :a == :b
lhs:  :a
rhs:  :b

    lib/ex_unit/assertions.ex:287: ExUnit.Assertions.assert/2
```

```
iex(2)> spawn_link fn -> assert :a == :b end
** (EXIT from #PID<0.57.0>) an exception was raised:
    ** (ExUnit.AssertionError) Assertion with == failed
code: :a == :b
lhs:  :a
rhs:  :b

        lib/ex_unit/assertions.ex:287: ExUnit.Assertions.assert/2
```

Since we don't have any information about how nested the messages are in Exception.message, adding the appropriate padding seems very difficult, if not impossible. Happy to accept any feedback on how we should format it, given that limitation. I was considering adding an additional newline between the note and code like this:

```
** (ExUnit.AssertionError) 
Assertion with == failed
code: :a == :b
lhs:  :a
rhs:  :b

    lib/ex_unit/assertions.ex:287: ExUnit.Assertions.assert/2
```

```
iex(2)> spawn_link fn -> assert :a == :b end
** (EXIT from #PID<0.57.0>) an exception was raised:
    ** (ExUnit.AssertionError) 
Assertion with == failed
code: :a == :b
lhs:  :a
rhs:  :b

        lib/ex_unit/assertions.ex:287: ExUnit.Assertions.assert/2
```

but I'm not sure if that makes it look better or worse. :)

\cc @josevalim 


#### [#4708] - (2016-05-28T14:55:16Z) - [Bring back the correct doc for ExUnit setup_all callback](https://github.com/elixir-lang/elixir/pull/4708)



#### [#4707] - (2016-05-28T13:43:10Z) - [Add GenServer.format_status/2 and use GenServer over :gen_server as the behaviour](https://github.com/elixir-lang/elixir/pull/4707)

This should finish up the stuff needed to close #4546.


#### [#4705] - (2016-05-28T11:19:12Z) - [Add support for the @optional_callbacks behaviour attribute](https://github.com/elixir-lang/elixir/pull/4705)

Not sure if this is a good implementation, so I'm opening this for early feedback :) Also, I'm open to suggestions on possible additional tests to add for this.

Related to #3980.


#### [#4706] - (2016-05-28T08:01:00Z) - [Correct typespec group names](https://github.com/elixir-lang/elixir/pull/4706)

I'm not sure it if should read `| Remotes` or `| Remote` on line #37


#### [#4696] - (2016-05-27T19:28:47Z) - [mix test --stale](https://github.com/elixir-lang/elixir/pull/4696)

Implements #4688.

I managed to make only minimal changes to the existing test task so that it would be easy to verify that nothing was broken by the addition of `--stale`, which also had the nice benefit of allowing me to put almost all the code for this feature in a separate module/file.

I still have tests to write, but my manual testing is showing that this is working as I am expecting it to, so I invite everyone to review the implementation and try it out on their projects.

/cc @josevalim @fishcakez @lpil 


#### [#4702] - (2016-05-27T19:23:15Z) - [Add some extra tests for take_every and drop_every.](https://github.com/elixir-lang/elixir/pull/4702)

Also, now testing the correct function in the negative test for drop_every/2. 

(Sorry about the small PR, it was because of the typo in #4698)


#### [#4701] - (2016-05-27T19:01:19Z) - [Replace last remains of char_list with charlist](https://github.com/elixir-lang/elixir/pull/4701)

This is a leftover from a rebase when https://github.com/elixir-lang/elixir/pull/4582
was implemented.


#### [#4697] - (2016-05-27T17:58:19Z) - [Record.is_record/2 fix that deals with invalid records](https://github.com/elixir-lang/elixir/pull/4697)



#### [#4689] - (2016-05-27T14:44:59Z) - [Show whitespace in ExUnit diffs](https://github.com/elixir-lang/elixir/pull/4689)

Hello! I had a go at showing whitespace in diffs.

This now replaces diff fragments entirely made of spaces with a sequence of the open box character (‚ê£), for legibility.

An alternative to this character could be changing the background colour.

I was unsure how to test this. There doesn't seem to be any for the CliFormatter? I have added an ExUnit example.

Related to #4682 


#### [#4700] - (2016-05-27T13:36:54Z) - [Fix small typo in special forms documentation](https://github.com/elixir-lang/elixir/pull/4700)



#### [#4699] - (2016-05-27T12:19:58Z) - [Correct Time.from_iso8601! typespec](https://github.com/elixir-lang/elixir/pull/4699)



#### [#4698] - (2016-05-27T12:17:30Z) - [Implement Enum.drop_every](https://github.com/elixir-lang/elixir/pull/4698)

While practicing my kata at http://www.codewars.com/kata/how-green-is-my-valley/ and enjoying myself learning Elixir in general, I ended up in a situation where I want to split a sorted enumerable into two: One enumerable consisting of every other element, and the other enumerable the remaining elements. 

Enum.take_every readily solved one case, but there was no opposite version Enum.drop_every. Strange, I thought, drop_while/take_while is there, drop/take is there. I really need an Enum.drop_every!

I think more people than me would find it really handy to have a Enum.drop_every complementing Enum.take_every.

Will this solve my Kata? Nope, they are still on Elixir 1.2.4 üòõ 


#### [#4694] - (2016-05-27T07:19:45Z) - [Remove incorrect reference to arrays](https://github.com/elixir-lang/elixir/pull/4694)

Related to #4691 


#### [#4692] - (2016-05-27T06:51:48Z) - [Clarify the use of `async: true`](https://github.com/elixir-lang/elixir/pull/4692)

The documentation here a bit confusingly worded to make it sound like with `async: true` each `test` declaration in the case would run asynchronously. I've tried to reword it and make it clear that the flag is set for the test case itself.

Example of confusion: #3580. I found that thread when trying to find the same answer for why six tests with `:timer.sleep(1000)` were running in serial within a single test case.


#### [#4693] - (2016-05-26T23:10:17Z) - [Correct "fullfilled" typo](https://github.com/elixir-lang/elixir/pull/4693)



#### [#4691] - (2016-05-26T20:24:10Z) - [Clarify args in docs for `apply`](https://github.com/elixir-lang/elixir/pull/4691)

I think we should avoid calling lists arrays. I looked up the docs for `Kernel.apply` to see if it would accept a tuple, and was surprised to see the word "array" in there.

I did a quick search through the source, and the only other mention of "array" is in the docs for `Logger.Formatter.compile/1`, but it can return either List or Tuple, so I'm less inclined to change it to "a list".


#### [#4686] - (2016-05-26T14:51:19Z) - [Use square brackets for IPv6 in URI.to_string/1](https://github.com/elixir-lang/elixir/pull/4686)

(related to #4685)

According to the grammar at https://tools.ietf.org/html/rfc3986#appendix-A, a host can have colons in it only if it's a "IPv6" or a "IPvFuture"; in both cases, it's expected to be surrounded by square brackets. This means that when converting a URI to a string in `URI.to_string/1`, we can simply surround a host with square brackets if it contains one or more colons.

Actually, I'm not sure why we're stripping brackets _from the authority_ when parsing IPv6 addresses. If given `"http://[2001:db8::]:8080"`, shouldn't the authority be `"[2001:db8::]:8080"`? And actually, shouldn't the host be `"[2001:db8::]"` as well? Give the following productions of the grammar:

```
host          = IP-literal / IPv4address / reg-name
[...]
IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"
```

In this case, we wouldn't have to do anything special in `URI.to_string/1` as we'd get this for free from just dumping what we parsed in `URI.parse/1`.


#### [#4690] - (2016-05-26T13:43:59Z) - [Add each_module callback to Kernel.ParallelRequire](https://github.com/elixir-lang/elixir/pull/4690)

First part of #4688.

Adds an optional callback that is invoked for each module to `Kernel.ParallelRequire`, which behaves exactly the same as the one for `Kernel.ParallelCompiler`. Also alters whitespace to look more like `Kernel.ParallelCompiler`.

This seems like a nice small piece to review separately from all the stuff related to manifests and such, so figured I'd make a separate PR.

/cc @josevalim @fishcakez @lpil 


#### [#4687] - (2016-05-26T07:13:47Z) - [Small wording fix to String.split/3 documentation](https://github.com/elixir-lang/elixir/pull/4687)

Prior wording of this was awkward. This makes it much clearer that `:infinity` is the default `parts:` option.


#### [#4683] - (2016-05-25T19:53:42Z) - [Add `mix xref --callers M.f/a`](https://github.com/elixir-lang/elixir/pull/4683)

Related: #4656.

`mix xref --callers` accepts a `Module`, `Module.function`, or `Module.function/arity`.

Output looks like:

```
file: lib/a.ex
  A.a/0:2,3
```

I chose this format because:
- it looks good if you are simply manually using the task
- file paths can have all kinds of weird characters in them (like `:` and `"` and `,`) and this should hopefully simplify parsing for libraries that will rely on the output of this task without having to define any kind of escaping

The task also returns data like:

``` elixir
[{"lib/a.ex", [{A, :a, 0, [3, 2]}]}]
```

from `run`, so if you use it from within Elixir itself you don't have to parse anything.

Do we need any additional switches, like maybe `--silent` (for use from Elixir apps that will simply use the return value of `run`)?

I also added some missing `record_remote`s to get all of our compile dispatches in, and also fixed a bug where xref was not checking captured remotes.

/cc @josevalim 


#### [#4662] - (2016-05-24T21:53:00Z) - [Add support for OTP 19 map typespecs](https://github.com/elixir-lang/elixir/pull/4662)

- %{required(foo) => bar} and %{optional(foo) => bar} forms are added
- %{foo => bar} is deprecated in favor of the above forms
- %{...} is added to mean any map
- %{} now means empty map


#### [#4675] - (2016-05-23T23:29:53Z) - [Add to_erl/from_erl conversions to Time/Date/NaiveDateTime](https://github.com/elixir-lang/elixir/pull/4675)

Implements #4671

I chose to use `{:error, :unsupported_calendar}` for the error tuple in cases where `Calendar.ISO` is not the calendar for the given `Date` or `NaiveDateTime`, I can change that if there is a more descriptive atom to use.

Been awhile since my last PR, so let me have it if I've forgotten something :)


#### [#4667] - (2016-05-23T13:39:40Z) - [Fix #3634 - apps can no longer refer to themselves as dependencies](https://github.com/elixir-lang/elixir/pull/4667)

This should fix the issue with umbrella deps, but also any future SCMs that exhibit similar issues. 

I'm not 100% on this. I first did a check against `Mix.Project.config()[:app]` in [`Mix.SCM.Path.accepts_options/2`](https://github.com/elixir-lang/elixir/blob/master/lib/mix/lib/mix/scm/path.ex#L21) and raised if it was the same as `app`, but that seemed like the wrong place to fix the issue.

btw, I tracked the infinite recursion to [`Mix.Dep.Fetcher.do_with_depending/2`](https://github.com/elixir-lang/elixir/blob/master/lib/mix/lib/mix/dep/fetcher.ex#L136).


#### [#4670] - (2016-05-23T12:52:07Z) - [Fix binary typespecs](https://github.com/elixir-lang/elixir/pull/4670)

- Removes <<_::size*unit>>
- Adds <<_::size, _::_*unit>>

Closes #4669.


#### [#4666] - (2016-05-22T22:00:32Z) - [Fix test race in IEx](https://github.com/elixir-lang/elixir/pull/4666)

Tries to fix this race condition: https://travis-ci.org/elixir-lang/elixir/builds/132115026


#### [#4641] - (2016-05-22T20:51:15Z) - [Fix the documentation for functions in Base](https://github.com/elixir-lang/elixir/pull/4641)



#### [#4665] - (2016-05-22T20:36:18Z) - [Adds mix_project_config[:xref][:exclude] for Xref](https://github.com/elixir-lang/elixir/pull/4665)

#4661

/cc @josevalim 


#### [#4663] - (2016-05-22T19:54:19Z) - [Fix path tests windows](https://github.com/elixir-lang/elixir/pull/4663)

Prior this commit(s) three tests failed under windows.


#### [#4664] - (2016-05-22T19:47:35Z) - [use `:erlang.term_to_binary` for elixir compiler manifest storage](https://github.com/elixir-lang/elixir/pull/4664)

Amount of time is basically the same, but for ecto master manifest:

1.2.5 (without dispatches!!):
`-rw-r--r--  1 ericentin  staff  71148 May 22 14:42 _build/shared/lib/ecto/.compile.elixir`

this branch (with dispatches):
`-rw-r--r--  1 ericentin  staff  28502 May 22 14:43 _build/shared/lib/ecto/.compile.elixir`

/cc @josevalim @ericmj 


#### [#4660] - (2016-05-22T16:02:02Z) - [Change grouped warning format, split test, and rename needs_xref](https://github.com/elixir-lang/elixir/pull/4660)

\cc @josevalim @lexmag 


#### [#4658] - (2016-05-22T09:21:14Z) - [Improve spelling of private function name](https://github.com/elixir-lang/elixir/pull/4658)

It's a very minor thing, but... üê∂ 


#### [#4639] - (2016-05-22T09:20:45Z) - [Warn for remote calls that cannot be resolved at compile time](https://github.com/elixir-lang/elixir/pull/4639)

#3096


#### [#4412] - (2016-05-21T17:05:25Z) - [improve option_parser.ex to support counter](https://github.com/elixir-lang/elixir/pull/4412)

this is a follow-up to what was discussed:
https://groups.google.com/d/msg/elixir-lang-core/HNTvvzY8VCk/x1861JwwBgAJ

I want a strong option parser like the [Python ArgumentParser](https://docs.python.org/2/library/argparse.html);
however, to support `-vn` means same as `-v -n` is harder than I
thought, that will be in another PR.


#### [#4655] - (2016-05-20T15:57:47Z) - [Fix a typo in the iex man page](https://github.com/elixir-lang/elixir/pull/4655)



#### [#4654] - (2016-05-20T08:08:29Z) - [Polish docs for URI.merge/2 and fix a bunch of future warnings](https://github.com/elixir-lang/elixir/pull/4654)

I added parens to a bunch of parens-less `to_string/1` calls that will warn in Elixir v1.4.


#### [#4652] - (2016-05-20T07:07:56Z) - [Polish the docs for the functions (not callbacks) in GenServer](https://github.com/elixir-lang/elixir/pull/4652)



#### [#4648] - (2016-05-20T07:07:40Z) - [Polish the docs for Supervisor and Supervisor.Spec](https://github.com/elixir-lang/elixir/pull/4648)



#### [#4644] - (2016-05-20T06:53:39Z) - [URI.merge/2](https://github.com/elixir-lang/elixir/pull/4644)

Merge a relative path/URI to a base URI as per RFC3986 ¬ß5.2

Examples:

```
iex> URI.merge("http://example.com/foo", "/bar") |> to_string
"http://example.com/bar"

iex> URI.parse("http://example.com/foo") |> URI.merge("bar") |> to_string
"http://example.com/bar"
```

‚Ä¶and more


#### [#4653] - (2016-05-20T06:44:35Z) - [Update docs for LexicalTracker](https://github.com/elixir-lang/elixir/pull/4653)

We no longer store state in ETS so the paragraph is outdated and I simply removed it.
Alternatively, this paragraph could read e.g.:

> The implementation simply stores dispatch information in GenServer with two maps: one for directives and one for references.
> This information is being used during compilation.

(as far as I know LexicalTracker is being used during compilation not sure to what part of build process "once compilation is done" was referring to (pardon my ignorance) :-))


#### [#4649] - (2016-05-20T06:44:02Z) - [Disable overriding the async tag](https://github.com/elixir-lang/elixir/pull/4649)

The `async` config is meant to be set only by the time `ExUnit.Case` is used. With these changes we make sure a proper error will be raised if we eventually try to override it, either at the setup step, for the whole case as a `moduletag`, or as a regular test tag.


#### [#4651] - (2016-05-19T22:46:32Z) - [Replace ets table in Kernel.LexicalTracker with a map](https://github.com/elixir-lang/elixir/pull/4651)

Resolves #4645.

Pretty straightforward, replaces the ets table (which was not used from more than one process) with two maps. Also changes the state of `Kernel.LexicalTracker` to a map to support future expansion.


#### [#4647] - (2016-05-19T21:13:13Z) - [mix elixir compiler manifest: separate file and module](https://github.com/elixir-lang/elixir/pull/4647)

As discussed in #4639:

Changes mix elixir compiler/manifest so that files and modules are separate entities. Also updates sources to use their own record to make the manifest look prettier, but still internally uses a map.

As per IRC conversation, does not implement backwards compatibility for `:v3` because it was never released.

/cc @josevalim 


#### [#4643] - (2016-05-19T08:37:41Z) - [Use a map to pass around in Kernel.ParallelCompiler.spawn_compilers](https://github.com/elixir-lang/elixir/pull/4643)

I was working around `Kernel.ParallelCompiler.spawn_compilers/8` lately (yeah, **eight**! üòõ), and thought it could benefit from a little refactoring. Basically, we pass around a "state" in this function which is formed by its eight arguments: in this PR, I changed the state to be a map. I think this brings some improvements: first of all, all arguments are always named, which is great when reading the code. Second, when calling `spawn_compilers` recursively, now just the `state` with some updated fields has to be passed around (instead of always the full eight arguments, even if only one changed).

I'm not 100% sold on this PR myself, maybe the benefits are not that much as to justify it, but I thought it would be worth to have others look at it and tell what they think :)

Small note: compilation time doesn't seem to be affected by this change. I tried `make clean && make`, compiling Ecto, and compiling Gettext, and the difference in compilation time is always under 1% (either slower or faster), which I don't think means anything significant.

Let me know what you think! üíü 


#### [#4642] - (2016-05-18T20:22:41Z) - [Windows: batch file improvements](https://github.com/elixir-lang/elixir/pull/4642)

Add help information to iex.bat.
Support '/?' command line switch to show help also in elixir.bat and elixirc.bat - under windows '/?' is widely-used.


#### [#4638] - (2016-05-17T16:24:17Z) - [Minor corrections to Writing Documentation](https://github.com/elixir-lang/elixir/pull/4638)



#### [#4634] - (2016-05-17T13:16:35Z) - [Rewords the section about hiding docs in "Writing Documentation"](https://github.com/elixir-lang/elixir/pull/4634)

This PR proposes a revision of the "Privacy" section in "Writing Documentation".

The current "Privacy" section starts saying things about private functions, that they cannot be documented, etc., and then starts explaining a few techniques.

But I think that's not really the point of this section. This section is really about hiding documentation for modules and public functions that do not belong to the public interface for end users.

This proposal then splits this in two sections: The first one is similar to the original and introduces the common use case for hiding documentation which is having two levels of (technically) public interface.

Then a new section explains how private functions are conventionally documented in Elixir.


#### [#4637] - (2016-05-17T07:01:02Z) - [Correct calendar typo](https://github.com/elixir-lang/elixir/pull/4637)



#### [#4635] - (2016-05-16T21:09:05Z) - [Test noun customization](https://github.com/elixir-lang/elixir/pull/4635)

As per #4159:
- Adds `:type` field that defaults to `:test` to `ExUnit.Test` struct
- Adds `ExUnit.plural_rule/{1,2}` and tests
- Group `ExUnit.Test` completions by `:type` for display in
  `ExUnit.CLIFormatter`

This PR also includes a separate commit that implements what might be a good interface for setting the type of a test (based on a new tag `:type` for tests), and tests for the `ExUnit.CLIFormatter` display for tests with a non-`:test` `:type`.

If that interface doesn't work for us for whatever reason, I can back that out and whenever we do come up with an appropriate interface it can be added to the initial commit with updated tests that use the final interface.


#### [#4632] - (2016-05-16T16:58:01Z) - [Minor fixes in "Writing Documentation" [ci skip]](https://github.com/elixir-lang/elixir/pull/4632)

Some minor stuff I saw in passing.

GitHub does not highlight the change in the second chunk: "modules and function names" becomes "module and function names".


#### [#4624] - (2016-05-16T15:14:45Z) - [Enum documentation: Reformulate the returned element for min/max/max_by ](https://github.com/elixir-lang/elixir/pull/4624)

The sentence seemed a bit strange, wanted to make it more understandable.
Also wanted to convey that the "compared equal" part only applies/matters to the smallest/biggest element.

Still not sure, if this is really good. Might want to check with a native speaker, to me it read a bit strange so tried to improve upon it.

Also included a second commit, adding the inline doc `iex` for min/max/min_max_by to show the mentioned behavior that the first biggest/smallest element is returned.

2 commits so if wanted only one of them could be taken. Also happy to squash or let github squash it.


#### [#4631] - (2016-05-15T22:10:51Z) - [Improve warning output](https://github.com/elixir-lang/elixir/pull/4631)

What if we use colon as warning prefix separator and 1 indentation level for stacktrace (we don't have exception banner anyway) as it looks too wide right now?

**Before**:
<img width="647" alt="screen shot 2016-05-15 at 21 39 07" src="https://cloud.githubusercontent.com/assets/248290/15276359/47484434-1ae6-11e6-87e4-2e7113f407fd.png">

**After**:
<img width="660" alt="screen shot 2016-05-15 at 21 41 06" src="https://cloud.githubusercontent.com/assets/248290/15276358/42092eac-1ae6-11e6-9449-6aad2b47845b.png">


#### [#4628] - (2016-05-15T17:17:34Z) - [Add a --long-compilation-threshold option to "mix compile"](https://github.com/elixir-lang/elixir/pull/4628)

This option changes the value of the `:long_compilation_threshold` option in `Kernel.ParallelCompiler.files/2`.


#### [#4629] - (2016-05-15T15:53:10Z) - [Make lexicals (alias, import and require) return the given module(s) instead of nil](https://github.com/elixir-lang/elixir/pull/4629)

Implements changes suggested by @josevalim at #4596.

``` elixir
iex> import String
String
```

``` elixir
iex> require String
String
```

``` elixir
iex> alias String
String
```

``` elixir
iex> alias String, as: Foo
String
iex> alias Foo, as: Bar
String
```

``` elixir
iex> alias String.{Break, Casing, Chars}
[String.Break, String.Casing, String.Chars]
```

Little updates to section 13 of the [Getting Started](https://github.com/elixir-lang/elixir-lang.github.com/blob/master/getting-started/alias-require-and-import.markdown) may be required, so I will take care of it upon merge.

This is my very first PR to this project, but I am really eager to keep contributing.

We are using Elixir extensively at [Stampery](https://github.com/stampery), so we will try to give back as much as possible to this community. :smiley_cat:  


#### [#4627] - (2016-05-15T10:51:28Z) - [Rename :each_timeout and :timeout compiler options](https://github.com/elixir-lang/elixir/pull/4627)

I renamed those to `:each_long_compilation` and `:long_compilation_threshold`.

Tests are failing because we didn't update them when disabling the "Compiled lib/foo.ex" messages. A PR is coming for that :)


#### [#4626] - (2016-05-15T09:38:32Z) - [Add an :each_waiting option to Kernel.ParallelCompiler](https://github.com/elixir-lang/elixir/pull/4626)

I added the `:each_waiting` and `:waiting_timeout` options to `Kernel.ParallelCompiler.files/2`. These option control what to do when a file it's taking longer than `:waiting_timeout` to compile: in such cases, the `:each_waiting` function is called with that file as its argument.

I also updated the Elixir compiler so that it now prints 

> Compiling lib/foo.ex (it's taking longer than 5 seconds)

during compilation. This is a step towards fixing #4585. I still haven't suppressed the "Compiled lib/foo.ex" messages as I think it's better to do one thing at a time (there are also a lot of tests to update if we suppress that).

The diff is pretty big because `Kernel.ParallelCompiler.spawn_compilers/8` has a lot of clauses and I had to update all of them (and I managed to raise the record of highest arity ever to 9! /cc @eksperimental); I think I'd like to refactor this function a bit so that it looks cleaner, but that's a story for another PR.


#### [#4625] - (2016-05-14T19:56:32Z) - [Style fix for try ... after docs](https://github.com/elixir-lang/elixir/pull/4625)

As discussed here: https://github.com/elixir-lang/elixir/commit/5e531cbc35b70548b27075be62145592060cd19e#commitcomment-17477889


#### [#4621] - (2016-05-13T16:51:58Z) - [Make Application a behaviour (instead of using :application)](https://github.com/elixir-lang/elixir/pull/4621)

Adds what described in #4546.

Since we already define `GenServer` as a behaviour (with a bunch of `@callbacks`) and document such callbacks, changing the behaviour when `use GenServer` is called from `:gen_server` to `GenServer` should be just a matter of actually changing that line :).

`Supervisor` (which is mentioned in the issue) needs no work for now as far as I understand, as we already defines the behaviour and uses `@behaviour Supervisor` when `use Supervisor` is called.

As for `Application`, I added two `@callback` definitions to it and documented them; also, I changed `use Application` so that it calls `@behaviour Application` instead of `@behaviour :application`. Erlang's `application` module only defines `start/2` and `stop/1` as callbacks ([here](https://github.com/erlang/otp/blob/maint/lib/kernel/src/application.erl#L64-L68)), but documents a few others (`prep_stop/1`, `config_change/3`, and `start_phase/3`); what should we do with them? Add them as `@optionalcallback` as soon as we have that available?


#### [#4613] - (2016-05-13T14:17:54Z) - [Friendly error message for duplicate ExUnit test names](https://github.com/elixir-lang/elixir/pull/4613)

First, it should be noted that the below-described "problem" **is expected** (and tested) by ExUnit.
This pull-request suggests that behavior be changed.
# Problem

Given a test having duplicate names defined as the following:

``` elixir
ExUnit.start

defmodule TestWithSameNames do
  use ExUnit.Case

  test "foo" do
    assert true == true
  end

  test "foo" do
    assert true == true
  end
end
```

The second test is not run and the warning that is output is not very helpful to the untrained eye.

```
$ elixir example.exs
example.exs:10: warning: this clause cannot match because a previous clause at line 6 always matches
.
1 test, 0 failures
```

In order to understand the warning, the user must know that ExUnit defines functions based on the test names.
This is an implementation detail that the user shouldn't have to know about.
# Solution

Since the second test definition is useless, make the definition of it fail immediately without running the tests and explicitly tell the user why.

```
$ mix test
** (ExUnit.DuplicateTestError) A test named "foo" is already defined in Elixir.DupTest.
    test/dup_test.exs:6: (module)
    (stdlib) erl_eval.erl:670: :erl_eval.do_apply/6
```

As always, I'm happy to change the implementation/output/etc. if you have any suggestions!
Thank you for the amazing tools :) :heart:

h/t @nathanl for pairing! A great partner! üí´ 


#### [#4620] - (2016-05-13T14:17:38Z) - [Correct ExUnit.Case typo](https://github.com/elixir-lang/elixir/pull/4620)



#### [#4615] - (2016-05-13T12:12:02Z) - [IO.warn to unify warnings](https://github.com/elixir-lang/elixir/pull/4615)

How does this look for #4608 ?


#### [#4600] - (2016-05-13T07:30:57Z) - [[WIP] File.open/2: complete list of modes](https://github.com/elixir-lang/elixir/pull/4600)

I have updated the modes, since many were missing. In docs as well as in typespecs


#### [#4601] - (2016-05-13T07:30:25Z) - [[WIP] Correct inspect options](https://github.com/elixir-lang/elixir/pull/4601)

This PR partially solves https://github.com/elixir-lang/elixir/pull/4582#discussion_r62423420

@josevalim: I haven't implemented your suggestion for checking valid values for the options.
I think we should come up with a mechanism something that can help us check all values, otherwise it's gonna be a lot of code duplication.

regarding keys, a simple struct!/1 will do it (i think), let me know if this works for you. 


#### [#4606] - (2016-05-13T07:28:50Z) - [Fix nfd normalization bug](https://github.com/elixir-lang/elixir/pull/4606)

This fixes https://github.com/elixir-lang/elixir/issues/4604.  

:information_desk_person: No new tests were added, only reverted the two failing specs from this commit: 107a185209dabad4147a9c5d27a7c44a60004599


#### [#4610] - (2016-05-13T07:24:23Z) - [Clarify that flat_map only flattens one level deep](https://github.com/elixir-lang/elixir/pull/4610)

- got me by surprise today as I always thought it'd do the
  equivalent of List.flatten/1 so seemed nice to get some
  examples

Not quite sure yet about the added doc to Stream.flat_map - as it is described quite differently in Enum.flat_map but that's also probably due to their different nature.

Enum doc:

```
  Returns a new enumerable appending the result of invoking `fun` on
  each corresponding item of `enumerable`.

  The given function must return an enumerable.
```


#### [#4607] - (2016-05-13T07:23:48Z) - [Replace "thing" arg with more appropriate "term" arg](https://github.com/elixir-lang/elixir/pull/4607)

`term` is the standard


#### [#4611] - (2016-05-13T07:23:35Z) - [Keep naming it enumerable for documentation consistency in Enumerable module](https://github.com/elixir-lang/elixir/pull/4611)

Noticed it while browsing the docs, just a small doc fix :) Seems to be the only reference of `stream` in the Enumerable module save the ones explaining the difference between `Enum` and `Stream` (or using/requiring some `Stream`) stuff.


#### [#4614] - (2016-05-13T07:23:08Z) - [Ensure args 2 and 3 to Enum,Stream.chunk/3,4 are integers](https://github.com/elixir-lang/elixir/pull/4614)

I confused myself the other day by accidentally doing:

``` elixir
iex(1)> 1..10 |> Enum.chunk(1, [], [])
```

Instead of blowing up this actually produces

```
[[1], [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]]
```

This happens because `[] > 0` is valid in the guard clause.

I add `is_integer` checks to args 2 and 3 in order to make sure that they're actually numbers.


#### [#4616] - (2016-05-13T06:58:15Z) - [Fix typo in Algebra doc](https://github.com/elixir-lang/elixir/pull/4616)



#### [#4599] - (2016-05-11T17:18:35Z) - [Add section about `after` to special forms docs.](https://github.com/elixir-lang/elixir/pull/4599)

See https://groups.google.com/forum/#!topic/elixir-lang-core/NWvFwUWo2QQ for background conversation.


#### [#4592] - (2016-05-10T22:01:09Z) - [Integer improvements](https://github.com/elixir-lang/elixir/pull/4592)

Docs, guards and function optimizations


#### [#4603] - (2016-05-10T21:54:54Z) - [Fix typo in Keyword doc](https://github.com/elixir-lang/elixir/pull/4603)



#### [#4597] - (2016-05-09T18:06:33Z) - [Do not emit warning when "with" clause always matches](https://github.com/elixir-lang/elixir/pull/4597)

Closes #4556.


#### [#4582] - (2016-05-08T18:13:26Z) - [[WIP] Rename char_list to charlist](https://github.com/elixir-lang/elixir/pull/4582)

This is a big change.
We need to make consistent char_list by renaming it to charlist  
### DONE
- [x] Replace every occurrence of "char_list" and "char list"
- [x] Soft-deprecate `Kernel.to_char_list/1` and in `to_char_list` in /lib/elixir/lib/list/chars.ex
  **Soft-deprecate:**
- [x] `/lib/elixir/lib/inspect/algebra.ex`: Inspect.Opts: :char_lists, :as_char_lists options
- [x] `/lib/elixir/pages/Typespecs.md`: Should we leave a note saying `char_list()` type has been deprecated in favor of `charlist()`?
- [x] `/lib/elixir/src/elixir.erl`, `/lib/elixir/src/elixir_rewrite.erl`: We need to softdeprecate `char_list/0` type
- [x] Fix protocol warnings when compiling Elixir
### TODO
- ~~~Add tests for soft-deprecated:~~~
  - ~~~functions / protocols: Kernel.to_char_list/1, Lists.Chars.to_char_list/1, File.open/1-2, and Inspect.~~~
  - ~~~options in algebra function: Inspect.Opts~~~
  - ~~~data type `char_list/0`~~~


#### [#4587] - (2016-05-08T15:38:48Z) - [Limit execution time for difference formatting and pre-filter non-similar strings](https://github.com/elixir-lang/elixir/pull/4587)

Closes #4579.


#### [#4595] - (2016-05-08T08:14:21Z) - [Fix minor typo in GenServer documentation](https://github.com/elixir-lang/elixir/pull/4595)



#### [#4593] - (2016-05-07T17:26:48Z) - [Fix typo in docs for `left && right`](https://github.com/elixir-lang/elixir/pull/4593)



#### [#4591] - (2016-05-07T08:51:52Z) - [Map: correct arg name and add backticks](https://github.com/elixir-lang/elixir/pull/4591)

reposted, as I accidentally closed https://github.com/elixir-lang/elixir/pull/4583
/cc @whatyouhide 


#### [#4589] - (2016-05-06T09:33:32Z) - [Polish the docs for the Logger module](https://github.com/elixir-lang/elixir/pull/4589)



#### [#4584] - (2016-05-06T08:56:40Z) - [Range: Enforce integers values](https://github.com/elixir-lang/elixir/pull/4584)

- Range.range?/1: Checks for valid ranges
- Range.t typespec: args are integers

Can anybody please confirm that this is the correct definition:
`@type t(first :: integer, last :: integer) :: %Range{first: integer, last: integer}`


#### [#4569] - (2016-05-05T07:21:05Z) - [Standardize unicode and friends](https://github.com/elixir-lang/elixir/pull/4569)

- Unicode is a proper noun, so it should be capitalized
- Replace 'charlist' with 'char list' or 'char_list'
- Replace 'char data' with 'chardata'
- Correct use of a/an articles


#### [#4577] - (2016-05-03T16:43:52Z) - [Do not force spaces between arguments in mix do](https://github.com/elixir-lang/elixir/pull/4577)

I often forget the space after the comma when using `mix do`,
so I changed the task a little to allow separating tasks only with a comma,
so we can for example write.

```
mix do deps.get,compile, release
```


#### [#4576] - (2016-05-02T13:26:58Z) - [Add c/1 documentation](https://github.com/elixir-lang/elixir/pull/4576)

I always tend to get a bit surprised when I see `c/2` only in the helpers documentation so I thought this would be useful to have. It's also consistent with other helpers which follow a similar pattern like `v/0` & `v/1`.


#### [#4575] - (2016-05-02T09:11:25Z) - [mix deps.clean should not remove source of local deps](https://github.com/elixir-lang/elixir/pull/4575)

Fixes #4566 


#### [#4574] - (2016-05-02T07:39:02Z) - [Fix documentation typo](https://github.com/elixir-lang/elixir/pull/4574)



#### [#4572] - (2016-05-01T12:42:23Z) - [Fix ExUnit stacktrace formatting when its entry has no location](https://github.com/elixir-lang/elixir/pull/4572)

Closes #4570.


#### [#4568] - (2016-04-30T09:57:28Z) - [Fix unquoted range](https://github.com/elixir-lang/elixir/pull/4568)

This should fix #4466, attacking it from two fronts :) Me and @lexmag worked on this together, that's where the authorship of the commits comes from.


#### [#4567] - (2016-04-29T07:36:30Z) - [Fix documentation typo](https://github.com/elixir-lang/elixir/pull/4567)



#### [#4560] - (2016-04-28T11:18:32Z) - [IO: Several improvements](https://github.com/elixir-lang/elixir/pull/4560)

IO Module:
- Impoves wording in documentation, particularly in the use of :all, :line, count
- Standardizes arg names to be `line_*`.
- Adds function guards to check for integers.
- Unicode is a proper noun, so it should be always capitalized.
- Adds backticks to args suchs as `device`, `item`, `count`.
- When functions are "Unicode unsafe", they are indicated in the first paragraph of docs.
- IO.puts: code simplified removing unnecessary variable.
- Adds \n to example in IO.gets/2
- Adds example in IO.chardata_to_string/1 when dealing with strings
- Renames args in IO.each_stream/2 and IO.each_binstream/2
- Adds tests for IO.getn/2-3 calling functions with different arities

IO.Steam Module:
- Adds a note about side effects when dealing with IO streams.


#### [#4562] - (2016-04-28T11:16:46Z) - [Stringify truncated function data in Logger](https://github.com/elixir-lang/elixir/pull/4562)

#### What does this PR do?

Converts return value of functions passed into Logger into a string.
#### Where should the reviewer start?

Notice how this line doesn't convert `data.()` to a string:
[https://github.com/elixir-lang/elixir/blob/master/lib/logger/lib/logger.ex#L590](https://github.com/elixir-lang/elixir/blob/master/lib/logger/lib/logger.ex#L590)

And this line converts `data` to a string:
[https://github.com/elixir-lang/elixir/blob/master/lib/logger/lib/logger.ex#L594](https://github.com/elixir-lang/elixir/blob/master/lib/logger/lib/logger.ex#L594)

I believe the intent is for data to be converted into a string value.
#### How should this be manually tested?

To replicate the bug:
- checkout branch 23dd2723bd43d3eef0991d3d35eb50a7362796b3
- launch iex
- use the following code block

```
defmodule Handler do
  use GenEvent

  def handle_event({_,_,{_,message,_,_}}, state) do
    IO.puts "the message #{message} is a string? => #{is_bitstring(message)}"
    {:ok, state}
  end
end

require Logger
Logger.remove_backend(:console)
Logger.add_backend(Handler)
Logger.debug(123)             # the message "123" is a string? => true
Logger.debug(fn -> 123 end)   # the message 123 is a string? => false
Logger.debug(:atom)           # the message "atom" is a string? => true
Logger.debug(fn -> :atom end) # ** (FunctionClauseError) no function clause...
```

To replicate the fix:
- checkout branch 23dd2723bd43d3eef0991d3d35eb50a7362796b3
- launch iex
- run the same code again

```
defmodule Handler do
  use GenEvent

  def handle_event({_,_,{_,message,_,_}}, state) do
    IO.puts "the message #{message} is a string? => #{is_bitstring(message)}"
    {:ok, state}
  end
end

require Logger
Logger.remove_backend(:console)
Logger.add_backend(Handler)
Logger.debug(123)             # the message 123 is a string? => true
Logger.debug(fn -> 123 end)   # the message 123 is a string? => true
Logger.debug(:atom)           # the message atom is a string? => true
Logger.debug(fn -> :atom end) # the message atom is a string? => true
```
#### Questions:
- Does this PR depend on any others?

No.
- Did I run this locally?

Yes.
- Did I run the whole test suite?

Yes.
- Did I add tests to cover the change?

No.  It's a private function.


#### [#4564] - (2016-04-28T11:04:51Z) - [String.split/3: parts option should be pos_integer](https://github.com/elixir-lang/elixir/pull/4564)



#### [#4552] - (2016-04-26T21:16:31Z) - [Consider improper lists in ExUnit.Diff.format/3](https://github.com/elixir-lang/elixir/pull/4552)

Closes #4548.

<img width="421" alt="screen shot 2016-04-24 at 15 19 38" src="https://cloud.githubusercontent.com/assets/248290/14767831/5180c384-0a30-11e6-9dc1-22a374c2ef65.png">

\cc @ericmj


#### [#4559] - (2016-04-26T19:50:53Z) - [Show version that caused diverging requirements](https://github.com/elixir-lang/elixir/pull/4559)



#### [#4558] - (2016-04-26T14:34:14Z) - [Fix documentation typo](https://github.com/elixir-lang/elixir/pull/4558)



#### [#4557] - (2016-04-26T14:32:01Z) - [String.split/3: part opt should be pos_integer](https://github.com/elixir-lang/elixir/pull/4557)



#### [#4535] - (2016-04-25T18:02:19Z) - [Introduce String.pad_{leading,trailing}/3 and String.trim{,_leading,_trailing}/2](https://github.com/elixir-lang/elixir/pull/4535)

Closes #4433.


#### [#4507] - (2016-04-24T22:55:49Z) - [Formmating: Add white space around vertical bar](https://github.com/elixir-lang/elixir/pull/4507)

It adds a white space around the vertical bar, improving readability of the code.
Carefully edited, and thoroughly reviewed three times.

While the amount of lines edited is significant, I think it's a great improvement in the clarity of the code.


#### [#4551] - (2016-04-24T07:55:13Z) - [Change documentation for some Calendar fields.](https://github.com/elixir-lang/elixir/pull/4551)

The [IANA tz database](https://www.iana.org/time-zones) is the source of the time zone IDs.

Also adds a few examples and changes "timezone" to "time zone", which adds consistency since the field name is `time_zone` and not `timezone`.


#### [#4550] - (2016-04-24T07:54:14Z) - [Return explicit error if escript main_module target is undefined](https://github.com/elixir-lang/elixir/pull/4550)

Minor improvement / polish. Not sure this is worth merging in, yet submitting it in case!

I could go down the road and check that `main` is implemented on the target module too, yet I wanted to get my feet wet first.


#### [#4549] - (2016-04-23T20:31:16Z) - [changed 'bitstream' to 'binary' to make doc match function](https://github.com/elixir-lang/elixir/pull/4549)



#### [#4547] - (2016-04-22T18:59:33Z) - [Use consistent spacing in code snippet.](https://github.com/elixir-lang/elixir/pull/4547)

2 spaces instead of 1.


#### [#4542] - (2016-04-21T19:02:12Z) - [Eliminate spaces in bitstring definitions](https://github.com/elixir-lang/elixir/pull/4542)



#### [#4541] - (2016-04-21T11:23:50Z) - [Adjust a String code example](https://github.com/elixir-lang/elixir/pull/4541)

This once was `iex> << eacute :: utf8 >> = "√©"` but the variable name became out of sync.


#### [#4539] - (2016-04-21T00:37:45Z) - [Fix typo](https://github.com/elixir-lang/elixir/pull/4539)



#### [#4538] - (2016-04-20T19:32:50Z) - [Update Typespecs doc page to mention argument/element naming.](https://github.com/elixir-lang/elixir/pull/4538)

As far as I can tell, this is not documented anywhere.  Feel free to move or rewrite this as you see fit.


#### [#4536] - (2016-04-20T13:14:05Z) - [Fix broken link in README](https://github.com/elixir-lang/elixir/pull/4536)



#### [#4534] - (2016-04-20T07:37:52Z) - [Add ~w doctest to highlight the behaviour of white space inside interpolation](https://github.com/elixir-lang/elixir/pull/4534)

Continuing the idea of #4532, I've added a doctest so we have at least one example of this behaviour in the docs.


#### [#4491] - (2016-04-18T23:23:50Z) - [Formatting: add white space after comma](https://github.com/elixir-lang/elixir/pull/4491)

Standardizes the use of comma leaving a white space after it whenever applicable.

Note #1: In the changed lines it also adds a white space surrounding the `|` when there is  more than one element to the left.
  Example: before was `[a,b|tail]` now it is: `[a, b | tail]`.

.Note #2: It does not enforce this in quantifiers in regular expressions such as in: `x{1,3}`


#### [#4532] - (2016-04-18T19:05:13Z) - [Add more tests for sigil `~w` interpolation behaviour](https://github.com/elixir-lang/elixir/pull/4532)

As discussed here: 
https://groups.google.com/forum/#!topic/elixir-lang-core/89yO3X-oGsM


#### [#4531] - (2016-04-18T15:08:08Z) - [Add a note about `uniq/1` to `dedup/1`](https://github.com/elixir-lang/elixir/pull/4531)

This may help others when they're looking for a way to dedup the entire list.


#### [#4523] - (2016-04-18T09:10:59Z) - [Support for Erlangs #rec{_ = '_' } and for record_info/2](https://github.com/elixir-lang/elixir/pull/4523)

Simple console test:

```
require Record
defmodule Records do Record.defrecord :rec, [k1: 5, k2: 10, k3: "ababa"] end

require Records
Records.rec()
Records.rec(_: :_)
Records.rec(_: :_, k2: 7)
```

If Dict is deprecated an option is to use :proplists.get_value/3

TODO: 
Add similar behavior on update. 
Add record_info/2.


#### [#4526] - (2016-04-17T08:09:06Z) - [Fix Macro.to_string keyword blocks in normal function calls](https://github.com/elixir-lang/elixir/pull/4526)

This should fix the `Macro.to_string` behavior seen in #4524.


#### [#4525] - (2016-04-17T08:05:41Z) - [fix(IEx.pry/1): remove unreachable code](https://github.com/elixir-lang/elixir/pull/4525)

It seems like the "IEx cannot pry the shell itself" limitation was
removed 3 years ago in 0b624ff but this code wasn't removed.

Found this thanks to Dialyzer and https://github.com/fishcakez/dialyze.

The error printed by Dialyzer was:

> lib/iex.ex:443: The pattern {'error', 'self'} can never match the type 'ok' | {'error','no_iex' | 'refused'}


#### [#4520] - (2016-04-14T22:02:36Z) - [Fixes typo in test. "shorcut" => "shortcut".](https://github.com/elixir-lang/elixir/pull/4520)



#### [#4515] - (2016-04-14T09:17:08Z) - [Check the file is an actual escript before writing to disk #4330](https://github.com/elixir-lang/elixir/pull/4515)

Refers to #4330

But i don't figure how to test this behavioural


#### [#4516] - (2016-04-13T20:03:15Z) - [Updated documentation for delete/2 of MapSet](https://github.com/elixir-lang/elixir/pull/4516)

The second argument of `delete/2` function of `MapSet` should be `value` instead of `term`. This doesn't affect the compiled code, but it makes the documentation for the `delete/2` function a bit confusing.


#### [#4505] - (2016-04-13T19:00:33Z) - [Enhance difference highlighting for tuples](https://github.com/elixir-lang/elixir/pull/4505)

Make it recursive and element-aware, it also should be faster than difference for their inspected representation (especially when difference is big).


#### [#4513] - (2016-04-13T13:00:59Z) - [Added more tests in GenServer.call/3](https://github.com/elixir-lang/elixir/pull/4513)

Hey, fellows!

I am trying to add more tests.

But for now I get stuck with killing GenServer to test call/3 for killed process.
When I am calling `GenServer.stop(:stack, :kill)` it raises misleading message:

```
15:41:27.897 [error] GenServer :stack terminating
** (stop) :kill
Last message: []
State: [:hello]
```

End even `assert catch_exit` or `assert catch_error` can't stop it.

Any ideas to tackle this one?


#### [#4512] - (2016-04-12T18:34:03Z) - [Raise error message if you try to GenServer.call/3 yourself globally](https://github.com/elixir-lang/elixir/pull/4512)

Now the error message is also raised when you call a global name registered to yourself.


#### [#4514] - (2016-04-12T13:39:24Z) - [docs(Enum.partition/2): fix "enumerables" -> "lists"](https://github.com/elixir-lang/elixir/pull/4514)



#### [#4508] - (2016-04-11T22:02:12Z) - [Raise nice error message if you try to GenServer.call/3 from yourself](https://github.com/elixir-lang/elixir/pull/4508)

Refers to solve #4479

Any better ideas on error message contents?


#### [#4504] - (2016-04-11T10:27:11Z) - [Allow generated variables in map keys. Fix #4428](https://github.com/elixir-lang/elixir/pull/4504)

Hi,

This is another try to fix #4428.
I used @josevalim instructions from #4468, and changed scope `extra` to `nil` before
translating `with`, `try`, `catch`, `rescue`, `case` and `for`.
Please let me know if I forgot something.

Also, I am not sure if we should allow

``` elixir
%{(a = 1) => 1}
```

so I left it as is. It seems a bit creepy and the scope is kind of ambiguous
but I am not sure it should raise a `CompilerError` either. What do you think?


#### [#4503] - (2016-04-10T14:36:56Z) - [Enhance difference highlighting for lists](https://github.com/elixir-lang/elixir/pull/4503)

Make it recursive and element-aware, it also should be faster than difference for their `inspect`ed representation (especially when difference is big).


#### [#4501] - (2016-04-09T09:53:08Z) - [Fix typos in GenServer docs](https://github.com/elixir-lang/elixir/pull/4501)

- Add missing 'in' to `handle_call`
- Remove extra `reply` from tuple in `handle_cast`


#### [#4494] - (2016-04-08T07:55:15Z) - [Few improvements to EEx docs](https://github.com/elixir-lang/elixir/pull/4494)



#### [#4495] - (2016-04-08T07:53:49Z) - [Improve docs for Mix.Compilers.{Erlang, Elixir}](https://github.com/elixir-lang/elixir/pull/4495)



#### [#4489] - (2016-04-07T07:05:10Z) - [Enum.sum/2: Simplified formula for ranges](https://github.com/elixir-lang/elixir/pull/4489)

Improvement to https://github.com/elixir-lang/elixir/pull/4484

As suggested by @princemaple
in https://github.com/elixir-lang/elixir/pull/4414#issuecomment-206592281


#### [#4486] - (2016-04-06T22:29:35Z) - [Enhance difference highlighting for numbers](https://github.com/elixir-lang/elixir/pull/4486)

<img width="376" alt="screen shot 2016-04-06 at 23 06 48" src="https://cloud.githubusercontent.com/assets/248290/14332945/5d46a3a6-fc4c-11e5-9ac7-4ce827c6e044.png">

<img width="381" alt="screen shot 2016-04-06 at 23 06 54" src="https://cloud.githubusercontent.com/assets/248290/14332955/625ebb9e-fc4c-11e5-8407-3eeb24d828ea.png">


#### [#4488] - (2016-04-06T22:11:38Z) - [Fix typo](https://github.com/elixir-lang/elixir/pull/4488)



#### [#4484] - (2016-04-06T22:02:14Z) - [Fix and improve Enum.sum/1 for ranges](https://github.com/elixir-lang/elixir/pull/4484)

Lastest changes introduced in Enum.sum in #4414 changed the type of the return value
(from integer to float) when argument was a range. This commit fixes this.

Adds a spec when dealing with Range.t

It simplifies the function by making it more recursive,
and also deals with ranges where first and last are equal

Tests added

/cc @Qqwy 


#### [#4482] - (2016-04-06T14:37:28Z) - [Add a user friendly error for merge conflicts on mix.lock.](https://github.com/elixir-lang/elixir/pull/4482)

As [proposed in the ML](https://groups.google.com/forum/#!topic/elixir-lang-core/ORl4QArbaxI), I added a user friendly message when `mix.lock` contains conflicts.


#### [#4478] - (2016-04-05T21:42:40Z) - [Polish here and there in the System module](https://github.com/elixir-lang/elixir/pull/4478)

@josevalim as discussed earlier today. I also changed the name of `System.convert_time_unit/1` to `System.normalize_time_unit/1` so that it's more in line with the docs and doesn't create confusion with `convert_time_unit/3`. Let me know what you think :)

btw I also fixed handling of positive integers in `normalize_time_unit/3` as pointed out by @fishcakez :)


#### [#4477] - (2016-04-05T17:44:50Z) - [Expanded docs for System.cmd](https://github.com/elixir-lang/elixir/pull/4477)

Adds some more information about arguments provided to System.cmd (mostly being explicit that these are not going through the shell).


#### [#4430] - (2016-04-05T12:58:57Z) - [Add difference highlighting to ExUnit](https://github.com/elixir-lang/elixir/pull/4430)

- [x] introduce difference function, implements [O(ND) difference algorithm (Myers' algorithm)](http://www.xmailserver.org/diff2.pdf)
- [x] make ExUnit to highlight difference for assertion parts


#### [#4475] - (2016-04-05T06:27:49Z) - [More helpful deprecation warning for piping into unary operator.](https://github.com/elixir-lang/elixir/pull/4475)

I saw this warning when compiling some code and was not sure what to do about it. This message suggests a solution.


#### [#4455] - (2016-04-04T22:42:48Z) - [Add System.os_time/0,1 and update time-related docs in System](https://github.com/elixir-lang/elixir/pull/4455)

Implementation of #4454. 

I did the rest of the `System.*time` a while back so I figured I would implement these as well :smile:.

@josevalim I didn't touch the docs on time; what do you think should be improved? We already link to http://erlang.org/doc/apps/erts/time_correction.html (in all the `System.*time` functions), which as a lot of info around this stuff.


#### [#4438] - (2016-04-04T19:35:12Z) - [Handle chars literals in the parser for better syntax errors](https://github.com/elixir-lang/elixir/pull/4438)

This PR hopes to solve #4419.

Before this PR, we handled char literals (like `?a`) in the tokenizer, turning a literal like `?a` into the token `{:number, _, 97}` (thus indistinguishable from the literal `97` at the parsing stage). This led to error messages with the integer for the character instead of the character literal, e.g.:

``` elixir
iex> :ok ?a
** (SyntaxError) iex:11: syntax error before: 97
```

With this PR, we now turn `?a` into the token `{:char, _, 97}` (which is the same token used by Erlang for Erlang char literals like `$a`); since it's the same token as in Erlang, the parser will now output the char literal as an Erlang char (`?a` would be printed as `$a`). We hijack the error message in `elixir_errors.erl` to end up with the correct message:

``` elixir
iex> :ok ?a
** (SyntaxError) iex:11: syntax error before: ?a
```

@josevalim and I briefly discussed this on IRC and another possible solution came up: tokenize `?a` chars as `{'?', _, [$?, $a]}` tokens so that they'd be printed as `"?a"` in error messages and extracting the char integer in the parser would be a matter of getting the second element of the list. However, this doesn't play too nice with escaped chars (e.g., `?\s` would be printed as `"? "`) and also adds double quotes around the literal in parser error messages (which I personally don't like).

Let me know what you think and if this took the right direction after all :).


#### [#4472] - (2016-04-04T15:07:35Z) - [Add test coverage to String.Chars implementations](https://github.com/elixir-lang/elixir/pull/4472)



#### [#4470] - (2016-04-03T14:09:52Z) - [Add test coverage to EEx](https://github.com/elixir-lang/elixir/pull/4470)



#### [#4469] - (2016-04-03T07:24:53Z) - [Allow OptionParser to parse negative numbers](https://github.com/elixir-lang/elixir/pull/4469)

This pull request changes the way OptionParser handles negative numbers, so that it can parse them as arguments or option values:

```
iex(1)> OptionParser.parse(["-43"])
old version: {[], [], [{"-43", nil}]}
new version: {[], ["-43"], []}
```

and

```
iex(2)> OptionParser.parse(["-f", "-43"], strict: [flag: :integer], aliases: [f: :flag])
old version: {[], [], [{"-f", nil}, {"-43", nil}]}
new version: {[flag: -43], [], []}
```

The new version assumes that any input consisting of a dash followed by a string completely parseable as a float (i.e., no remainder at the end) is a negative number, not an option flag.


#### [#4464] - (2016-04-01T00:35:39Z) - [Add test coverage to for and capture](https://github.com/elixir-lang/elixir/pull/4464)



#### [#4460] - (2016-03-31T19:57:20Z) - [Hint function may be private if not available](https://github.com/elixir-lang/elixir/pull/4460)

Closes https://github.com/elixir-lang/elixir/issues/4405


#### [#4459] - (2016-03-31T15:46:07Z) - [Removed unused variable](https://github.com/elixir-lang/elixir/pull/4459)



#### [#4458] - (2016-03-31T12:08:40Z) - [Allows ArithmeticError, Enum.OutOfBoundsError and Enum.EmptyError to be raised with a custom message.](https://github.com/elixir-lang/elixir/pull/4458)

Before, this would not work: `raise ArithmeticError, "I don't like it when you do complicated math"`

This Pull-Request changes that. ArithmeticError, Enum.OutOfBoundsError and Enum.EmptyError can now be raised with a custom message, if desired.
Tests to check if this behaviour is indeed allowed has also been added.

Also see [this topic on the elixir-lang-talk mailing list](https://groups.google.com/forum/#!topic/elixir-lang-talk/KuoqZyNIql4)


#### [#4457] - (2016-03-31T09:46:07Z) - [Show the full call when calling a function inside a match](https://github.com/elixir-lang/elixir/pull/4457)

Right now, when we call a local function inside a match the error message only shows the function name and its arity (`foo/1`). With this commit, we show the full call (`foo(:bar)`) so that it should be easier to locate the error.

This was discussed in #4411. I'm not sure if we should make this change (and show the whole call) for remote functions (and/or for function calls inside guards). Wdyt?


#### [#4456] - (2016-03-31T06:10:51Z) - [Add test coverage and examples to Enum module](https://github.com/elixir-lang/elixir/pull/4456)



#### [#4448] - (2016-03-30T20:47:01Z) - [Improve merge exception texts inside exunit callbacks](https://github.com/elixir-lang/elixir/pull/4448)

Considering this case:

``` elixir
defmodule CallbacksCase do
  use ExUnit.Case

  setup do
    {:ok, :something}
  end

  test "nothing", do: assert true
end
```

Before this commit exunit callbacks return value merger was failing with

`(RuntimeError) expected ExUnit callback in CallbacksCase to return :ok or
{:ok, keyword | map}, got :something instead`.

But callback didn't return `:something`, it returned `{:ok, something}`.

After this commit same case will fail with

`(RuntimeError) expected ExUnit callback in CallbacksCase to return :ok or
{:ok, keywords | map}, got {:ok, :something} instead`.

This behaviour is achieved by moving all the checks to `__merge__/3` function.
`context_merge/3` now only works with maps and raises 'reserved keys' errors.


#### [#4453] - (2016-03-30T16:56:31Z) - [purge erlang modules on recompilation](https://github.com/elixir-lang/elixir/pull/4453)

The issue is described [here](https://groups.google.com/forum/#!topic/elixir-lang-talk/2qvsQ9A2-6g)

tl;dr of it is that a situation can happen that a mix task works with an older version of the module written in Erlang. This can occur if some previous task, (e.g. Phoenix compiler) loaded the module before the Erlang compiler recompiled the code. The agreed solution is to make the Erlang compiler purge the module if it is about to be compiled.


#### [#4452] - (2016-03-30T14:43:00Z) - [Fix Regex overloaded Dialyzer warnings](https://github.com/elixir-lang/elixir/pull/4452)



#### [#4450] - (2016-03-30T11:53:42Z) - [Handle non-called anonymous functions in Macro.pipe/3](https://github.com/elixir-lang/elixir/pull/4450)

This PR should solve #4435. Right now, this nasty error pops out:

``` elixir
iex> :foo |> (fn x -> x end)
** (CompileError) iex:1: expected -> clauses in fn
```

This happens because of what we do in `Macro.pipe/3`, which is: we take the AST of a function call as the second argument and insert the first argument in the list of arguments for the function call, at the position specified by the third argument. The AST for a `fn` looks exactly like the AST of a function call (to the `:fn` function):

``` elixir
iex> quote do: fn :ok -> :ok; :err -> :err end
{:fn, [], [{:->, [], [[:ok], :ok]}, {:->, [], [[:error], :error]}]}
```

It's easy to see that the "arguments" to `:fn` are the `->` clauses in the function. This means that doing `:foo |> (fn x -> x end)` basically adds another clause to the function:

``` elixir
iex> Macro.pipe(:foo, quote(do: fn :ok -> :ok; :err -> :err end), 0)
{:fn, [], [:foo, {:->, [], [[:ok], :ok]}, {:->, [], [[:err], :err]}]}
```

and this makes `:elixir_fn.expand/3` blow up because it doesn't know how to handle the `:foo` clause (because it's not a clause!).

With this PR, we blow up early in `Macro.pipe/3` when we see a `{:fn, _, _}` call:

``` elixir
iex> :foo |> (fn x -> x end)
** (ArgumentError) cannot pipe :foo into an anonymous function
without calling the function; use :foo |> (fn x -> x end).()
```

Let me know how it looks and if I can do anything else; I'm not 100% sure about the error message (e.g., should we print the `Macro.to_string/1` of the output?), so any input is welcome :smiley:.


#### [#4449] - (2016-03-30T07:48:59Z) - [Allow to pass :infinity to Logger.Utils.truncate.](https://github.com/elixir-lang/elixir/pull/4449)

I added the possibility to pass `:infinity` to `Logger.Utils.truncate` to disable truncating logs.

My use case is the following:
- I execute an external command (with a pretty long input)
- When it fails, I log the output into a file to know what happened

The error is normally at the end of the log, which makes it useless when truncated.
I can pass a very large value to `truncate` for this logger, but I thought that being
able to simply disable truncating would be a nicer way to do it.

As the change is quite minimal, I opened a PR directly, but let me know if you would rather
want me to post to the ML.


#### [#4434] - (2016-03-29T22:59:14Z) - [Suppress unused var warnings when removing Logger macros from the AST](https://github.com/elixir-lang/elixir/pull/4434)

Right now, code like this:

``` elixir
defmodule MyMod do
  require Logger
  def my_fun(arg) do
    Logger.debug(arg)
    :ok
  end
end
```

will generate an unused variable warning for the `arg` variable in `my_fun/1` if the log level is higher than `:debug`, as discussed in #4417.This happens because in such cases, we completely remove the AST of the Logger call, so the `arg` variable is effectively never used. This may seem magical to the user.

With this PR, a `Logger` call which would have been removed from the AST before now generates a series of `_ = x` expressions, one for each variable passed to the `Logger` macro.

This will still not take care of private functions and unused imports (which will still warn if used in a `Logger` macro), but it's a step forward :). Let me know how it looks and if I can do anything else :heart_decoration: 


#### [#4446] - (2016-03-29T22:05:22Z) - [Use parens consistently in some function calls in the IO module](https://github.com/elixir-lang/elixir/pull/4446)

Just tacked on some parens to make it consistent with the other defaults that use group_leader()


#### [#4447] - (2016-03-29T22:01:26Z) - [Whitespace revenge](https://github.com/elixir-lang/elixir/pull/4447)

This is one of those PRs. Only style changes. Not a single useful thing. The nightmare of every project maintainer! :fearful:  I:
- added a final newline character to all files that didn't end with one ([because reasons](http://stackoverflow.com/questions/729692/why-should-text-files-end-with-a-newline))
- removed all trailing whitespace (because YES)

I of course did this automagically with `find` + `sed`, but I went over each of the changes I made and the tests are all green, so I hope I didn't break anything :).

(btw, we could integrate these kinds of checks in Travis, if we suspect we'll never actually need trailing whitespace. It's very hard to spot it in PRs IMO)


#### [#4445] - (2016-03-29T19:28:52Z) - [Add coverage to URI module tests](https://github.com/elixir-lang/elixir/pull/4445)



#### [#4444] - (2016-03-29T18:16:48Z) - [Error out when passing :__aliases__ to Macro.pipe/3](https://github.com/elixir-lang/elixir/pull/4444)

Right now, this funny thing happens:

``` elixir
iex> Macro |> Env
Macro.Env
```

This happens because `|>/2` calls `Macro.pipe/3` under the hood, and `Macro.pipe/3` inserts the left-hand side at the beginning of the list of arguments in the AST for the function call on the right-hand
side. Aliases, however, look exactly like a call to the`__aliases__` function:

``` elixir
iex> quote do: Macro.Env
{:__aliases__, [alias: false], [:Macro, :Env]}
```

and that's why `Macro |> Env` becomes `Macro.Env`. With this commit, we explicitly take care of `:__aliases__` in a `Macro.pipe/3` call, so that we can error out in such cases:

``` elixir
iex> Macro |> Env
** (ArgumentError) cannot pipe Macro into Env, ...
```

Let me know what you think and most of all, if you can think of any other corner cases like this :)

Oh and btw, I assumed this was incorrect behaviour, but I may of course be wrong :smiley: 


#### [#4442] - (2016-03-29T15:54:26Z) - [Add more docs to Macro.unpipe/1](https://github.com/elixir-lang/elixir/pull/4442)

Note I removed the line that said

> Raises if the pipeline is ill-formed.

since as far as I can tell this function never raises (its actual spec is `unpipe(term) :: [{term, non_neg_integer}]` I think). Let me know how this looks!


#### [#4441] - (2016-03-28T19:27:00Z) - [Fix Mix and Keyword Dialyzer warnings](https://github.com/elixir-lang/elixir/pull/4441)

- lib/keyword.ex:74: Type specification 'Elixir.Keyword':new() -> t() is a supertype of the success typing: 'Elixir.Keyword':new() -> []
- lib/mix.ex:285: Function raise/2 only terminates with explicit exception


#### [#4440] - (2016-03-28T19:26:42Z) - [Add coverage/examples to Float](https://github.com/elixir-lang/elixir/pull/4440)



#### [#4437] - (2016-03-28T16:39:34Z) - [Add coverage to private function Version.to_matchable/2](https://github.com/elixir-lang/elixir/pull/4437)

‚Ä¶_pre?)


#### [#4439] - (2016-03-28T16:27:03Z) - [Polish the docs for functions in StringIO](https://github.com/elixir-lang/elixir/pull/4439)



#### [#4432] - (2016-03-27T07:50:04Z) - [Spelling & Resolve dialyzer warnings:  no local return and only terminates with explicit exception](https://github.com/elixir-lang/elixir/pull/4432)

- Function checkout/1 has no local return
- Function raise/1 only terminates with explicit exception
- lib/ex_unit/filters.ex:83: The specification for 'Elixir.ExUnit.Filters':eval/4 states that the function might also return {'error',atom()} but the inferred return is 'ok' | {'error',binary()}
- lib/range.ex:73: Overloaded contract for 'Elixir.Range':'range?'/1 has overlapping domains; such contracts are currently unsupported and are simply ignored
- lib/integer.ex:61: Type specification 'Elixir.Integer':digits(non_neg_integer(),pos_integer()) -> [non_neg_integer()] is a supertype of the success typing: 'Elixir.Integer':digits(non_neg_integer(),pos_integer()) -> [non_neg_integer(),...]


#### [#4431] - (2016-03-26T08:32:23Z) - [Resolve Dialyze Warning: Function only terminates with ‚Ä¶](https://github.com/elixir-lang/elixir/pull/4431)

Resolves a Dialyze Warning: Function only terminates with explicit exception


#### [#4422] - (2016-03-24T08:53:30Z) - [Make @doc, @doc(value) and get_attribute/2, put_attribute/3 consistent](https://github.com/elixir-lang/elixir/pull/4422)

At (@) syntax works with doc value, Module functions with actual representation.

Closes #4418.


#### [#4426] - (2016-03-24T08:44:06Z) - [Add `Version.parse!/1`](https://github.com/elixir-lang/elixir/pull/4426)

I was recently working with versions a bit, and `Version.parse!` would be really handy in iex and tests. For now, I'm manually pattern matching in iex, and have a `version!` helper function in tests.


#### [#4415] - (2016-03-23T10:51:59Z) - [MapSet Optimizations](https://github.com/elixir-lang/elixir/pull/4415)

# Overview

Hey folks!

Based upon discoveries made during my little foray into map performance characteristics a few weeks ago I thought I'd give `MapSet` a work over. I was also very curious about the circumstances under which `MapSet` out performs `:lists.subtract` 

Warning: Be careful when benchmarking `--` or `:lists.subtract`. The compiler (I think it's the compiler) does some crazy optimizations when operating on list literals. Always create a module / function like `MyList.subtract/2` and call that instead, otherwise the result will be pre-computed at compile time.
## General Changes

Many of the current functions use `:maps.fold`. Under the covers `:maps.fold` calls `:maps.to_list` first, and then `:lists.foldl`. In many cases `:maps.fold` uses `Map.put` to accumulate desired results in a new map.

This gives us three general opportunities for improvement.
- By far the largest improvement comes from first accumulating `{key, value}` pairs into a list, and then using `:maps.from_list` instead of consecutive calls to `Map.put/2`. This is not only faster, but (from what I've been told) produces less garbage for the GC. If anyone knows of a good way to quantify the amount of garbage produced I'd love to hear it.
- `:maps.to_list` can be improved upon by simply using `Map.keys`. Not only does `Map.keys` happen to be faster, it also improves code clarity because we only care about the keys anyway.
- `:lists.fold` can be improved upon by manually recursing through lists produced by `Map.keys` and calling other functions as needed. While this does make the code more verbose, it tends to get us about a 20% improvement.
# Functions

Benchmarking notes: Y axis is in micro seconds.
## `MapSet.difference/2`

Benchmark: https://github.com/benwilson512/elixir-profiling/blob/master/bench/mapset_difference_bench.exs

![image](https://cloud.githubusercontent.com/assets/247817/13906370/02cb018c-eeab-11e5-868b-5d53e6ad85d0.png)

`MapSet.difference(set1, set2)` is the only function that had any algorithmic changes. The current approach iterates through `set2` and deletes each item found from `set1`.

I realized that when `set2` is larger than `set1` this no longer makes any sense. Instead it is faster to iterate through each item in `set1` and only accumulate those items which do not also exist in `set2`.

After testing, I determined that it becomes faster to iterate through `set1` when `set2` is at least half the size of `set1`.
## `MapSet.intersection/2`

Benchmark: https://github.com/benwilson512/elixir-profiling/blob/master/bench/mapset_intersection_bench.exs

![image](https://cloud.githubusercontent.com/assets/247817/13909997/ddff8ffc-eef1-11e5-8775-c12a87795d47.png)

Accumulate in a list, manual recursion, Map.keys. These small changes produce a surprisngly substantial improvement.
## `MapSet.disjoint/2`

Benchmark: https://github.com/benwilson512/elixir-profiling/blob/master/bench/mapset_disjoint_bench.exs

![image](https://cloud.githubusercontent.com/assets/247817/13906418/ea27de2e-eeab-11e5-810a-040b345deb19.png)

The previous version iterated through the smallest set and would `throw` in the event that a given key was also found in the other set.

This version uses `Map.keys` and manual recursion to achieve functional flow control and superior performance.
## `MapSet.new`

Benchmark: https://github.com/benwilson512/elixir-profiling/blob/master/bench/mapset_new_bench.exs

![image](https://cloud.githubusercontent.com/assets/247817/13910215/de04a854-eef4-11e5-883e-28d33889bb6b.png)
![image](https://cloud.githubusercontent.com/assets/247817/13910222/057c4f5e-eef5-11e5-8bea-01b5b356724e.png)

Manual recursion, list accumulation.

While I was at it, I took a similar approach with `Map.new/1,2`.
## `MapSet.disjoint?`

![image](https://cloud.githubusercontent.com/assets/247817/13910047/76e2b578-eef2-11e5-94d9-10f332a038a7.png)
# Comparison to `--`

I'm still working on this, I figured I should get some feedback on my changes here before going further on this because any major changes we make have the potential to change my analysis here.


#### [#4397] - (2016-03-22T10:30:53Z) - [Fix edge case when piping in unary operators.](https://github.com/elixir-lang/elixir/pull/4397)

The following question has been asked in Slack.

> pdilyard [12:08 PM] 
> why does this work:
> 
> ```
> iex> 2 |> + 2
> 4
> ```
> 
> but this doesn‚Äôt?
> 
> ```
> iex> 2 |> * 2
> ** (SyntaxError) iex:2: syntax error before: '*'
> ```

https://elixir-lang.slack.com/archives/general/p1458184122001480

I believe this is an edge case with operators that work as both unary and binary,
but it should fail.
I therefore modified `Macro.pipe` to fail when the operator is unary.


#### [#4414] - (2016-03-21T16:39:22Z) - [Added faster implementation of Enum.sum that works on Ranges. ](https://github.com/elixir-lang/elixir/pull/4414)

As described in the [mailing list topic](https://groups.google.com/forum/#!topic/elixir-lang-core/iIDFkQUiXIs), I've wanted to create a faster implementation of _Enum.sum_ that is used for Ranges instead. This implementation runs in **O(1)** instead of **O(n)**, which is why I think it was worth the change.

As this is my first contribution to the Elixir project, I fully expect that I might have missed some important part of the guidelines. In that case, please tell me and I will happily improve my coding efforts.


#### [#4416] - (2016-03-20T21:35:10Z) - [Remove reference to old `Inspect.Opts.new`](https://github.com/elixir-lang/elixir/pull/4416)

The previous code was erroring out:

``` elixir
iex(1)> Inspect.MapSet.inspect(MapSet.new, Inspect.Opts.new)
** (UndefinedFunctionError) undefined function Inspect.Opts.new/0
    (elixir) Inspect.Opts.new()
```

Now it works:

``` elixir
iex(1)> Inspect.MapSet.inspect(MapSet.new, %Inspect.Opts{})
{:doc_cons, "#MapSet<", {:doc_cons, "[]", ">"}}
```


#### [#4413] - (2016-03-20T12:45:24Z) - [Fix error text in rebar eval_script](https://github.com/elixir-lang/elixir/pull/4413)



#### [#4409] - (2016-03-19T10:04:42Z) - [Allow dots in the metadata info in Version.parse/1](https://github.com/elixir-lang/elixir/pull/4409)

Should close #4407.

According to the SEMVER spec (http://semver.org/#spec-item-10):

> Build metadata MAY be denoted by appending a plus sign and a series
> of dot separated identifiers [...].

The dot was not previously allowed, with this commit it is.


#### [#4408] - (2016-03-19T08:19:23Z) - [Fix doc string for h() fn in iex](https://github.com/elixir-lang/elixir/pull/4408)

Replaced "em dash" symbol with ordinary "-", because "em dash" symbol is represented as "—Ç–ê–§" in Windows terminal. That should also be better for overall consistency.


#### [#4403] - (2016-03-18T22:42:01Z) - [Minor URIConfig refactor](https://github.com/elixir-lang/elixir/pull/4403)

The URIs variable was only used in the list comprehension to construct URIConfig. This change does it all in one go.


#### [#4401] - (2016-03-18T08:00:17Z) - [Add the keyword/0 and keyword/1 built-in types](https://github.com/elixir-lang/elixir/pull/4401)

I find the `keyword/0` and `keyword/1` types discussed in #3679 pretty convenient, so I took a shot at a PR that implements them. Not sure this is the correct way to solve that though, so any feedback is more than welcome :smiley_cat: 


#### [#4400] - (2016-03-17T19:52:09Z) - [Add notes about the complexity of ++ and --](https://github.com/elixir-lang/elixir/pull/4400)

I feel like it's relatively common to see newer elixir users do

```
list ++ [item]
```

inside of a loop, and feel like we should mention the potential pitfalls and alternatives.

The erlang docs have a similarly worded warning for `--`, and it deserves inclusion in our stdlib as well.


#### [#4399] - (2016-03-17T13:04:03Z) - [Make Application.app_dir/2 accept a list as path argument.](https://github.com/elixir-lang/elixir/pull/4399)

As Path.join is able to accept a list as argument, it seems logical that Application.app_dir should be able to do so as well.


#### [#4398] - (2016-03-17T12:03:01Z) - [documenting functions with multiple clauses.](https://github.com/elixir-lang/elixir/pull/4398)

#### Description

Minor addition to the writing-documentation.md file to explain best practice for documenting functions with multiple clauses.
#### Motivation

I often found myself in a dilemma on how to document multiple clauses. See [gist](https://gist.github.com/stephenmoloney/16efb1e7168fdbeb74f9) as an example.
#### Solution

Add to elixir docs best practice guideline.
## Important !!

Please check that this change to the docs actually reflects best practice before merging and that this change is not misleading! 

Thanks ! :+1: 


#### [#4395] - (2016-03-17T12:02:12Z) - [Add --logger-otp and --logger-sasl to the command-line args](https://github.com/elixir-lang/elixir/pull/4395)

This PR should address #4355.

I added the following command-line arguments to the `elixir` binary:
- `--logger-otp true|false` - to configure the `:handle_otp_reports`
  of the `:logger` application
- `--logger-sasl true|false` - to configure the `:handle_sasl_reports`
  of the `:logger` application

Not sure this is the best way, consider this as an attempt :). Let me know if I can do anything else!


#### [#4394] - (2016-03-16T11:38:17Z) - [Add Mix.Task.rerun/1,2](https://github.com/elixir-lang/elixir/pull/4394)

This function re-enables the given task and then runs it. Should close #4393.


#### [#4392] - (2016-03-16T08:13:54Z) - [Make arguments and docs more clear for assert_receive, assert_recevied, refute_receive, and refute_received](https://github.com/elixir-lang/elixir/pull/4392)

I'm submitting this PR because the docs/arguments for the ExUnit received assertions really confused me.

The docs for refute_receive/3 said:

>   Asserts `message` was not received (and won't be received) within the the `timeout` period.

Yes the method signature said:

``` elixir
refute_receive(not_expected, timeout \\ Application.fetch_env!(:ex_unit, :refute_receive_timeout), message \\ nil)
```

I had to look through the source and examples to determine that message was actually the failure message and not the message we weren't expecting.


#### [#4389] - (2016-03-15T14:20:21Z) - [Update definition of Unicode Whitespace](https://github.com/elixir-lang/elixir/pull/4389)

We have been using BiDi character types to determine which unicode characters to consider as whitespace (looking at `B`, `S` and `WS`). By some reason the character set of BiDi whitespace is different than the set for the unicode `White_Space` property. This difference causes surprise in users since the docs for `String.strip/1` and `String.split/1` refer to "unicode whitespace" (the main concern expressed so far is the exclusion of the no-break space `0x0020` from the BiDi set, see #4300).

This PR swaps the use of BiDi character types by the use of the `White_Space` property by adding a subset of a new Unicode table (`PropList.txt`) and a parser for it. This makes the implementation better match the documentation.

Additionally, the no-break characters are excluded from `split` (since splitting on a no-break character seems contradictory) and its documentation is updated to document this.


#### [#4306] - (2016-03-15T13:28:07Z) - [Adds nl to IEx.Helpers](https://github.com/elixir-lang/elixir/pull/4306)

Erlang's `c` module is a jumbled sock-drawer of commonly used commands. Inside it is a powerful (but obscure) feature `c:nl(modulename)` that will deploy the object code for a locally compiled module to all connected nodes. This makes deploying code to a newly connected cluster simple, and allows easy redeployment of updated/recompiled code. The Erlang implementation of `c:nil` ([doc](http://erlang.org/doc/man/c.html#nl-1)) glues together `code:ensure_loaded` ([doc](http://erlang.org/doc/man/code.html#ensure_loaded-1)) and `rpc:eval_everywhere` ([doc](http://erlang.org/doc/man/rpc.html#eval_everywhere-4)). 

This pull request give the functionality of `nl` a better home: `Node.load_module`


#### [#4383] - (2016-03-15T12:29:38Z) - [Introduce calendar types](https://github.com/elixir-lang/elixir/pull/4383)

Hello everyone,

This pull request is a proposal for unifying Calendar types in the Elixir ecosystem. Today we have a mixture of different libraries, each defining their own types, which makes interoperability between them really complicated.

Currently, the defined structures do not have any function attached to them, but we expect some basic functionality like ISO8601 parsing and formatting as well as conversion to/from Erlang tuples to be added before Elixir v1.3 is released.

This pull request is not a replacement for the existing date/time libraries. We will still rely on the ecosystem for handling date formatting, date parsing, intervals, periods, time zones and so on. 

Huge thanks to @lau and @bitwalker for the discussion that lead to this proposal.
## FAQ

**Q: Will Elixir support multiple calendars?**

While the data structure supports pluggable calendar systems, it is likely Elixir will ship with only the `Calendar.ISO` implementation. However, the system will be designed so libraries can provide other calendars.

**Q: Will Elixir support time zones?**

Not in the short term. The time zone support will continue to be provided by libraries like timex and calendar.

**Q: Time zone or timezones?**

We have chosen to spell it as "time zone". This means time zone modules may be spelled as `TimeZone` and fields as `time_zone`.


#### [#4387] - (2016-03-14T10:03:45Z) - [IEx pid/1 helper to create pid from string](https://github.com/elixir-lang/elixir/pull/4387)



#### [#4385] - (2016-03-13T19:49:42Z) - [Added a few backticks around the names of errors that didn't have them](https://github.com/elixir-lang/elixir/pull/4385)



#### [#4384] - (2016-03-13T19:49:17Z) - [Clarify ExUnit async docs](https://github.com/elixir-lang/elixir/pull/4384)

I mentioned that tests within a test case are run serially even with async:true.  This confused me tremendously until I found the comment by @ericmj on this thread: https://github.com/elixir-lang/elixir/issues/3580


#### [#4382] - (2016-03-12T16:00:47Z) - [need colon to make gen_event atom](https://github.com/elixir-lang/elixir/pull/4382)

Should gen_event be atom ?


#### [#4375] - (2016-03-10T15:47:30Z) - [Use "key-value pairs" instead of "key-values"](https://github.com/elixir-lang/elixir/pull/4375)

As suggested in changes recently introduced in https://github.com/elixir-lang/elixir/pull/4362


#### [#4377] - (2016-03-10T08:35:43Z) - [String.split/1 docs - clarify treat multiple whitespace as single](https://github.com/elixir-lang/elixir/pull/4377)

Just clarifying that multiple sequential whitespace is treated as a single whitespace.  The existing docs say that leading/trailing whitespace is ignored, but IMHO that was ambiguous for whitespace in the middle of the string.


#### [#4376] - (2016-03-09T18:36:06Z) - [Replace `quote do:` one-liners with quote do...end](https://github.com/elixir-lang/elixir/pull/4376)

previous discussion: https://github.com/elixir-lang/elixir/pull/4372#issuecomment-193999174


#### [#4373] - (2016-03-09T16:44:01Z) - [Correct n-element terminology in tuples](https://github.com/elixir-lang/elixir/pull/4373)

- "n-item" terminology was replaced by "n-element"
- replaced "two-elements" with "two-element" when used as an adjetive
- replaced numbers with words (as in 1-element)


#### [#4374] - (2016-03-09T16:28:01Z) - [replace "of the form" with "in the form of"](https://github.com/elixir-lang/elixir/pull/4374)

based on discussion: https://github.com/elixir-lang/elixir/pull/4371#discussion-diff-55514919


#### [#4371] - (2016-03-09T15:01:15Z) - [Macro.validate/1: improve docs for return values, and add examples](https://github.com/elixir-lang/elixir/pull/4371)



#### [#4370] - (2016-03-08T20:42:50Z) - [return example for location: :keep option in quote/2](https://github.com/elixir-lang/elixir/pull/4370)



#### [#4369] - (2016-03-08T20:42:33Z) - [Correct tense in verbs](https://github.com/elixir-lang/elixir/pull/4369)



#### [#4367] - (2016-03-08T12:50:12Z) - [Add integer support for Macro.camelize/1 and Macro.underscore/1](https://github.com/elixir-lang/elixir/pull/4367)

The `camelize` behavior involving numbers doesn't match what is expected; i.e. `Macro.camelize "foo_bar_10"` becomes `"FooBar_10"` rather than `"FooBar10"`. This PR adds the expected behavior without modifying other behavior.


#### [#4364] - (2016-03-07T12:08:21Z) - [Clarify docs for Process.register/2 and Process.unregister/1](https://github.com/elixir-lang/elixir/pull/4364)

I add test cases to support the docs - I'm not sure if the Elixir team wants or cares about the tests, but they are there to prove the point


#### [#4363] - (2016-03-06T09:32:08Z) - [Added a note about dialyzer not using map pair type information](https://github.com/elixir-lang/elixir/pull/4363)

See a similar note in the [Erlang reference
manual](http://erlang.org/doc/reference_manual/typespec.html#id77939)
and [Bj√∂rn-Egil's answer on the erlang-questions mailing
list](http://erlang.org/pipermail/erlang-questions/2016-March/088139.html)


#### [#4362] - (2016-03-06T09:27:49Z) - [Many small improvements to Process docs](https://github.com/elixir-lang/elixir/pull/4362)



#### [#4361] - (2016-03-06T01:36:55Z) - [Minor correction to URI.encode_query/1's doc block](https://github.com/elixir-lang/elixir/pull/4361)

Currently, the doc block states that "keys and values are URL encoded as per `encode/2`" when they are actually encoded using `encode_www_form/1`.

I made this clarification and also added an example to demonstrate that the resulting params' spaces are replaced with `+` instead of `%20`, as would be the case with `encode/2`.


#### [#4360] - (2016-03-04T18:39:19Z) - [Improved docs for Process](https://github.com/elixir-lang/elixir/pull/4360)

-Added backticks appropriately in docs for Process.exit
-Mentioned default behaviour for Process.get


#### [#4359] - (2016-03-04T17:54:43Z) - [Spell behaviour consistently](https://github.com/elixir-lang/elixir/pull/4359)

We're spelling it "behaviour" everywhere else (even in the non-OTP context), let's just be consistent across the board


#### [#4358] - (2016-03-04T10:39:24Z) - [clarify Process.cancel_timer docs](https://github.com/elixir-lang/elixir/pull/4358)



#### [#4357] - (2016-03-04T10:38:49Z) - [explain why receive after :infinity is the same as lack of after ‚Ä¶](https://github.com/elixir-lang/elixir/pull/4357)

‚Ä¶clause


#### [#4354] - (2016-03-03T10:37:47Z) - [improve mix help test (--seed) description](https://github.com/elixir-lang/elixir/pull/4354)



#### [#4353] - (2016-03-02T22:08:27Z) - [Remove mention to dict in `ExUnit.Callbacks example`](https://github.com/elixir-lang/elixir/pull/4353)

Left-over from previous versions


#### [#4350] - (2016-03-02T18:52:13Z) - [Fix a possible binary leak in Integer.parse/1](https://github.com/elixir-lang/elixir/pull/4350)

Integer.parse/1 followed this pattern:

``` elixir
defp do_parse(<<char, rest :: binary>>, ...) do
  ...
  # instead of re-using the original binary, we do this
  {..., <<char, rest :: binary>>}
end
```

This causes a new binary to be created instead of `rest` just being a sub-binary. I tested this with a memory leak I was experiencing in Redix and this seems to fix it. I also did a slightly more scientific experiment with refc binaries:

``` elixir
input = "42" <> String.duplicate("a", 10_000)
:erlang.process_info(self(), :binary)
#=> {:binary, [{..., 10002, ...}, ...]}

{int, bin} = Integer.parse(input)
:erlang.process_info(self(), :binary)
#=> {:binary, [{..., 10002, ...}, {..., 10000, ...}, ...]}
```

Still, unrelated from the memory leak, I think the change in the PR is good style anyways :) What do you think?


#### [#4349] - (2016-03-02T08:05:28Z) - [clean up duplicated code in Task.Supervisor.async and Task.Supervisor.async_nolink](https://github.com/elixir-lang/elixir/pull/4349)



#### [#4348] - (2016-03-02T00:08:44Z) - [mention that Task.start/1 can isolate a Task without needing Supervisor](https://github.com/elixir-lang/elixir/pull/4348)



#### [#4346] - (2016-02-29T12:01:25Z) - [Remove some dead code in Mix.Dep](https://github.com/elixir-lang/elixir/pull/4346)

I am fairly sure the code I removed in this PR is dead code; it did something before 2c5c53834f7adb0cf9526003450981545ef61766, but it can't do anything right now (since data is immutable in Elixir :smiley_cat:). Tests confirm this as they all pass without the removed code, this helps my confidence here :).


#### [#4344] - (2016-02-29T07:05:02Z) - [Do not expect every year to be bissextile.](https://github.com/elixir-lang/elixir/pull/4344)

It is only once every four years, but still :smile: 


#### [#4340] - (2016-02-28T19:31:07Z) - [Track {module, function, arity} imports and warn on unused ones](https://github.com/elixir-lang/elixir/pull/4340)

Discussed briefly on: https://groups.google.com/forum/#!topic/elixir-lang-core/YFg07iq4l4Y but also spoken about some implementation details with @josevalim.

I'd appreciate feedback if this is going into the right direction, will be useful enough, and could be considered for merging after it's finished up.
## Example

Say, there's following file:

``` elixir
 # example.exs
 import String, only: [upcase: 1, downcase: 1]
 import Enum

 IO.puts upcase("Hello")
```

Before this patch:

```
# $ elixir example.exs
# HELLO
# warning.exs:2: warning: unused import Enum
```

After this patch:

```
# $ elixir example.exs
# HELLO
# example.exs:1: warning: unused import String.downcase/1
# example.exs:2: warning: unused import Enum
```


#### [#4335] - (2016-02-28T18:32:50Z) - [Update iex autocomplete to show new functions in reloaded modules.](https://github.com/elixir-lang/elixir/pull/4335)

When I am trying things out in IEx, I use the `r` helper
very often, but when defining new functions, the completions are
not available, so I thought it would be better if they would.

``` elixir
# my_mod.ex
defmodule MyMod do
  def foo, do: "foo"
end

# iex
MyMod. # tab shows foo
# edit MyMod and define bar
r(MyMod)
MyMod. # tab still shows only foo
```

With this PR, the functions newly defined are shown when the module is reloaded.

However, I am not really sure this is the best approach, as
the functions removed when reloading will still be shown.
As it is already the case, it is not a regression, but it would
be better if there were a way to have really up to date completions.

So I have a few questions
1. Does what I am trying to do in this PR seems ok?
2. Is there a better way to update the completions to handle reloaded modules?
3. Would there be a way to get rid of the warning caused by `Coad.load_file` redefining the `Sample` module in the test?

Thank you!


#### [#4341] - (2016-02-28T16:53:12Z) - [Do not escape new line when interpolation is disabled. Fix #4209.](https://github.com/elixir-lang/elixir/pull/4341)

As discussed in #4209, the behavior of `~S` (and `~R`) is currently inconsistent.

``` elxir
~S"foo\bar" # => "foo\\bar"
~S"foo\
bar" # => "foobar"
```

This fixes the behavior to avoid escaping newlines where it should not, so that the above becomes:

``` elxir
~S"foo\bar" # => "foo\\bar"
~S"foo\
bar" # => "foo\\\nbar"
```


#### [#4336] - (2016-02-28T11:10:49Z) - [add escape for closing brackets](https://github.com/elixir-lang/elixir/pull/4336)

Hi,

I came across the #4220 while messing with Regex stuff in a custom inflector and decided to go ahead a fix because I was enjoying elixir so much.

Anyway after looking and testing, it seems to be a matter of the closing brackets not being in the compiled escape pattern.

If you'd like me to change anything or write more tests, I'd be happy to do so.


#### [#4339] - (2016-02-27T08:50:00Z) - [Update reference to Kernel.Typespec](https://github.com/elixir-lang/elixir/pull/4339)

Looks like the moduledoc flag was disabled in Kernel.Typespec Module [1]
and a page was created instead

[1] f1d4d5b034bd47d6488b808766f25a3f6fd82683


#### [#4338] - (2016-02-27T08:11:14Z) - [Fix typo in elixir.erl](https://github.com/elixir-lang/elixir/pull/4338)



#### [#4337] - (2016-02-26T22:52:13Z) - [Fixed typos in Kernel.SpecialForms docs](https://github.com/elixir-lang/elixir/pull/4337)



#### [#4334] - (2016-02-26T14:43:23Z) - [Update the docs for "for" and "with" to showcase guards](https://github.com/elixir-lang/elixir/pull/4334)

I used existing examples so that we don't add too much complexity and unnecessary volume to the documentation.

I think we can polish the docs for `with` a little bit further, but I'd rather do it in another PR :).


#### [#4333] - (2016-02-26T10:15:36Z) - [Mention protocol deriving in `defprotocol/2` docs](https://github.com/elixir-lang/elixir/pull/4333)

I just added a couple lines that mention protocol derivation and redirect to the documentation for `defstruct/1` for more information.


#### [#4331] - (2016-02-25T17:37:42Z) - [Fixing typos in GenEvent docs](https://github.com/elixir-lang/elixir/pull/4331)



#### [#4326] - (2016-02-25T16:47:12Z) - [Add :allow_pre option to Version.match?](https://github.com/elixir-lang/elixir/pull/4326)

When `allow_pre: false` is set the `~>` operator will not match a pre-release version unless the operand is a pre-release version. The default is to allow always allow pre-releases but note that in Hex `:allow_pre` is set to `false.` See the table below for examples.


#### [#2974] - (2016-02-25T16:33:06Z) - [escript-related mix tasks](https://github.com/elixir-lang/elixir/pull/2974)

This PR implements a few additional escript-related mix tasks, outlined in [this proposal](https://groups.google.com/d/msg/elixir-lang-core/LEr5Vjd1gys/A8WTbC1vmhwJ).
## Technical details
- `mix escript.install` has been added that works similarly to `mix archive.install`: it takes a path or a URL to an arbitrary file and puts it under `~/.mix/escripts`.
- `mix escript` lists all executable files under `~/.mix/escripts`.
- `mix escript.uninstall` removes the file with the given name from `~/.mix/escripts`.
## Additional concerns
- the ability to escript.install a prebuilt escript has been added because archive.install could already do that for .ez files, and it makes even more sense to have this work with escripts as they are not dependent on the installed Elixir version.
- there is no environment variable MIX_ESCRIPTS because, as I mentioned, escript are generally independent of the installed Elixir version.
## TODO
- [x] tests
- [ ] to keep `archive.install` and `escript.install` symmetric, both should be able to fetch repositories and hex packages. The package will be fetched into a temporary directory, in the case of an escript it will also fetch dependencies. Then everything is compiled and subsequently `archive.install` or `escript.install` is called with the resulting archive or escript file. This makes it possible to host mix tasks on hex.pm too.
- [ ] the command-line invocation syntax is just an idea. I have considered lots of alternatives, but would like to hear what the team thinks about it first. We can't really say that it is similar to the dep syntax in mix.exs because that would mean having something like this:
  
  ```
  mix escript.install phoenix
  mix escript.install phoenix 1.0.2
  mix escript.install phoenix github phoenixframework/phoenix
  ```
  
  I would much rather have the Mix task infer the source type from the URL given to it. The biggest problem is then to distinguish a local path from the package name.
- if we allow both archives and escripts to be fetched from hex.pm, it may be confusing in which way a given package is supposed to be used: as a dependency, as an archive, or as an escript. Perhaps, hex.pm could indicate that visually in some way, or via the project's name.


#### [#4329] - (2016-02-25T15:12:22Z) - [Fix String.slice/2 doc](https://github.com/elixir-lang/elixir/pull/4329)

`String.slice/2` works with graphemes, not codepoints. `String.slice/3` already documents it correctly.


#### [#4322] - (2016-02-25T09:58:01Z) - [Correctly checkout rev when updating mix.exs](https://github.com/elixir-lang/elixir/pull/4322)

This is an attempt to fix #4309. I'm a little new to the `Mix.Dep*` part of the codebase, so I'm not sure this is a good solution; also, this is of course a work-in-progress as it completely lacks tests, but I wanted to see if the direction is right before moving on. Let me know what I can do :)


#### [#4321] - (2016-02-22T22:24:06Z) - [docs(Macro): clarify difference between sigils](https://github.com/elixir-lang/elixir/pull/4321)

Previously the fact that only lower case sigils was only documented in
the getting started guide.


#### [#4320] - (2016-02-22T07:12:31Z) - [fix typo in def v(n \ -1) documentation](https://github.com/elixir-lang/elixir/pull/4320)

noticed a small typo in this documentation - "lookup" is a noun, so it should be "look up"


#### [#4319] - (2016-02-21T16:48:53Z) - [Add option to omit / ignore padding](https://github.com/elixir-lang/elixir/pull/4319)

Add option to omit padding to `encode64`, `url_encode64`, `encode32`, `hex_encode32`
Add option to ignore padding to `decode64(!)`, `url_decode64(!)`, `decode32(!)`, `hex_decode32(!)`

Closes #4316


#### [#4312] - (2016-02-21T12:03:33Z) - [Standardize use of range operator (..)](https://github.com/elixir-lang/elixir/pull/4312)

...by removing spaces around it


#### [#4128] - (2016-02-21T10:58:23Z) - [Multiple small fixes in the Task and Task.Supervisor docs.](https://github.com/elixir-lang/elixir/pull/4128)



#### [#4315] - (2016-02-20T08:10:53Z) - [Build info](https://github.com/elixir-lang/elixir/pull/4315)

- System.build_info/0: add :build and improve tests
- Use System.build_info[:build] consistently in Mix and Elixir

It depends on changes introduces by https://github.com/elixir-lang/elixir/pull/4313 and https://github.com/elixir-lang/elixir/pull/4314


#### [#4314] - (2016-02-20T08:10:13Z) - [Remove use of `.git/HEAD` to determine revision id](https://github.com/elixir-lang/elixir/pull/4314)

I depends on the changes introduced in https://github.com/elixir-lang/elixir/pull/4313


#### [#4313] - (2016-02-20T08:06:12Z) - [Fix System.read_stripped/1 to properly deal with \r\n\t](https://github.com/elixir-lang/elixir/pull/4313)

also: `System.strip_re/2` replaced with `System.strip/1`


#### [#4311] - (2016-02-19T11:22:06Z) - [Polish docs in Mix.Config](https://github.com/elixir-lang/elixir/pull/4311)



#### [#4310] - (2016-02-19T07:41:14Z) - [Fixed typos in GenEvent docs.](https://github.com/elixir-lang/elixir/pull/4310)

Also removed dead link to Getting Started guide.


#### [#4307] - (2016-02-18T06:39:58Z) - [Improve documentation for iex -S](https://github.com/elixir-lang/elixir/pull/4307)

See discussion on mailing list https://groups.google.com/forum/#!topic/elixir-lang-talk/AKVD3ekLyfo

(I couldn't help myself. Felt weird not to just go ahead and send the pull request on. We can close if unneeded.)


#### [#4302] - (2016-02-16T22:02:52Z) - [Support guards in for](https://github.com/elixir-lang/elixir/pull/4302)



#### [#4304] - (2016-02-16T18:59:25Z) - [Optimize Enum.random for ranges](https://github.com/elixir-lang/elixir/pull/4304)

This only applies when taking a single count, but drastically improves the performance of large ranges, such as `Enum.random(1..1_000_000)`, which is a common use-case.


#### [#4301] - (2016-02-14T18:13:47Z) - [Fix alphabetical order of IEx helpers](https://github.com/elixir-lang/elixir/pull/4301)



#### [#4299] - (2016-02-14T12:45:05Z) - [ExUnit: Add note in docs about `:include` ignored without `:exclude`](https://github.com/elixir-lang/elixir/pull/4299)

This is a reminder from https://github.com/elixir-lang/elixir/blob/v1.2.2/lib/ex_unit/lib/ex_unit/case.ex#L162:L163

I was a bit on a fence if I should submit this PR or not because it's a repetition. However, it would have saved me some time because I happened to read that doc first and got confused why just running  `mix test --include focus` was running all tests for me.


#### [#4298] - (2016-02-14T08:45:02Z) - [Support :base option when inspecting binaries](https://github.com/elixir-lang/elixir/pull/4298)

Allow inspecting binaries as :hex or :octal.

Examples:

```
# as before
iex> inspect("abc")
"\"abc\""

# as before
iex> inspect("abc", binaries: :as_binary)
"<<97, 98, 99>>"

# NEW: base: :hex is recognized
iex> inspect("abc", binaries: :as_binary, base: :hex)
"<<0x61, 0x62, 0x63>>"

# NEW: any base other than :decimal implies binaries: :as_binaries
iex> inspect("abc", base: :hex)
"<<0x61, 0x62, 0x63>>"
iex> inspect("abc", base: :octal)
"<<0o141, 0o142, 0o143>>"

# NOTE: size is still represented as decimal
iex> inspect(<< 10, 11, 12::4 >>, base: :hex)
"<<0xA, 0xB, 0xC::size(4)>>"
```


#### [#4292] - (2016-02-11T22:02:36Z) - [docs(Regex): typo in deprecation warning for /r](https://github.com/elixir-lang/elixir/pull/4292)



#### [#4288] - (2016-02-09T19:37:57Z) - [Improve Map.take/2](https://github.com/elixir-lang/elixir/pull/4288)

Based on the discussion here: https://github.com/erlang/otp/pull/959 it was determined that building a list and then using :maps.from_list had superior performance characteristics, and would also generate less garbage


#### [#4287] - (2016-02-09T14:56:19Z) - [Fix "case" tag filtering doesn't work](https://github.com/elixir-lang/elixir/pull/4287)

It seem that the "case" tag doesn't work.

http://elixir-lang.org/docs/v1.2/ex_unit/ExUnit.Case.html:

> The following tags are set automatically by ExUnit and are therefore reserved:
> - :case - the test case module

For example, the following test:

``` elixir
# File sample_test.exs
ExUnit.start
ExUnit.configure [exclude: :case]

defmodule SampleTest do
  use ExUnit.Case
  test "this is sample" do; :ok end
end
```

expected (skip all cases)

```
$ elixir sample_test.exs
Excluding tags: [:case]



Finished in 0.08 seconds (0.08s on load, 0.00s on tests)
1 test, 0 failures, 1 skipped
```

actual

```
$ elixir sample_test.exs
Excluding tags: [:case]

.

Finished in 0.07 seconds (0.07s on load, 0.00s on tests)
1 test, 0 failures
```


#### [#4286] - (2016-02-09T09:21:47Z) - [Fix wording in the docs for case and cond](https://github.com/elixir-lang/elixir/pull/4286)

The docs for `case` said to

> add a final clause, equal to `_`

as if only `_` would work; the docs now make it clearer that any catch-all clause is fine. Similar changes were made to the docs for `cond`.

(the previous phrasing was introduced in #4285, /cc @eksperimental who submitted that PR)


#### [#4281] - (2016-02-09T09:00:38Z) - [Removes the use of () in built in typespecs](https://github.com/elixir-lang/elixir/pull/4281)

...making it consistent with the rest of the typespecs


#### [#4282] - (2016-02-09T09:00:00Z) - [Several small fixes](https://github.com/elixir-lang/elixir/pull/4282)



#### [#4283] - (2016-02-09T08:58:20Z) - [Add iex> to make some doctests run](https://github.com/elixir-lang/elixir/pull/4283)



#### [#4285] - (2016-02-09T08:57:08Z) - [Improve docs for `case` and `cond`](https://github.com/elixir-lang/elixir/pull/4285)

...based on the Getting Started Guide


#### [#4279] - (2016-02-09T00:30:30Z) - [Add arity to functions in docs](https://github.com/elixir-lang/elixir/pull/4279)



#### [#4278] - (2016-02-09T00:13:26Z) - [Fix Enum.uniq_by example](https://github.com/elixir-lang/elixir/pull/4278)

Fix example and use iex> so it can be tested by doctest


#### [#4277] - (2016-02-08T20:16:09Z) - [Docs/fix overriden typos](https://github.com/elixir-lang/elixir/pull/4277)

I grepped after reading https://github.com/elixir-lang/elixir/pull/4275


#### [#4275] - (2016-02-08T13:41:24Z) - [Fix spelling of overridden in SpecialForms docs](https://github.com/elixir-lang/elixir/pull/4275)



#### [#4273] - (2016-02-08T08:47:52Z) - [Fix warning in mix test.](https://github.com/elixir-lang/elixir/pull/4273)

I got

```
mix.exs:2: warning: redefining module GitRepo.Mixfile (current version defined in memory)
```

when running the tests in master.
I used [@lexmag trick](https://github.com/elixir-lang/elixir/issues/3911#issuecomment-167453067) to find the culprit.


#### [#4114] - (2016-02-06T17:51:47Z) - [Optional else clauses can be added to special form with](https://github.com/elixir-lang/elixir/pull/4114)

Reference: #4085


#### [#4264] - (2016-02-04T17:47:35Z) - [small typo in docs for ExUnit.Case](https://github.com/elixir-lang/elixir/pull/4264)



#### [#4265] - (2016-02-04T17:46:59Z) - [Fix typo in exunit test](https://github.com/elixir-lang/elixir/pull/4265)



#### [#4261] - (2016-02-04T10:25:41Z) - [Add task app.tree](https://github.com/elixir-lang/elixir/pull/4261)

Task to show dependency tree of an application.


#### [#4253] - (2016-02-04T08:32:42Z) - [Fix bug in Path.join. Fix #4252.](https://github.com/elixir-lang/elixir/pull/4253)

This should fix #4252.


#### [#4259] - (2016-02-03T12:43:56Z) - [Fix typo in Elixir docs](https://github.com/elixir-lang/elixir/pull/4259)

Found a spelling mistake - 
`shorcuts` > `shortcuts`


#### [#4257] - (2016-02-03T11:45:53Z) - [Make GenServer.cast/2 always return :ok. Closes #4251](https://github.com/elixir-lang/elixir/pull/4257)

This unifies the behavior of `GenServer.cast/2` to always
return :ok and never raise an `ArgumentError`, regardless
of how it is called.

Previously an `ArgumentError` would be be raised only when
called with a nonexistant local process name. In all other cases
which are calling using `:global`, `:via` or `{name, node}`
it would previously always return `:ok`.

The new behavior is now constistant with `:gen_server.cast/2`.

This reverts the change partially introduced in 0d4af57abead1c4dfdc2f71fe198ae539f6eceab.

See #4251 for the full discussion.


#### [#4255] - (2016-02-03T10:07:24Z) - [Correct typo in Map.split/2 documentation](https://github.com/elixir-lang/elixir/pull/4255)



#### [#4247] - (2016-02-01T08:19:50Z) - [String.replace_trailing bug fix.](https://github.com/elixir-lang/elixir/pull/4247)

See associated [issue 4246](https://github.com/elixir-lang/elixir/issues/4246)
Please check thoroughly that this is OK before merging. Thanks.


#### [#4233] - (2016-01-31T14:30:14Z) - [Add test attributes](https://github.com/elixir-lang/elixir/pull/4233)

See #4232 

ExUnit.Case can register test attributes which are
accumulated per test run and injected into the `context.registered` under the
attribute name:

``` elixir
defmodule MyTest do
  use ExUnit.Case
  ExUnit.Case.register_attribute __MODULE__, :foo

  @foo hello: "world"
  test "can access @foo via `context`", context do
    assert context.registered.foo.hello == "world"
  end
end
```


#### [#4245] - (2016-01-31T08:13:14Z) - [add `preferred_cli_env` attribute to task definition](https://github.com/elixir-lang/elixir/pull/4245)

If one develops a custom task, she might want it to run by default in particular environment, for example, `:prod`. 

She can do it by specifying `preferred_cli_env` in client mix file, but it means that every client should do it. OTOH, `preferred_cli_env` seems to be as natural attribute of the task, as `recursive`, or `shortdoc`. 

As a side effect, it would make `test` task less special (it would simply declare `:test` as a preferred environment).


#### [#4244] - (2016-01-30T20:08:58Z) - [Added @moduledoc documentation to Range](https://github.com/elixir-lang/elixir/pull/4244)

Added examples of applying Enum functions to Range to clarify that Range includes some functions from Enum such as count/1, member/2, and reduce/3.


#### [#4238] - (2016-01-28T23:31:46Z) - [Add doc about ignore: :whitespace to Base.decode64.](https://github.com/elixir-lang/elixir/pull/4238)

Sorry, I forgot to add the docs in  #4237.


#### [#4237] - (2016-01-28T23:04:56Z) - [Add option to ignore whitespace to base64 decoding. Close #4186.](https://github.com/elixir-lang/elixir/pull/4237)

As discussed in #4186, I added `ignore: :whitespace` option to `Base.decode64` and `Base.url_decode64`.


#### [#4231] - (2016-01-27T08:45:30Z) - [Fixed arity typo in Path documentation](https://github.com/elixir-lang/elixir/pull/4231)



#### [#4229] - (2016-01-26T22:45:40Z) - [Make `__DIR__` docs more accurate.](https://github.com/elixir-lang/elixir/pull/4229)

The old wording -- "the current directory" -- made me think it returned
your current working directory, but it's really the directory of the
current file.


#### [#4225] - (2016-01-24T19:52:05Z) - [Enhance rewriting rules](https://github.com/elixir-lang/elixir/pull/4225)



#### [#4223] - (2016-01-23T18:30:52Z) - [Introduce Logger.reset_metadata/0,1](https://github.com/elixir-lang/elixir/pull/4223)



#### [#4217] - (2016-01-23T17:29:44Z) - [Support passing io_device to File.copy/3](https://github.com/elixir-lang/elixir/pull/4217)

Technically it is possible to pass an io_device to File.copy/3 as either the source, destination, or both. However, all input was being converted to a string, which fails for any non-binary data and prevents `:file.copy` from being reached.

This updates the typespec and conditionally converts chardata to a string.


#### [#4224] - (2016-01-23T15:34:06Z) - [Stream.resource/3 @doc and @spec change](https://github.com/elixir-lang/elixir/pull/4224)

@doc change: there is no Stream.transform/2 and Stream.transform/4's
initial accumulated value is also computed lazily so the doc in
Stream.resource/3 must be referring to Stream.transform/3.

@spec change: I tried the example in Stream.resource/3 to use `nil`
instead of `{:halt, acc}`, as currently specified by the spec, and got:

*\* (CaseClauseError) no case clause matching: nil
    (elixir) lib/stream.ex:1099: Stream.do_resource/5
    (elixir) lib/enum.ex:1486: Enum.reduce/3
    (elixir) lib/enum.ex:2248: Enum.to_list/1

Besides, the doc and spec don't match (and the doc seems to be correct,
so I changed the spec).


#### [#4219] - (2016-01-22T12:19:39Z) - [Update base.ex doc](https://github.com/elixir-lang/elixir/pull/4219)

Clean up base64 doc, probably left from previous docstring. Alphabets are presented in module doc.


#### [#4218] - (2016-01-22T07:57:23Z) - [Remove minor ambiguity in Enum.sort/2 doc](https://github.com/elixir-lang/elixir/pull/4218)

> The given function must return false if the first argument is smaller than second one.

could be misunderstood as "the function should return false if the _literal_ value of first argument is smaller than the second". This is resolved with the examples, but it would be more eloquent just to explain it in the function description.


#### [#4210] - (2016-01-20T09:37:30Z) - [Fix documentation for GenEvent Streaming](https://github.com/elixir-lang/elixir/pull/4210)

Thanks to Bibek Pandey for bringing this up: https://groups.google.com/forum/?utm_medium=email&utm_source=footer#!msg/elixir-lang-talk/_tT_B13stKI/TUY755IGEgAJ 


#### [#4208] - (2016-01-17T17:16:44Z) - [Fixes typo in `quote` docs](https://github.com/elixir-lang/elixir/pull/4208)



#### [#4207] - (2016-01-17T09:35:26Z) - [Implemented option :include_captures in Regex.split/3](https://github.com/elixir-lang/elixir/pull/4207)

Closes issue #4203. Not the prettiest implementation, but it does work. Any suggestion on how to make it better, please?


#### [#4201] - (2016-01-15T12:16:56Z) - [Add deprecation for defdelegate list arguments and append_first option](https://github.com/elixir-lang/elixir/pull/4201)

As discussed in #4199, I added a deprecation warning for `defdelegate` with lists and `append_first` option.

Would it be better to remove the examples from the doc, or should they stay until these features are actually removed?

/cc @josevalim @lexmag 


#### [#4197] - (2016-01-14T17:50:18Z) - [Add defdelegate optional parameters. Close #4196.](https://github.com/elixir-lang/elixir/pull/4197)

As discussed in #4196, I added the possibility to pass optional parameters to `defdelegate`.
It works by generating all the possible heads for the function, and passing the optional arguments to the delegated function in the body.

``` elixir
defdelegate fun(arg1, arg2 \\ []), to: Mod
# will generate more or less
def fun(arg1), do: Mod.fun(arg1, [])
def fun(arg1, arg2), do: Mod.fun(arg1, arg2)
```


#### [#4195] - (2016-01-13T10:19:08Z) - [Fix a crash in Macro.to_string if a tree looks like a sigil but the function is not an atom](https://github.com/elixir-lang/elixir/pull/4195)

Fixes the following problem (reproduced in 1.2.0 and at head)

```
iex(1)> ast = quote do: :erlang.max(<<>>, [])
{{:., [], [:erlang, :max]}, [], [{:<<>>, [], []}, []]}
iex(2)> Macro.to_string(ast)
** (ArgumentError) argument error
             :erlang.atom_to_binary({:., [], [:erlang, :max]}, :utf8)
    (elixir) lib/macro.ex:696: Macro.sigil_call/2
    (elixir) lib/macro.ex:600: Macro.to_string/2
```


#### [#4193] - (2016-01-13T09:38:32Z) - [Update exunit match operator and match? to show pinned variables.](https://github.com/elixir-lang/elixir/pull/4193)

I reused the logic used in `assert_received` to show the pinned variables when using the match operator and `match?`.


#### [#4194] - (2016-01-12T23:33:45Z) - [Update doc to use the correct format](https://github.com/elixir-lang/elixir/pull/4194)

Hi,

I like to read the docs through the source code and the markup helps to identify what is code and what is text. I noticed that in `ArgumentError` wasn't formatted like all other places over the doc.


#### [#4188] - (2016-01-12T09:41:05Z) - [Warn when defimp is called for consolidated protocol](https://github.com/elixir-lang/elixir/pull/4188)

Closes #4175.


#### [#4190] - (2016-01-12T09:38:52Z) - [Fix a typo in `for/1` docs](https://github.com/elixir-lang/elixir/pull/4190)

Hello.
I've noticed wrong formatting in the docs.

![screen shot 2016-01-12 at 10 28 08](https://cloud.githubusercontent.com/assets/1541059/12259715/e3953aa8-b917-11e5-8e86-5cee2709e6a7.png)


#### [#4189] - (2016-01-12T08:20:22Z) - [Correct the type definition of ExUnit.state for the failed state](https://github.com/elixir-lang/elixir/pull/4189)

The new payload returned by the ExUnit.Runner module for the failed state does not match its type specification declared in ExUnit module since Elixir 1.2.0.

https://github.com/elixir-lang/elixir/blob/v1.2.0/lib/ex_unit/lib/ex_unit/runner.ex#L353

This fix change the type definition to support multiple errors.


#### [#4187] - (2016-01-11T23:43:13Z) - [Update example code to use correct method name](https://github.com/elixir-lang/elixir/pull/4187)

-   The example code is using the old name of
  `Application.fetch!/2`, change to the new, more clear name:
  `Application.fetch_env!/2`.


#### [#4183] - (2016-01-11T07:54:22Z) - [Avoid config_test to depend on terminal size](https://github.com/elixir-lang/elixir/pull/4183)

`config_test` fails if my terminal is less than 80 chars wide.

```
$ make test_iex
==> elixir (compile)
==> iex (exunit)


  1) test configuration sets a default for width (IEx.ConfigTest)
     test/iex/config_test.exs:6
     Assertion with == failed
     code: IEx.Config.configuration()[:width] == 80
     lhs:  61
     rhs:  80
     stacktrace:
       test/iex/config_test.exs:7

....................................................................................................

Finished in 1.4 seconds (0.5s on load, 0.8s on tests)
101 tests, 1 failure

Randomized with seed 298890
Makefile:95: recipe for target 'test_iex' failed
make: *** [test_iex] Error 1
```

While it is not really a big issue, simply checking for an integer should be enough here and avoid to depend on the terminal being more than 80 chars.


#### [#4184] - (2016-01-11T07:47:44Z) - [Issue #4158 - documenting `:width: 0` and adding a guard for neagtive‚Ä¶](https://github.com/elixir-lang/elixir/pull/4184)

‚Ä¶ widths


#### [#4182] - (2016-01-11T07:46:34Z) - [Improve iex expand to handle '&'.](https://github.com/elixir-lang/elixir/pull/4182)

I made a small improvement in Iex `expand` to handle cases where an expression starts with `&`.

For example

``` elixir
Enum.map ~w(foo bar baz), &Str
```

did not yield any completion when pressing tab.
With this fix, it ignores the `&` to yield usual completions.


#### [#4180] - (2016-01-09T19:08:36Z) - [Remove duplicated line in module IEx.Helpers doc](https://github.com/elixir-lang/elixir/pull/4180)

If in `iex`(elixir `1.2.0`) we list the available helpers by executing `h()`, we get the following list:

<img width="952" alt="screen shot 2016-01-09 at 19 46 50" src="https://cloud.githubusercontent.com/assets/4209616/12217806/34e62fba-b70c-11e5-91fd-3e605a03cbe1.png">

As shown in the picture, there are two identical items in the list.

This PR removes the second duplication, that happens to be the last item, not following the alphabetic sorting.


#### [#4179] - (2016-01-09T11:56:53Z) - [code.ex docs: typo](https://github.com/elixir-lang/elixir/pull/4179)



#### [#4178] - (2016-01-09T09:17:23Z) - [Fix typo in String documentation: padding -> pad](https://github.com/elixir-lang/elixir/pull/4178)



#### [#4177] - (2016-01-09T08:14:20Z) - [Fix the description of the timeout](https://github.com/elixir-lang/elixir/pull/4177)

Default timeout is 60000 milliseconds.

``` elixir
# File: /tmp/timeout_test.exs
ExUnit.start

defmodule TimeoutTest do
  use ExUnit.Case, async: true

  test "timeout" do; :timer.sleep 100_000 end
end
```

``` bash
$ elixir /tmp/timeout_test.exs


  1) test timeout (TimeoutTest)
     /tmp/timeout_test.exs:6
     ** (ExUnit.TimeoutError) test timed out after 60000ms. You can change the timeout:

       1. per test by setting "@tag timeout: x"
       2. per case by setting "@moduletag timeout: x"
       3. globally via "ExUnit.start(timeout: x)" configuration
       4. or set it to infinity per run by calling "mix test --trace"
          (useful when using IEx.pry)

     Timeouts are given as integers in milliseconds.

     stacktrace:
       (stdlib) timer.erl:153: :timer.sleep/1
       /tmp/timeout_test.exs:6
       (ex_unit) lib/ex_unit/runner.ex:293: ExUnit.Runner.exec_test/1
       (stdlib) timer.erl:166: :timer.tc/1
       (ex_unit) lib/ex_unit/runner.ex:242: anonymous fn/3 in ExUnit.Runner.spawn_test/3



Finished in 60.0 seconds (0.08s on load, 60.0s on tests)
1 test, 1 failure

Randomized with seed 801571
```


#### [#4173] - (2016-01-08T15:22:16Z) - [Highlight the app name in README](https://github.com/elixir-lang/elixir/pull/4173)

In the README file, the app name looks much better if it's `highlighted as code`.
### BEFORE

![screenshot from 2016-01-08 16-15-06](https://cloud.githubusercontent.com/assets/101816/12201202/3173b1f2-b623-11e5-967a-6fe1e8dd1b5d.png)
### AFTER

![screenshot from 2016-01-08 16-18-17](https://cloud.githubusercontent.com/assets/101816/12201256/7a823d0a-b623-11e5-8c98-1737c165d91f.png)


#### [#4170] - (2016-01-07T16:32:55Z) - [[doc] Clarify what's passed to `init`](https://github.com/elixir-lang/elixir/pull/4170)

I realized I wasn't sure what was passed to the `init` callback after calling `Supervisor.start_link/3`.

This hopefully makes it more clear.

Also, I improved formatting by breaking lines at 80 chars. Hope that's OK.


#### [#4169] - (2016-01-06T18:13:49Z) - [Document that non-atom keys are ignored by struct](https://github.com/elixir-lang/elixir/pull/4169)

Maps coming from decoded JSON or other untrusted sources usually have string keys. Attempting to convert a map with string keys into a struct will always result in the default struct, as structs are always defined with atoms so the keys are all ignored.


#### [#4157] - (2016-01-05T22:29:46Z) - [Fixes bug in IEx.Config.configuration](https://github.com/elixir-lang/elixir/pull/4157)

From a discussion on IRC with @fishcakez, I discovered that IEx.Config had a bug that was causing an error.


#### [#4160] - (2016-01-05T15:45:28Z) - [Fix typo in `Kernel.use/2` moduledoc](https://github.com/elixir-lang/elixir/pull/4160)

Missing "in".


#### [#4156] - (2016-01-04T20:59:52Z) - [feat(Kernel): raise when defstruct is called more than once](https://github.com/elixir-lang/elixir/pull/4156)

Previously `defstruct` could be called multiple times. This could be
particularly confusing is `defstruct` is called by an external library
such as the Ecto `schema` macro.

Calling `defstruct` when the `@struct` module attribute already exists
will now cause a `CompileError`

This closes #4155


#### [#4153] - (2016-01-04T14:00:10Z) - [Fix markdown formatting of a code example in Bitwise module documentation](https://github.com/elixir-lang/elixir/pull/4153)

Broken markdown formatting. The code example didn't render as a code block. Added a single newline to make a new paragraph, fixes it.

See:
https://github.com/elixir-lang/elixir/blob/master/lib/elixir/lib/bitwise.ex#L19
http://elixir-lang.org/docs/v1.2/elixir/Bitwise.html


#### [#4152] - (2016-01-04T12:45:56Z) - [special_forms.ex docs: typos, clarification](https://github.com/elixir-lang/elixir/pull/4152)



#### [#4150] - (2016-01-03T11:43:29Z) - [Naming Conventions doc: typo, commas](https://github.com/elixir-lang/elixir/pull/4150)



#### [#4146] - (2016-01-03T08:14:51Z) - [Zeropad compile time in i/1](https://github.com/elixir-lang/elixir/pull/4146)

Because this (the current output) looks a little odd:

```
Compile time
  2016-1-2 23:28:9
```

Didn't add any tests because the time wasn't mentioned in the existing tests. Seemed a trivial-enough change.


#### [#4148] - (2016-01-03T08:14:00Z) - [Improve error message for when the named mix task cannot be found.](https://github.com/elixir-lang/elixir/pull/4148)

Previously, you could get the incredibly confusing error:

> The task "acronym.http" could not be found. Did you mean "acronym.http"?

This happened when you named your module `Mix.Tasks.Acronym.HTTP` rather
than `Mix.Tasks.Acronym.Http` as expected. Since we can detect this
situation, it's helpful to give the user a clear explanation of the
problem.

(For context: this is a follow up to a [conversation I had with Jos√© earlier today](https://github.com/elixir-lang/elixir/pull/4137/files#r48686720)).


#### [#4149] - (2016-01-03T08:09:16Z) - [abbreviations -> acronyms](https://github.com/elixir-lang/elixir/pull/4149)

Using all capitals is recommended only when you have an acronym
like HTTP, IO, SCM, etc. For an abbreviation like "Misc" or "Utils"
all caps should not be used.

I noticed this when #4137.

/cc @henrik 


#### [#4147] - (2016-01-03T00:04:13Z) - [Macro.traverse/4 doc typo](https://github.com/elixir-lang/elixir/pull/4147)



#### [#4143] - (2016-01-02T19:55:03Z) - [Enum.at docs: mention negative indexing](https://github.com/elixir-lang/elixir/pull/4143)

Copied this text from `Enum.fetch/2` and changed the word "fetches" to "finds".


#### [#4142] - (2016-01-02T19:01:36Z) - [Naming Conventions doc: function name typos](https://github.com/elixir-lang/elixir/pull/4142)

My own typos :) Checked the rendered HTML and noticed these weren't linkified.


#### [#4141] - (2016-01-02T17:53:49Z) - [Support remote pids/ports with IEx helper i/1](https://github.com/elixir-lang/elixir/pull/4141)

Please backport when merged.


#### [#4137] - (2016-01-02T16:49:07Z) - [Naming Conventions doc page](https://github.com/elixir-lang/elixir/pull/4137)

Discussed with @josevalim on Twitter if it could make sense to have a doc page making implicit naming conventions explicit and easy to discover.

I'm making a PR during early stages (before I start fleshing out and polishing text) to get feedback.

Some things I'm not sure about:
- Does "Naming Conventions" make sense as the name for this document? It's all function naming 
  currently, but "Function Naming Conventions" is overlong and overspecific, I feel. If we would ever want to write about any other naming conventions (modules or something), we could make subsections.
- Should I add a third explicit `-e` to the Makefile like I did? It doesn't seem to accept globs, but maybe one could either write some fancier bash code to turn a glob into `-e` arguments, or make ex_doc handle globs.


#### [#4138] - (2016-01-02T14:04:52Z) - [task.ex docfix](https://github.com/elixir-lang/elixir/pull/4138)

There are now three fields :)


#### [#4135] - (2016-01-01T21:49:05Z) - [Specify syntax highlighting for README.md template in mix](https://github.com/elixir-lang/elixir/pull/4135)

The `mix new` task generates README.md with code markdown that isn't highlighted by github. 
I've specified elixir syntax highlighting in README.md template for the `mix new` task.


#### [#4133] - (2016-01-01T15:03:55Z) - [Remove unused `escape_char/1` function](https://github.com/elixir-lang/elixir/pull/4133)

I found this while compiling elixir master:

```
src/elixir_tokenizer.erl:478: Warning: function escape_char/1 is unused
```


#### [#4112] - (2016-01-01T11:10:44Z) - [Override some yecc/leex compiler opts in order to avoid errors](https://github.com/elixir-lang/elixir/pull/4112)

This PR should close #4111. Some options passed to `:yecc`/`:leex` in the corresponding compilers are overridden so that the return value of `:yecc.file/2` and `:leex.file/2` is predeterminable.


#### [#4132] - (2016-01-01T11:10:11Z) - [Fix a race condition in gen_event_test.exs. Fix #4131](https://github.com/elixir-lang/elixir/pull/4132)

The added calls make sure the generated log message is sent before
the :console backend is readded.

This was pretty much me channeling @fishcakez's knowledge into code :)


#### [#4129] - (2015-12-30T12:55:20Z) - [Pedantic improvements to the output of the i/1 helper in IEx.](https://github.com/elixir-lang/elixir/pull/4129)



#### [#4121] - (2015-12-29T07:59:25Z) - [documenting the default return value for `Module.get_attribute/2`](https://github.com/elixir-lang/elixir/pull/4121)

If I understand the code correctly a warning will be thrown if you use the `@` macro, but probably that information should go in the macro's docstring?


#### [#4118] - (2015-12-26T10:31:46Z) - [Fix bug in Macro.to_string. Fix #4116.](https://github.com/elixir-lang/elixir/pull/4118)

This fixes `Macro.to_string` bit containers clause for cases like mentioned in #4116 
where the expression inside `<< >>` does not start by `<<` but ends by `>>`.

```
ast = quote do: for <<a::4 <- <<1, 2>> >>, do: a
```


#### [#4117] - (2015-12-26T09:06:21Z) - [fix the indent of moduledoc in Module](https://github.com/elixir-lang/elixir/pull/4117)

I fixed this by change 6 spaces indent to 4. Otherwise the doc will be like

``` elixir
# http://elixir-lang.org/docs/stable/elixir/Module.html
defmodule M do
    @compile {:inline, myfun: 1}

    def myfun(arg) do
      to_string(arg)
    end
  end
```

instead of 

``` elixir
defmodule M do
  @compile {:inline, myfun: 1}

  def myfun(arg) do
    to_string(arg)
  end
end
```


#### [#4115] - (2015-12-25T20:56:26Z) - [Update the spec for the generated __info__/1 function to please Dialyzer](https://github.com/elixir-lang/elixir/pull/4115)

Verify the spec's correctness with `mix dialyze --specdiffs` in a dummy
mix project.

Closes #4113.


#### [#4108] - (2015-12-23T22:16:10Z) - [Add mix debug mode. Close #4106.](https://github.com/elixir-lang/elixir/pull/4108)

I implemented mix debug option as described in #4106.


#### [#4102] - (2015-12-23T22:12:26Z) - [Add environment variable to iex.bat so user can default to --werl.](https://github.com/elixir-lang/elixir/pull/4102)

Allow the user to set an environment variable on Windows so --werl can be the default:

``` bat
C:\Users\user>set ELIXIR_IEX_FLAGS=

C:\Users\user>iex
Eshell V7.2.1  (abort with ^G)
Interactive Elixir (1.2.0-rc.1) - press Ctrl+C to exit (type h() ENTER for help)

iex(1)> Terminate batch job (Y/N)? y

C:\Users\user>set ELIXIR_IEX_FLAGS=--werl

C:\Users\user>iex

C:\Users\user>REM IEx window opens instead.
```


#### [#4109] - (2015-12-23T15:43:53Z) - [Add section about function arguments to 'Writing Documentation'](https://github.com/elixir-lang/elixir/pull/4109)



#### [#4104] - (2015-12-23T09:23:12Z) - [Fix link to Kernel.<=/2 in Enum.sort_by/3 @doc](https://github.com/elixir-lang/elixir/pull/4104)

When I first wrote the docs, I didn't know I had to include the `Kernel.` to make the automatic linking work.  I double checked after reading the documentation guide for Elixir 1.2 and noticed that the
`<=/2` wasn't linking.


#### [#4100] - (2015-12-22T12:05:58Z) - [Fix small typo in Writing Documentation.md](https://github.com/elixir-lang/elixir/pull/4100)

This PR basically does what it says in the title.

Keep up the good work! :+1:


#### [#4098] - (2015-12-21T23:58:02Z) - [update Kernel.SpecialForms.import summary](https://github.com/elixir-lang/elixir/pull/4098)

fixes a small spelling mistake


#### [#4097] - (2015-12-21T15:56:13Z) - [read vs. erad](https://github.com/elixir-lang/elixir/pull/4097)



#### [#4094] - (2015-12-21T07:33:22Z) - [Add deps.clean --build documentation.](https://github.com/elixir-lang/elixir/pull/4094)

I just realized that I had not added the `--build` option to the `mix deps.clean` task  docs in #4089.
Sorry for that.


#### [#4093] - (2015-12-20T19:11:42Z) - [added return values to the Logger macro's documentation](https://github.com/elixir-lang/elixir/pull/4093)



#### [#4091] - (2015-12-19T17:59:27Z) - [Fix issue #4081 UnicodeConversionError would generate invalid strings](https://github.com/elixir-lang/elixir/pull/4091)

previously assumed the head of the returned iolist would be an integer. This has been fixed with more recursion
fishcakez was right


#### [#4089] - (2015-12-19T12:29:52Z) - [Add --build flag to deps.clean mix task. Close #4088.](https://github.com/elixir-lang/elixir/pull/4089)

I added a `--build` flag to the `mix deps.clean` task, as discussed in #4088.


#### [#4084] - (2015-12-18T16:39:01Z) - [Fix example in `quote`](https://github.com/elixir-lang/elixir/pull/4084)

The example prints "Got 25", not just "25"


#### [#4076] - (2015-12-15T00:03:02Z) - [Make Access syntax fail to compile for unsupported values](https://github.com/elixir-lang/elixir/pull/4076)

Closes #4070.


#### [#4077] - (2015-12-14T21:38:58Z) - [mix.bat changed to emulate mix script on Unix-like systems. Solves #4075](https://github.com/elixir-lang/elixir/pull/4077)

On Unix-like systems, the mix command is implemented as an elixir script that runs 

```
Mix.start
Mix.CLI.main
```

On Windows mix.bat it runs something like

```
elixir -e Mix.start -e Mix.CLI.main
```

that is a bit different.

On both systems, if you run 

```
elixir -e Mix.start -e Mix.CLI.main --version
```

you get

```
Elixir x.y.z
```

instead of

```
Mix x.y.z
```


#### [#4072] - (2015-12-12T13:34:25Z) - [Raise when Access syntax used on non-keywords](https://github.com/elixir-lang/elixir/pull/4072)

Closes #4071.


#### [#4067] - (2015-12-09T01:15:15Z) - [Allow `false` value in env passed to `System.cmd/3`](https://github.com/elixir-lang/elixir/pull/4067)

Previously only strings were accepted as valid env keys and values.
However, because the `env` option is eventually passed to
`:erlang.open_port`, `false` values, which remove existing environment
variables, should be allowed.

From the docs for [`erlang:open_port/2`](http://www.erlang.org/doc/man/erlang.html#open_port-2):

```
{env, Env}
  This is only valid for {spawn, Command} and {spawn_executable,
  FileName}. The environment of the started process is extended using the
  environment specifications in Env.

  Env should be a list of tuples {Name, Val}, where Name is the name of an
  environment variable, and Val is the value it is to have in the spawned
  port process. Both Name and Val must be strings. The one exception is
  Val being the atom false (in analogy with os:getenv/1), which removes
  the environment variable.
```


#### [#4064] - (2015-12-08T19:20:02Z) - [String docs: link codepoints/graphemes to details](https://github.com/elixir-lang/elixir/pull/4064)

Currently, if you look at the docs of both functions, it's hard to tell what the difference is.

This should make it a bit better.

I'm not sure if this is the best way of linking to the module docs.

Another thing I considered but wasn't sure about (mostly because getting it right without ugly `\u‚Ä¶` values is a little fiddly): we could add the same example input, with different output, to the docs of both.


#### [#4066] - (2015-12-08T14:52:32Z) - [Fix bug in Macro.to_string. Fix #4065.](https://github.com/elixir-lang/elixir/pull/4066)

This fixes the `Access.get` case in `Macro.to_string` to put parenthesis when the left hand side operand is an application.
This fixes #4065.
It does add unneeded parentheses for cases like

``` elixir
Macro.to_string(quote do: Dict.put(%{}, "foo", "bar")["foo"])
```

If this is an issue, I can work on it.


#### [#4052] - (2015-12-08T10:57:52Z) - [Added support for cursor operations and a color helper to IO.ANSI.](https://github.com/elixir-lang/elixir/pull/4052)



#### [#4061] - (2015-12-07T22:40:35Z) - [Clarify codepoint/grapheme in String docs](https://github.com/elixir-lang/elixir/pull/4061)

Looked into this and found the examples less clear than they could be about this distinction.


#### [#4063] - (2015-12-07T21:22:22Z) - [String.split docs: codepoints -> graphemes](https://github.com/elixir-lang/elixir/pull/4063)

``` elixir
iex> string = "\u0065\u0301"
"√©"
iex> String.codepoints(string)
["e", "ÃÅ"]
iex> String.split(string, "", trim: true)
["√©"]
```


#### [#4062] - (2015-12-07T21:21:11Z) - [String.slice docs: codepoints -> graphemes](https://github.com/elixir-lang/elixir/pull/4062)

Looks like this uses graphemes, not codepoints: https://github.com/elixir-lang/elixir/compare/master...henrik:patch-6#diff-22d92528e5319c6e47e28d62cbff5be7R1347

``` elixir
iex> string = "\u0065\u0301"
"√©"
iex> String.codepoints(string)
["e", "ÃÅ"]
iex> String.slice(string, 0, 1)
"√©"
```


#### [#4049] - (2015-12-07T20:16:12Z) - [Make import with conflicting options to raise](https://github.com/elixir-lang/elixir/pull/4049)

Currently, `import` silently ignores `:except` option if `:only` as a keyword list is given:

``` elixir
iex> import String, only: [starts_with?: 2], except: [starts_with?: 2]
nil
iex> starts_with?("a", "a")
true
```

Though `only: :functions` and `only: :macros` with `:except` are still valid.


#### [#4058] - (2015-12-07T15:41:55Z) - [Add specs and enhance docs for Mix.Generator](https://github.com/elixir-lang/elixir/pull/4058)

I added `@spec`s to the functions in `Mix.Generator` and examples to the docs for those functions.


#### [#4057] - (2015-12-07T13:51:32Z) - [Clarify the new default behaviour for protocol consolidation](https://github.com/elixir-lang/elixir/pull/4057)



#### [#4056] - (2015-12-07T13:03:20Z) - [Specs for functions in Mix.Project and a couple of docs polishings](https://github.com/elixir-lang/elixir/pull/4056)

I added `@spec`s to all the public functions in `Mix.Project`; I did this because I was confused about how `Mix.Project.in_project/3-4` works and I had to read the source to understand it (specifically, what the `fun` argument takes as the only argument). I think specs can make things clearer overall - that is, if there was no particular reason not to have them here :).

Also, I enhanced the docs for `Mix.Project.in_project/3-4` for the reasons described above and added a test for this same function to test that the result of the function is indeed the result of the invocation of the argument `fun`.

Let me know if I can do anything else!


#### [#4053] - (2015-12-07T09:09:52Z) - [Fix edge case in Path.expand. Fix #4050.](https://github.com/elixir-lang/elixir/pull/4053)

This patch handles cases such as

``` elixir
Path.expand("/foo/../..")
```

which currently fail as described in #4050.
I also added a test for this particular case.


#### [#4054] - (2015-12-06T18:15:56Z) - [Fix typo: ArguementError -> ArgumentError](https://github.com/elixir-lang/elixir/pull/4054)



#### [#4047] - (2015-12-05T09:43:13Z) - [Map.take/2, Map.drop/2, Map.split/2 missing spec](https://github.com/elixir-lang/elixir/pull/4047)

Maybe `[key]` should be `Enum.t` since that is what would actually be accepted?


#### [#4046] - (2015-12-04T07:58:44Z) - [Properly handle import with invalid options](https://github.com/elixir-lang/elixir/pull/4046)

Closes #4043.


#### [#4045] - (2015-12-03T22:42:55Z) - [Documentation fixes](https://github.com/elixir-lang/elixir/pull/4045)



#### [#4040] - (2015-12-03T15:06:41Z) - [Implement Enum.with_index/2](https://github.com/elixir-lang/elixir/pull/4040)

Proposal at #4039
### TODO:
- [x] Implement `Stream.with_index/2`


#### [#3518] - (2015-12-03T10:48:07Z) - [Add rebar3 manager](https://github.com/elixir-lang/elixir/pull/3518)

Compilation doesn't work yet, we are waiting for rebar3 to add a way to specify dependency build directory. We may use an archive instead of an escript for rebar3 if that makes it easier. /cc @tsloughter


#### [#4036] - (2015-12-03T08:28:50Z) - [Raise error for incompatible OptionParser options](https://github.com/elixir-lang/elixir/pull/4036)

- supplying :switch together with :strict raises an error.
- closes #4035.


#### [#4034] - (2015-12-02T22:36:34Z) - [Reword OptionParser moduledoc](https://github.com/elixir-lang/elixir/pull/4034)

- make the return value clearer by presenting it as a list,
- introduce `:switches` before `:strict`,
- remove the documented distinction between `:undefined` and `:invalid`
  as it seems to be an implementation detail,
- indicate how to use `:keep` with non-string types.


#### [#4032] - (2015-12-01T22:18:27Z) - [fix grammar:  does -> do.](https://github.com/elixir-lang/elixir/pull/4032)

That is, english grammar, not elixir grammar :)


#### [#4030] - (2015-12-01T20:42:44Z) - [Add System.time_offset/0-1](https://github.com/elixir-lang/elixir/pull/4030)

This PR adds the `System.time_offset/0-1` functions discuessed in #4018 by @lexmag and @fishcakez.


#### [#4029] - (2015-12-01T20:18:54Z) - [Adding Code For Diagnostics To Windows Batch Files](https://github.com/elixir-lang/elixir/pull/4029)

Adding a new test at the top of the Windows batch files to enable an end-user to easily see the output of the various Elixir batch files. This will make figuring out issues with the Win batch files a bit easier.


#### [#4022] - (2015-12-01T19:59:16Z) - [Add --mirror option to mix local.{rebar,hex} tasks](https://github.com/elixir-lang/elixir/pull/4022)

This PR tries to fix the issue #4020 

Now it's possible to use the `--mirror` option for `mix local.hex` and `mix local.rebar` tasks.

Please let me know what do you think.

/cc @ericmj 


#### [#4024] - (2015-12-01T15:19:08Z) - [Add monotonic_time, system_time and unique_integer to System](https://github.com/elixir-lang/elixir/pull/4024)

Implements #4018.

The implementation is pretty straightforward, I'm just not sure about the docs: should they be more specific? Should they just point to the docs of the functions in the `:erlang` module?

(also, is `:erlang.time_unit` ok in the `@spec` or should I replicate the type in the `System` module?)


#### [#4023] - (2015-12-01T13:16:56Z) - [Fix typos in Elixir moduledocs](https://github.com/elixir-lang/elixir/pull/4023)



#### [#4017] - (2015-11-30T17:58:05Z) - [Improve the docs for File.Stat](https://github.com/elixir-lang/elixir/pull/4017)

`gid` - The entry was misleading as it incorrectly implied that the
`gid` indicates the user's group, whereas the `gid` can potentially be
for any group, even one that the user-owner doesn't belong to.


#### [#4012] - (2015-11-29T19:18:43Z) - [quick changelog 1.2 edits](https://github.com/elixir-lang/elixir/pull/4012)

just a few things noticed when reading the changelog
hope it helps


#### [#4011] - (2015-11-29T08:32:54Z) - [Reword confusing `build_path` documentation.](https://github.com/elixir-lang/elixir/pull/4011)

See 7963398aaf448f7113b94ecd27d0fc6604d83fd0 for background.


#### [#4010] - (2015-11-28T23:01:24Z) - [Make Macro.to_string/1 consistent with Kernel.inspect/1 for bitstrings](https://github.com/elixir-lang/elixir/pull/4010)

Closes #3898.


#### [#4007] - (2015-11-28T19:09:30Z) - [Don't print the result of the 'pwd' helper.](https://github.com/elixir-lang/elixir/pull/4007)

This would previously print the 'pwd' string followed by the command's `:ok`
result. This change suppresses the `:ok:` in the same way as similar helpers.


#### [#4008] - (2015-11-28T19:09:14Z) - [Only expand Erlang modules when ':' is a prefix.](https://github.com/elixir-lang/elixir/pull/4008)

Previously, inputs like 'Enum:' would trigger Erlang module expansion.


#### [#4006] - (2015-11-28T18:41:22Z) - [Explain IO devices maintain position](https://github.com/elixir-lang/elixir/pull/4006)

This adds information to the `IO` docs about devices maintaining the position, and a way to change it for files (e.g. rewind):

```
  IO devices maintain their position, that means subsequent calls to any
  reading or writing functions will strart from the place when the device
  was last accessed. Position of files can be changed using the
  `:file.position/2` function.
```


#### [#4005] - (2015-11-28T14:37:26Z) - [Typo in CHANGELOG.md](https://github.com/elixir-lang/elixir/pull/4005)

If the keys are multiple of million then it needs pluralizing to millions. If the keys are just 1 million, then the phrase should be "dozens to a million keys"


#### [#4003] - (2015-11-27T22:50:38Z) - [Typo in CHANGELOG.md](https://github.com/elixir-lang/elixir/pull/4003)

I


#### [#4000] - (2015-11-27T06:43:56Z) - [Fixed typo in supervisor docs](https://github.com/elixir-lang/elixir/pull/4000)



#### [#3997] - (2015-11-26T11:01:31Z) - [Print line number when indentation level mismatch in doctest](https://github.com/elixir-lang/elixir/pull/3997)

Fixes #3917 


#### [#3996] - (2015-11-26T10:55:56Z) - [One reference link label per line](https://github.com/elixir-lang/elixir/pull/3996)

Now each reference link labels use one line between each other in IEx. Fixes #3960 


#### [#3945] - (2015-11-25T23:13:46Z) - [Support for proxy auth with mix calls to httpc](https://github.com/elixir-lang/elixir/pull/3945)

This PR ensures that calls to `:httpc.request` using the `:mix` profile supply proxy authentication if they can be read from environment variables.

My use case is deploying elixir apps to an internal deployment of Cloud Foundry behind a firewall, limiting external connections to proxies. Hopefully others will find this useful!


#### [#3991] - (2015-11-25T12:02:35Z) - [IEx.Info tests](https://github.com/elixir-lang/elixir/pull/3991)

I added tests for all the implementations of `IEx.Info` and for the `i/1` IEx helper.


#### [#3990] - (2015-11-24T20:10:22Z) - [Enhance the docs for Process.put/2](https://github.com/elixir-lang/elixir/pull/3990)

This is mentioned in the Erlang docs for `put/2` but not in the Elixir ones.


#### [#3989] - (2015-11-24T20:07:26Z) - [Specify that keyword list is made of 2-elem tuples](https://github.com/elixir-lang/elixir/pull/3989)



#### [#3972] - (2015-11-24T11:55:49Z) - [Added verbose pry functionality](https://github.com/elixir-lang/elixir/pull/3972)

Showing place in code where `IEx.pry` was invoked

![314133a5db](https://cloud.githubusercontent.com/assets/1163074/11252653/fdf5b038-8e3f-11e5-9b10-fa8df96e0e61.png)

After debugging some code, i felt that it would be greate to see where `IEx.pry` was invoked like ruby pry doing.


#### [#3984] - (2015-11-23T23:28:14Z) - [Use List.foldr in Console metadata handling](https://github.com/elixir-lang/elixir/pull/3984)

This PR changes the `Logger.Backends.Console` private function `take_metadata`, which is a `Keyword.take` that keeps the same order as the keys passed in the args‚Ä¶

Instead of `reduce + reverse`, thought about using `List.foldr` instead. Seems legit?

[Tried some basic measure of the two approaches in this gist](https://gist.github.com/rodrigues/007aa9ff10a12bca4642). It's my first `profile.fprof` hehe‚Ä¶ but if I'm not nuts, it reads easier and runs on ~70% of the original time ü§ì Didn't try many scenarios though.


#### [#3981] - (2015-11-23T23:01:52Z) - [Default args in defdelegate](https://github.com/elixir-lang/elixir/pull/3981)

Right now, using default args (`\\`) with `defdelegate` results in an error that looks like this:

```
** (CompileError) iex:2: function '\\\\'/2 undefined
    (stdlib) lists.erl:1337: :lists.foreach/2
    (stdlib) erl_eval.erl:669: :erl_eval.do_apply/6
       (iex) lib/iex/evaluator.ex:117: IEx.Evaluator.handle_eval/5
```

The error is not very clear. I added some code that raises clearly when default arguments are used with `defdelegate`. Ideally, `\\` should be supported in `defdelegate`? If it should I can give it a shot later this week, but this seems like a good fix in the meantime.


#### [#3934] - (2015-11-23T11:16:35Z) - [First version of the i/1 IEx helper](https://github.com/elixir-lang/elixir/pull/3934)

I started working on a prototype for the `i/1` IEx helper discussed in the [mailing list](https://groups.google.com/forum/#!topic/elixir-lang-core/sBlrH4r_Gmk), on IRC and drafted in [whatyouhide/iex_info](https://github.com/whatyouhide/iex_info).

@josevalim this is clearly just a proof of concept, I opened a PR this early so that we can take a look at the direction this is taking. Wdyt?


#### [#3978] - (2015-11-23T10:46:19Z) - [Task module documentation improvements ](https://github.com/elixir-lang/elixir/pull/3978)



#### [#3973] - (2015-11-22T23:29:24Z) - [Don't escape underlines outside url in docs.](https://github.com/elixir-lang/elixir/pull/3973)

I noticed there's a bug when escaping underlines in urls in docs. All underlines in the whole line would be escaped, including valid markdown _italic_ outside the url.

```
iex> IO.ANSI.Docs.print "_click_ http://o_O.example.com" _bait_
_click_ http://o_O.example.com _bait_

:ok
```


#### [#3977] - (2015-11-22T08:32:12Z) - [Fix #3914: split IEx server/evaluator state to prevent unnecessary copying](https://github.com/elixir-lang/elixir/pull/3977)

- Splits `IEx.State` into `IEx.State` (which contains `cache`, `counter`, and `prefix`)  and `IEx.Evaluator.State` (which contains `binding`, `scope`, and `env`).
- `IEx.State` continues to be stored in the server and passed to the evaluator
- `IEx.Evaluator.State` is stored in the evaluator to enhance performance when large values are stored
- Peeking at the environment is retrieved via message-passing from the evaluator, rather than simply returned from the server.

In my testing I noticed that `IEx.Server.current_env/0` didn't work with the new code, but it also seemed not to work without this patch, as well. Not sure what the intended use of that function is. Other than that, everything seems to work as expected and all iex tests pass.


#### [#3976] - (2015-11-20T09:27:54Z) - [fix tuple module docs](https://github.com/elixir-lang/elixir/pull/3976)



#### [#3974] - (2015-11-19T13:49:24Z) - [fix typos and spells in Version module](https://github.com/elixir-lang/elixir/pull/3974)



#### [#3969] - (2015-11-17T11:10:56Z) - [remove additional pipes from Stream docs](https://github.com/elixir-lang/elixir/pull/3969)



#### [#3968] - (2015-11-17T10:31:31Z) - [fix spellings and grammar typo in string module](https://github.com/elixir-lang/elixir/pull/3968)



#### [#3967] - (2015-11-16T22:31:14Z) - [The OptionParser parses options, not argumemnts](https://github.com/elixir-lang/elixir/pull/3967)

Fixed the docs of the OptionParser module. 

In the first line was written, the OptionParser [...] parse command line arguments, which is a imprecise term. More precise is, the OptionParser [...] parse command line options.


#### [#3965] - (2015-11-16T21:11:29Z) - [Added ./bin/elixir --info option #3947](https://github.com/elixir-lang/elixir/pull/3965)

With erlang version, elixir version, elixir revision short hash.
Also added elixir revision short hash to System.build_info().

```
$ ./bin/elixir --version        
Erlang/OTP 18 [erts-7.1] [source] [64-bit] [smp:4:4] [async-threads:10] [hipe] [kernel-poll:false]

Elixir 1.2.0-dev (6b14048)
```

Resolves #3947 


#### [#3964] - (2015-11-16T12:45:39Z) - [tests(Kernel.WarningTest): test for pipeline without parentheses](https://github.com/elixir-lang/elixir/pull/3964)



#### [#3957] - (2015-11-15T12:50:26Z) - [Add ANSI escape sequences for extended colors](https://github.com/elixir-lang/elixir/pull/3957)

https://en.wikipedia.org/wiki/ANSI_escape_code#graphics

![](https://dl.dropboxusercontent.com/s/9qfjbknezk41t49/2015-11-11%20at%2017.23.png)


#### [#3958] - (2015-11-13T10:42:45Z) - [Throw an error for -> with an empty right-hand side - take 2](https://github.com/elixir-lang/elixir/pull/3958)

Alright @josevalim, here's the new PR (with the changed error message as well). Just a question: should we raise instead of warning? I chose to raise because there are no warnings in the parser and I wasn't sure about adding the first but I can change it if you want.


#### [#3943] - (2015-11-13T10:20:58Z) - [Introduce with](https://github.com/elixir-lang/elixir/pull/3943)

Closes #3902.


#### [#3953] - (2015-11-12T08:39:53Z) - [Integer docs](https://github.com/elixir-lang/elixir/pull/3953)

- Add examples to Integer.is_odd/1 and Integer.is_even/1
  Ôøº- rename tests


#### [#3948] - (2015-11-12T08:28:15Z) - [implement Enum.empty? as Enum.count == 0](https://github.com/elixir-lang/elixir/pull/3948)



#### [#3944] - (2015-11-07T10:58:07Z) - [logger.ex: doc typo](https://github.com/elixir-lang/elixir/pull/3944)



#### [#3942] - (2015-11-06T20:25:39Z) - [Add file to logger metadata](https://github.com/elixir-lang/elixir/pull/3942)

In [this StackOverflow question](https://stackoverflow.com/questions/33540776/how-to-get-line-numbers-in-console-outputs-in-elixir), Jos√© said it would be possible to add the current file to the logger format, but not all keys from `__CALLER__` are available.

I added the `:file` key since I think it is a useful addition. I also added a list of available keys to the docs, because I was missing them when I researched. Let me know what you think!


#### [#3941] - (2015-11-06T11:46:18Z) - [Fix a typo in GenServer Documentation](https://github.com/elixir-lang/elixir/pull/3941)



#### [#3938] - (2015-11-04T20:13:26Z) - [Use ~S in Supervisor's moduledoc, fixes #3937](https://github.com/elixir-lang/elixir/pull/3938)



#### [#3928] - (2015-10-29T16:58:34Z) - [Updated documentation of Enum.all? and Enum.any? to reflect the actua‚Ä¶](https://github.com/elixir-lang/elixir/pull/3928)

‚Ä¶l implementation
resolves #3927 I submitted today.


#### [#3922] - (2015-10-28T13:31:44Z) - [Correct mime type as 'x-www-form-urlencoded'](https://github.com/elixir-lang/elixir/pull/3922)



#### [#3923] - (2015-10-28T12:42:28Z) - [Fix erroneous formatting in the docs for 'try'](https://github.com/elixir-lang/elixir/pull/3923)



#### [#3921] - (2015-10-28T09:43:16Z) - [Fix formatting of example](https://github.com/elixir-lang/elixir/pull/3921)



#### [#3919] - (2015-10-27T17:44:42Z) - [Add `new/1` and `new/2` to Map and MapSet (mirroring the Keyword variant)](https://github.com/elixir-lang/elixir/pull/3919)

See discussion at https://github.com/elixir-lang/elixir/issues/3855


#### [#3920] - (2015-10-27T16:35:31Z) - [Correct message for invalid indentation in doc test when is "1 space"](https://github.com/elixir-lang/elixir/pull/3920)



#### [#3910] - (2015-10-25T23:44:17Z) - [Implemented Mix.Shell.Quiet](https://github.com/elixir-lang/elixir/pull/3910)

Mix.Shell.Quiet is like Mix.Shell.IO, but it prints much less information out. Useful when the output is not important.

Solves #3167.


#### [#3912] - (2015-10-25T10:18:43Z) - [Pipe operator simplication](https://github.com/elixir-lang/elixir/pull/3912)

I have removed |>  at the end of the lines,
this only happened twice and one is an example, and I think it's inconsistent.

also code has been simplified using |>, avoiding creating unnecessary variables.

the last fix deals with some formatting issues in Path test: space missing before == , and lines over 100 chars


#### [#3909] - (2015-10-24T08:20:10Z) - [Documentation improvement to GenEvent](https://github.com/elixir-lang/elixir/pull/3909)

Properly documented the possibility of adding an handler with an
unique id attached when multiple instances of the same module must
be attached.

Solve issue #3760


#### [#3908] - (2015-10-24T07:54:55Z) - [Remove needless :stop clause, tidy up bad owner error message in Task](https://github.com/elixir-lang/elixir/pull/3908)



#### [#3907] - (2015-10-23T21:38:40Z) - [fix(Mix.Dep.Umbrella): prevent error when app is missing mix.exs](https://github.com/elixir-lang/elixir/pull/3907)

Previously, when using an umbrella app, if a directory was empty when
running a mix task the following error was displayed:

> *\* (Mix) Could not find a Mix.Project, please ensure a mix.exs file
> is available"

Since git does not keep directories, it is common to see this issue when
switching branches on an umbrella application where some branches have a
particular app inside `apps` and other branches don't.

This commit checks for the presence of `mix.exs` and uses directories
containing the file as an app in the umbrella application

Please note a `.gitkeep` file is used to allow for an empty directory in the fixtures.


#### [#3906] - (2015-10-23T20:30:31Z) - [Clarify Float.ceil/floor handling of decimals](https://github.com/elixir-lang/elixir/pull/3906)

The `floor` example was less helpful than it could be since it showed behaviour that was no different from what `round` would do.

Since I "maxed out" the `floor` example, I also "min'd out" the `ceil` example for good measure.


#### [#3349] - (2015-10-23T11:23:05Z) - [eex engine raises on missing assigns](https://github.com/elixir-lang/elixir/pull/3349)

resolve #3327 
The code is almost the same with that in phoenix_html except I changed `fetch_assign` to `fetch_assign!`


#### [#3901] - (2015-10-23T08:32:31Z) - [Support new gen:stop in GenEvent and GenServer](https://github.com/elixir-lang/elixir/pull/3901)

added stop/3 to GenServer and GenEvent using :gen.stop


#### [#3900] - (2015-10-22T23:37:50Z) - [Do not start apps on "recompile" in an IEx session with --no-start](https://github.com/elixir-lang/elixir/pull/3900)

Closes #3899.


#### [#3895] - (2015-10-22T20:32:43Z) - [Provide helpful error from `Task` functions when called from wrong process](https://github.com/elixir-lang/elixir/pull/3895)

I paired with @katiespiders on this fix for #3894.  A couple things to note:
- @josevalim asked for TODO comments about the fact that the `nil` check should be removed in elixir 1.3.  We did that originally but then I thought it would be better to encode the TODO as part of the tests so that they notify when the Elixir version is bumped to `1.3.x`.  It would probably be better to have `only_until_version` warn instead of fail when the test passes on 1.3 (as you'll want to be able to bump the version to 1.3 without breaking the build) but I wasn't sure of a good way to do that -- `Logger.warn` didn't print anything (I assume you are capturing logs or something).  Let me know if you'd like to see that work differently or if you'd prefer we roll back to the TODOs.  I added the `only_until_version` thing as its own commit so we can easily discard it.
- There were quite a number of tests that created `Task` structs manually and therefore would start failing when the nil check is removed in Elixir 1.3.  We updated all of those so that they won't suddenly start failing in the future, but that necessitated touching a lot more of `task_test.exs` than we wanted to.  It might be worth updating the tests in the future to always create tasks via `Task.async` so that they don't need to be aware of additional fields like happened here.

Please let @katiespiders and I know if there's anything else you'd like to see here.


#### [#3893] - (2015-10-22T11:38:42Z) - [Validate git options and warn on conflicting ref, branch or tags](https://github.com/elixir-lang/elixir/pull/3893)

https://github.com/elixir-lang/elixir/issues/3885 is the relevant issue. This commit warns user about invalid git options, but does not break existing apps for now. Added todo that this will need to be changed at 2.0 to raise.


#### [#3891] - (2015-10-20T17:55:48Z) - [improve doc for restart of supervisor spec](https://github.com/elixir-lang/elixir/pull/3891)

The reason I think this change is needed is that I'm not familiar with Erlang/OTP, so I was confused about the word `terminated` in `shutdown`. I wondered if it's termination before restart or just stop(will not restart). I looked up in [Erlang's doc](http://www.erlang.org/doc/man/supervisor.html), it says `restart defines when a terminated child process is to be restarted.`, which is more clear.


#### [#3886] - (2015-10-20T05:12:50Z) - [Fixing misspelling of "suppress" in docs](https://github.com/elixir-lang/elixir/pull/3886)



#### [#3884] - (2015-10-19T21:30:27Z) - [Grammar fix for error message returned by :elixir_aliases.format_error/2](https://github.com/elixir-lang/elixir/pull/3884)

Minor grammar fix for an error message in compile-time.


#### [#3883] - (2015-10-18T22:20:08Z) - [Mix.Task moduledoc update: correction](https://github.com/elixir-lang/elixir/pull/3883)

Corrected:
- showed => shown
- Multiline backtick rendering issues (see screenshot below)

<img width="731" alt="screen shot 2015-10-18 at 23 14 51" src="https://cloud.githubusercontent.com/assets/88744/10567010/9cbc9b1a-75ee-11e5-9598-e443f47b63df.png">


#### [#3882] - (2015-10-18T22:01:47Z) - [improve error message on requiring module from the context it was defined in](https://github.com/elixir-lang/elixir/pull/3882)

Issue: https://github.com/elixir-lang/elixir/issues/3881

I think there are two slightly related cases, that may share the same explanation. I tried to make it as clear as possible with wording, but if you do have better idea please let me know and I can amend.


#### [#3880] - (2015-10-17T21:57:59Z) - [Fix innacurate iex output](https://github.com/elixir-lang/elixir/pull/3880)

Uses a string key instead of an atom key in order to force the iex
output to show the list of tuples rather than a keyword list.

The current documentation example shows an output that is equivalent to the actual output of iex, but is not the literal output. That is, if you run: `quote do: %{:a => :b, c: :d}` in iex, the literal output is `{:%{}, [], [a: :b, c: :d]}`. The keyword list is the same as `[{:a, :b}, {:c, :d}]` in meaning but the output looks different.

This change uses a string as the key for the first item in the map, which will output a list of tuples rather than a keyword list.


#### [#3878] - (2015-10-17T11:40:56Z) - [Don't block Task.Supervisor when starting tasks](https://github.com/elixir-lang/elixir/pull/3878)



#### [#3877] - (2015-10-16T20:35:27Z) - [Properly check for atrribute value on redefining](https://github.com/elixir-lang/elixir/pull/3877)



#### [#3876] - (2015-10-16T16:27:54Z) - [Update enum.ex](https://github.com/elixir-lang/elixir/pull/3876)



#### [#3874] - (2015-10-16T15:33:49Z) - [Include underscore/1 & camelize/1 in the Macro module](https://github.com/elixir-lang/elixir/pull/3874)

Move underscore/1 and camelize/1 from the Mix.Utils module into the Macro module. The Mix.Utils functions have been noted for deprecation and call the Macro functions.


#### [#3875] - (2015-10-16T11:31:32Z) - [Fix code example in the document for quote macro](https://github.com/elixir-lang/elixir/pull/3875)

The code example in section `Hygiene in imports` wouldn't compile, because `size/1` function was removed from `Kernel`. So I updated `Hygiene` with `length/1` defined in `Kennel` for lists.

The code example in `Lazy` can produce a correct result, but since `size/1` function is not available in `Kennel`, the `import Kernel, except: [size: 1]` statement would be redundant. So I updated `Lazy` with `length/1` function as well. Luckily since `length/1` is also define in `String` for strings,  this example still demonstrates the same behavior.


#### [#3870] - (2015-10-15T11:42:26Z) - [Add clarification to comprehension match example](https://github.com/elixir-lang/elixir/pull/3870)

The current example is fine, especially with an understanding of the
matching that is happening. However, to make the example more explicit, the
name of the unmatched pair should be different.


#### [#3871] - (2015-10-15T11:37:23Z) - [Add link to monitor/2 example](https://github.com/elixir-lang/elixir/pull/3871)

Because copying the entire example would be silly.


#### [#3867] - (2015-10-14T21:07:19Z) - [Tidy up implementation for warning on @attribute redefinition](https://github.com/elixir-lang/elixir/pull/3867)

Use more descriptive name for variable and explicitly show when warning isn't generated.


#### [#3865] - (2015-10-14T17:09:23Z) - [More helpful error for keyword list to_string](https://github.com/elixir-lang/elixir/pull/3865)

Replaces the confusing ":unicode.characters_to_binary([a: 1])" error you would get when interpolating a keyword list. Developers used to Ruby may expect this to just work.

As discussed here: https://groups.google.com/forum/#!topic/elixir-lang-core/ZmxsVo4JO5E


#### [#3752] - (2015-10-14T16:38:46Z) - [New config, :warn_test_pattern](https://github.com/elixir-lang/elixir/pull/3752)

Display warning for files matching :warn_test_pattern that are not
matching :test_pattern. Default config,"*_test.ex".


#### [#3651] - (2015-10-14T16:36:43Z) - [Iex m command](https://github.com/elixir-lang/elixir/pull/3651)

This patch implements two helper commands 

m - lists all loaded modules and the file path to their object code. 

m/1 - Lists some of the available information about a module. For example: 

iex(2)> m Atom
:module
  Atom
:object_file
  bin/../lib/elixir/ebin/Elixir.Atom.beam
:source
  lib/elixir/lib/atom.ex
:version
  [297983237527422559469627991153554784472]
:compile_time
  2015-8-31 1:48:12
:compile_options
  [:debug_info]

I'm pretty sure that the atoms as labels isn't for everyone's taste, so the code can be easily changed
to better names for those labels. Just let me know. 


#### [#3793] - (2015-10-14T15:56:22Z) - [[#3707] Warn when @attributes are redefined](https://github.com/elixir-lang/elixir/pull/3793)

Attributes such as `@doc` and `@moduledoc` should emit warnings when they
are redefined. For example:

``` elixir
@doc "first"
@doc "second"
```

This should emit a warning to the user, because the doc tag will be
overwritten with the value ‚Äúsecond‚Äù.

This implementation throws a lot of false positives during Elixir‚Äôs
bootstrap compile phase. I‚Äôve had trouble debugging it. I think it may
be happening because `@attributes` are treated differently during the
bootstrap phase. Any help would be appreciated.

See #3707 for more details.


#### [#3866] - (2015-10-14T13:43:53Z) - [Make workaround for dialyzer warnings suppression on raise](https://github.com/elixir-lang/elixir/pull/3866)



#### [#3863] - (2015-10-13T15:51:41Z) - [Document limits of `Float.parse/1`.](https://github.com/elixir-lang/elixir/pull/3863)

This PR clarifies the documentation for `Float.parse/1` and adds test assertions to demonstrate the limits enforced by erlang/IEEE 754-1985 double precision floats. See #3862 for more context. /cc @josevalim 


#### [#3844] - (2015-10-07T19:36:22Z) - [Display docs for types with t/1](https://github.com/elixir-lang/elixir/pull/3844)

This is for issue #3830 and a first attempt at displaying the type documentation with the `t` helper. It currently works for `t/1` and prints the module name after each type so I'm not sure if that's desired.

Looking for feedback on whether the direction I'm headed is correct. Thanks!


#### [#3845] - (2015-10-07T00:25:20Z) - [IEx callback documentation (squashed)](https://github.com/elixir-lang/elixir/pull/3845)



#### [#3846] - (2015-10-06T22:52:11Z) - [Fix bitstring splicing for `bytes` type modifier](https://github.com/elixir-lang/elixir/pull/3846)



#### [#3841] - (2015-10-06T16:49:36Z) - [Add default docs for delegate methods](https://github.com/elixir-lang/elixir/pull/3841)

Following the discussions on
https://groups.google.com/forum/?fromgroups=#!topic/elixir-lang-core/bP_cJFFls84

This PR introduces a default `@doc` for delegated methods

``` elixir
    defmodule Delegator do
      defdelegate func1, to: Delegated
      @doc "Delegator func2 doc"
      defdelegate func2, to: Delegated
    end

    defmodule Delegated do
      def func1, do: 1
      def func2, do: 2
    end
```

If you don't define docs in the delegator, you get a pointer to the implementation

``` elixir
iex> h Delegator.func1
See Delegated.func1/0
```

If you define docs, you get that

``` elixir
iex> h Delegator.func2
Delegator func2 doc
```

Thanks @josevalim and @mgwidmann for the pointers, and the amazing community :+1: 


#### [#3840] - (2015-10-06T03:50:19Z) - [Transplant Behaviour module docs to @behaviour](https://github.com/elixir-lang/elixir/pull/3840)

Most of these docs are from the 1.0 Behaviour module docs, but
those were seemingly lost at some point during the switch to
@callback. I'm not sure whether it is better to put them on
@behaviour or @callback, but I placed them on @behaviour. I'd
rather see a "Behaviour" page that has this information, not
just something randomly stuck in Module or Kernel.Typespec.

If it should be its own page, can you show me how to add new
pages to the Elixir documentation?


#### [#3833] - (2015-10-05T19:37:36Z) - [List `as_boolean/1` under `Kernel.Typespec` built-ins.](https://github.com/elixir-lang/elixir/pull/3833)

Updates the `Kernel.Typespec` moduledoc to include `as_boolean/1` in the built-ins list.

Not 100% sure the definition is correct, if it is, then this closes #3788. 


#### [#3836] - (2015-10-05T16:51:50Z) - [change irc:// URI to freenode's webchat](https://github.com/elixir-lang/elixir/pull/3836)

most IRC clients don't seem to support irc://, obviously not the command-line ones. additionally, GitHub doesn't consider irc:// a hyperlink so that's less useful but it does hyperlink this (and we're on freenode)


#### [#3832] - (2015-10-04T20:28:26Z) - [Add `Macro.traverse/4` pre/post-order traversal at the same time](https://github.com/elixir-lang/elixir/pull/3832)

## Proposal

My proposal is the following:

``` elixir
Macro.traverse(ast, accumulator, pre_function, post_function)
```

The specification almost is same as `Macro.prewalk/3` and `Macro.postwalk/3`, difference is that `Macro.traverse` is received both pre/post-order functions as arguments.
The third argument `pre_function` specification is same as `Macro.prewalk/3`'s third argument.
The forth argument `post_function` specification is same as `Macro.postwalk/3`'s third argument.
## Example

``` iex
iex(1)> Macro.traverse(quote(do: :foo), 0,
...(1)>   fn (ast, acc) -> IO.puts "#{acc} pre"; IO.inspect ast; {ast, acc + 1} end,
...(1)>   fn (ast, acc) -> IO.puts "#{acc} post"; IO.inspect ast; {ast, acc - 1} end)
0 pre
:foo
1 post
:foo
{:foo, 0}
```
## References

https://groups.google.com/forum/?utm_medium=email&utm_source=footer#!topic/elixir-lang-core/IXNHMUh304Q


#### [#3805] - (2015-10-04T13:55:34Z) - [Add NFC support to String.normalize/2](https://github.com/elixir-lang/elixir/pull/3805)



#### [#3823] - (2015-10-04T13:47:30Z) - [Add IEx width option for larger terminal screens.](https://github.com/elixir-lang/elixir/pull/3823)

Would be nice to be able to change the column width in the `.iex.exs` file to allow for custom width output of documentation. This PR should allow that customization while still falling back to `:io.columns` when the terminal window is smaller.


#### [#3827] - (2015-10-04T13:40:41Z) - [Omit `else` option in `if` and `unless` clauses if it returns `nil`](https://github.com/elixir-lang/elixir/pull/3827)

Disclosure: working on a comprehensive style guide.


#### [#3829] - (2015-10-04T13:39:06Z) - [Add more info about :via registry to GenServer](https://github.com/elixir-lang/elixir/pull/3829)

Trying to resolve #3761


#### [#3825] - (2015-10-03T11:25:00Z) - [Update special_forms.ex](https://github.com/elixir-lang/elixir/pull/3825)

I a word


#### [#3817] - (2015-10-02T21:53:18Z) - [Fixed typo/grammar in Supervisor @doc](https://github.com/elixir-lang/elixir/pull/3817)

The first three commits are just me reverting and resyncing to upstream master.  The fourth is the single letter change to the Supervisor doc.  


#### [#3819] - (2015-10-02T21:00:44Z) - [Fix small typo in docs for File.rename/2](https://github.com/elixir-lang/elixir/pull/3819)

See title :wink: 


#### [#3807] - (2015-10-01T15:06:09Z) - [Informative error message when passing a non atom value to use](https://github.com/elixir-lang/elixir/pull/3807)

I was stuck with an unhelpful error this morning. It was unhelpful because I was passing a variable that clearly referred to an atom. I realise now that this is due to it working at compile time but I only realised because the error message for require was much more helpful

**use error**

> (ArgumentError) invalid arguments for use, expected an atom or alias as argument

**require error**
(CompileError) meta.exs:2: invalid argument for require, expected a compile time atom or alias, got: 42

This pull request makes the use error also ask for a compile time atom, instead of just an atom.


#### [#3810] - (2015-10-01T14:38:39Z) - [Optimize `Keyword.new/2` function](https://github.com/elixir-lang/elixir/pull/3810)

The timings for 200 elements enumerable:

```
new:      100000   73.76 ¬µs/op
old:       10000   1085.19 ¬µs/op
```

Apparently, [`:lists.foldr`](https://github.com/elixir-lang/elixir/pull/3218#discussion_r27350819) didn't go well for us last time, that's why `foldl` was used at first place and this time.


#### [#3811] - (2015-10-01T14:28:32Z) - [Optimize Enum.map/2 for lists](https://github.com/elixir-lang/elixir/pull/3811)

When writing an article about lists I ventured into implementing couple of the core list functions myself. I was surprised when I discovered that the current implementation of `Enum.map/2` is not optimal.

I came up with 3 options:
- using for comprehensions (currently used)
- using explicit recursion with accumulator
- using simple consing

The third option seems to be the fastest. That's also the one that is used by `:lists.map/2`

Tested implementations:

``` elixir
  def map_cons([head | tail], fun), do: [fun.(head) | map_cons(tail, fun)]
  def map_cons([], _fun), do: []

  def map_recurse(list, fun, acc \\ [])
  def map_recurse([head | tail], fun, acc), do: map_recurse(tail, fun, [fun.(head) | acc])
  def map_recurse([], _fun, acc), do: :lists.reverse(acc)

  def map_for(list, fun), do: for i <- list, do: fun.(i)
```

Results:

```
cons 100            500000   3.25 ¬µs/op
recurse 100         500000   3.27 ¬µs/op
for 100             500000   4.76 ¬µs/op
cons 1000            50000   30.57 ¬µs/op
recurse 1000         50000   32.59 ¬µs/op
for 1000             50000   43.51 ¬µs/op
cons 10000            5000   308.71 ¬µs/op
recurse 10000         5000   339.36 ¬µs/op
for 10000             5000   449.46 ¬µs/op
cons 100000            500   3135.30 ¬µs/op
recurse 100000         500   4178.06 ¬µs/op
for 100000             500   5025.42 ¬µs/op
```

[Full testing code](https://gist.github.com/michalmuskala/6a52648a72261220ccc8)

Performance gain is steadily around 30%. The difference is not huge (and probably less significant if you do any work inside the mapping function), but given how often `Enum.map/2` is used, I think this warrants the change.


#### [#3812] - (2015-10-01T14:25:31Z) - [Add demonstration for Enum.shuffle's randomness](https://github.com/elixir-lang/elixir/pull/3812)

Disclaimer: I have no idea what I'm doing when it comes to Elixir.

But! Today I ran `Enum.shuffle` without first running `:random.seed` and it shuffled an array correctly a couple of times, _not_ returning the same value each time.

```
iex(1)> list = [1,2,3,4,5]
[1, 2, 3, 4, 5]
iex(2)> Enum.shuffle(list)
[3, 2, 4, 1, 5]
iex(3)> Enum.shuffle(list)
[2, 3, 1, 5, 4]
iex(4)> Enum.shuffle(list)
[3, 5, 2, 4, 1]
```

So... I don't think we need to run `:random.seed()` here? I'm quite happy to be proven wrong here and learn something from the experience!


#### [#3806] - (2015-09-30T06:45:14Z) - [Fix default value of :time option in File.Stat docs](https://github.com/elixir-lang/elixir/pull/3806)



#### [#3801] - (2015-09-29T21:48:19Z) - [Enum: corrections in  private functions](https://github.com/elixir-lang/elixir/pull/3801)

this is the second part of changes introduced in commit ced1095e177c71b4022c1dc1cd209673b2f872d0

this one does:
- rename collection with enumerable.
- line wrapping so the whole file (with the exceptions of the docs examples) fit in 72 chars.

---

second part of https://github.com/elixir-lang/elixir/pull/3792
which I didn't include originally to reduce the size of the commit.. 


#### [#3796] - (2015-09-29T11:58:59Z) - [Add an example for IO.gets](https://github.com/elixir-lang/elixir/pull/3796)



#### [#3802] - (2015-09-29T10:22:00Z) - [Add comments to the first GenEvent example.](https://github.com/elixir-lang/elixir/pull/3802)

I think these comments would help people understand what it going on in the example better.


#### [#3792] - (2015-09-28T20:35:19Z) - [Enum: several fixes](https://github.com/elixir-lang/elixir/pull/3792)

- Updates the terminology: what it was refereed as `collection` is now `enumerable` and `collectable`
- text wrap to 72 chars
- backticks added to `enumerable` and other variables.
- specs fixed
- Summaries improved
  - try to avoid the use of what it returns in the summary. 
- documentation for several functions corrected and improved, as well as examples.
- some variables in functions renamed.
- I have changed the use of `value` when it actually refered to elements in the Enumerable to `element`, but i had kept it when it was used for tuples, refering to `key - value`, even though value could be an enumerable.


#### [#3790] - (2015-09-28T12:30:48Z) - [removed obsolete type option from the GenEvent handler type](https://github.com/elixir-lang/elixir/pull/3790)

I think as the documentation is generated from the type spec that this is the only reference that needs removing


#### [#3789] - (2015-09-28T12:14:58Z) - [Configuration file now supported](https://github.com/elixir-lang/elixir/pull/3789)

I was confused by this section. Mix does have a config.exs file and wondered and so i believe this paragraph is outdated documentation.


#### [#3787] - (2015-09-28T07:51:26Z) - [Remove surrounding spaces in range example](https://github.com/elixir-lang/elixir/pull/3787)

this is the last example left, to comply with https://github.com/elixir-lang/elixir/pull/3786


#### [#3779] - (2015-09-28T07:47:09Z) - [Remove external links in summary and update docs for Port.](https://github.com/elixir-lang/elixir/pull/3779)

This is a fix for the open issue #3688 .

I tried to follow all the suggestions discussed in the thread (especially rephrasing the sentences from the Erlang doc).


#### [#3786] - (2015-09-27T20:57:48Z) - [Use same form for ranges in error messages what we use for `inspect/2`](https://github.com/elixir-lang/elixir/pull/3786)



#### [#3784] - (2015-09-27T20:57:04Z) - [Macro.to_string/2 : add test](https://github.com/elixir-lang/elixir/pull/3784)

test added as per @lexmag's [suggestion](https://github.com/elixir-lang/elixir/pull/3780/files#r40504458)


#### [#3785] - (2015-09-27T20:30:02Z) - [–°urrently `Kernel.struct!/2` raises only `KeyError`](https://github.com/elixir-lang/elixir/pull/3785)



#### [#3783] - (2015-09-27T16:04:56Z) - [Fix Range validation](https://github.com/elixir-lang/elixir/pull/3783)

- checks for lists when defining range
- replace (left .. right) with (first .. last) in error messages
  to use the same terminology used in the function definition
- add guards to Range.new/2
- add specs to Range.range?/1
- test added to check for lists in range.


#### [#3782] - (2015-09-27T16:03:17Z) - [Clarify instructions for building the docs](https://github.com/elixir-lang/elixir/pull/3782)

This just tripped me up.  If you follow the instructions above for building elixir itself, you're already _in_ the elixir directory, so ex_doc gets cloned inside it, which arguably _is_ what "containing folder" means... but then the paths don't work.

Looks like ex_doc needs to be alongside / in a sibling folder / to have the same parent, for it to work.

Also mention where to look for the results.


#### [#3780] - (2015-09-27T15:42:08Z) - [Fix Macro.to_string/2 to print ranges](https://github.com/elixir-lang/elixir/pull/3780)

this removes the spaces between the ranges and the periods

before:
iex> Macro.to_string(quote do: 1 .. 2 ) 
"1 .. 2"

now:
iex> Macro.to_string(quote do: 1 .. 2 ) 
"1..2"

consistent with Inspect
iex> inspect(1..2)  
"1..2"


#### [#3772] - (2015-09-26T16:23:26Z) - [Fix assertion errors with more than 1 pinned var](https://github.com/elixir-lang/elixir/pull/3772)

Fixes #3771 


#### [#3767] - (2015-09-26T15:55:19Z) - [Add String.is_equivalent/2 to test canonical Unicode equivalence](https://github.com/elixir-lang/elixir/pull/3767)

This allows Elixir to pass all the tests outlined in [&ldquo;The string type is broken&rdquo;](http://mortoray.com/2013/11/27/the-string-type-is-broken/).

Unicode normalization is done using Normalization Form D (NFD).


#### [#3777] - (2015-09-26T14:43:13Z) - [Update README.md](https://github.com/elixir-lang/elixir/pull/3777)

- update license new license (EPL removed)
- format lines to be 72 char long
- update erlang requirements

you can view how it renders (no difference); here: https://github.com/eksperimental/elixir/blob/update_readme/README.md


#### [#3776] - (2015-09-26T14:32:28Z) - [Add text Files to Docs.zip](https://github.com/elixir-lang/elixir/pull/3776)

Closes https://github.com/elixir-lang/elixir/issues/3775


#### [#3774] - (2015-09-26T12:35:30Z) - [License: Use NOTICE (remove LEGAL)](https://github.com/elixir-lang/elixir/pull/3774)

fixes README and also the MakeFile


#### [#3773] - (2015-09-26T11:01:35Z) - [Remove trailing semicolong from summaries](https://github.com/elixir-lang/elixir/pull/3773)

....even thought i have already submitted a fix for ex_doc https://github.com/elixir-lang/ex_doc/pull/439


#### [#3770] - (2015-09-26T09:26:36Z) - [Improve Summaries](https://github.com/elixir-lang/elixir/pull/3770)

and other fixes


#### [#3655] - (2015-09-25T10:02:43Z) - [Update a map for non existent key will raise a KeyError, not ArgumentError](https://github.com/elixir-lang/elixir/pull/3655)

```
iex(7)> map = %{:a => 1, 2 => :b}
%{2 => :b, :a => 1}
iex(8)> %{map | :c => 3}
** (KeyError) key :c not found in: %{2 => :b, :a => 1}
```


#### [#3666] - (2015-09-25T10:02:30Z) - [Introduce support for Mod.{A, B, C} on imports, alias, require and use](https://github.com/elixir-lang/elixir/pull/3666)

Closes #3646.
- [x] adjust `elixir_parser` to emit new AST
- [x] multi `alias`

``` elixir
defmodule MultiAlias1 do
  alias List.{Chars}
end
```

multiline:

``` elixir
defmodule MultiAlias2 do
  alias Mix.{
    CLI,
    Shell.IO
  }
end
```

just random place:

``` elixir
[List.{Chars}, 1]
** (UndefinedFunctionError) undefined function: List.{}/1
    (elixir) List.{}(Chars)
```

invalid identifier:

``` elixir
defmodule MultiAlias1 do
  alias List.{Chars, 42}
end
** (SyntaxError) iex:2: syntax error before: '}'
```
- [x] multi `import`
- [x] multi `require`
- [x] multi `use`

There are a couple of open questions:
- do we need to support trailing comma, e.g.: `macro List.{Chars,}`
- do we need to support blank import (alias, etc.), e.g.: `macro List.{}`

@josevalim, I would like any feedback on it.


#### [#3738] - (2015-09-25T10:02:01Z) - [Add raising on unknown keys version of `Kernel.struct/2`](https://github.com/elixir-lang/elixir/pull/3738)



#### [#3759] - (2015-09-21T21:02:31Z) - [Raise `CompileError` in case of duplicated clauses given for `try` and `receive`](https://github.com/elixir-lang/elixir/pull/3759)

There are good showcases for it:

``` elixir
defmodule Qwe do
  def main(val) do
    try do
      1 / val
    rescue
      ArgumentError ->
        24
    rescue
      ArithmeticError ->
        42
    after
      IO.puts "1"
    after
      IO.puts "2"
    end
  end
end

defmodule Asd do
  def main() do
    receive do
      any -> any
    after 50 ->
      24
    after 0 ->
      42
    end
  end
end
```

Prior this patch duplicated clauses are simply ignored.
There is no practical reason to support this cases and thus `CompileError` will be raised.


#### [#3757] - (2015-09-21T07:55:18Z) - [Update doc for Kernel.hd/1 to indicate guard clause utility](https://github.com/elixir-lang/elixir/pull/3757)



#### [#3756] - (2015-09-19T17:37:43Z) - [assert_raise: document that message can be regex](https://github.com/elixir-lang/elixir/pull/3756)

This patch documents the fact that assert_raise()
can also accept a Regex as the expected message.


#### [#3755] - (2015-09-19T15:56:05Z) - [Add IO.ANSI.clear_line](https://github.com/elixir-lang/elixir/pull/3755)

My use case: printing a progress bar type thing where sometimes, the just-printed line is shorter than the previous one. Then you first need to clear out the line, or the old line shows through.

Worked around this with `"\e[2K"` but it would be nice to have this built in.

http://ascii-table.com/ansi-escape-sequences-vt-100.php


#### [#3749] - (2015-09-18T08:16:55Z) - [Add example to the to_list function](https://github.com/elixir-lang/elixir/pull/3749)

Since `Dict.into_list(Enum.into(list, dict_impl.new)) == list`, I used Dict.put to build the dict.


#### [#3745] - (2015-09-17T17:51:45Z) - [Add Mix recompilation from IEx](https://github.com/elixir-lang/elixir/pull/3745)

Because this is asked in the mailing list every other week,
I have decided to take a stab at it.

I went with the more conservative approach of always restarting
the application so users don't see errors from their processes.

There are a bunch of disclaimers to consider which have been
documented. For this reason, the helper has been marked as
experimental so we see how often folks will run into corner cases.

@ericmj, @fishcakez and @alco: careful review and feedback is
appreciated. I was also torn between calling it restart and recompile
but went with the latter as the need for restarting is a side-effect
of compilation.

Thoughts?


#### [#3746] - (2015-09-17T17:37:17Z) - [Code.get_docs/2: check for valid kinds in public function + set :all as default value for kind](https://github.com/elixir-lang/elixir/pull/3746)

I was getting a really long cyptic message showing the whole list of docs, but for a private function,

```
** (FunctionClauseError) no function clause matching in Code.do_lookup_docs/2
    (elixir) lib/code.ex:634: Code.do_lookup_docs([docs: [{{:%, 2}, 105, :defmacro, [{:struct, [], nil}, {:map, [], nil}], "Creates a struct.\n\nA struct is a tagged map that allows developers to provide\ndefault values for keys, tags to be used in polymorphic\ndispatches and compile time assertions.\n\nTo define a 
```

It also add :all as the default value for kind


#### [#3747] - (2015-09-17T13:54:35Z) - [String: Rename args "str" to "string"](https://github.com/elixir-lang/elixir/pull/3747)

As they were rarely used in the String module.


#### [#3744] - (2015-09-16T20:22:23Z) - [little more explanation of `String.replace/4`'s `:insert_replace` option](https://github.com/elixir-lang/elixir/pull/3744)

#3742 got me looking at what `\g{N}` is, and I found some slightly confusing documentation around `String.replace/4`.


#### [#3743] - (2015-09-16T20:21:53Z) - [Module.__info__ : correct links](https://github.com/elixir-lang/elixir/pull/3743)

The link :erlang.module_info/0 doens't have an entry in the erlang docs.
And I found the correct link to the reference manual, (the previous one was removed bc it
was outdated)


#### [#3742] - (2015-09-16T20:01:13Z) - [Doc: add examples using alternate capture/replace syntax, in replace/4](https://github.com/elixir-lang/elixir/pull/3742)

While the docs do in fact explain that you can use \g{n}, there is no examples using it. If you are like me, who starts off with the examples, this might easily be missed, so i added a example in Regex.replace/4, and modified one in String.replace/4. :smiley: 

Hopefully this is useful. 


#### [#3736] - (2015-09-15T13:42:04Z) - [Fetch archive/escript with version in filename](https://github.com/elixir-lang/elixir/pull/3736)



#### [#3735] - (2015-09-15T07:03:59Z) - [Polish docs for Mix.shell and Mix.Shell.Process](https://github.com/elixir-lang/elixir/pull/3735)

I had some trouble with these docs, especially `Mix.Shell.Process`, and had to reach for the source code. I tried making docs clearer and more verbose :) Let me know if it's all good!


#### [#3733] - (2015-09-14T08:47:22Z) - [Add links to Code of Conduct](https://github.com/elixir-lang/elixir/pull/3733)



#### [#3730] - (2015-09-13T21:59:09Z) - [Several standardization fixes](https://github.com/elixir-lang/elixir/pull/3730)



#### [#3729] - (2015-09-13T19:08:41Z) - [Title case Hex](https://github.com/elixir-lang/elixir/pull/3729)

I forgot to include Hex in the list of apps to be formatted


#### [#3727] - (2015-09-13T17:56:56Z) - [Mix.Dep: show instructions on :nolock and :lockoutdated](https://github.com/elixir-lang/elixir/pull/3727)

Fixes additional issue found in https://github.com/elixir-lang/elixir/issues/3038#issuecomment-139882118


#### [#3726] - (2015-09-13T11:40:11Z) - [Better assert raise messages](https://github.com/elixir-lang/elixir/pull/3726)

This should close #3703. Also, I added tests for `assert_raise/3` because there were none :).


#### [#3695] - (2015-09-13T11:27:28Z) - [Add a code of conduct](https://github.com/elixir-lang/elixir/pull/3695)

In order to promote a more inclusive community, this PR suggests a Code of Conduct to be followed by the project's contributors.


#### [#3659] - (2015-09-13T11:13:14Z) - [Allow list of spec in Process.info/2](https://github.com/elixir-lang/elixir/pull/3659)

I was working on adding `regs()` helper to IEx and realised passing multiple items to `Process.info/2` wasn't available in Elixir.

There might be a good reason why it's not here in the first place but I figured it would be fairly quick to add so I might as well do it.

I'm not sure the typespec is correct, do I need to define a special type for `{atom, term}` and then use it in place of `{atom | term} | [{atom, term}]` ?


#### [#3684] - (2015-09-13T10:49:19Z) - [made Float.parse() support complete scientific notation](https://github.com/elixir-lang/elixir/pull/3684)

New version can parse "+digit" like "+1.0, and supports E as exponent markter as well as e. + after the exponent marker is legitimate too.
So, Float.parse("+1.0E+2x") returns {100.0, "x"} now.


#### [#3725] - (2015-09-13T09:41:06Z) - [Mention how to write docs for public Mix tasks](https://github.com/elixir-lang/elixir/pull/3725)

You have to write a `@moduledoc` in order to show some documentation when users do `mix help my_task`.


#### [#3723] - (2015-09-11T22:52:59Z) - [Make it clearer that unimplemented callbacks always stop](https://github.com/elixir-lang/elixir/pull/3723)

\cc @fishcakez 


#### [#3713] - (2015-09-11T21:10:51Z) - [Display pinned vars in the receive assertions](https://github.com/elixir-lang/elixir/pull/3713)

Closes #3702.


#### [#3717] - (2015-09-11T21:10:36Z) - [Raise right away for Mix tasks with slashes](https://github.com/elixir-lang/elixir/pull/3717)

This should be a fix for #3715, but I have a feeling that building the exception with `Mix.NoTaskError.exception/2` is a hack at best. If I do `Mix.raise Mix.NoTaskError, task: task`, however, the error message turns out to be

```
** (Mix.NoTaskError) ...
```

instead of

```
** (Mix) ...
```

which is what something like `mix non_existing_task` raises.


#### [#3716] - (2015-09-11T13:46:56Z) - [Rephrase @doc for Mix.raise/2](https://github.com/elixir-lang/elixir/pull/3716)

Put it in a better way.

Closes: https://github.com/elixir-lang/elixir/issues/3696


#### [#3719] - (2015-09-11T13:46:19Z) - [Rephrase @moduledoc for Mix](https://github.com/elixir-lang/elixir/pull/3719)



#### [#3718] - (2015-09-11T12:54:27Z) - [Various small fixes](https://github.com/elixir-lang/elixir/pull/3718)



#### [#3697] - (2015-09-11T12:08:31Z) - [Use Title Case and backtick for: Mix, rebar, and others](https://github.com/elixir-lang/elixir/pull/3697)

Properly use Title Case for Mix, or backticks when it's refering
to the `mix` command

Since rebar name is in lowercase, I only added backticks when it was
refering to the `rebar` command itself.

I consider commands to be surrounded by backticks when they are used as nouns,
such as, or literally refered as commands,
but not when refered as adjectives, such as "a rebar dependency", "a make project"

I have ignored the test names when doing these changes.

Also fixes for other commands such as: `git`, `make`

when given in message such as exceptions, I only surround commands in backticks,
and arguments/values in single-quotes.

The following commands were used to find mentions on running a command that is not using backticks:

```
commands="elixir|elixirc|mix|iex|ex_doc|git|make|rebar|dialyzer|erl|rm|cd|mkdir|rmdir|ln|ls|pwd"
actions="runs?|running|executes?|executing|types?|typing|enters?|entering|calls?|calling"
ag '(?i)('${actions}')(?-i)\b[^`\r\n/]+[\ \t]+(?!(`))('${commands}')'
ag '(?-i)\b(?!(`))('${commands}')[\ \t]+[^`\r\n/]+(?i)(commands?)'
```

and this one to find where the commands were mentioned

```
#commands="erlang|elixir|eex|iex|ex_unit|ex_doc|logger|elixirc|git|make|rebar|dialyzer|erl|rm|cd|mkdir|rmdir|ln|ls|pwd"
commands="mix|elixirc|git|make|rebar|dialyzer|erl|rm|cd|mkdir|rmdir|ln|ls|pwd"
ag -s '(?<!(\`))(?<!(\.))(?<!(/))(?<!(:))(?<!(_))\b('${commands}')\b(?!(:))(?!(\?))(?!(_))(?!(-))(?!(\.))(?!(\`))(?!(/))(?!(>))' \
--ignore "*.erl" --ignore "*.yrl" --ignore "*.src"
```


#### [#3714] - (2015-09-11T11:15:28Z) - [Inspect.Algebra: Replace numbered link in summary with actual link](https://github.com/elixir-lang/elixir/pull/3714)

This is because in the modules summary, [0] won't be intepreted as a link,

original reported: https://github.com/elixir-lang/ex_doc/issues/347


#### [#3704] - (2015-09-10T12:55:22Z) - [Mention the Pin Operator in its documentation](https://github.com/elixir-lang/elixir/pull/3704)

when https://github.com/elixir-lang/elixir-lang.github.com/pull/595#issuecomment-139146400 is resolved, we may want to use the improved example in the docs.


#### [#3700] - (2015-09-10T09:55:31Z) - [String.*strip: mention that ALL leading/trailing `char`s will be removed](https://github.com/elixir-lang/elixir/pull/3700)



#### [#3701] - (2015-09-10T09:55:04Z) - [Enum: renamed the rarely used `ifnone` argument, in favour of `default`](https://github.com/elixir-lang/elixir/pull/3701)



#### [#3698] - (2015-09-09T12:20:37Z) - [Fix `responsible to keep` ‚Üí `responsible for keeping` in env.ex doc](https://github.com/elixir-lang/elixir/pull/3698)



#### [#3694] - (2015-09-08T21:11:07Z) - [Use Title Case and backticks for Erlang and Elixir applications](https://github.com/elixir-lang/elixir/pull/3694)

It includes Erlang, Elixir, ExUnit, ExDoc, Logger, IEx, elixirc

It leaves Mix for a different PR.

Command to spot these words:

```
ag -s '(?<!(\`))(?<!(\.))(?<!(/))(?<!(:))(?<!(_))(erlang|elixir|eex|iex|ex_unit|ex_doc|logger|elixirc)(?!(:))(?!(\?))(?!(_))(?!(-))(?!(\.))(?!(\`))(?!(/))(?!(>))' \
--ignore "*.erl" --ignore "*.yrl" --ignore "*.src"
```


#### [#3693] - (2015-09-08T18:18:05Z) - [Correct descriptions in docs to use Present Continuous (2)](https://github.com/elixir-lang/elixir/pull/3693)

Corrects a few more cases that were not caught by the previous PR
https://github.com/elixir-lang/elixir/pull/3682

Command:

```
ignore_words="a|an|the|in|exception|helper|callback|front-end|same|when|where|what|functionality|elixir|erlang|eex|iex|logger|environment|module|similar|\w+-like|opposite|boolean|current|information|basic|public|if|unless|otherwise|regular|internal|convenience|given|welcome to|shortcut to|writable|user|system|low-level|pipe operator|supervisor|administrator"
ag "(@(module|short)?doc)\s+(~[Ss])?([\"']{3})(\r|\n|.)\s*+((?!((?i)${ignore_words}(?-i)))[\w'-]+)(?<!(s))(?<!(ed))(?<!(ity))(?<!(ally))(?<!(ily))(?<!(ely))(?=[\s\r\n,:.])"
```


#### [#3691] - (2015-09-08T17:00:51Z) - [Add text to all links](https://github.com/elixir-lang/elixir/pull/3691)

This commits covers 100% of all links in the documentation,
using a words to describe what the page is about.

It users the `:module.function/arity` format for erlang functions that
link to the earlang docs.

I also changed some of the sentnces using the link from
- See [:erlang.function/2](http://...) for a list of available options.

to
- For a list of available options, see [:erlang.function/2](http://...)

The reasoning behind is that I think it's better to have an link at the end of the sentence
and not in the middle, so the reades doesn't need to finish the sentence to know what is it about and go back
and find the link. This way all the information is given before the link, so the users stops reading and can
click directly.


#### [#3692] - (2015-09-08T16:36:54Z) - [Fix markdown files](https://github.com/elixir-lang/elixir/pull/3692)

Corrects the indentation,
and change `bash` code blocks  to a more generic one: `sh`

actually, github doesn't show colors with bash but does now with sh


#### [#3690] - (2015-09-08T15:31:59Z) - [Fix `does` ‚Üí `do` verbal agreement in special_forms.ex](https://github.com/elixir-lang/elixir/pull/3690)

From `variables defined in the macro does not affect` to `variables defined in the macro do not affect`


#### [#3689] - (2015-09-07T21:55:19Z) - [spelling `miliseconds` -> `milliseconds`](https://github.com/elixir-lang/elixir/pull/3689)

simple spelling fix


#### [#3687] - (2015-09-07T19:06:18Z) - [Add/Correct arity in functions that are not being linked in html docs](https://github.com/elixir-lang/elixir/pull/3687)

original issue: https://github.com/elixir-lang/ex_doc/issues/321

I created a shell script that checks for anything references to Modules that are not actually linked
http://git.io/check_not_linked_exdoc.sh

You can see the output here:
https://gist.github.com/eksperimental/6dc9bce36710a3c8b1d9

I will update the script to work with regular elixir projects, so it can be used by other projects


#### [#3686] - (2015-09-07T18:23:03Z) - [Format raise message consistently](https://github.com/elixir-lang/elixir/pull/3686)

Kernel.raise messages should not start with uppercase, and should not
have trailing punctuation.

Mix.raise messages should start with uppercase, and should not have a trailing
puntuation.

```
# starting with uppercase
# exclude (Mix.raise, and any message that starts with all uppecase such as: I or IO
ag '(?<!Mix\.)raise\s+\"+(?!([A-Z]+\b))[A-Z]'

# Mix.raise should start with upper case
# except when `mix` or `rebar` are mentioned
ag 'Mix\.raise\s+\"(?!(mix|rebar))+[a-z]'

# ending in period
ag "raise\s+\"+.+\.\"\s*\n"
```


#### [#3685] - (2015-09-07T17:06:41Z) - [Corrections](https://github.com/elixir-lang/elixir/pull/3685)

please read the commit message for a description


#### [#3683] - (2015-09-07T14:30:13Z) - [Avoid splitting words that use hyphen](https://github.com/elixir-lang/elixir/pull/3683)

Solves a bug in the docs, http://elixir-lang.org/docs/master/eex/EEx.html
search for "special- case"

For the ones in the documentation, a space will be added in after the hyphen.
Just for consistency and to ease detection, I have replaced the ones in
comments as well.

Command to detect these lines:

```
ag "\w+-\n"
```


#### [#3682] - (2015-09-07T11:58:07Z) - [Correct descriptions in docs to use Present Continuous](https://github.com/elixir-lang/elixir/pull/3682)

It makes it consistent with the rest of the docs.

I have just looked for the first line in @doc, @moduledoc, so lines bellow it may still need
to be corrected.

@shortdoc all have been corrected.

Inspired by: https://github.com/elixir-lang/elixir/pull/2942

Command to list the first lines:

``` sh
  # first line in @moduledoc / @doc
  ag '(@(module)?doc)\s+("{3})(\r|\n|.)\s*+[\w-]+(?<!s)\b'

  # also @shortdoc
  ag '(@shortdoc)\s+("{1,3})(\r|\n|.)\s*+[\w-]+(?<!s)\b'
```

updated Version:

``` sh
ignore_words="a|an|the|in|exception|helper|callback|front-end|same|when|where|what|functionality|elixir|erlang|eex|iex|logger|environment|module|similar|\w+-like|opposite|boolean|current|information|basic|public|if|unless|otherwise|regular|internal|convenience|given|welcome to|shortcut to|writable|user|system|low-level|pipe operator|supervisor|administrator"
ag "(@(module|short)?doc)\s+(~[Ss])?([\"']{3})(\r|\n|.)\s*+((?!((?i)${ignore_words}(?-i)))[\w'-]+)(?<!(s))(?<!(ed))(?<!(ity))(?<!(ally))(?<!(ily))(?<!(ely))(?=[\s\r\n,:.])"
```


#### [#3678] - (2015-09-07T11:29:08Z) - [Correct indefinite article a/an](https://github.com/elixir-lang/elixir/pull/3678)

Run the following command, and reviewed the occurences one by one.

``` sh
 # find words starting with vowels
ag -i '\ban?\s+[aeiou]\w+\b'

 # find acronyms
ag '\ban?\s+[BCDFGHJKLMNPQRSTVWXYZ][A-Z]+\b'

 # starting with "h"
ag -i '\ban?\s+[aeiou]\w+\b'
```


#### [#3680] - (2015-09-07T11:28:50Z) - [Regex.regex?/1: name unnamed argument and improve docs](https://github.com/elixir-lang/elixir/pull/3680)

Functions with unnamed arguments: When not giving a variable with a name, the parser will choose the name: "arg1" , "arg2", etc. This command will search for the ex_doc generated documentation.
`ag "(?<=signature\"><strong>).*\W(arg|atom|binary|bool|float|int|list)\d+.*\)" ./doc`


#### [#3681] - (2015-09-07T10:50:21Z) - [Correct double words](https://github.com/elixir-lang/elixir/pull/3681)

Also change some wording in process.ex


#### [#3673] - (2015-09-05T18:35:15Z) - [F/file.rename](https://github.com/elixir-lang/elixir/pull/3673)

This is a follow-up (sorry for delay) adding File.rename based on the underlying erlang semantics.

Here is a link to the original declined PR
https://github.com/elixir-lang/elixir/pull/2722

Here is the underlying semantics we are following
http://www.erlang.org/doc/man/file.html#rename-2


#### [#3675] - (2015-09-05T11:02:00Z) - [Fix typo in File.cp_r for files (rename tmp to b.txt)](https://github.com/elixir-lang/elixir/pull/3675)

When working on f/File.rename, noticed what I think is a small documentation typo.

I renamed "tmp" to "b.txt" to avoid confusion with "/tmp"

Here's the tests I did to manually ensure I had it the right way around.

```
iex(1)> File.cp_r "/tmp/aha/one/a.txt", "/tmp/aha/two"
{:error, :eisdir, "/tmp/aha/one/a.txt"}

iex(2)> File.cp_r "/tmp/aha/one/a.txt", "/tmp/aha/two/b.txt"
{:ok, ["/tmp/aha/two/b.txt"]}
```


#### [#3674] - (2015-09-05T07:30:24Z) - [Upgrade travis to check against Erlang 17.5 and 18.0](https://github.com/elixir-lang/elixir/pull/3674)

Minor travis tweak to support newer versions of erlang including 17.5, 17.5.3 and 18.0

Here is where I located the latest versions

https://packages.erlang-solutions.com/erlang/


#### [#3661] - (2015-09-04T08:55:17Z) - [Add and document GenServer/GenEvent callbacks](https://github.com/elixir-lang/elixir/pull/3661)

The GenServer part of #3630 .


#### [#3652] - (2015-09-02T09:05:26Z) - [Remove reference to GenServer.Behaviour from LocalsTracker](https://github.com/elixir-lang/elixir/pull/3652)



#### [#3639] - (2015-08-31T09:02:13Z) - [Add missing character in delete_at code sample](https://github.com/elixir-lang/elixir/pull/3639)

The delete_at code sample has an "iex" missing the ">" right afterwards . Wasn't sure if that might throw off some doctests or not, so better to be safe than sorry.


#### [#3641] - (2015-08-31T09:01:41Z) - [Correct typespecs in Enum.chunk](https://github.com/elixir-lang/elixir/pull/3641)



#### [#3638] - (2015-08-30T20:22:12Z) - [iex pid helper, using :c.pid](https://github.com/elixir-lang/elixir/pull/3638)

Based on the discussion [here](https://groups.google.com/forum/#!topic/elixir-lang-core/btK-iVEBFFo), I have added pid helper to iex since it was straightforward.

Let me know if anything can be improved wrt documentation, implementation or test cases in this pull request.


#### [#3636] - (2015-08-30T11:33:58Z) - [add docs for :keep option in OptionParser module](https://github.com/elixir-lang/elixir/pull/3636)

While reading the docs for the [OptionParser.parse/2 function](http://elixir-lang.org/docs/v1.0/elixir/OptionParser.html#parse/2) I found that no code examples was given for the :keep switch. So I thought to write an example and open this pr.

Let me know if something is missing. The test suite is green.


#### [#3629] - (2015-08-29T12:55:47Z) - [ExUnit: Fix warning in test](https://github.com/elixir-lang/elixir/pull/3629)

removes the following warnings:
- test/ex_unit/assertions_test.exs:218: warning: variable x is unused
- test/ex_unit/assertions_test.exs:229: warning: variable x is unused


#### [#3631] - (2015-08-29T01:29:33Z) - [Update documentation for IEx.configure](https://github.com/elixir-lang/elixir/pull/3631)

I found the wording for dynamic values for your iex prompt to be confusing.  I
believe this reads a bit more clearly.


#### [#3621] - (2015-08-25T16:57:04Z) - [Cut off "Elixir." prefix for modules in Logger metadata](https://github.com/elixir-lang/elixir/pull/3621)

And do not inject `:application` key in metadata if it has `nil` value.


#### [#3617] - (2015-08-25T07:47:29Z) - [fix(Kernel): check arguments on if and unless](https://github.com/elixir-lang/elixir/pull/3617)

`Kernel.if` and `Kernel.unless` are now only valid if there is exactly
one `do` key and optionally an `else` key.

Any calls to the if macro that do not satisfy these conditions raise an
ArgumentError with a relevant error message.

This closes #3614 and is an alternative to #3615 


#### [#3600] - (2015-08-24T11:11:02Z) - [Line numbers for doctest errors. Fixes issue #3592](https://github.com/elixir-lang/elixir/pull/3600)

Note that this will change line numbers `Code.get_docs` returns for `:docs` and `:moduledoc` sections.


#### [#3609] - (2015-08-22T17:56:26Z) - [Improve error messages for `match?` assertions](https://github.com/elixir-lang/elixir/pull/3609)

Follow-up to https://github.com/elixir-lang/elixir/issues/3488#issuecomment-133423879.
- [x] `assert match?(..)`
- [x] `refute match?(..)`


#### [#3607] - (2015-08-21T14:33:18Z) - [(#3603) add more application functions](https://github.com/elixir-lang/elixir/pull/3607)

I've added in the functions mentioned in #3603 plus `:application.get_all_key/1`, but while I'm looking at it are there any others you'd like in here? (as you specified 'at least' those three)

Also I'd be very happy with any feedback on the typespecs/docs and the tests themselves, as I wasn't sure of the best/safest things to test. 

Thanks! :smile: 


#### [#3602] - (2015-08-20T11:23:29Z) - [fix a typo in bitwise documentation](https://github.com/elixir-lang/elixir/pull/3602)

At least, I'm 99% sure this is a typo :)


#### [#3599] - (2015-08-19T14:40:56Z) - [Improve error message when no return value specified in func spec](https://github.com/elixir-lang/elixir/pull/3599)

Addresses #3598 

Since assignments (and everything else) are just application, I had to change a test that previously returned a generic error that was now returning the more specific error. Not sure if this should still be done or not due to that, but here's the code if people think it's a good idea having seen the impact of the change.


#### [#3595] - (2015-08-19T08:04:57Z) - [Fix typo in mix man page](https://github.com/elixir-lang/elixir/pull/3595)



#### [#3593] - (2015-08-17T19:27:59Z) - [Raise if heredic terminator in invalid location](https://github.com/elixir-lang/elixir/pull/3593)

issue #3503

This will raise:

``` elixir
foo = """
this """
```

This will not:

``` elixir
foo = """
this \"\"\"
"""
```


#### [#3590] - (2015-08-16T18:38:48Z) - [Remove unnecessary code in Enum.uniq example](https://github.com/elixir-lang/elixir/pull/3590)



#### [#3588] - (2015-08-15T19:49:29Z) - [Fix warning in warning_test.exs](https://github.com/elixir-lang/elixir/pull/3588)

This was the warning:

> test/elixir/kernel/warning_test.exs:55: warning: variable message is unused


#### [#3585] - (2015-08-15T09:48:11Z) - [Improvements in module,  function & variable  names syntax](https://github.com/elixir-lang/elixir/pull/3585)

fixes a few types, and re-word some things,
regex added

please let me know what you think @jisaacstone

original PR: https://github.com/elixir-lang/elixir/pull/3574


#### [#3586] - (2015-08-15T07:35:04Z) - [Makefile: print a success message on `realease_precompiled`](https://github.com/elixir-lang/elixir/pull/3586)



#### [#3581] - (2015-08-14T19:43:18Z) - [@callback can now be used directly (without Behaviour). Add @macrocallback.](https://github.com/elixir-lang/elixir/pull/3581)

Implements (at least part of!) #3465.
- Updates existing `@callback` attr to attach `@doc` and raise on invalid use of defaults in typespec
- Adds new `@macrocallback` attr, which can be used to define behaviour macro callbacks. Also supports `@doc` and raise on invalid use of defaults in typespec
- Refactors `Behaviour` as a thin layer above the "new" `@callback` and `@macrocallback` attrs
- Adds `Kernel.Typespec.beam_callbackdocs/1`, which returns all callback docs from the given module's beam code.


#### [#3584] - (2015-08-14T10:16:15Z) - [Fix doc comment for File.cp_r](https://github.com/elixir-lang/elixir/pull/3584)

In fact IO.gets always returns a line ended by a LF symbol in such the cases. So we have to take this into account when comparing user input with a target string.


#### [#3577] - (2015-08-14T03:06:33Z) - [URI: add RFC links](https://github.com/elixir-lang/elixir/pull/3577)



#### [#3576] - (2015-08-14T03:06:19Z) - [Fix indentention inside lists](https://github.com/elixir-lang/elixir/pull/3576)

Closes: https://github.com/elixir-lang/ex_doc/issues/283
also [reported to earmark](https://github.com/pragdave/earmark/issues/27)

The following commands were used to find the buggy strings:
`ag "[\r\n]\ {4}\[*-]([^\r\n]+[\r\n])+\ {7,}"`
`ag "[\r\n]\ {4}[-*]([^\r\n]+[\r\n])(\ {4,}[^\r\n]+[\r\n])+\ {7,}"`


#### [#3578] - (2015-08-14T03:00:55Z) - [Mention sigil_R as valid option to create a regex](https://github.com/elixir-lang/elixir/pull/3578)

It may be worth mention it


#### [#3582] - (2015-08-14T02:01:40Z) - [Remove dead code, tidy up `Mix.Tasks.Profile.Fprof`](https://github.com/elixir-lang/elixir/pull/3582)



#### [#3579] - (2015-08-13T21:48:42Z) - [Fix race condition in `CaptureLogTest`](https://github.com/elixir-lang/elixir/pull/3579)

\cc @fishcakez 


#### [#3575] - (2015-08-13T17:49:53Z) - [Added a blub about underscore names to the `import` documentation](https://github.com/elixir-lang/elixir/pull/3575)

Noticed this behaviour, found issue #482 stating it was intentional, decided to document it.


#### [#3573] - (2015-08-13T16:28:02Z) - [Remove compiled protocols on mix clean. Fixes #3541](https://github.com/elixir-lang/elixir/pull/3573)



#### [#3574] - (2015-08-13T16:24:04Z) - [documentaion for module names, variable names and custom sigils](https://github.com/elixir-lang/elixir/pull/3574)

issue #3565


#### [#3570] - (2015-08-11T18:43:04Z) - [Warn if app configured but not started when build_embedded](https://github.com/elixir-lang/elixir/pull/3570)

Resolves #3556.


#### [#3571] - (2015-08-11T18:39:07Z) - [capture non-symbolic operators (&and/2, &not/1, &c.)](https://github.com/elixir-lang/elixir/pull/3571)

partial fix for issue #3486
pin operator  is a different issue and will take some more investgation to find the cause.


#### [#3566] - (2015-08-11T15:09:48Z) - [Raise an error if there are no files available to run test](https://github.com/elixir-lang/elixir/pull/3566)

It helps in the following situation, for example:
`mix test run --no-start` or `mix test test/my_app_test.ex` (note `s` is missing)

I think we could list files given after the task name as well.


#### [#3569] - (2015-08-11T14:13:05Z) - [Introduce :capture_log ExUnit configuration.](https://github.com/elixir-lang/elixir/pull/3569)

Follow up to https://github.com/elixir-lang/elixir/pull/3390#issuecomment-129831660

I've made it into a separate ExUnit configuration because I couldn't think of any other use cases for default tags, except for setting the `timeout` tag, but that's already a separate ExUnit configuration. If you want configurable default tags instead I'll change it.

/cc @josevalim 


#### [#3568] - (2015-08-11T13:30:12Z) - [Rename release_zip to release_precompiled. Fixes #3543](https://github.com/elixir-lang/elixir/pull/3568)

Tested on Debian Linux.


#### [#3363] - (2015-08-11T07:20:27Z) - [profile.fprof mix task](https://github.com/elixir-lang/elixir/pull/3363)

Based on the discussion [on the mailing list](https://groups.google.com/d/msg/elixir-lang-talk/IBTHFO_EC7A/48QccC4Q4jMJ) and further discussion on irc channel.

There's one known documentation issue I wasn't able to resolve (I'll add a note in the commit), but hopefully the pull's at least in the ballpark :-)


#### [#3300] - (2015-08-10T13:06:18Z) - [Added documentation and examples for File.stream!](https://github.com/elixir-lang/elixir/pull/3300)

New pull request with changes suggested in previous pull request squashed into a single commit. 


#### [#3560] - (2015-08-10T12:07:34Z) - [Provide more information on the cause of exceptions (problems discussed in #3555)](https://github.com/elixir-lang/elixir/pull/3560)

After the discussion on #3555, I felt I need some easier to review code as examples.

This changes address both my initial issue on #3555 with doctest not providing much help in diagnosing runtime errors as well as @fishcakez concern on a similar issue for `assert_raise` (in two separate commits).

The code implements my solution of preserving the original stacktrace, since the error messages already preserve the original `Exception` and `message`. Both cases are resolved in a similar way, but there is no code reuse between them. 

Feel free to provide feedback on the code and general approach. I've been with Elixir for about 2 weeks, so it is quite possible that I am missing things both at the high and low level :-)


#### [#3563] - (2015-08-10T07:28:09Z) - [Raise if piping into binary operator with 2 args already](https://github.com/elixir-lang/elixir/pull/3563)

Github issue #3483
Simple enough - added a clause to the `pipe` function that matches a binary operator with 2 arguments and raises an error

(I'm new so I welcome suggestions & criticism of all kinds)


#### [#3559] - (2015-08-09T09:43:52Z) - [Mention expressions without results in doctests](https://github.com/elixir-lang/elixir/pull/3559)

I mentioned that you can write an expression without a result if you don't want to assert on the value of that expression:

```
iex> pid = spawn fn -> :ok end
iex> is_pid pid
true
```

I also killed some trailing whitespace in the same file (sorry, I guess it has to be done at some point :P). Let me know what you think!


#### [#3558] - (2015-08-08T07:40:45Z) - [Indent code sample for __protocol__/1 & impl_for/1](https://github.com/elixir-lang/elixir/pull/3558)

Indent the code samples for `__protocol__/1`, `impl_for/1` and `impl_for!/1`.


#### [#3552] - (2015-08-06T20:35:58Z) - [Improve error message in case of lockfile eval failure](https://github.com/elixir-lang/elixir/pull/3552)

From

```
** (SyntaxError) nofile:9: syntax error before: ','
    (elixir) lib/code.ex:168: Code.eval_string/3
    ...
```

to

```
** (SyntaxError) mix.lock:9: syntax error before: ','
    (elixir) lib/code.ex:168: Code.eval_string/3
    ...
```

This kind of errors might happen in case of bad git conflict resolution.

On a slightly different note, I've spotted double output on master branch:

```
% mix deps
** (SyntaxError) mix.lock:9: syntax error before: ','
    (elixir) lib/code.ex:168: Code.eval_string/3
    (mix) lib/mix/dep/lock.ex:65: Mix.Dep.Lock.read/0
    (mix) lib/mix/tasks/deps.ex:110: Mix.Tasks.Deps.run/1
    (mix) lib/mix/cli.ex:60: Mix.CLI.run_task/2


22:03:02.042 [error] Process #PID<0.47.0> raised an exception
** (SyntaxError) mix.lock:9: syntax error before: ','
    (elixir) src/elixir.erl:156: :elixir.eval/3
    (elixir) lib/code.ex:168: Code.eval_string/3
```

Don't think it's intentional, right? @josevalim, @ericmj 


#### [#3550] - (2015-08-05T20:07:07Z) - [Add a note to the docs for Enum.reduce/2](https://github.com/elixir-lang/elixir/pull/3550)

I added a note that clarifies that `Enum.reduce/2` calls the reducer function `n - 1` times where `n` is the length of the enumerable. [This StackOverflow question](http://stackoverflow.com/questions/31836820/enum-reduce-2-doesnt-output-io/31837323#31837323) lead to this PR. Let me know what you think!


#### [#3547] - (2015-08-02T12:59:12Z) - [Speed up `Enum.take_random/2` for big inputs](https://github.com/elixir-lang/elixir/pull/3547)

This PR makes `take_random/2` adaptive what means it will use `Map` data structure instead of `Tuple` for `count` more than **128** (what is [based on measurements](https://gist.github.com/lexmag/dc517366672b57560890)).
However it only takes an action on Erlang 18.
The problem with `Tuple.put_elem/3` is that it copies whole tuple, what is a problem on big `count` values:

```
{[{{'Elixir.Enum','-reduce/3-lists^foldl/2-0-',3},90000, 38667.815,  3788.367}],     
 { {'Elixir.Enum','-take_random/2-fun-0-',3},     90000, 38667.815,  3788.367},     %
 [{{erlang,setelement,3},                        169422, 13964.188, 13964.188},      
  {garbage_collect,                               56466, 13284.440, 13284.440},      
  {{'Elixir.Enum',random_index,1},                90000,  7630.820,  2223.302}]}.    
```


#### [#3542] - (2015-07-31T07:15:41Z) - [Avoid race condition in `capture_io` "device re-registering" test](https://github.com/elixir-lang/elixir/pull/3542)



#### [#3540] - (2015-07-30T23:38:30Z) - [Mention restart: :transient in Task moduledoc](https://github.com/elixir-lang/elixir/pull/3540)

Per the discussion here: https://groups.google.com/forum/#!topic/elixir-lang-talk/SZSSPaLBX0s

The example as it stands in the doc will cause an application to fail to start, as it will keep retrying a worker that promptly exits. This PR clarifies the options one might need to run such a task successfully.


#### [#3532] - (2015-07-29T07:14:21Z) - [Tweak the docs for the Inspect protocol](https://github.com/elixir-lang/elixir/pull/3532)

The docs for the Inspect protocol mentioned that if there's an error while inspecting a struct (for which the Inspect protocol has been implemented), then the struct is printed with a raw representation.

This PR makes it clear that an `ArgumentError` is raised and the struct is printed raw in the error message. I'm adding this note as I was bitten by this earlier today, thinking I could rely on `inspect/2` printing my struct as `%MyStruct{...}` in case of errors (I wanted to print it as `#MyStruct<...>` only for some cases).

On a related note, yes, I came to the conclusion that printing a struct differently based on its content is probably a bad idea. Nonetheless, maybe these changes in the docs make this clearer :)


#### [#3531] - (2015-07-28T10:43:53Z) - [IO.inspect: @specs fixed, + see full options](https://github.com/elixir-lang/elixir/pull/3531)

Please correct me if `IO.inspect` does not always return a string.


#### [#3530] - (2015-07-27T16:39:07Z) - [Fix grammar in Macro.expand/2](https://github.com/elixir-lang/elixir/pull/3530)



#### [#3522] - (2015-07-27T06:24:29Z) - [Precompiled zip files to include man pages](https://github.com/elixir-lang/elixir/pull/3522)

Original PR: https://github.com/elixir-lang/elixir/pull/3477/

I have removed the Makefiles and also added a gitignore rule to exclude the precompiled zip file.
the second commits cleans the `man` dir after it has been built, since there is no need to keep those files there. I think we should also remove `/man/elixir.1` and `/man/iex.1` from `.gitignore` but I don't know when we should do that.


#### [#3466] - (2015-07-24T15:54:44Z) - [Introduce Task.yield/2 and Task.shutdown/2](https://github.com/elixir-lang/elixir/pull/3466)

Resolves #3330.


#### [#3528] - (2015-07-23T19:22:19Z) - [Fixing typo in Task.Supervisor.async/4 distributed task docs](https://github.com/elixir-lang/elixir/pull/3528)

See https://github.com/elixir-lang/elixir/issues/3527


#### [#3524] - (2015-07-23T11:39:27Z) - [Better documentation for the GenServer terminate callback](https://github.com/elixir-lang/elixir/pull/3524)

I'm an Elixir newbie and wanted to set up a cleanup for my supervised GenServer. However, it took me 2 hours to figure out, how to do this under a Supervisor and then another half hour to find the `Process.flag/2` method.
I'm not sure if the description is too long at this point but it would have saved me some time and wondering.


#### [#3523] - (2015-07-23T07:18:17Z) - [Start logger if --no-start is passed](https://github.com/elixir-lang/elixir/pull/3523)



#### [#3521] - (2015-07-22T11:47:28Z) - [Polish the documentation for Mix.Task.alias?/1](https://github.com/elixir-lang/elixir/pull/3521)

I added a link to the documentation for the Mix module, in particular to the section that talks about aliasing.


#### [#3515] - (2015-07-22T10:11:12Z) - [Improve Logger metadata handling](https://github.com/elixir-lang/elixir/pull/3515)

Closes #3502.
- [x] API to remove a metadata key from the pdict
- [x] log call replaces same metadata key in the pdict
- [x] preserve metadata order defined in the backend's configuration

/cc @MSch 


#### [#3514] - (2015-07-20T12:32:58Z) - [Use `spawn_monitor/1` and improve `capture_io/3` on exit test](https://github.com/elixir-lang/elixir/pull/3514)



#### [#3513] - (2015-07-20T09:40:19Z) - [Enum.slice/2: guard added was missing from previous commit](https://github.com/elixir-lang/elixir/pull/3513)

Plus a new tests has been added, dealting with negative floats

previous commit: https://github.com/elixir-lang/elixir/pull/3512


#### [#3512] - (2015-07-20T08:46:40Z) - [Enum.slice Check for integers in arguments](https://github.com/elixir-lang/elixir/pull/3512)

- Enum.slice/3 check for integers in `start` and `count` arguments.
- Enum.slice/2 check for integers in range limits.

solves https://github.com/elixir-lang/elixir/issues/3509


#### [#3434] - (2015-07-19T21:40:16Z) - [Fix re-registering of device after an exit signal in the `ExUnit.CaptureIO`](https://github.com/elixir-lang/elixir/pull/3434)

Follow-up on #3382.


#### [#3508] - (2015-07-19T11:57:18Z) - [Update regex.ex](https://github.com/elixir-lang/elixir/pull/3508)

Fixes typo in the `Regex.replace`'s documentation.


#### [#3505] - (2015-07-18T19:24:51Z) - [Bitwise module: remove @doc in __using__ and move it to @moduledoc](https://github.com/elixir-lang/elixir/pull/3505)

Having the `__using__/1` function listed, was imcompatible with the statement "These macros can be used in guards"


#### [#3501] - (2015-07-17T10:01:42Z) - [rename Enum.minmax* and Inspect.Algebra.folddoc due to inconsitencies in their names](https://github.com/elixir-lang/elixir/pull/3501)

as per discussed in the mailing list

Rename functions introduced in: https://github.com/elixir-lang/elixir/pull/2901, https://github.com/elixir-lang/elixir/pull/1047, https://github.com/elixir-lang/elixir/pull/1267
/cc @xavier, @manpages, @brunoro


#### [#3449] - (2015-07-17T09:26:05Z) - [Add test for log capture removal on exit](https://github.com/elixir-lang/elixir/pull/3449)



#### [#3497] - (2015-07-16T21:57:09Z) - [Make `Macro.interpolate/2` private](https://github.com/elixir-lang/elixir/pull/3497)



#### [#3496] - (2015-07-15T22:57:28Z) - [Add explicit sort of map to Mix.Dep.Lock.write/1](https://github.com/elixir-lang/elixir/pull/3496)

Adds an explicit sort of the input map to Mix.Dep.Lock.write/1 since maps do not explicitly have an order.

@ericmj 


#### [#3491] - (2015-07-14T20:21:28Z) - [Clarify which call sets up the Task monitor](https://github.com/elixir-lang/elixir/pull/3491)

Just thought I'd check how Elixir implemented monitoring for Task and noticed this in the documentation. This brings it in line with what I see in the code.


#### [#3490] - (2015-07-14T16:41:26Z) - [Enum.take_every/1: remove unnecesary Module reference](https://github.com/elixir-lang/elixir/pull/3490)

as suggested by @lexmag in https://github.com/elixir-lang/elixir/pull/3489/files#r34588122


#### [#3489] - (2015-07-14T16:25:34Z) - [Enum & Stream, take/2 & take_every/2 variables renamed. +Improvements](https://github.com/elixir-lang/elixir/pull/3489)

variables renamed according to dicussion in https://github.com/elixir-lang/elixir/issues/3487

Defguard added for Enum.take_every(collection, 1)

More tests added, and sort of unified documentation between the two modules.


#### [#3485] - (2015-07-13T20:42:18Z) - [update url to use https. standardize erlang.org/doc links to use www](https://github.com/elixir-lang/elixir/pull/3485)

- update URL where the used http link redirects to https, and as well when a package is provided and the https link is available.
- remove period adjacent to URLs.
- standardize erlang.org/doc links to use www
- also update a wikipedia link that redirected to a different page ( https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Non-characters)


#### [#3484] - (2015-07-13T08:06:37Z) - [add proper credits to copyright holders](https://github.com/elixir-lang/elixir/pull/3484)

as per discussed in the elixit-lang-talk mailing list


#### [#3481] - (2015-07-13T08:06:12Z) - [Split handle_call and handle_cast callbacks in GenServer docs](https://github.com/elixir-lang/elixir/pull/3481)

It's my understanding that the valid return values for handle_cast are different from the ones for handle_call.

The Erlang docs are not very clear on that matter but I gathered that form multiple source across the web (i.e http://learnyousomeerlang.com/clients-and-servers). If that's incorrect I'd love to understand why.

I find the current format not very clear anyway as it's easy to miss the `handle_cast`, so I'd probably be in favour of re-arranging it if possible.


#### [#3482] - (2015-07-13T07:14:29Z) - [Make `Logger.log/3` macro and introduce `Logger.bare_log/3` instead](https://github.com/elixir-lang/elixir/pull/3482)

Closes #3472.


#### [#3480] - (2015-07-12T19:55:13Z) - [Provide link to Elixir's GenServer tutorial page](https://github.com/elixir-lang/elixir/pull/3480)

The link was pointed to the mix introduction but the prior
paragraph says to check the GenServer tutorial in the Getting
Started guide. Also, some minor changes to the wording in the
preceding paragraph


#### [#3478] - (2015-07-12T15:33:20Z) - [link to search issues](https://github.com/elixir-lang/elixir/pull/3478)

link to search issues in CONTRIBUTING.md


#### [#3476] - (2015-07-12T14:45:05Z) - [Gitignore](https://github.com/elixir-lang/elixir/pull/3476)

make manpage file paths absolute and not relative
and sort all the entries alphabetically


#### [#3474] - (2015-07-12T07:33:38Z) - [Reword Agent docs for readability](https://github.com/elixir-lang/elixir/pull/3474)

I was reading through the Agent docs and had a difficult time with the wording for lines 64-68. The changes seem to have a smoother flow and now the second sentence lines up with the order of the functions in the example. The remaining changes were small but also help with the readability. Also there was a missing "an".


#### [#3468] - (2015-07-10T15:18:36Z) - [Fix implementation of Stack module which doesn't fit to the Supervisor implementation](https://github.com/elixir-lang/elixir/pull/3468)

Supervisor uses Stack implementation where exists start_link/1 function but at the top of this documentation page there is no impelementation of that function so we have to make second parameter of start_link/2 function optional


#### [#3464] - (2015-07-09T12:00:51Z) - [[WIP] Introduce `List.keytake/3`](https://github.com/elixir-lang/elixir/pull/3464)



#### [#3463] - (2015-07-08T20:17:47Z) - [Makefile: fix manpage installation in packages](https://github.com/elixir-lang/elixir/pull/3463)



#### [#3460] - (2015-07-06T19:35:40Z) - [Support rebar3 style git refs in rebar.config files](https://github.com/elixir-lang/elixir/pull/3460)

Rebar3 uses a slightly different style for specifying specific refs when
defining dependencies. http://www.rebar3.org/v3.0/docs/dependencies


#### [#3457] - (2015-07-05T21:12:08Z) - [Only remove extra archives](https://github.com/elixir-lang/elixir/pull/3457)

Alright @ericmj, here's another go at #3345.  Let me know your thoughts.


#### [#3455] - (2015-07-04T06:48:53Z) - [Restrict support for binary message in the default impl of exception](https://github.com/elixir-lang/elixir/pull/3455)



#### [#3454] - (2015-07-03T16:30:16Z) - [[ExUnit] Clarify example in Callback docs](https://github.com/elixir-lang/elixir/pull/3454)

I stumbled across this describing the difference between `setup_all` and `setup`:

```
  defmodule AssertionTest do
    use ExUnit.Case, async: true

    # `setup_all` is called once before every test
    setup_all do
      # ...
    end

    # `setup` is called before each test is run
    setup do
      # ...
    end
  end
```

I think it is more clear if we take the phrasing from the `@moduledoc`here:

```
    # `setup_all` is called once before the first test's `setup`
    # ...
    # `setup` is called before each test is run
```

What do you think?


#### [#3445] - (2015-06-30T11:32:58Z) - [Move add/remove logger backend to client](https://github.com/elixir-lang/elixir/pull/3445)

/cc @lexmag @fishcakez 


#### [#3390] - (2015-06-30T10:28:06Z) - [Opportunistic logging, `Logger.CaptureLog` and more](https://github.com/elixir-lang/elixir/pull/3390)

Closes #3313.
Initial discussion: https://groups.google.com/forum/#!topic/elixir-lang-talk/cEWHayk45cw.

This PR introduces several features and building blocks:
- **`ProxyIO`** - provides an IO device that forwards IO requests to another IO device
- **`Logger.Backends.Capture`** - backend to store `Logger` messages in the its own state
- **`Logger.CaptureLog`** - utility to capture `Logger` messages
- **`Logger.CLIFormatter`** - `ExUnit` formatter that captures per test logs and prints as batch on failure.

\cc @MSch


#### [#3439] - (2015-06-30T07:23:08Z) - [Mention Enum.reduce/3 in Enum.reduce/2's documentation.](https://github.com/elixir-lang/elixir/pull/3439)

Also explain that the function won't reduce a one-element list.


#### [#3442] - (2015-06-29T15:43:55Z) - [sync documentation with code](https://github.com/elixir-lang/elixir/pull/3442)

The return value of Mix.compilers() is `[:yecc, :leex, :erlang, :elixir, :app]`


#### [#3441] - (2015-06-29T13:21:42Z) - [Fix the logger format in the Logger moduledoc to match the actual used one](https://github.com/elixir-lang/elixir/pull/3441)



#### [#3440] - (2015-06-29T07:07:15Z) - [small typo in special_forms docs](https://github.com/elixir-lang/elixir/pull/3440)



#### [#3437] - (2015-06-26T10:55:51Z) - [Mix new --umbrella: use only umbrella template for config.exs, not both umbrella and normal](https://github.com/elixir-lang/elixir/pull/3437)

In 88be750a the `config_umbrella` template was changed to work on its own, not as an addendum to the config template. But the create_file call still concatenated them together, giving redundant text and two `use Mix.Config` calls (see below).

```
# This file is responsible for configuring your application
# and its dependencies with the aid of the Mix.Config module.
use Mix.Config

# This configuration is loaded before any dependency and is restricted
# to this project. If another project depends on this project, this
# file won't be loaded nor affect the parent project. For this reason,
# if you want to provide default values for your application for third-
# party users, it should be done in your mix.exs file.

# Sample configuration:
#
#     config :logger, :console,
#       level: :info,
#       format: "$date $time [$level] $metadata$message\n",
#       metadata: [:user_id]

# It is also possible to import configuration files, relative to this
# directory. For example, you can emulate configuration per environment
# by uncommenting the line below and defining dev.exs, test.exs and such.
# Configuration from the imported file will override the ones defined
# here (which is why it is important to import them last).
#
#     import_config "#{Mix.env}.exs"
# This file is responsible for configuring your application
# and its dependencies with the aid of the Mix.Config module.
use Mix.Config

# The configuration defined here will only affect the dependencies
# in the apps directory when commands are executed from the umbrella
# project. For this reason, it is preferred to configure each child
# application directly and import its configuration, as done below.
import_config "../apps/*/config/config.exs"

# Sample configuration (overrides the imported configuration above):
#
#     config :logger, :console,
#       level: :info,
#       format: "$date $time [$level] $metadata$message\n",
#       metadata: [:user_id]
```


#### [#3431] - (2015-06-25T20:35:49Z) - [Support dialyzer attribute](https://github.com/elixir-lang/elixir/pull/3431)

18.0 adds support for `dialyzer` module attribute http://www.erlang.org/doc/man/dialyzer.html#suppression. I think we are ok to merge this to master but am unsure on the requirements, versus waiting for 1.2.
- Just a module attribute so it does not require 18.0
- Attribute warning suppression will only work when using dialyzer from 18.0+
- Can compile a project on 17.\* and use dialyzer from 18.0+


#### [#3433] - (2015-06-25T20:35:07Z) - [Improve Kernel.Def](https://github.com/elixir-lang/elixir/pull/3433)

added formatting styles, and replaced a `case` when a `cond` (according to my opinion) made more sense. 


#### [#3435] - (2015-06-25T20:19:36Z) - [Make error messages in lowercase](https://github.com/elixir-lang/elixir/pull/3435)



#### [#3427] - (2015-06-25T13:59:54Z) - [(possible) fix for the unit test problem of Erlang maps in R18.0](https://github.com/elixir-lang/elixir/pull/3427)

This is a _possible_ fix for the failing test _update maps_ with Erlang R18.0. I also tested it with Erlang R17.5.6.

```
> make clean test
==> elixir (exunit)

  1) test update maps (MapTest)
     test/elixir/map_test.exs:85
     Expected exception ArgumentError but got ErlangError (erlang error: {:badkey, :c})
     stacktrace:
       test/elixir/map_test.exs:88
```

I call it "_possible_" because it is based on hints from _James Fish_ (Slacker: @fishcakez) and I am not 100% sure, that it is the _right_ way to do it.


#### [#3430] - (2015-06-25T09:14:44Z) - [Switch mix to using https:// instead of git:// in GitHub URLs](https://github.com/elixir-lang/elixir/pull/3430)

This is a proposal solution for problem described here:
https://github.com/elixir-lang/elixir/issues/3424

I am not 100% sure if the solution is correct. I have implemented it in the way that the check is performed on dependency resolution, where git repo urls are compared. The URL is normalized to be https:// before comparing old one and new one.

I have checked that works as expected on my projects. It does not prompt for update dependencies when upgrading to use Elixir with this change. The mix.lock file was also _not_ changed. Only on the next `mix deps.update --all`, the `git://` protocol in mix.lock is replaced with `https://` and new mix.lock file is being saved.


#### [#3419] - (2015-06-23T12:52:32Z) - [Allow not implemented tests in ExUnit](https://github.com/elixir-lang/elixir/pull/3419)

My usual workflow in, say Rails, is that I first define a bunch of stub tests that look like this:

```
test "some behavior"
test "some other behavior"
test "something else, maybe"
```

I have tried that with ExUnit and it exploded with undefined method test/1

This code creates a macro, which handles this situation. Such defined tests will be skipped by the test runner, and appropriate "Not yet implemented" message should be shown.

Please note it is like my first Elixir code I have written, if this is stupid it's totally my fault.


#### [#3421] - (2015-06-23T10:10:14Z) - [Typo in doc for custom logger backends](https://github.com/elixir-lang/elixir/pull/3421)



#### [#3416] - (2015-06-22T09:01:30Z) - [handle completion of erlang module aliases](https://github.com/elixir-lang/elixir/pull/3416)

Hi,
### The case for complete aliases of Elixir modules works fine.

``` elixir
iex(3)> alias List, as: MyList
nil
iex(4)> MyList.
Chars                 delete/2              delete_at/2
duplicate/2           first/1               flatten/1
flatten/2             foldl/3               foldr/3
insert_at/3           keydelete/3           keyfind/4
keymember?/3          keyreplace/4          keysort/2
keystore/4            last/1                replace_at/3
to_atom/1             to_existing_atom/1    to_float/1
to_integer/1          to_integer/2          to_string/1
to_tuple/1            update_at/3           wrap/1
zip/1
```
### The case for complete aliases of Erlang modules crashes.

``` elixir
iex(4)> alias :lists, as: MyList
nil
iex(5)> MyList.*** ERROR: Shell process terminated! (^G to start new job) ***

08:16:31.447 [error] Error in process <0.25.0> with exit value: {function_clause,[{'Elixir.Module',split,[<<5 bytes>>],[{file,"lib/module.ex"},{line,888}]},{'Elixir.IEx.Autocomplete','-expand_alias/1-fun-0-',3,[{file,"lib/iex/autocomplete.ex"},{line,161}]},{'Elixir.Enum',do_find_value,3,[{file,"lib/enum...
```
### After fix

``` elixir
iex(1)> alias :lists, as: MyList
nil
iex(2)> MyList.
all/2            any/2            append/1         append/2
concat/1         delete/2         droplast/1       dropwhile/2
duplicate/2      filter/2         filtermap/2      flatlength/1
flatmap/2        flatten/1        flatten/2        foldl/3
foldr/3          foreach/2        keydelete/3      keyfind/3
keymap/3         keymember/3      keymerge/3       keyreplace/4
keysearch/3      keysort/2        keystore/4       keytake/3
last/1           map/2            mapfoldl/3       mapfoldr/3
max/1            member/2         merge/1          merge/2
merge/3          merge3/3         min/1            module_info/0
module_info/1    nth/2            nthtail/2        partition/2
prefix/2         reverse/1        reverse/2        rkeymerge/3
rmerge/2         rmerge/3         rmerge3/3        rukeymerge/3
rumerge/2        rumerge/3        rumerge3/3       seq/2
seq/3            sort/1           sort/2           split/2
splitwith/2      sublist/2        sublist/3        subtract/2
suffix/2         sum/1            takewhile/2      ukeymerge/3
ukeysort/2       umerge/1         umerge/2         umerge/3
umerge3/3        unzip/1          unzip3/1         usort/1
usort/2          zf/2             zip/2            zip3/3
zipwith/3        zipwith3/4
```

I stumbled over that because my work with Alchemist. 

I'm not sure it's a proper solution, feedback is highly welcome and appreciated. :smile: 

Cheers

Samuel


#### [#3415] - (2015-06-22T06:31:51Z) - [Minor string documentation improvements ](https://github.com/elixir-lang/elixir/pull/3415)

Noticed a couple of sentences in the String documentation that I thought could be improved.

Very open to suggestions if you have any.


#### [#3412] - (2015-06-21T07:59:03Z) - [Use file alias 'F' for consistency](https://github.com/elixir-lang/elixir/pull/3412)

The do_mkdir_p function uses :file, which is alias to 'F' at the top of the file.  'F' is used everywhere else.


#### [#3411] - (2015-06-20T20:36:17Z) - [Remove previous archive after download success](https://github.com/elixir-lang/elixir/pull/3411)

RFC @ericmj ‚Äî This should close #3345.  Thanks in advance for your feedback :tada:


#### [#3410] - (2015-06-20T13:55:02Z) - [fix warning of unused variable in test](https://github.com/elixir-lang/elixir/pull/3410)



#### [#3409] - (2015-06-20T08:06:41Z) - [Additional Enum.reduce_while/3 tests](https://github.com/elixir-lang/elixir/pull/3409)

RFC @josevalim, @eksperimental ‚Äî This PR is in response to @eksperimental [great feedback](https://github.com/elixir-lang/elixir/pull/3405#issuecomment-113687080) regarding my `Enum.reduce_while/3` tests.

I changed the documentation example and added two new tests: with only `:halt` and without `:halt`.

Feedback always appreciated, thanks agains @eksperimental :grinning: 


#### [#3408] - (2015-06-20T08:05:34Z) - [Update Application docs to make them more accurate.](https://github.com/elixir-lang/elixir/pull/3408)

The docs claimed that `get_env`/`fetch_env`/`fetch_env!` return
a default value/return :error/raise an exception when passed an
application that is not loaded. However, this is not the observed
behavior:

``` elixir
iex(1)> Application.put_env :foo, :bar, :baz
:ok
iex(2)> Application.get_env :foo, :bar
:baz
```

See https://groups.google.com/forum/#!topic/elixir-lang-talk/5yX9hBNEXe0 for background.

@josevalim, as discussed I didn't mention the exrm issue I ran into but tried to put a general warning that will hopefully help others avoid the issue I ran into.  Let me know if you have any suggestions!


#### [#3405] - (2015-06-19T20:42:40Z) - [Add support for Enum.reduce_while/3](https://github.com/elixir-lang/elixir/pull/3405)

RFC @josevalim ‚Äî This adds support for `Enum.reduce_while/3` as you suggested, it closes #3402.

Thanks in advance for your feedback!


#### [#3404] - (2015-06-19T06:34:02Z) - [Better documentation for Task.await](https://github.com/elixir-lang/elixir/pull/3404)

explain that if Task.await times out, then it will exit, however, the task will still be running


#### [#3395] - (2015-06-15T21:00:14Z) - [Allows underscores in binary, hex and octal literals (e.g, 0b0001_0010)](https://github.com/elixir-lang/elixir/pull/3395)

Elixir currently only supports underscores in decimal numbers. This PR extends it to hex, octal and binary literals.


#### [#3399] - (2015-06-15T20:49:35Z) - [Manpage corrections](https://github.com/elixir-lang/elixir/pull/3399)

Hi there,

I have three small tweaks related to the manpages.
1. `man elixir` should show `ELIXIR 1` on the top not `IEX 1`
2. More direct wording of the cookie option.
3. Ignore `man/elixir.1` and `man/iex.1` as they are build artifacts.


#### [#3398] - (2015-06-15T13:42:42Z) - [Remove an erroneous comment from String.to_char_list's doc](https://github.com/elixir-lang/elixir/pull/3398)



#### [#3396] - (2015-06-14T20:58:29Z) - [Mention the use of records in pattern matches](https://github.com/elixir-lang/elixir/pull/3396)

The macros generated by `Record.defrecord/2` can be used in pattern matches to bind the fields of the record to variables. This wasn't mentioned in the docs (I don't know if this was on purpose).

I spotted this the first time in Plug ([here](https://github.com/elixir-lang/plug/blob/master/lib/plug/static.ex#L194)).


#### [#3043] - (2015-06-12T07:11:44Z) - [Added man page for iex/elixir](https://github.com/elixir-lang/elixir/pull/3043)



#### [#3393] - (2015-06-12T06:56:03Z) - [spell backpressure consistently](https://github.com/elixir-lang/elixir/pull/3393)



#### [#3391] - (2015-06-10T12:04:12Z) - [Restructure and add to Kernel.<<>>/2 docs](https://github.com/elixir-lang/elixir/pull/3391)

Restructured to walk through types and the various options followed by an overview of binary matching. Small section on performance and optimization.


#### [#3389] - (2015-06-09T16:00:13Z) - [Fix typo](https://github.com/elixir-lang/elixir/pull/3389)

"retriving" -> "retrieving"


#### [#3387] - (2015-06-08T19:23:05Z) - [Skip test that depends on read-only file when running as root](https://github.com/elixir-lang/elixir/pull/3387)

This test should not run when running as `root`, since read-only does not apply to root users. Issue #3380. 


#### [#3385] - (2015-06-08T14:10:04Z) - [Changes to "v" IEx helper](https://github.com/elixir-lang/elixir/pull/3385)

- Remove current v/0
- Add v/0 such that v() == v(-1)


#### [#3288] - (2015-06-07T18:04:47Z) - [Handle :undefined in Exception.format_arity/1](https://github.com/elixir-lang/elixir/pull/3288)

We get :undefined when a temporary worker of a simple_one_for_one supervisor crashes.

This PR fixes the following error.

```
18:19:15.088 [error] GenEvent handler Logger.ErrorHandler installed at :error_logger
** (exit) an exception was raised:
    ** (FunctionClauseError) no function clause matching in Exception.format_arity/1
        (elixir) lib/exception.ex:431: Exception.format_arity(:undefined)
        (elixir) lib/exception.ex:427: Exception.format_mfa/3
        (logger) lib/logger/translator.ex:165: Logger.Translator.child_info/2
        (logger) lib/logger/translator.ex:90: Logger.Translator.translate_supervisor/2
        (logger) lib/logger/error_handler.ex:116: Logger.ErrorHandler.translate/6
        (logger) lib/logger/error_handler.ex:62: Logger.ErrorHandler.log_event/5
        (logger) lib/logger/error_handler.ex:27: Logger.ErrorHandler.handle_event/2
        (stdlib) gen_event.erl:525: :gen_event.server_update/4
```

To reproduce the error, create a new application with `mix new --sup arity`, add the following code to it:

``` elixir
defmodule Worker do
  use GenServer
  def start_link, do: GenServer.start_link(__MODULE__, [], [])
  def init([]), do: 1 / 0
end

defmodule Arity do
  use Application

  def start(_type, _args) do
    import Supervisor.Spec
    children = [worker(Worker, [], restart: :temporary)]
    opts = [strategy: :simple_one_for_one, name: __MODULE__]
    Supervisor.start_link(children, opts)
  end

  def start_child do
    Supervisor.start_child(__MODULE__, [])
    receive do end
  end
end
```

And configure `:logger` as follows:

``` elixir
config :logger, [
  handle_sasl_reports: true,
]
```

Finally, run

``` sh
$ mix run -e Arity.start_child
```


#### [#3382] - (2015-06-06T17:30:28Z) - [Fix `StringIO` processes leakage in the `ExUnit.CaptureIO`](https://github.com/elixir-lang/elixir/pull/3382)



#### [#3378] - (2015-06-05T08:45:04Z) - [Defining arg0 for System.cmd tests so it can work with busybox](https://github.com/elixir-lang/elixir/pull/3378)

On Busybox based linux distributions the `echo` command is just a link to the `busybox` executable. 
In order to execute the right command (applet), busybox depends on `arg0`, which should be the link's name.

How to simulate:

```
docker run --rm -it msaraiva/build-elixir

$ git clone https://github.com/elixir-lang/elixir.git
$ cd elixir
$ make test
```

Two tests should fail:

```
  1) test cmd/2 with absolute and relative paths (SystemTest)
     test/elixir/system_test.exs:74
     match (=) failed
     code: {"hello\n", 0} = System.cmd(Path.join(System.cwd!(), @echo), ["hello"])
     rhs:  {"", 1}
     stacktrace:
       test/elixir/system_test.exs:87: anonymous fn/0 in SystemTest.test cmd/2 with absolute and relative paths/1
       (elixir) lib/file.ex:1105: File.cd!/2
       test/elixir/system_test.exs:79

  2) test cmd/3 (with options) (SystemTest)
     test/elixir/system_test.exs:66
     match (=) failed
     code: {["hello\n"], 0} = System.cmd("echo", ["hello"], into: [], cd: System.cwd!(), env: %{"foo" => "bar"}, arg0: "hecho", stderr_to_stdout: true, parallelism: true)
     rhs:  {["hecho: applet not found\n"], 1}
     stacktrace:
       test/elixir/system_test.exs:67
```

Defining arg0 properly fix the problem.


#### [#3377] - (2015-06-04T19:13:19Z) - [docs(Mix.Tasks.App.Start): fix typo](https://github.com/elixir-lang/elixir/pull/3377)



#### [#3372] - (2015-06-04T15:23:41Z) - [Use reliable home directory source](https://github.com/elixir-lang/elixir/pull/3372)

This is the intended way to get the home directory in Erlang, is there a reason we don't use it?

http://www.erlang.org/documentation/doc-6.4/erts-6.4/doc/html/init.html#get_argument-1


#### [#3369] - (2015-06-01T08:21:42Z) - [`ProtocolTest` improvements and Suppress warnings in `Inspect.Algebra`](https://github.com/elixir-lang/elixir/pull/3369)



#### [#3366] - (2015-05-30T19:00:52Z) - [Fix GenEvent detecting module that isn't loaded](https://github.com/elixir-lang/elixir/pull/3366)



#### [#3364] - (2015-05-30T15:16:09Z) - [Copy-edit the module documentation of Application](https://github.com/elixir-lang/elixir/pull/3364)

I found some noteworthy and confusing sentences in the module documentation of Application, so I edited them so they are less confusing.


#### [#3362] - (2015-05-29T15:55:28Z) - [IEx Autocomplete assumes module at each level, issue 3361](https://github.com/elixir-lang/elixir/pull/3362)

Possible fix for
https://github.com/elixir-lang/elixir/issues/3361


#### [#3359] - (2015-05-28T08:34:34Z) - [Issue 3339](https://github.com/elixir-lang/elixir/pull/3359)

Fixes for Issue #3339 

Replaced line-based reading in IO.binread(_, :all) by a 4K block read. Added appropriate unit test.


#### [#3356] - (2015-05-27T20:47:01Z) - [`surround_many/5` handles empty documents](https://github.com/elixir-lang/elixir/pull/3356)

`surround/3` correctly handles empty documents, ex

```
iex> doc = Inspect.Algebra.surround "[", Inspect.Algebra.empty, "]"
iex> Inspect.Algebra.format(doc, 80) |> IO.iodata_to_binary
"[]"
```

But `surround_many/5` didn't

```
iex> fun = fn(d, _) -> d end
iex> opts = %Inspect.Opts{}
iex> what = ["a", Inspect.Algebra.empty]
iex> doc = Inspect.Algebra.surround_many("[", what, "]", opts, fun, ",")
iex> Inspect.Algebra.format(doc, 80) |> IO.iodata_to_binary
"[a, ]"
```

This is what I expect and what it does now

```
iex> doc = Inspect.Algebra.surround_many("[", what, "]", opts, fun, ",")
iex> Inspect.Algebra.format(doc, 80) |> IO.iodata_to_binary
"[a]"
```


#### [#3358] - (2015-05-27T19:07:47Z) - [Fix an errant function arity in the docs](https://github.com/elixir-lang/elixir/pull/3358)



#### [#3357] - (2015-05-27T13:20:59Z) - [Fenced code blocks support on IO.ANSI.Docs](https://github.com/elixir-lang/elixir/pull/3357)

Added support for fenced code blocks on `IO.ANSI.Docs`. In this case, the fenced code block begins with a delimiter of three tildes (~) or backticks (`) and end with a row of tildes or backticks that must be equal as the starting row. Everything between these delimiters are treated as source code and no indentation is required as in the case of _verbatim code blocks_ (4 spaces).

@josevalim suggested to add this [feature](https://github.com/elixir-lang/ex_doc/pull/211#issuecomment-104319002) to allow fenced blocks in Elixir's documentation.

![markdown_fenced_code_blocks](https://cloud.githubusercontent.com/assets/34700/7835052/68d403e4-043b-11e5-9ecb-274eecd25991.png)

Please let me know what do you think


#### [#3347] - (2015-05-24T07:37:31Z) - [Fix docs typos](https://github.com/elixir-lang/elixir/pull/3347)

Mostly a typos fix PR, plus a fix for the wrong word being used twice.  Also, there's a nil reference that isn't being quoted like all the other nils in the docs.


#### [#3344] - (2015-05-22T13:09:55Z) - [Fix a file coping to itself](https://github.com/elixir-lang/elixir/pull/3344)

Closes #3155.
Cancels #3156.


#### [#3343] - (2015-05-20T14:25:31Z) - [Added documentation an examples for bitstring](https://github.com/elixir-lang/elixir/pull/3343)

Changed some examples to _doctests_ in `bitstring` docs. Also added a note when the user specify the unit without specifying the size for a `bitstring`.


#### [#3337] - (2015-05-19T08:19:30Z) - [Support printing pids in Logger metadata.](https://github.com/elixir-lang/elixir/pull/3337)

Fixes #3336.

This _only_ supports printing metadata that conforms to `String.Chars` or is a pid. I'm not sure if that's what we want, I'd like to also be able to have refs as metadata for example.

Also please backport to 1.0


#### [#3338] - (2015-05-19T08:18:36Z) - [Consider subdirectories in `Mix.Project.config_files/0`](https://github.com/elixir-lang/elixir/pull/3338)



#### [#3335] - (2015-05-18T11:30:03Z) - [Rename the first argument to the Logger macros](https://github.com/elixir-lang/elixir/pull/3335)

The argument was called `chardata` but the macros accept chardata as well as an anonymous function (like the documentation for `Logger.log/3` shows). I think calling the argument `chardata_or_fn` will make documentation a little bit clearer.


#### [#3331] - (2015-05-16T06:57:57Z) - [Add `Process.hibernate/3`](https://github.com/elixir-lang/elixir/pull/3331)



#### [#3329] - (2015-05-14T17:16:37Z) - [update anchor portion of link to erlang docs](https://github.com/elixir-lang/elixir/pull/3329)

Minor documentation tweak: the [doc for `Module.__info__/1`](http://elixir-lang.org/docs/v1.0/elixir/Module.html#__info__/1) has a link to the Erlang doc for `module_info`; however the anchor (`#`) portion of the URL was out of date and no longer jumped the browser to the `model_info` section of the doc.

Is there a more future-proof way of keeping links like this up-to-date?


#### [#3326] - (2015-05-13T17:59:53Z) - [Bugfix to syntax error before sigil](https://github.com/elixir-lang/elixir/pull/3326)

Closes #3324

This extends the nice error to cover more cases.  The message itself is altered a bit (added "starting" to it) since this is no longer giving the content but just the first part of it which is binary.  In cases where the first part isn't binary, this isn't ideal, but I didn't know of a reasonably simple alternative.


#### [#3325] - (2015-05-12T20:24:26Z) - [Fix `=` to `==` in a KeywordTest test](https://github.com/elixir-lang/elixir/pull/3325)

I noticed it via this warning running the tests:

```
test/elixir/keyword_test.exs:72: warning: variable get is unused
```


#### [#3318] - (2015-05-12T16:50:19Z) - [Correct `Port.info/1,2` functions](https://github.com/elixir-lang/elixir/pull/3318)

Hey, I would appreciate any feedback on this.


#### [#3323] - (2015-05-12T16:27:46Z) - [Fix `Keyword.get_and_update/3` function](https://github.com/elixir-lang/elixir/pull/3323)



#### [#3309] - (2015-05-10T16:33:47Z) - [use $REBAR on mix tests](https://github.com/elixir-lang/elixir/pull/3309)

In an official Debian package I wont't ship a sourceless binary (rebar)
but instead use the one already packaged in Debian. This should have no
effect on users building manually from source though.


#### [#3308] - (2015-05-06T17:44:43Z) - [Packaging improvements](https://github.com/elixir-lang/elixir/pull/3308)

Hi,

I am packaging elixir for the official Debian archive. These changes make small improvements to the packaging, which is BTW already quite good, to make it even easier to build distribution packages.

The commits messages for each individual  commit should be self-explanatory.


#### [#3302] - (2015-05-03T09:36:55Z) - [Use agents to store Mix config](https://github.com/elixir-lang/elixir/pull/3302)

Mix config was stored in a variable (`var!(config, Mix.Config)`) which was initialized at every `use Mix.Config`. Using a variable worked well but didn't allow pretty much anything outside "straight" code. For example, you could do this:

``` elixir
config :foo, bar: :baz

if 3 + 2 == 5
  config :foo, [math: :check]
end
```

but you could not do this:

``` elixir
f = fn ->
  config :foo, bar: :baz
end
f.()
```

since functions can't leak their scope into the outside scope, so changes to the `config` variable were not "persisted". `for` comprehensions were not allowed in the same way.

This commit introduces a `Mix.ConfigAgent` module so that configuration can be stored inside an agent. An agent is started every time that `use Mix.Config` is called, and is stopped by `Mix.Config.read!/1` (which is the basic unit for reading configuration; everything else should use it). By the way, we're still using a "global" variable (`var!(config_agent, Mix.Config)`) for the pid of the agent but that's fine since we only **read** its value.

I'm not 100% sure that going with a separate `Mix.ConfigAgent` module is a good idea. We could easily put the (very little) logic that now is in `Mix.ConfigAgent` right inside `Mix.Config`. Let me know what you think!

**Edit** Also, I'm not sure if stopping agents inside `Mix.Config.read!/1` is fine, but I think the only place where you don't put config in a file and you directly call `use Mix.Config` is in tests, so it should be fine.


#### [#3298] - (2015-05-01T09:16:44Z) - [Revert d49fb06 now underlying issue has been resolved.](https://github.com/elixir-lang/elixir/pull/3298)

The old formatting is much nicer. :)

This reverts commit d49fb0662c98ef4079dbad35128034495e03592f.
#3297


#### [#3297] - (2015-04-30T16:30:50Z) - [EEx doc: Prevent list from being rendered as code blocks](https://github.com/elixir-lang/elixir/pull/3297)

Hello! This should fix these paragraphs being displayed as code blocks. See attached screenshot.

![screen shot 2015-04-30 at 17 28 26](https://cloud.githubusercontent.com/assets/6134406/7417506/6d0adf9c-ef5e-11e4-848d-0177bc71e1a9.png)


#### [#3296] - (2015-04-29T11:57:04Z) - [Fix inferred argument names in `Module.simplify_signature/2`](https://github.com/elixir-lang/elixir/pull/3296)

Arguments like literals (e.g., `4`) were converted into variables like `int1` by `Module.simplify_signature/2`. This commit changes this behaviour by adding an index only if necessary (i.e., there are duplicates in the signature). For example:

``` elixir
def foo([], 1, %{}, 2)
```

becomes

``` elixir
def foo(list, int1, map, int2)
```

The code I added in this PR is not the cleanest code I ever wrote, but I couldn't come up with anything better. It works though :)

Let me know if I can do anything else, thanks!


#### [#3294] - (2015-04-29T10:34:47Z) - [Improve message for compilation error `:eacces`](https://github.com/elixir-lang/elixir/pull/3294)

Closes #3164

This commit improves the error message that results when compilation of
a file fails due to not having write access to a .beam file that needs
to be written to.  It also fixes a nearby typo and removes the `async`
option from the tests in `Kernel.CLI.CompileTest`, since these tests
have side-effects.


#### [#3280] - (2015-04-28T06:26:33Z) - [Provide tab-completion for aliases](https://github.com/elixir-lang/elixir/pull/3280)

Closes #2519.

It is based on `IEx.Server.whereis/0` usage, as there is no other way to reach current `%IEx.State{}`.
Probably we can use separate agent to track state, not sure if it worth it though; the current implementation might be OK for a first iteration.
I'd like to have any feedback or suggestions ot it. Just for reference: https://github.com/elixir-lang/elixir/issues/2519#issuecomment-48834111.

This also makes possible to add tab-completion for user imports.


#### [#3291] - (2015-04-27T17:56:11Z) - [Support maps and fix structs in `Module.simplify_signature/2`](https://github.com/elixir-lang/elixir/pull/3291)

`Module.simplify_signature/2` didn't support maps (easy to guess since they're represented as `{:%{}, _, _}`) or structs.

With the changes introduced in this PR, it should support maps:

``` elixir
def foo(%{}) #=> def foo(map1)
```

as well as structs:

``` elixir
def cast(%Ecto.Changeset{}) #=> def cast(changeset1)
def cast(%MyStruct{}) #=> def cast(my_struct1)
```

In order to handle structs, I matched on `{:%, _, [struct, fields]}` asts and expanded `struct` with `Macro.expand/2` in `Module.compile_doc/6` instead of passing the env down to `simplify_signature/2`. 

Let me know if everything is fine!

(edit: I overwrote the commits since the tests were failing cause you can't use `|>` in the `Module` module, now everything is green)


#### [#3290] - (2015-04-27T16:56:23Z) - [Mix: fix import_config with non-matching wildcard](https://github.com/elixir-lang/elixir/pull/3290)

Closes #3120

I'm not entirely sure about this.  It does fix the problem, while keeping the behavior of raising an error if a non-glob name of a non-existent file is received (as tested in `"import_config/1 with bad path"`).  But it seems less than ideal that a function called `read_wildcard!` handles the degenerate case of a concrete filename with no wildcards as a special case.  It would make more sense for it to treat it as a non-matching glob too (just using `Path.wildcard(path)` regardless of whether or not there are any results), but that would break the functionality of raising an error if called with a non-glob filename for a file that doesn't exist.  

There are other ways one could go (e.g. to modify `import_config` so it call either `read!` or `read_wildcard!` depending on whether or not it's a glob), but since these are public functions I figured it's best to start with the smallest change and get some feedback.


#### [#3264] - (2015-04-22T06:07:23Z) - [Implement `Tuple.append/2`](https://github.com/elixir-lang/elixir/pull/3264)

`Tuple.append/2` adds an element to the end of a tuple, which
mirrors what Erlang's `append_element/2` does. Therefore,
`Tuple.append/2` is implemented to maintain consistency of the API.


#### [#3286] - (2015-04-20T13:10:46Z) - [Rename Enum.sample to Enum.random. Fixes #3285.](https://github.com/elixir-lang/elixir/pull/3286)



#### [#3281] - (2015-04-19T19:22:00Z) - [Check on mix new if the given application module exists and raises if so](https://github.com/elixir-lang/elixir/pull/3281)

My attempt to do #3275. What are your thoughts? :)

Also, is there a way to run just one file or module or tests in this project? I couldn't work out how to do anything more specific than `make test`.

Cheers,
Louis


#### [#3278] - (2015-04-17T20:51:53Z) - [Fix default value on `which_applications` timeout](https://github.com/elixir-lang/elixir/pull/3278)



#### [#3276] - (2015-04-17T18:57:27Z) - [Polish the docs for `Regex.split/2` and `Regex.scan/2`](https://github.com/elixir-lang/elixir/pull/3276)

- the docs for `Regex.split/2` had a couple of grammar errors and some errors in the options description
- the docs for `Regex.scan/2` were a single long paragraph, which I split into a short summary and a more in-depth description


#### [#3271] - (2015-04-15T18:41:43Z) - [Avoid "module currently being defined" races in tests](https://github.com/elixir-lang/elixir/pull/3271)



#### [#3270] - (2015-04-15T16:16:40Z) - [Add `Application.fetch_env!/2` and simplify `Application.get_env/3`](https://github.com/elixir-lang/elixir/pull/3270)



#### [#3267] - (2015-04-13T17:11:02Z) - [Add further docs for `Kernel.struct/2`](https://github.com/elixir-lang/elixir/pull/3267)

I added a section in the docs for `Kernel.struct/2` which explains how to properly convert a `Map.t` to a struct by using `Kernel.struct/2` instead of by just adding the appropriate `:__struct__` field to the map.

I got bitten by this, so I hope it can help other people on the road :).


#### [#3266] - (2015-04-12T13:42:02Z) - [Fix whitespace errors in Integer source file](https://github.com/elixir-lang/elixir/pull/3266)

I had left in (e8cd5baf) an extraneous space causing the rendered markdown to be incorrectly displayed. Fixed now :smiley:

Screenshot [from the docs](http://elixir-lang.org/docs/master/elixir/Integer.html#undigits/2) showing the error:

![image](https://cloud.githubusercontent.com/assets/613821/7105569/369d9d60-e120-11e4-9689-c01882491c4b.png)


#### [#3265] - (2015-04-11T14:27:36Z) - [EEx: allow `)` after `end` in end tokens](https://github.com/elixir-lang/elixir/pull/3265)

Closes #3017

@josevalim Or at least it's a start.  I haven't used EEx much, so I'm not able identify additional use-cases we may want to cover (and I generally prefer to keep any logic in templates simpler than elsewhere).  If you know of others, I can look into them and see what it would take to support them.

The other thing to say is that this will also tokenize `else )`, etc. as `middle_expr`, whereas before it would've been `expr`.  But such cases are not valid in the first place and result in a `SyntaxError` as they should both before and after this patch, so I don't think it's a problem.  I also didn't think it called for additional tests about their error, since these are just invalid syntax not specific to EEx.


#### [#3258] - (2015-04-11T11:56:03Z) - [Introduce `MapSet` data type](https://github.com/elixir-lang/elixir/pull/3258)

Closes #3242.

**Erlang/OTP 18 RC-1**
- [x] new
- [x] put
  - 100 elements
  
  ```
  MapSet:    10000000   0.16 ¬µs/op
  HashSet:   10000000   0.37 ¬µs/op
  ```
  - 200 elements
  
  ```
  MapSet:    10000000   0.16 ¬µs/op
  HashSet:   10000000   0.42 ¬µs/op
  ```
  - 1000 elements
  
  ```
  MapSet:    10000000   0.21 ¬µs/op
  HashSet:   10000000   0.51 ¬µs/op
  ```
  - 5000 elements
  
  ```
  MapSet:    10000000   0.26 ¬µs/op
  HashSet:   10000000   0.60 ¬µs/op
  ```
- [x] delete
  - 100 elements
  
  ```
  MapSet:   100000000   0.11 ¬µs/op
  HashSet:   10000000   0.17 ¬µs/op
  ```
  - 200 elements
  
  ```
  MapSet:    10000000   0.11 ¬µs/op
  HashSet:   10000000   0.19 ¬µs/op
  ```
  - 1000 elements
  
  ```
  MapSet:    10000000   0.11 ¬µs/op
  HashSet:   10000000   0.31 ¬µs/op
  ```
  - 5000 elements
  
  ```
  MapSet:    10000000   0.13 ¬µs/op
  HashSet:   10000000   0.33 ¬µs/op
  ```
- [x] difference
  - 200 elements
  
  ```
  MapSet:       50000   42.51 ¬µs/op
  HashSet:      20000   98.89 ¬µs/op
  ```
- [x] disjoint?
  - 200 elements (unequal)
  
  ```
  MapSet:      500000   2.28 ¬µs/op
  HashSet:   10000000   0.51 ¬µs/op
  ```
  
  where the `:maps.to_list` itself is taking `2.03 ¬µs/op`
  - 200 elements (equal)
  
  ```
  MapSet:      100000   28.80 ¬µs/op
  HashSet:      10000   126.70 ¬µs/op
  ```
- [x] equal?
  - 200 elements
  
  ```
  MapSet:   100000000   0.07 ¬µs/op
  HashSet:      10000   128.45 ¬µs/op
  ```
  - 1000 elements (equal)
  
  ```
  MapSet:   100000000   0.07 ¬µs/op
  HashSet:       5000   704.84 ¬µs/op
  ```
  - 1000 elements (unequal)
  
  ```
  MapSet:   100000000   0.09 ¬µs/op
  HashSet:   10000000   0.71 ¬µs/op
  ```
- [x] intersection
  - 200 elements
  
  ```
  MapSet:       50000   34.56 ¬µs/op
  HashSet:      20000   83.33 ¬µs/op
  ```
- [x] member?
  - 200 elements
  
  ```
  MapSet:   100000000   0.07 ¬µs/op
  HashSet:   10000000   0.20 ¬µs/op
  ```
  - 1000 elements
  
  ```
  MapSet:   100000000   0.07 ¬µs/op
  HashSet:   10000000   0.22 ¬µs/op
  ```
  - 5000 elements
  
  ```
  MapSet:   100000000   0.08 ¬µs/op
  HashSet:   10000000   0.26 ¬µs/op
  ```
- [x] size
- [x] subset?
  
  same as for `disjoint?`
- [x] to_list
  - 200 elements
  
  ```
  MapSet:     1000000   2.05 ¬µs/op
  HashSet:      50000   38.05 ¬µs/op
  ```
  - 1000 elements
  
  ```
  MapSet:      100000   12.33 ¬µs/op
  HashSet:      10000   209.33 ¬µs/op
  ```
  - 5000 elements
  
  ```
  MapSet:       50000   70.11 ¬µs/op
  HashSet:       2000   939.45 ¬µs/op
  ```
- [x] union
  - 200 elements
  
  ```
  MapSet:      200000   7.21 ¬µs/op
  HashSet:      10000   159.85 ¬µs/op
  ```
  - 1000 elements
  
  ```
  MapSet:      100000   27.98 ¬µs/op
  HashSet:       2000   850.68 ¬µs/op
  ```
  - 5000 elements
  
  ```
  MapSet:       10000   207.84 ¬µs/op
  HashSet:        500   4208.29 ¬µs/op
  ```


#### [#3263] - (2015-04-10T19:13:25Z) - [Refactor File! methods to avoid going through IO.chardata_to_string twice](https://github.com/elixir-lang/elixir/pull/3263)

All the non-! methods pass the pass argument through `IO.chardata_to_string`, and we are doing this work twice for the ! methods since we convert once before delegating to the non-! versions.

This moves the conversion to the exception case only, which should be far less common, thus avoiding going through the duplicated call.

It also refactors the `cd!` method to be in terms of `cd` to avoid the duplicated internal implementation.

Let me know if anything needs improving, thanks! :heart:


#### [#3262] - (2015-04-10T17:21:44Z) - [EEx: correct doc for handle_assign/1](https://github.com/elixir-lang/elixir/pull/3262)



#### [#3261] - (2015-04-10T16:59:23Z) - [Rename `term` into `value` in `Tuple.insert_at`](https://github.com/elixir-lang/elixir/pull/3261)

In `Tuple.insert_at` documentation, a variable `value` was used
to represent a value to be inserted into a tuple. In the function
definition, however, it was represented as a variable `term`, which
was inconsistency and apparently a typo.


#### [#3260] - (2015-04-10T07:14:19Z) - [Replace `:erlang.now/0` with `:os.timestamp/0`](https://github.com/elixir-lang/elixir/pull/3260)



#### [#3252] - (2015-04-07T09:04:42Z) - [remove repeated word](https://github.com/elixir-lang/elixir/pull/3252)

in the same fashion as https://github.com/elixir-lang/elixir-lang.github.com/pull/503

the following command will search for repeated words

``` bash
ag -i '\b((?!end)[a-z]+)\s+\1\b'
```

or to be used in https://github.com/elixir-lang/elixir-lang.github.com

``` bash
ag -i '\b((?!(end|iex|true))[a-z]+)\s+\1\b'
```


#### [#3250] - (2015-04-06T19:11:57Z) - [Remove guards. Fixes #3248.](https://github.com/elixir-lang/elixir/pull/3250)



#### [#3246] - (2015-04-06T15:56:15Z) - [Add some docs to `Kernel.defprotocol/2`](https://github.com/elixir-lang/elixir/pull/3246)

I added a paragraph mentioning that the `:for` option passed to `defimpl` can be omitted when the implementation is inside the module for which the protocol is being implemented. This wasn't mentioned anywhere.


#### [#3245] - (2015-04-06T15:41:58Z) - [Add some docs to `defstruct/1`](https://github.com/elixir-lang/elixir/pull/3245)

The documentation for `defstruct/1` didn't mention that a list of atoms can be passed as an argument instead of a keyword list. I added the missing documentation.


#### [#3239] - (2015-04-05T19:03:23Z) - [Improve handling of the IEx history state](https://github.com/elixir-lang/elixir/pull/3239)

Continuation of #2318. Closes #2264. Cancels #3123.


#### [#3240] - (2015-04-05T17:29:35Z) - [No longer translate arguments to `@on_definition`](https://github.com/elixir-lang/elixir/pull/3240)

Breaking change: the arguments to the `@on_definition` hook are no
longer expanded and translated, but are passed in their original quoted
form.  The only exception is module attributes (e.g. `@my_constant`),
which are expanded.

The reason for this change is that this hook is used for generating
functions' documentation, and the previous behavior was causing
incorrect signatures in the documentation.  See #3143 for details.

Closes #3143

Some additional comments:
- For the `Body` argument, I am just passing the expression, rather than `[do: expr]`.  This seemed like the more reasonable thing to do.
- `run_on_definition_callbacks` is being called after the translation (but with the untranslated values).  The reason is that if it's called before, it messes up the `bad_unquoting` test in `errors_test.exs`.  Breaking a test in and of itself is not so bad, but does so while resulting in a much less useful error from `Macro.pre_walk`, compared to the current message of `invalid quoted expression`.  Calling it after the translation lets us detect the error as before and have the clearer message.
- Besides the added tests, I built the docs, verified that the cases here are fixed, and scanned through some of the other signatures with `\\` using an `ag` search, and it looked fine.  But this was by no means a comprehensive check.


#### [#3231] - (2015-04-05T15:44:29Z) - [Added documentation and doctest examples for code.ex](https://github.com/elixir-lang/elixir/pull/3231)

This is a resubmit of the hack_the_docs_meetup patch squashed in to a single commit and with
the documentation for readd_paths removed. 


#### [#3238] - (2015-04-04T19:39:28Z) - [Polish the docs for the `Set` module](https://github.com/elixir-lang/elixir/pull/3238)

Just some rephrasing, some formatting and some minor corrections.


#### [#3237] - (2015-04-04T15:49:46Z) - [Add message for failure due to `--warnings-as-errors`](https://github.com/elixir-lang/elixir/pull/3237)

This commits add a message output to stderr when compilation
fails due to the presence of warnings while using the
`--warnings-as-errors` option.

Closes #3222 

Sample output:

```
$ mix compile
lib/foo.ex:5: warning: this clause cannot match because a previous clause at line 4 always matches
Compiled lib/foo.ex
Generated foo app
```

```
$ mix compile --warnings-as-errors
lib/foo.ex:5: warning: this clause cannot match because a previous clause at line 4 always matches
Compiled lib/foo.ex
Compilation failed due to warnings while using the --warnings-as-errors option
```


#### [#3230] - (2015-04-02T14:57:48Z) - [rename :shell option to :system in mix](https://github.com/elixir-lang/elixir/pull/3230)

in `Mix.Utils.read_path!`, `Mix.Utils.copy_path!` and `mix archive`

resolves #3219 


#### [#3229] - (2015-04-02T07:33:24Z) - [Added documentation and examples for List.to_existing_atom/1](https://github.com/elixir-lang/elixir/pull/3229)

Noticed that List.to_existing_atom had no doctest examples. Added those and fleshed out the documentation a bit. 


#### [#3218] - (2015-03-30T05:03:34Z) - [Optimize Keyword.new/1,2 functions](https://github.com/elixir-lang/elixir/pull/3218)

Follow-up on https://github.com/elixir-lang/elixir/pull/3176#discussion_r26907713.
I think we do not need hand-written implementation, the `put_new` is well suited.
The timings for 200 elements enum:
`Keyword.new/1`:

```
new:      50000   60.69 ¬µs/op
old:      10000   124.75 ¬µs/op
```

`Keyword.new/2`:

```
new:      50000   55.86 ¬µs/op
old:       1000   1113.29 ¬µs/op
```


#### [#3221] - (2015-03-30T04:48:48Z) - [Support specs for unreachable private functions](https://github.com/elixir-lang/elixir/pull/3221)

Closes #3144

If the order of arguments for some of these functions (i.e. the position in which I inserted `Unreachable`) isn't quite right, let me know where it should be instead.  Otherwise, not too much going on here... at least as far I can tell.

I did check that capturing `stderr` doesn't interfere with when this test fails (e.g. when I run it with `elixir` rather than `bin/elixir`).  It gives the `CompileError` as expected:

```
  1) test @spec(spec) for unreachable private function (Kernel.TypespecTest)
     lib/elixir/test/elixir/kernel/typespec_test.exs:445
     ** (CompileError) lib/elixir/test/elixir/kernel/typespec_test.exs:451: spec for undefined function Kernel.TypespecTest.TestTypespec.myfun/1
     stacktrace:
       (stdlib) lists.erl:1336: :lists.foreach/2
```


#### [#3217] - (2015-03-29T02:43:48Z) - [Make `import Foo, except: []` respect previous imports](https://github.com/elixir-lang/elixir/pull/3217)

Closes #3121, aligning the behavior with what's described in the documentation (https://github.com/elixir-lang/elixir/blob/master/lib/elixir/lib/kernel/special_forms.ex#L527-L531)

Besides adding tests for the corrected behavior I beefed up the test `"import except one"` so it also tests the function is excluded (a different test covered that indirectly, but it seemed reasonable to also do it in this test given its name).


#### [#3215] - (2015-03-28T15:21:32Z) - [fix failing test on erlang 18 release candidate](https://github.com/elixir-lang/elixir/pull/3215)

``` elixir
  1) test format_fa (Kernel.ExceptionTest)
     test/elixir/exception_test.exs:296
     Assertion with =~ failed
     code: Exception.format_fa(fn -> nil end, 1) =~ ~r"#Function<\\d\\.\\d+/0 in Kernel\\.ExceptionTest\\.test format_fa/1>/1"
     lhs:  "#Function<20.127479888/0 in Kernel.ExceptionTest.test format_fa/1>/1"
     rhs:  ~r/#Function<\d\.\d+\/0 in Kernel\.ExceptionTest\.test format_fa\/1>\/1/
     stacktrace:
       test/elixir/exception_test.exs:297
```


#### [#3216] - (2015-03-28T14:25:48Z) - [fix typo in previous commit. bodyless defmacro added to show proper arg ...](https://github.com/elixir-lang/elixir/pull/3216)

...in b/1, t/1

fixes
https://github.com/elixir-lang/elixir/commit/3592151b3e92a621ff2fadf194da3fa319200ee8#commitcomment-10449705

also bodyless defmacro for b/1 and t/1 showing term instead of module as the argument.


#### [#3194] - (2015-03-27T15:26:13Z) - [EEx: Add trim option](https://github.com/elixir-lang/elixir/pull/3194)

If the `trim` option is used, trims around EEx tags:
- On left, up to the line break if all whitespace
- On right, up to and including the line break if all whitespace

Closes #3154

Initial attempt.  I think the behavior is ok, at least if I understood the idea correctly.  The only concern is that it also trims after `%>` even if it's not part of a tag (e.g. `%>  \nfoo` becomes `%>foo`).  This is a consequence of how the quotations are handled, and I don't know of a way to avoid it without redoing that using delimiter balancing.  If it's a problem, I could give it more thought.  Otherwise, some of the choices made:
- The trim option is passed inside `opts` rather than as a boolean flag (I figured this way it'd be easier to add more options later on)
- For whitespace it's tabs or spaces
- For newlines it's checking both LF and CRLF

I wasn't 100% sure about these, but I figured I might as well go ahead and I can change whatever is needed afterwards.


#### [#3213] - (2015-03-27T13:42:33Z) - [rename function arg. when "other" was used](https://github.com/elixir-lang/elixir/pull/3213)



#### [#3210] - (2015-03-26T16:57:14Z) - [Improve error message for invalid struct fields definition](https://github.com/elixir-lang/elixir/pull/3210)

From

```
** (FunctionClauseError) no function clause matching in :lists.map/2
    (stdlib) lists.erl:1236: :lists.map(#Function<0.4550704 in file:iex>, :name)
```

to

```
** (ArgumentError) struct fields definition must be list, got: :name
```


#### [#3207] - (2015-03-26T16:30:51Z) - [add backticks to a massive amount of true, false and nil](https://github.com/elixir-lang/elixir/pull/3207)

I have added backticks to `true`, `false` and `nil`, 
using the following regular expressions to detect them.

``` bash
ag -i "\W(is|are|was|were|to|or|and|nor|when|returns?|defaults?|otherwise|\.)\s+(true|false|nil)" -l
```

if some more patterns can be added, please let me know.


#### [#3206] - (2015-03-25T17:10:35Z) - [correct @spec for `handle_expr`](https://github.com/elixir-lang/elixir/pull/3206)

as per https://github.com/elixir-lang/elixir/pull/3205#discussion_r27139001


#### [#3205] - (2015-03-25T13:42:08Z) - [Explicitely declare argument names for functions with unnamed arguments.](https://github.com/elixir-lang/elixir/pull/3205)

I noticed there were many functions that didn't have have a name when the function was defined, and the VM is assigning (not very descriptive) names according to their type, such as _list2_ or `arg1`

I have removed every instance of these,
I have came up with a shell command to detect this,
(you need _[ag](https://github.com/ggreer/the_silver_searcher)_ installed), and run it against the ./doc folder.

``` bash
ag "(?<=signature\"><strong>).*\W(arg|atom|binary|bool|float|int|list)\d+\W.*\)" ./doc
```

I have made other small changes such as renaming some variables to be more consistent with the rest of the names, and added a few `@spec`s here and there.

I think it could be a good idea to give a warning, when names are not explicertly defined, but from what I could see in the code this is done by the VM, and it's not possible to tell whether it was assigned by the VM or by the user. We could use the list of names in the command above, but users can still use those, and thay will give a false warning.

Let me know what you think guys,


#### [#3203] - (2015-03-24T22:15:28Z) - [Document that ExUnit.Case :async defaults to false](https://github.com/elixir-lang/elixir/pull/3203)

I wanted to check my assumption that the `ExUnit.Case :async` option defaults to false. It does, but it wasn't explicit in the documentation. Hopefully, adding it will be helpful to others.


#### [#3202] - (2015-03-24T14:55:18Z) - [Document and test the behaviour of Process.exit(self(), :normal)](https://github.com/elixir-lang/elixir/pull/3202)



#### [#3198] - (2015-03-24T13:07:07Z) - [fix Kernel.=~/2 for "" =~ ""](https://github.com/elixir-lang/elixir/pull/3198)

fix `Kernel.=~/2` for `"" =~ ""`

``` elixir
iex> "" =~ ~r//               
true
iex> "" =~ ""  
false
```

:binary.match("", "") doesn't deal with this situation. should this be reported to the erlang repository?


#### [#3197] - (2015-03-24T00:39:21Z) - [add backward compatibility with cmd/2](https://github.com/elixir-lang/elixir/pull/3197)



#### [#3193] - (2015-03-22T19:50:27Z) - [EEx: fix interpolation inside quotations](https://github.com/elixir-lang/elixir/pull/3193)

Closes #3159.

I'm opening this in its current state since it resolves the issue as described and is self-contained.  

However, in thinking about this, I realized that the way `expr/3` finds the `%>` can be problematic (as shown in one of my comments on #3159).  In the end that turned out not to matter for quotations, since they don't need to use `expr/3`.  But it is a problem for comments, which I believe are the only other tag type that allows nested tags:

```
iex(1)> EEx.Tokenizer.tokenize("<%# <%= foo %> <%= bar %> %>", 1)
{:ok, [{:text, ' '}, {:expr, 1, "=", ' bar '}, {:text, ' %>'}]}
```

I assume this is something that should be supported, and will be happy to take care of it.  I already have the modified `expr/3` which matches the delimiters properly (I wrote it before realizing it wasn't needed for quotations).  I can do it in this PR or another one, I wasn't sure since it's related to the current issue, but not strictly speaking part of it.

On a more tangential note, there is the matter of non-delimiter appearances of `%>`.  For example, stand-alone ones now are just treated as text.  And if one appears in some Elixir code, it causes mayhem, e.g. 

```
iex(2)> EEx.Tokenizer.tokenize('<% "%>" %>', 1)                  
{:ok, [{:expr, 1, "", ' "'}, {:text, '" %>'}]}
```

Granted these are somewhat pathological cases, and the in-code case could be tricky to handle, so maybe this is something to discuss on the mailing list and take time to think about.  Just thought I'd mention it, since it involves some of the same code.


#### [#3191] - (2015-03-22T19:27:04Z) - [Make IEx `b` helper to accept single module argument](https://github.com/elixir-lang/elixir/pull/3191)



#### [#3192] - (2015-03-21T20:41:45Z) - [Fix error in EEx docstring ("a macro" to "an expression")](https://github.com/elixir-lang/elixir/pull/3192)

Wasn't sure about convention on line wrapping there.  That line is now longer than where the ones immediately surrounding it are broken up, but there are other lines in the vicinity which are of this length, so I figured it's probably ok this way.


#### [#3172] - (2015-03-20T07:48:25Z) - [Add `b` IEx helper to display behaviour docs](https://github.com/elixir-lang/elixir/pull/3172)

It introduces `b` helper to output behaviour docs as shown below:

``` elixir
iex(1)> b Mix.SCM.fetchable?/0

                                def fetchable?/0                                

Returns a boolean if the dependency can be fetched or it is meant to be
previously available in the filesystem.

Local dependencies (i.e. non fetchable ones) are automatically recompiled every
time the parent project is compiled.

:ok
```

In contrast with regular docs currently we have no `args` stored in the behaviour docs.
I think it might be solved by some ways:
- adding it to the behaviour docs (breaking change)
- extracting it from the specs
- probably keep it as is

Another question is, shall we display it as `def fetchable?/0` like it has to be implemented or as it is defined `defcallback fetchable?/0`?


#### [#3188] - (2015-03-19T15:32:37Z) - [Run all tests with +T 9 to get a better chance at finding races.](https://github.com/elixir-lang/elixir/pull/3188)

> +T Level
> Enables modified timing and sets the modified timing level. Currently valid range is 0-9. The timing of the runtime system will change. A high level usually means a greater change than a low level. Changing the timing can be very useful for finding timing related bugs.

We enabled that after seeing [jlouis' tweet](https://twitter.com/jlouis666/status/574685606703398913) and actually caught one bug.

http://erlang.org/doc/man/erl.html


#### [#3184] - (2015-03-17T18:55:07Z) - [Add example to `ExUnit.CaseTemplate/using`](https://github.com/elixir-lang/elixir/pull/3184)

Adds an example of how to use the function


#### [#3183] - (2015-03-17T17:02:32Z) - [Add space after comma: Format consistently](https://github.com/elixir-lang/elixir/pull/3183)

Adds a space after a comma, to be consistent across the files, but also to be consistent with the elixir output.
I have also corrected the `*.erl` files with some exceptions where it was more readable to have some lists in the format {1,2,3,4}, such as in https://github.com/elixir-lang/elixir/compare/elixir-lang:master...eksperimental:fix?expand=1#diff-9067a46ac12568f9f64b3feb412b0314R50


#### [#3182] - (2015-03-17T12:50:26Z) - [Doctest except/only moduledoc](https://github.com/elixir-lang/elixir/pull/3182)

It isn't obvious how to filter moduledocs from your doctests. Doctests can be filtered with the `:only` and `:except` options. They accept a list of `{function, arity}` tuples, but the documentation doesn't really suggest what to include in this keyword list in order to include or exclude `@moduledoc`.

It turns out, instead of a `{fun, arity}` tuple, `test.fun_arity` for the moduledoc is `nil`. We can thus exclude it from the doctests:

``` elixir
defmodule SomeModuleTest do
  use ExUnit.Case
  doctest SomeModule, except: [nil]
end
```

This works, but is obviously not very friendly. There should be a better way to exclude/include a moduledoc in your doctests. This PR implements one way, but I only picked what seemed least intrusive. It has it's drawbacks.

In essance, it puts a name to moduledoc's `test.fun_arity`, locally for the filtering. this lets you filter moduledocs thus:

``` elixir
defmodule SomeModuleTest do
  use ExUnit.Case
  doctest SomeModule, except: [:moduledoc]
end
```

Not too bad, right? Only if we want to filter `:moduledoc` and some other function, we don't have a nice keyword list anymore. We have to do something like `[:moduledoc, {my_function: 1}]`. We lose keyword list sugar.

An alternative is to add another option, `:moduledoc` and default it to `true`. It could be used like so:

``` elixir
defmodule SomeModuleTest do
  use ExUnit.Case
  doctest SomeModule, except: [my_function: 1], moduledoc: false
end
```

But then, if this option defaults to true, how do we treat `doctest SomeModule only: [my_function: 1]`. It leaves out `:moduledoc`, so there's the default true, but it's also specifically whitelisting some functions. If we add `:moduledoc` to the whitelist, because of its default value, we are changing behaviour. If we leave it out, then how do we add it to the whitelist? By explicitly setting it to `true`? This seems way to complicated, compared to including it in the current filter options. 

Any other ideas? Thoughts? Whatever we do, it should be documented, but I've held off adding to DocTest's moduledoc until we know what option we like best. 


#### [#3180] - (2015-03-16T17:24:41Z) - [Optimize `Keyword.pop_first/3` function](https://github.com/elixir-lang/elixir/pull/3180)



#### [#3176] - (2015-03-15T21:39:11Z) - [Optimize Keyword.pop(_lazy)/3 and Keyword.new/1 functions](https://github.com/elixir-lang/elixir/pull/3176)



#### [#3173] - (2015-03-15T11:02:13Z) - [Fix doctest :only, so it accepts multiple functions](https://github.com/elixir-lang/elixir/pull/3173)

There is a bug in `doctest` with the `:only` option, such that it only works if the list is of size 1. If you pass two functions to the option, `filter_by_opts` will always be empty, since we check with `Enum.all?`. I've changed to `Enum.any?`.

`Enum.any?` returns false for an empty list. Thus the extra `Enum.empty?` check.

Adding a test case to `DocTestTest` is made difficult by the fact there are tests asserting on line numbers in the runner output. I've replaced line numbers in these tests with `x`, and changed the assertions to make them less brittle. It is unrelated to the bugfix above, but was prompted by my frustrations when writing a test case. If you would like, I can separate these into two pull requests.


#### [#3170] - (2015-03-13T11:30:48Z) - [Replace is_win?/0 with windows?/0 to follow consistency](https://github.com/elixir-lang/elixir/pull/3170)

is_win?/0 is the only function in the family of is_\* that ends with `?`. Eg., is_list/1, is_boolean/1 etc have no '?' at the end. 

Personally, however, I like the '?' at the end of any boolean method, but conventions used in the code seems to not use '?' for  'is_' methods.

This is a trivial change but still having the language follow a single standard in method signature helps devs not to wonder if it's is_list? or is_list or is_win? or is_win etc.


#### [#3169] - (2015-03-13T10:34:49Z) - [Store behaviour docs in the byte code](https://github.com/elixir-lang/elixir/pull/3169)

Closes #3088 


#### [#3166] - (2015-03-13T09:52:47Z) - [Refine no parens parsing (second attempt)](https://github.com/elixir-lang/elixir/pull/3166)

Second attempt at resolving #3074, after the first attempt (#3109) had to be reverted.  This contains:
- The changes from the previous PR
- A regression test for the regression which made the revert necessary
- The changes needed to fix that regression (namely, adding the `no_parens_one_ambig_op_expr` non-terminal)

I'm marking this as WIP because:
(a) The fact that `one_parens_ambig_op_expr` is needed makes me wonder whether there may be other similar ones needed as well to prevent other regressions we don't have tests for and are not aware of yet.  I will try in the coming days to go through the parser to identify whether there are any, but the more eyes on this the better.
(b) I didn't know where to put the regression test, so I created a new file `parser_test.exs` (and I wasn't sure where to put it either, there or in `kernel`).  This doesn't fit the overall pattern of test modules corresponding to the modules they're testing, since there is no Elixir Parser module.  But neither is there a an Erlang test module for `elixir_parser.yrl`, and writing these tests in Erlang would probably be considerably messier.  So any suggestions on where to put tests of this type would be welcome.
(c) I wonder whether and to what degree this will make it harder later on to warn on `no_parens_expr op expr` or similar (including, I believe, `no_parens_one`, e.g. in `f a |> b`, so we may not be able to reduce `no_parens_one_expr` to `matched_expr` any more either, not sure though).  The reason is that the grammar is getting hairier with this PR.  So I wonder whether there might be a way to simplify at this point with that later need in mind or whether there's nothing to do about it at this stage.  My understanding of LALR is still pretty rudimentary, so any real simplification in this would be beyond me at this point.
(d) I need to write a more decent commit message :-)


#### [#3163] - (2015-03-11T10:25:10Z) - [Suppress warnings by adding `Keyword.*_lazy` functions](https://github.com/elixir-lang/elixir/pull/3163)



#### [#3165] - (2015-03-11T09:36:13Z) - [Make Exception.exception/1 support binary argument in default impl.](https://github.com/elixir-lang/elixir/pull/3165)

Closes #2961 (I think)

The functionality in question is covered by tests in `raise_test.exs` (e.g. `raise message`).

[ADDED] Note that for the others which override `exception/1`, passing a string (e.g. `raise UnicodeConversionError, "foo"`) leads to a `FunctionClauseError`, but this is how it was before and I figure it's not an acceptable way to call them and so the error is not a concern.


#### [#3162] - (2015-03-10T09:20:12Z) - [fix for #3161](https://github.com/elixir-lang/elixir/pull/3162)



#### [#3158] - (2015-03-09T13:39:51Z) - [Deprecate Enum.uniq/2 in favor of Enum.uniq_by/2](https://github.com/elixir-lang/elixir/pull/3158)

Fixes https://github.com/elixir-lang/elixir/issues/3142


#### [#3160] - (2015-03-08T15:05:33Z) - [Make Stream.dedup/1 use Stream.dedup_by/2.](https://github.com/elixir-lang/elixir/pull/3160)

Minor amend to my PR.


#### [#3141] - (2015-03-08T14:34:50Z) - [Add dedup(_by) and usort(_by) to Enum and Stream.](https://github.com/elixir-lang/elixir/pull/3141)

Extra wish: Backport to 1.0.4 :)


#### [#3157] - (2015-03-08T13:41:29Z) - [Reduce time complexity of Enum.uniq and Stream.uniq](https://github.com/elixir-lang/elixir/pull/3157)

Instead of searching already accumulated list for next value use separate HashSet to check if element was already seen.

Changes in Kernel.CLI are necessary because we don't have access to HashSet while bootstrapping.


#### [#3153] - (2015-03-06T07:28:41Z) - [Refactor compiler errors (elixir_errors:parse_error/4)](https://github.com/elixir-lang/elixir/pull/3153)

Following up on https://github.com/elixir-lang/elixir/pull/3145.

These are covered by `invalid_quoted_token` in `errors_test.exs`.  The only difference I am aware of is there is no fall-back equivalent to what was line 70.  Not sure if that was needed or just there to avoid a `case` without a catch-all option.


#### [#3151] - (2015-03-05T19:22:47Z) - [remove duplicate words + add quotes to nil and false](https://github.com/elixir-lang/elixir/pull/3151)

inspired by https://github.com/elixir-lang/elixir-lang.github.com/pull/490/


#### [#3150] - (2015-03-05T13:55:16Z) - [Mention default values in String.split/3](https://github.com/elixir-lang/elixir/pull/3150)



#### [#3149] - (2015-03-05T13:13:41Z) - [the example is correct but in the description have a small difference](https://github.com/elixir-lang/elixir/pull/3149)

not a major flaw but missed the developer without understanding


#### [#3148] - (2015-03-05T13:04:18Z) - [Add example to Regex.replace with option "global: false"](https://github.com/elixir-lang/elixir/pull/3148)



#### [#3145] - (2015-03-05T12:46:01Z) - [Produce clearer messages for syntax errors before a sigil](https://github.com/elixir-lang/elixir/pull/3145)

Closes #3130 

My apologies if this is needlessly ugly or generally wrong, I'm learning the erlang as I go :-)
Also, I wasn't sure if there was a clear way to avoid duplicating the `syntax error before:` part, or whether 'content' is really the best term for what's inside the sigil (I noticed in the parser it's referred to as `Parts`, but that seemed less clear in this context).


#### [#3146] - (2015-03-05T08:47:55Z) - [Fix ExUnit.Assertions assertion fail doc example](https://github.com/elixir-lang/elixir/pull/3146)

The comparison error code block was using a 3-space indentation instead
of 4. Due to this, the appearance of the example in the html generated
documentation looks broken.

This PR changes this:
![screenshot from 2015-03-05 00 19 33](https://cloud.githubusercontent.com/assets/4231743/6498659/52181442-c2cd-11e4-9c96-c2da3ac567e8.png)

To this:
![screenshot from 2015-03-05 00 27 48](https://cloud.githubusercontent.com/assets/4231743/6498754/77e946cc-c2ce-11e4-8f43-b09b3476e612.png)

Which I think is what was originally intended


#### [#3139] - (2015-03-04T14:00:58Z) - [Clarify where truthy and falsey values suffice in the Enum docs](https://github.com/elixir-lang/elixir/pull/3139)



#### [#3135] - (2015-03-04T11:47:58Z) - [Adds Dict.get_lazy/3, Dict.pop_lazy/3, Dict.put_new_lazy/3](https://github.com/elixir-lang/elixir/pull/3135)

Addresses #3133


#### [#3137] - (2015-03-04T08:47:21Z) - [Added test for markup ending in . and code to pass the test](https://github.com/elixir-lang/elixir/pull/3137)

I added a basic test to check this function

```
IO.ANSI.Docs.print("*hello*.") 
```

and I made the test pass by adding . to the delimiter list. 

I'm not entirely sure this is the correct thing to do. 


#### [#3131] - (2015-03-02T13:27:02Z) - [Return value of RHS when matching with `_` on LHS](https://github.com/elixir-lang/elixir/pull/3131)

Closes #3125 

I'm not sure whether this is all that was intended or whether the idea was to remove the `Return` option entirely (not sure if it is being used for anything else).  If it should be removed, I can give it a shot and add a commit to this PR.

[Updated: now that I think about it, I didn't take into account the 'on the last line' part in what you wrote.  Should this be done differently to include that?]


#### [#3129] - (2015-03-01T07:52:19Z) - [Fix typo](https://github.com/elixir-lang/elixir/pull/3129)

"a children" -> "children"


#### [#3127] - (2015-02-28T18:30:46Z) - [Improve tokenization of identifiers and `k: v` keys](https://github.com/elixir-lang/elixir/pull/3127)

Closes #3113:
- Fix tokenization of `a@b:` and `A!:`
- Add error for `a@b` (previously tokenized like `a @b`)
- Unify tokenization of upper- and lower-case `k: v` keys
- Fix end-column value for `a:`

Some of the names are admittedly a bit awkward (e.g. for `HasEnding` I couldn't think of a simple term or phrase for "question mark or exclamation point", and some others).  The end-column change wasn't mentioned in the issue, but it was a bug that surfaced when unifying the tokenization of kv keys starting with upper- and lower-case.  Previously, the end-column for `a:` would have been 2 and for `A:` it would have been 3, and I figured they both should be 3.  I changed the value in the test accordingly (from 3 to 4 for `do:`).


#### [#3124] - (2015-02-26T19:38:35Z) - [Grammar in docs and comments](https://github.com/elixir-lang/elixir/pull/3124)



#### [#3112] - (2015-02-23T12:12:10Z) - [Replace `String.levenshtein_distance/2` with `String.jaro_distance/2`](https://github.com/elixir-lang/elixir/pull/3112)

It adds **Jaro** metric. The only question is shall we have **-Winkler** extension to it?
Personally I think it'd better to leave it for libs since Jaro is good enough to satisfy our needs
and -Winkler extension might be configurable what means more code in the stdlib.

Levenshtein metric will be a part of https://github.com/lexmag/simetric.


#### [#3110] - (2015-02-23T10:01:37Z) - [Polish the docs for the functions in the `Float` module](https://github.com/elixir-lang/elixir/pull/3110)

- Fixed some whitespace
- Fixed some argument names
- Rephrased a couple of sentences

Let me know if I can do anything else. Thanks!


#### [#3108] - (2015-02-23T08:55:49Z) - [Provide "Did you mean?" suggestion in mix if task was not found](https://github.com/elixir-lang/elixir/pull/3108)

This change will make mix suggest task if one makes a small spelling error. 

If that works well, I think it would be nice to include something similar for module and function names.


#### [#3109] - (2015-02-23T08:22:43Z) - [Refine no parens parsing (#3074)](https://github.com/elixir-lang/elixir/pull/3109)

Resolves https://github.com/elixir-lang/elixir/issues/3074.

@josevalim I think this may not be quite what you had suggested, but it seemed to me necessary to have both `no_parens_one` and `no_parens_one_ambig` in order to have `[f g a, b]` and `[f g h a, b]` throw errors but not `[f g a]`.  I may be wrong on that though.

Also, if we want to emit a warning for `no_parens_one_ambig` calls such as `f g a, b` I'd be happy to look into it.  I personally like the idea of warning in such cases, and it would make take the steam out of https://github.com/elixir-lang/elixir-lang.github.com/issues/463, since the compiler would be doing the work for you there.  I haven't yet looked at the compiler downstream of the parser, so I expect I'd have a fair bit of digging to do before I'm able to add warnings and it'd probably be best to start another PR for it when the time comes.


#### [#3107] - (2015-02-22T20:13:39Z) - [Add documentation with examples how to assert return values and capture IO output a the same time](https://github.com/elixir-lang/elixir/pull/3107)



#### [#3106] - (2015-02-21T17:37:58Z) - [remove blank in README template](https://github.com/elixir-lang/elixir/pull/3106)

fix #3105 


#### [#3087] - (2015-02-20T11:16:00Z) - [Tweak the docs a bit.](https://github.com/elixir-lang/elixir/pull/3087)



#### [#3102] - (2015-02-20T00:48:42Z) - [Use `:lists.reverse/2` instead of `:lists.reverse/1` and `++`](https://github.com/elixir-lang/elixir/pull/3102)



#### [#3099] - (2015-02-18T22:32:38Z) - [Reuse `ArgumentError` creation in `elixir_quote`; add test for error on struct field](https://github.com/elixir-lang/elixir/pull/3099)



#### [#3098] - (2015-02-18T08:47:20Z) - [Replaced all but one Mix.shell.cmd call with System.cmd. ](https://github.com/elixir-lang/elixir/pull/3098)

The remaining call is for windows systems using powershell and I don't know the appropriate token
parsing for powershell command lines. And it's down to one commit. 


#### [#3062] - (2015-02-17T18:29:10Z) - [Handle OTP 17.4 error_logger terminate reasons](https://github.com/elixir-lang/elixir/pull/3062)

From 17.4 OTP behaviours include the stacktrace in the logged reason when `exit/1` is called. If an Elixir exception is raised, or the reason can be normalized to an Elixir exception (not `ErlangError`), the exception is formatted as an exception: 

```
** (Exception) message
```

Otherwise the reason is formatted using Exception.format_exit/1:

```
** (stop) :reason
```

Addresses #3052.

TODO:
- [x] Discussion
- [x] Update Task logged reason to 17.4 format
- [x] Tests


#### [#3095] - (2015-02-17T13:04:04Z) - [Fix some docs in the `Atom` module](https://github.com/elixir-lang/elixir/pull/3095)

- Changed a `@doc` to `@moduledoc` so that the `Atom` module has a module documentation
- Added examples to both `Atom.to_string/1` and `Atom.to_char_list/1`


#### [#3091] - (2015-02-17T07:57:15Z) - [Mix: add comma at the end of worker()](https://github.com/elixir-lang/elixir/pull/3091)

make it easy to duplicate the worker line


#### [#3093] - (2015-02-17T07:41:02Z) - [Polish the docs of the sigils in the `Kernel` module](https://github.com/elixir-lang/elixir/pull/3093)

I tweaked the formatting and slightly polished the docs of the `sigil_*` functions in the `Kernel` module.

The main change was to separate the first line of the docs for each sigil from the rest of the docs so that they all have a nice and short summary for the functions list in the generated docs.

Let me know if I can do anything else. Thanks!


#### [#3094] - (2015-02-17T07:40:38Z) - [Fixed the formatting and some docs in the Tuple module](https://github.com/elixir-lang/elixir/pull/3094)

- Fixed the Markdown formatting in the moduledoc so that the mentioned `Kernel` functions are actually links to the functions in the documentation
- Specified a couple of more cases where `insert_at` and `delete_at` raise an error
- Added a couple of examples (to `Tuple.insert_at/3` and `Tuple.to_list/1`)


#### [#3089] - (2015-02-16T19:55:57Z) - [Kernel docs 4](https://github.com/elixir-lang/elixir/pull/3089)

I added examples, fixed some grammar and slightly polished the docs for some of the functions/macros in the `Kernel` module. These functions/macros include the `def*` set of macros and some other functions.

Let me know if I have to change something :) Thanks!


#### [#3072] - (2015-02-15T11:59:07Z) - [Hack The Docs contribution](https://github.com/elixir-lang/elixir/pull/3072)

Clarify and expand textual descriptions; add examples.


#### [#3086] - (2015-02-14T19:01:19Z) - [Correct usage of `ExUnit.Assertions.flunk` and add guard for it](https://github.com/elixir-lang/elixir/pull/3086)

Closes #3083:
- Fix incorrect call to `flunk` in test_helper.exs
- Add a guard to `flunk` to check the argument is the right type

I figured it's ok for a single PR even though it touches both Elixir and ExUnit, since it's about the same thing and pretty trivial.


#### [#3082] - (2015-02-14T17:49:15Z) - [Move test for `:foo.Bar` syntax error](https://github.com/elixir-lang/elixir/pull/3082)

Following up on https://github.com/elixir-lang/elixir/pull/3059, this is a better place to test that error.


#### [#3080] - (2015-02-14T10:34:12Z) - [Create individual tasks for "make docs"](https://github.com/elixir-lang/elixir/pull/3080)

I created this out of the need of having to rebuild the docs while testing changes in ex_doc.

with these changes you can run
`$ make docs_PROYECT_NAME`

ex:
`$ make docs_elixir`  will only build elixir documentation,
`$ make docs_mix`  will only build documentation for mix,

Output

``` bash
$ make docs_eex
==> elixir (compile)
==> ex_doc (eex)
bin/elixir ../ex_doc/bin/ex_doc "EEx" "1.1.0-dev" "lib/eex/ebin" -m "EEx" -u "https://github.com/elixir-lang/elixir" --source-ref "87ba102a2002fdad920101cc920c9a43e7426a6e" -o doc/eex -p http://elixir-lang.org/docs.html

$ make docs_elixir
==> elixir (compile)
==> ex_doc (elixir)
bin/elixir ../ex_doc/bin/ex_doc "Elixir" "1.1.0-dev" "lib/elixir/ebin" -m "Kernel" -u "https://github.com/elixir-lang/elixir" --source-ref "87ba102a2002fdad920101cc920c9a43e7426a6e" -o doc/elixir -p http://elixir-lang.org/docs.html

$ make docs_logger
==> elixir (compile)
==> ex_doc (logger)
bin/elixir ../ex_doc/bin/ex_doc "Logger" "1.1.0-dev" "lib/logger/ebin" -m "Logger" -u "https://github.com/elixir-lang/elixir" --source-ref "87ba102a2002fdad920101cc920c9a43e7426a6e" -o doc/logger -p http://elixir-lang.org/docs.html

$ make docs
==> elixir (compile)
==> ex_doc (elixir)
bin/elixir ../ex_doc/bin/ex_doc "Elixir" "1.1.0-dev" "lib/elixir/ebin" -m "Kernel" -u "https://github.com/elixir-lang/elixir" --source-ref "87ba102a2002fdad920101cc920c9a43e7426a6e" -o doc/elixir -p http://elixir-lang.org/docs.html
==> ex_doc (eex)
bin/elixir ../ex_doc/bin/ex_doc "EEx" "1.1.0-dev" "lib/eex/ebin" -m "EEx" -u "https://github.com/elixir-lang/elixir" --source-ref "87ba102a2002fdad920101cc920c9a43e7426a6e" -o doc/eex -p http://elixir-lang.org/docs.html
==> ex_doc (mix)
bin/elixir ../ex_doc/bin/ex_doc "Mix" "1.1.0-dev" "lib/mix/ebin" -m "Mix" -u "https://github.com/elixir-lang/elixir" --source-ref "87ba102a2002fdad920101cc920c9a43e7426a6e" -o doc/mix -p http://elixir-lang.org/docs.html
==> ex_doc (iex)
bin/elixir ../ex_doc/bin/ex_doc "IEx" "1.1.0-dev" "lib/iex/ebin" -m "IEx" -u "https://github.com/elixir-lang/elixir" --source-ref "87ba102a2002fdad920101cc920c9a43e7426a6e" -o doc/iex -p http://elixir-lang.org/docs.html
==> ex_doc (ex_unit)
bin/elixir ../ex_doc/bin/ex_doc "ExUnit" "1.1.0-dev" "lib/ex_unit/ebin" -m "ExUnit" -u "https://github.com/elixir-lang/elixir" --source-ref "87ba102a2002fdad920101cc920c9a43e7426a6e" -o doc/ex_unit -p http://elixir-lang.org/docs.html
==> ex_doc (logger)
bin/elixir ../ex_doc/bin/ex_doc "Logger" "1.1.0-dev" "lib/logger/ebin" -m "Logger" -u "https://github.com/elixir-lang/elixir" --source-ref "87ba102a2002fdad920101cc920c9a43e7426a6e" -o doc/logger -p http://elixir-lang.org/docs.html
```


#### [#3079] - (2015-02-14T08:40:30Z) - [Fix @spec for Path.wildcard + doc:return value](https://github.com/elixir-lang/elixir/pull/3079)

The specs were not showing up in the docs, beacuse they were declared for a different arity.
I'm not sure if we should add "it returns an empty list if not matches", but I think that will be redundant, won't it?


#### [#3076] - (2015-02-13T21:16:45Z) - [Replace os.cmd in git with System.cmd, done one to verify what is wanted...](https://github.com/elixir-lang/elixir/pull/3076)

I have replaced one :os.cmd call with System.cmd to verify that I'm on the right track in fixing 
bug 3031. 


#### [#3077] - (2015-02-13T18:27:01Z) - [Correct the phrase "if there already exists"](https://github.com/elixir-lang/elixir/pull/3077)



#### [#3069] - (2015-02-11T18:08:30Z) - [minor corrections in docs](https://github.com/elixir-lang/elixir/pull/3069)



#### [#3068] - (2015-02-11T18:08:12Z) - [Add Record.extract_all/1 returning all records information](https://github.com/elixir-lang/elixir/pull/3068)

`Record.extract_all/1` is to extract records information from a given file in one go. It can be useful in the following situations:
- you have several records to extract from single Erlang (.hrl) file
- records names are hard to predict if they origin from other sources like code generators (ASN.1 for example)


#### [#3067] - (2015-02-11T13:31:13Z) - [Add an `:optional` option to `IEx.Helpers.import_file/1`](https://github.com/elixir-lang/elixir/pull/3067)

As discused in #3066, this PR adds an `:optional` option to the `IEx.Helpers.import_file/1` macro so that the macro can be told not to fail if the given file is missing.

I'm not 100% sure the code I wrote is the cleanest way to accomplish this; the code smell seems to be manually raising a `File.Error` with all the right exception metadata (previously this was done by reading the file contents with `File.read!/1` instead of `File.read/1`). Another approach I tackled has been to use `File.read!/1` but wrap it in a `try`/`rescue` clause matching on a `File.Error`, only reraising with a `false` `:optional` option. Let me know what you think!

**PS** This should close #3066.


#### [#3065] - (2015-02-10T21:39:52Z) - [Logger uses chardata, not iodata](https://github.com/elixir-lang/elixir/pull/3065)



#### [#3064] - (2015-02-10T21:37:23Z) - [Fix Exception.stacktrace_entry/0 type spec](https://github.com/elixir-lang/elixir/pull/3064)

I am unsure what `function()` is but it is not `atom()`.


#### [#3061] - (2015-02-09T15:54:59Z) - [Set timeout to infinity with trace enabled](https://github.com/elixir-lang/elixir/pull/3061)

Automatically set the `:timeout` to `:infinity` when trace is enabled.

Also I extracted some logic from the `run` function in the `Runner` module to a new function so it could be tested.

@josevalim thanks again for the help with this patch :)


#### [#3049] - (2015-02-09T13:50:03Z) - [Expand attributes and macros in record extractor](https://github.com/elixir-lang/elixir/pull/3049)

Achieved by using :epp.parse_file/2 instead of
:epp_dodger.quick_parse_file/1.


#### [#3059] - (2015-02-09T13:48:50Z) - [Throw syntax error for `:foo.Bar`](https://github.com/elixir-lang/elixir/pull/3059)

Closes #2986 (I think)

I wasn't too sure if this was the right place for the test, and whether to include both tests or just one (or more than two).


#### [#3060] - (2015-02-09T11:33:18Z) - [Add positive test case for punctuation in atoms](https://github.com/elixir-lang/elixir/pull/3060)

Test case for issue #3059, #2986


#### [#3057] - (2015-02-07T14:43:49Z) - [singular/plural issue with `mix test`](https://github.com/elixir-lang/elixir/pull/3057)

```
  1) test removes buckets on exit (KV.RegistryTest)
     test/kv/registry_test.exs:19
     ** (exit) exited in: GenServer.call(#PID<0.115.0>, :stop, 5000)
         ** (EXIT) no process
     stacktrace:
       (elixir) lib/gen_server.ex:357: GenServer.call/3
       test/kv/registry_test.exs:23

..

Finished in 0.4 seconds (0.4s on load, 0.06s on tests)
1 tests, 1 failures
```

**1 tests, 1 failures**


#### [#3056] - (2015-02-07T13:45:01Z) - [Added to tuple.ex module doc a see also note ...](https://github.com/elixir-lang/elixir/pull/3056)

...referencing the various Kernel functions dealing with tuples. The rationale for this is that its confusing for a newcomer to the language that these are not members of tuple and it provides a hint as to where these are actually found.

I should also mention that it seems to me a little bit of a smell that there are four functions in Tuple and four in Kernel dealing with tuples ... 


#### [#3055] - (2015-02-07T12:36:11Z) - [Polish the docs of a bunch of Kernel functions](https://github.com/elixir-lang/elixir/pull/3055)

This PR is very similar to #3048 and #3046. I'm going through the `Kernel` module and fixing minor things in the docs as I go, but there are a lot of functions in there so I'm doing a chunk at a time :).

I've added comments in the diff to justify some changes. Thanks!


#### [#3054] - (2015-02-06T22:27:21Z) - [update links to website](https://github.com/elixir-lang/elixir/pull/3054)

just one question.
is it desired to link to 
http://elixir-lang.org/getting-started/mix-otp/introduction-to-mix.html

or it's better to link directly to 
http://elixir-lang.org/getting-started/mix-otp/genserver.html
and
http://elixir-lang.org/getting-started/mix-otp/genevent.html

or have both links (introduction and genX)


#### [#3053] - (2015-02-06T19:14:32Z) - [Add timeout option for tests](https://github.com/elixir-lang/elixir/pull/3053)

Add support for timeout configuration for tests.

It can be done by setting the `timeout` option inside the `test_helper` file.

Example: 

``` elixir
  ExUnit.start(timeout: 60_000)
```

Also it enables the timeout with the command line option.

Example:

```
  mix test --timeout 60000
```

@josevalim Thanks for the help with this patch :heart: 


#### [#3050] - (2015-02-03T20:03:15Z) - [Raise an appropriate error when raise/1 is called with an invalid arg](https://github.com/elixir-lang/elixir/pull/3050)

When `raise/1` (or `reraise/2`) is called with an invalid argument (not a module name neither a binary message), a cryptic `CaseClauseError` is raised. This behaviour exposes the underlying implementation details of the `raise/1` (or `reraise/2`) macro. I'm not sure this is a good thing since when I'm using native language "constructs" (I know they're macro, but still) I generally would like clear error messages that show me where I messed things up.

This PR makes `raise/1` and `reraise/2` raise an `ArgumentError` when the `msg` argument isn't a binary or a module name.

I kind of know that it's not the coolest thing ever to raise an error if you mess up trying to _raise an error_, but at the current state you still _get an error_, just not an easy one to mentally debug.

I did not make the same changes to `raise/2` and `reraise/3` since the error messages there are way more easy to understand:

``` iex
iex> raise 3, message: "foo"
** (CompileError) iex:1: invalid call 3.exception(message: "foo")
iex> raise nil, message: "foo"
** (UndefinedFunctionError) undefined function: nil.exception/1
```

I'm not sure about the exception _message_, I just wrote the first thing I found decent :smile: Let me know what you think.

Thanks!


#### [#3048] - (2015-02-03T14:59:13Z) - [Documentation polishes for some of the functions in the Kernel module](https://github.com/elixir-lang/elixir/pull/3048)

This PR is very similar to #3046. I was just reading through the `Kernel` module and fixed some docs here and there. I left some comments in the diff for the "biggest" changes.

Thanks!


#### [#3047] - (2015-02-03T13:06:37Z) - [fix broken system path test](https://github.com/elixir-lang/elixir/pull/3047)

Fix https://github.com/elixir-lang/elixir/issues/3044.

The reasoning is described in the issue comment. The essence is according to Path module spec, relative_to_cwd can return the passed in path somehow if it fails to get the relative path.


#### [#3046] - (2015-02-03T01:07:54Z) - [Documentation polishes for the functions in the `Kernel` module that are delegated to Erlang](https://github.com/elixir-lang/elixir/pull/3046)

I just gave a minimal polish to the `Kernel` functions that are delegated to Erlang. I chose these functions just because I was going through the `Kernel` module and they're at the top! :smile:

Most of the changes are commented in the diffs of the two commits. Let me know if there is anything that I missed or that you don't want to change in what I changed. Thanks!


#### [#3041] - (2015-01-31T11:38:04Z) - [Fix some grammar in the docs for Access, and add more docs](https://github.com/elixir-lang/elixir/pull/3041)

- Added some missing words (√†-la-typo) to the `Access` docs
- Added more detailed docs for `Access.get_and_update/3`
- Changed an empty start to a 1/2 Unicode char in the example because, well, it makes more sense :smile: (I can revert this one, just let me know :stuck_out_tongue:)


#### [#3029] - (2015-01-31T10:51:38Z) - [Suppress warnings](https://github.com/elixir-lang/elixir/pull/3029)



#### [#3036] - (2015-01-31T10:47:40Z) - [Add an example of defining a `__using__/1` macro](https://github.com/elixir-lang/elixir/pull/3036)

The behaviour was explained pretty clearly in the docs, but for example it was unclear that `__using__/1` has to be a macro. I added an example so that it's easier to understand how to use `use/1-2` and `__using__/2`.


#### [#3037] - (2015-01-31T10:12:13Z) - [Fix race condition in undef logger translator tests](https://github.com/elixir-lang/elixir/pull/3037)

Move the `Task.start/3` inside capture_log. Likely this only started becoming an issue due to the app env changes making the config lookup faster.


#### [#3033] - (2015-01-30T15:21:14Z) - [Fix a minor typo in the docs for `Module`](https://github.com/elixir-lang/elixir/pull/3033)

That's it, very very minor typo :).


#### [#3032] - (2015-01-30T10:34:35Z) - [No need for `args` in `Mix.CLI.load_mixfile/1`](https://github.com/elixir-lang/elixir/pull/3032)



#### [#3026] - (2015-01-29T10:00:45Z) - [Dict.get_and_update/3 and Keyword.get_and_update/3](https://github.com/elixir-lang/elixir/pull/3026)

As discussed in #2973, I implemented `Dict.get_and_update/3` and `Keyword.get_and_update/3`. They both work like `Access.get_and_update/3`, but they'll replace the `Access` counterpart once the `Access` protocol will be deprecated.

I'm looking forward to a review!


#### [#3025] - (2015-01-29T09:59:41Z) - [Call Logger.flush in System.at_exit when running mix test.](https://github.com/elixir-lang/elixir/pull/3025)

I ran into that today, took me a while to figure out why the errors that made my tests fail weren't printed. I only realized what was going on after the error was printed by chance.

I imagine this might be a pitfall especially for people new to Elixir.

I'm not sure how to test this.

/cc @fishcakez


#### [#3024] - (2015-01-26T18:00:56Z) - [Change Record#extract to a function](https://github.com/elixir-lang/elixir/pull/3024)

- Also adds docs for defining records that were extracted with anonymous functions

Changing Record#extract to a function removes ArgumentErrors that arise from Macro.escape when extracting records defining anonymous functions.

``` elixir
iex(2)> Record.extract :apns_connection, from_lib: "apns/include/apns.hrl"
** (ArgumentError) cannot escape #Function<12.90072148/2 in :erl_eval.expr/5>. The supported values are: lists, tuples, maps, atoms, numbers, bitstrings, pids and remote functions in the format &Mod.fun/arity
    (elixir) src/elixir_quote.erl:302: :elixir_quote.bad_escape/1
    (elixir) src/elixir_quote.erl:246: :elixir_quote.do_quote/3
    (elixir) src/elixir_quote.erl:383: :elixir_quote.do_splice/5
    (elixir) src/elixir_quote.erl:141: :elixir_quote.escape/2
    (elixir) lib/macro.ex:307: Macro.escape/2
    (elixir) expanding macro: Record.extract/2
    (elixir) iex:8: :elixir_compiler.__FILE__/2
iex(3)> # Compare to
iex(4)> Record.Extractor.extract :apns_connection, from_lib: "apns/include/apns.hrl"
[apple_host: 'gateway.sandbox.push.apple.com', apple_port: 2195,
 cert_file: 'priv/cert.pem', key_file: :undefined, cert_password: :undefined,
 timeout: 30000, error_fun: #Function<12.90072148/2 in :erl_eval.expr/5>,
 feedback_host: 'feedback.sandbox.push.apple.com', feedback_port: 2196,
 feedback_fun: &:erlang.display/1, feedback_timeout: 1800000]
```


#### [#3023] - (2015-01-25T21:11:28Z) - [Corrected docstring for Mix.Task.get/1](https://github.com/elixir-lang/elixir/pull/3023)

The docstring for Mix.Task.get/1 incorrectly referred to the return values of fetch/1.


#### [#3021] - (2015-01-25T09:52:26Z) - [Add an example of Enum.find_value/3 to the docs](https://github.com/elixir-lang/elixir/pull/3021)

There were only examples of `Enum.find_value/2` in the docs for `Enum.find_value/2-3`, so I added an example of `Enum.find_value/3`.


#### [#3018] - (2015-01-21T10:46:16Z) - [Fix the logging with `metadata[:function]`](https://github.com/elixir-lang/elixir/pull/3018)

Closes #2860 


#### [#3015] - (2015-01-19T07:33:19Z) - [Add --color option description to mix moduledoc.](https://github.com/elixir-lang/elixir/pull/3015)

Didn't realize --color was an option since it is missing from the module doc (needed it when calling 'mix test' programmatically). Came across it in the github issues. Thought it should be added to save others time.


#### [#2762] - (2015-01-15T14:15:50Z) - [Improve UndefinedFunctionError](https://github.com/elixir-lang/elixir/pull/2762)

- Detect undefined errors for compiling modules
- Log undefined errors in Task's like other OTP processes
- Normalize undefined errors from OTP processes

It would be nice to add tests for the last two bullet points but wanted to check this is an acceptable approach first.


#### [#3010] - (2015-01-11T15:35:16Z) - [Fixes #3009](https://github.com/elixir-lang/elixir/pull/3010)

Resolves a slight typo in the documentation for GenEvent.swap_handler and shores up the backtick quoting surrouding it.


#### [#3003] - (2015-01-10T13:26:22Z) - [Invert the order of non matching token messages (closes #2993)](https://github.com/elixir-lang/elixir/pull/3003)

Added a new way to return errors from the tokenizer by providing a prefix and suffix message to improve the flexibility of message formatting.


#### [#3006] - (2015-01-09T22:00:28Z) - [Fix error documentation for Kernel.hd/1](https://github.com/elixir-lang/elixir/pull/3006)

I'm brand new to Elixir, so I was going through the Getting Started guide and noticed a discrepancy between the documentation of the Kernel.hd function and its actual results in the interactive shell.

When I call Kernel.hd on an empty list, it throws an ArgumentError, which mirrors the Kernel.tl function.

That being said, I'm brand new here so I might be missing something.


#### [#3005] - (2015-01-09T21:16:45Z) - [Improve error message when using attributes inside match in module](https://github.com/elixir-lang/elixir/pull/3005)

Closes #2963.


#### [#3004] - (2015-01-09T18:08:21Z) - [Set MIX_ARCHIVES in mix tasks archive tests](https://github.com/elixir-lang/elixir/pull/3004)

Previously archive tests would fail if MIX_ARCHIVES was set.

Partially resolves #3002.

I still get the warning printed to console:

```
warning: the archive archive-0.1.0 requires Elixir "~> 0.1.0" but you are running on v1.1.0-dev 
```


#### [#3001] - (2015-01-09T14:53:39Z) - [add missing assert call](https://github.com/elixir-lang/elixir/pull/3001)

Hi,

Just adding a missing `assert` call and fixing some expected matchings.

Cheers


#### [#2999] - (2015-01-07T22:33:24Z) - [Fixed typos in Supervisor doc](https://github.com/elixir-lang/elixir/pull/2999)



#### [#2997] - (2015-01-07T08:24:38Z) - [Fix inconsistency of collection in Enum](https://github.com/elixir-lang/elixir/pull/2997)

In `Enum` docs http://elixir-lang.org/docs/master/elixir/Enum.html most collections called `collection` but some `coll`.


#### [#2988] - (2015-01-06T15:11:57Z) - [Add column info in tokenizer, #2987](https://github.com/elixir-lang/elixir/pull/2988)

## Motivation

Lint tools, code quality tools, refactor plugins, editor plugins/modes etc
work best with a good ast representation. In order to analyse and reformat/refactor code automatically, a tool needs precise location info about each token/ast node.
However currently elixir's tokenizer and elixir's parser return only line info about tokens/nodes.
## Implementation

This PR adds column info in tokenizer's output. It changes the format of location info from `Line` to `[Line, BeginColumn, EndColumn]`.
The current column is passed after the current line in `elixir_tokenizer:tokenize`. The return format is changed from
`{:ok, current_line, tokens}` to `{:ok, current_line, current_column, tokens}`.

Example:

``` elixir

    # before:
    iex > :elixir_tokenizer.tokenize 'if x do j else k end', 0, []
    {:ok, 0,
     [{:identifier, 0, :if}, {:do_identifier, 0, :x}, {:do, 0},
      {:identifier, 0, :j}, {:block_identifier, 0, :else}, {:identifier, 0, :k},
      {:end, 0}]}

    # now:
    iex > :elixir_tokenizer.tokenize 'if x do j else k end', 0, []
    {:ok, 0, 21,
     [{:identifier, {0, 1, 3}, :if}, {:do_identifier, {0, 4, 5}, :x}, {:do, {0, 6, 8}},
      {:identifier, {0, 9, 10}, :j}, {:block_identifier, {0, 11, 15}, :else}, {:identifier, {0, 16, 17}, :k},
      {:end, {0, 18, 21}}]}


```

The changes are reflected in the other modules depending on `elixir_tokenizer`.

This PR implements only the column-info-about-tokens part of the issue right now.
However I'd love to hear opinions:
- Do you think that elixir needs column info in ast/token representation?
- Is that PR on the right track?
- Is it better to add column info to existing ast representation or to
  create a parallel ast representation with location info about each token?
  (I am not sure what would be the elixir/erlang way)

_Edit_
Start counting columns from 1 and store location info in a tuple in examples.


#### [#2994] - (2015-01-06T14:28:04Z) - [GenServer docs fix: missing {:ok, state, :hibernate} for init callback](https://github.com/elixir-lang/elixir/pull/2994)

According to  [erlang documentation for gen_server module](http://erlang.org/doc/man/gen_server.html#Module:init-1) init callback can return `{ok, State, hibernate}` tuple. It was missing in elixir docs and this PR fixes this.


#### [#2926] - (2015-01-05T09:21:24Z) - [Register test with duplicate names only once](https://github.com/elixir-lang/elixir/pull/2926)

Currently, if several tests have the same name (it can very easily happen accidentally), only the first test is executed and other tests are silently ignored, leaving the user with a false sense of security.

For instance, if you run the test added to `ex_unit_test.exs` on master, it will fail as follow:

```
  1) test it executes different tests having the same name (ExUnitTest)
     test/ex_unit_test.exs:105
     Assertion with == failed
     code: ExUnit.run() == %{failures: 1, skipped: 0, total: 2}
     lhs:  %{failures: 0, skipped: 0, total: 2}
     rhs:  %{failures: 1, skipped: 0, total: 2}
     stacktrace:
       (ex_unit) lib/ex_unit/capture_io.ex:99: ExUnit.CaptureIO.do_capture_io/3
       test/ex_unit_test.exs:118
```

Two tests were added to the list but only the first one got executed (twice, because of the pattern matching rules).

To solve this issue, this patch ensures that all tests (and thus the generated test functions) have a unique name.

Note: It's a bit unfortunate that this small internal change has a (limited) visible effect to the user (see changes in `doc_test_test.exs`). But I'm afraid that completely decoupling the displayed test name from the function name would have been a change with a much larger impact than this.


#### [#2984] - (2015-01-04T19:32:22Z) - [Don't go through hex.pm API server to install Hex](https://github.com/elixir-lang/elixir/pull/2984)



#### [#2982] - (2015-01-03T12:27:55Z) - [Fix a few simple typo's, found while perusing the code.](https://github.com/elixir-lang/elixir/pull/2982)

- Just a few minor changes to clean up some doc's / and tests. 


#### [#2981] - (2015-01-03T08:52:23Z) - [Specify error from node/1 as an atom](https://github.com/elixir-lang/elixir/pull/2981)

This is a small documentation patch, error returned from node/1 when node is not alive does not have the atom identifier


#### [#2977] - (2015-01-02T09:45:01Z) - [Document the implications of setting embed_elixir to false. Closes #2970](https://github.com/elixir-lang/elixir/pull/2977)



#### [#2975] - (2014-12-31T20:27:22Z) - [Check Elixir version right after archive installation](https://github.com/elixir-lang/elixir/pull/2975)

This is more informative from the user experience point of view, than delaying the check until another mix task is executed in the future


#### [#2976] - (2014-12-31T08:50:12Z) - [fix spec for Integer.digits/2](https://github.com/elixir-lang/elixir/pull/2976)



#### [#2972] - (2014-12-29T11:45:32Z) - [Remove unnecessary Integer.parse/1](https://github.com/elixir-lang/elixir/pull/2972)

Now that we have introduced Integer.parse/2 a few days ago, we can get rid of Integer.parse/1. Instead, we can specify a default base, just as we only have Integer.do_digits/2 and Integer.do_undigits/2 with default base.

This PR may have a merge conflict with PR https://github.com/elixir-lang/elixir/pull/2971 if both look good.


#### [#2971] - (2014-12-29T09:22:09Z) - [Integer.parse/2 shouldn't parse when base is not an integer](https://github.com/elixir-lang/elixir/pull/2971)

Right now the spec of Integer.parse/2 correctly mentions the base of Integer.parse/2 should be an integer, but the code does not currently comply with it. That is because of bug https://github.com/elixir-lang/elixir/issues/2912 causes floating points like 10.2 be considered in range 2..32.

```
iex(1)> Integer.parse("34", 10.2)
{34.599999999999994, ""}
iex(2)> Integer.parse("34", 10.1231)
{34.3693, ""}
iex(3)> Integer.parse("34", 10.5)   
{35.5, ""}
```

Before issue https://github.com/elixir-lang/elixir/issues/2912 is fixed we should check if the given base is an integer.


#### [#2968] - (2014-12-27T20:27:18Z) - [Implement Integer.parse/2](https://github.com/elixir-lang/elixir/pull/2968)

**Motivation**

`Elixir` has `Integer.to_string/1` and `Integer.to_string/2`. 

`Integer.to_string/2` converts an integer to its text representation in a custom base. 
`Integer.to_string/` does that for base 10. 

The closest thing to an inverse function of `Integer.to_string` is `Integer.parse`. However there is only one version of it: `Integer.parse/1` which works only for base 10, which is odd.

This PR adds a `Integer.parse/2` function which can handle custom bases. `Integer.parse/1` just calls `Integer.parse/2` with base 10.

(`Integer.parse/2` accepts only bases in 2..36 and raises an ArgumentError when an invalid base is given. That way it's consistent with the behavior of `Integer.to_string/2`)


#### [#2960] - (2014-12-23T08:55:16Z) - [Add cover directory from 'mix test --cover' to default .gitignore](https://github.com/elixir-lang/elixir/pull/2960)

Notice this directory gets created in the root of the project when the --cover option is used with mix test. 

These are generated files, dependent on the specific time you run the command, so it doesn't seem like most  users would want to check them in. 


#### [#2955] - (2014-12-19T08:04:49Z) - [smart_engine: Rephrases doc](https://github.com/elixir-lang/elixir/pull/2955)

Just a minor adjustment to the doc. Thanks!


#### [#2954] - (2014-12-18T07:42:50Z) - [Fix Typos](https://github.com/elixir-lang/elixir/pull/2954)



#### [#2953] - (2014-12-13T22:10:50Z) - [resolves #2952](https://github.com/elixir-lang/elixir/pull/2953)

Seems, that it fixes the issue


#### [#2951] - (2014-12-12T19:35:06Z) - [Improved performance of Integer.undigits/2](https://github.com/elixir-lang/elixir/pull/2951)

Simplified the implementation. No need to reverse anything.


#### [#2948] - (2014-12-12T11:13:36Z) - [Improve `Enum.reverse_slice/3` performance and more](https://github.com/elixir-lang/elixir/pull/2948)

**[1,2,3,...,10], 3, 3**:

```
EnumReverseSlice.new:   10000000   0.50 ¬µs/op
EnumReverseSlice.old:   10000000   0.95 ¬µs/op
```

**[1,2,3,...,100], 3, 3**:

```
EnumReverseSlice.new:    1000000   2.64 ¬µs/op
EnumReverseSlice.old:     500000   6.99 ¬µs/op
```

**[1,2,3,...,100], 25, 25**:

```
EnumReverseSlice.new:    1000000   2.88 ¬µs/op
EnumReverseSlice.old:     200000   8.16 ¬µs/op
```

**[1,2,3,...,100], 40, 40**:

```
EnumReverseSlice.new:     500000   3.18 ¬µs/op
EnumReverseSlice.old:     200000   8.21 ¬µs/op
```

**[1,2,3,...,10_000], 10, 300**:

```
EnumReverseSlice.new:      10000   252.78 ¬µs/op
EnumReverseSlice.old:       2000   887.39 ¬µs/op
```

**1..100, 3, 3**:

```
EnumReverseSlice.new:     100000   15.42 ¬µs/op
EnumReverseSlice.old:     100000   22.38 ¬µs/op
```

**1..100, 25, 25**:

```
EnumReverseSlice.new:     100000   16.25 ¬µs/op
EnumReverseSlice.old:     100000   22.67 ¬µs/op
```

**1..100, 40, 40**:

```
EnumReverseSlice.new:     100000   15.60 ¬µs/op
EnumReverseSlice.old:     100000   23.28 ¬µs/op
```


#### [#2950] - (2014-12-12T09:46:46Z) - [warning about dumb terminal just irritates users](https://github.com/elixir-lang/elixir/pull/2950)

@josevalim I think that's it.


#### [#2949] - (2014-12-12T07:09:09Z) - [Update .travis.yml](https://github.com/elixir-lang/elixir/pull/2949)

OTP 17.3 is now working on the new build environment on travis, so I think we should require the tests to pass again ...

Hope they can have 17.4 soon...


#### [#2941] - (2014-12-11T11:28:24Z) - [Add Enum.unzip/1](https://github.com/elixir-lang/elixir/pull/2941)

Added the `Enum.unzip/1` function as described in #2935. This function takes a list of two-elements tuples and returns a tuple with two lists: the first one with the first element of each tuple and the second one with the second element of each tuple. The function raises an `ArgumentError` if there are tuples with size different than 2 in the original list.


#### [#2932] - (2014-12-10T20:10:37Z) - [Fetch module names from load path for autocomplete](https://github.com/elixir-lang/elixir/pull/2932)

@josevalim @ericmj I still thinking about how to cache this properly. Any ideas?
#2920


#### [#2944] - (2014-12-10T18:28:48Z) - [Add support for --werl in Windows bash-like shells](https://github.com/elixir-lang/elixir/pull/2944)

As per discussion on [elixir-lang-talk](https://groups.google.com/forum/?fromgroups=#!topic/elixir-lang-talk/bBiMB3hNJ8w). Only tested on Windows, but _should_ not interfere on other OS-es.

TODO:
- [x] Test on a *nix (will test on my Mac)
- [x] Add doc to `bin/iex`
- [x] Add doc to `bin/elixir`


#### [#2942] - (2014-12-10T15:32:34Z) - [Use same verb tense across Elixir documentation](https://github.com/elixir-lang/elixir/pull/2942)

The norm is to use passive present tense ("Returns bacon") and not imperative ("Return bacon"). My slightly OCD grammar brain trips on it every time I see the inconsistency, so I decided to fix it.

It's fixed across all the Elixir documentation, but not fixed for ExUnit, EEx etc.


#### [#2943] - (2014-12-10T15:31:42Z) - [Remove dead @doc snippet](https://github.com/elixir-lang/elixir/pull/2943)

Not sure where this comes from (I didn't dig into 'blame'), but I presume it's left-over documentation for a removed function. I did some quick searching, and I can't see the docs showing up anywhere, so I presume it should be cleaned up.


#### [#2939] - (2014-12-10T00:39:45Z) - [No need for default `code` arg in `IO.ANSI.Sequence.defsequence/3`](https://github.com/elixir-lang/elixir/pull/2939)



#### [#2940] - (2014-12-10T00:37:02Z) - [Simplify color sequences definition in `IO.ANSI`](https://github.com/elixir-lang/elixir/pull/2940)



#### [#2937] - (2014-12-09T10:14:45Z) - [Some documentation corrections](https://github.com/elixir-lang/elixir/pull/2937)

- Fix doc build instructions
- Improve introduction of the Mix module documentation


#### [#2936] - (2014-12-08T21:57:18Z) - [Remove empty/1 callback from Collectable implementations](https://github.com/elixir-lang/elixir/pull/2936)

The Collectable protocol does not contain this callback
anymore. Unused callbacks are confusing.


#### [#2933] - (2014-12-08T15:19:22Z) - [Fix and enhance &Regex.replace/4](https://github.com/elixir-lang/elixir/pull/2933)

This is a PR for #2930.

Fixed the bug and added support for `\g{N}`, but not `\gN` since it wouldn't help when `N` is followed by other digits.


#### [#2919] - (2014-12-08T09:37:23Z) - [Enum.sample/1, 2 should raise if the collection size is smaller than the sample size](https://github.com/elixir-lang/elixir/pull/2919)

This fixes the Enum.sample/1 issue discussed in the issue #2916.

And addresses @lexmag's comment in the closed PR #2917.


#### [#2927] - (2014-12-07T11:01:39Z) - [fix documentation for Record Types](https://github.com/elixir-lang/elixir/pull/2927)

Previously the documentation for `Record` included an example usage of
`Record.defrecord` that was missing a comma after the `name` argument.
This has been updated.


#### [#2928] - (2014-12-07T11:01:14Z) - [remove unnecessary function prefix](https://github.com/elixir-lang/elixir/pull/2928)



#### [#2924] - (2014-12-06T20:28:26Z) - [Fix broken IO.ANSI.Docs parser](https://github.com/elixir-lang/elixir/pull/2924)

This PR will fix issue #2903.

All previous tests are still passing (as I checked they are compliant with the Github's markdown parsing behavior).


#### [#2925] - (2014-12-06T15:34:21Z) - [Use the new build env on Travis](https://github.com/elixir-lang/elixir/pull/2925)

more ram and dedicated cpu cores, better network, faster boot times

http://docs.travis-ci.com/user/workers/container-based-infrastructure/


#### [#2921] - (2014-12-05T20:48:58Z) - [Add implementation of Integer.undigits](https://github.com/elixir-lang/elixir/pull/2921)

Implements `Integer.undigits`, which is the counterpart to `Integer.digits`.

I made two different implementations. The first one (4d43155) uses `Enum.reverse/1` and is a bit neater, but I'm not sure if we want to depend on the `Enum` module here?

The second option (edc0a0c) constructs the number in natural ordering, and then uses `pow` to give it the correct value. I believe this is slightly more efficient than the `reverse` option, but the code is less clean.

Which alternative do we want?

A few more things:
- Is there a nicer way to ensure the result is an integer, than using `:erlang.trunc/1`?
- Is there a way to use guards to ensure the input list consists of integers only? (I presume not.) Should we handle it in any way, or take the happy path?
- If we decide to go for the non-`reverse` option, I will test it more thoroughly to ensure correct behavior for all kinds of input. I'm currently more confident in the `reverse` implementation.
- The implementations support [Signed-digit representation](http://en.wikipedia.org/wiki/Signed-digit_representation), which is intentional. Doing anything else would be less efficient.

Any other input or feedback is of course welcome too.


#### [#2885] - (2014-12-05T18:56:13Z) - [introduce Enum.reverse/3](https://github.com/elixir-lang/elixir/pull/2885)

Enum.reverse/3 reverses the given enum from the given starting and ending indices.

Example usage would be:

```
iex(1)> Enum.reverse('abcdef', 0, 2)
'cbadef'
iex(2)> Enum.reverse([1, 2, 3, 4, 5], 1, 2)
[1, 3, 2, 4, 5]
iex(3)> Enum.reverse(1..5, 1, 2)           
[1, 3, 2, 4, 5]
```


#### [#2918] - (2014-12-05T15:31:47Z) - [fix typo](https://github.com/elixir-lang/elixir/pull/2918)



#### [#2914] - (2014-12-04T21:05:18Z) - [Update documentation for Enum.join](https://github.com/elixir-lang/elixir/pull/2914)



#### [#2910] - (2014-12-03T08:17:24Z) - [Introduce an efficient implementation for Integer.digits/1](https://github.com/elixir-lang/elixir/pull/2910)

Most programmers tend to implement the digits of an integer by converting to a string representation, splitting the string, and then converting each char back into an integer.  E.g. with code such as the following:

``` elixir
# BAD CODE - DONT DO THIS
def digits(n) when is_integer(n) and n>0 do
    n
    |> Integer.to_string
    |> String.graphemes
    |> Enum.map(&String.to_integer/1)
end
```

Which results in a lot of inefficient type conversion and memory allocations.

In contrast, this implementation is purely mathematical.  In informal benchmarks on my workstation, it performs at **0.9 Œºs/op** versus **4.8 Œºs/op** in the na√Øve implementation above. Plus, it will handle negative numbers properly, which most String solutions mess up.

While this is a pretty basic function, the way that 9/10 programmers tend to implement it is very inefficient and error prone, and it is in common usage.  Thus, I would suggest that having a proper and efficient implementation in the standard lib is desirable.


#### [#2913] - (2014-12-03T08:08:48Z) - [Fix misspellings in docs, comments, and strings.](https://github.com/elixir-lang/elixir/pull/2913)

I fixed various misspellings.


#### [#2584] - (2014-12-02T22:26:11Z) - [Enum.sample using reservoir sampling](https://github.com/elixir-lang/elixir/pull/2584)

Here's the PR for `Enum.sample` with single pass of the input collection, using [reservoir sampling](http://en.wikipedia.org/wiki/Reservoir_sampling), based on the experiments [we've talked about](https://github.com/elixir-lang/elixir/pull/2565).

Mentioning @joshnuss as he first came up with the topic, so the chance he needs the functionality :)

~~The algo has a funny corner case, that when the requested sample size is bigger than a collection size, the original collection is returned untouched - ie. not randomised. Is this desired behaviour for the API enduser?~~

~~If not, we can fallback to shuffling the sample buffer in such case, with a disadvantage that it will take another piece of time - but with the advantage that the input collection would not be walked again, because shuffling would be on the sample we already got. We obviously can't detect such situation early, because we know the size of the whole collection only after walking it.~~

A side note, how on earth is the random generator for doc_test seeded? :) I succeeded with in-doc examples only by trial and error ;)


#### [#2871] - (2014-12-02T21:59:04Z) - [fix floating point approximation error](https://github.com/elixir-lang/elixir/pull/2871)

This fixes issue #2867.

```
iex(11)> Float.parse("0.3534091")
{0.3534091, ""}
iex(12)> Float.parse("0.3534092")
{0.3534092, ""}
iex(13)> Float.parse("0.3534093")
{0.3534093, ""}
iex(14)> Float.parse("0.3534094")
{0.3534094, ""}
iex(15)> Float.parse("0.3534095")
{0.3534095, ""}
iex(16)> Float.parse("0.3534096")
{0.3534096, ""}
iex(17)> Float.parse("0.3534097")
{0.3534097, ""}
iex(18)> Float.parse("0.3534098")
{0.3534098, ""}
iex(19)> Float.parse("0.3534099")
{0.3534099, ""}
iex(20)> Float.parse("0.3534100")
{0.35341, ""}
```


#### [#2857] - (2014-12-02T21:57:52Z) - [improve important links](https://github.com/elixir-lang/elixir/pull/2857)

- First link should be  Elixir Website
- Elixir documentation added.
- IRC line improved


#### [#2814] - (2014-12-01T17:33:07Z) - [File lstat implementation.](https://github.com/elixir-lang/elixir/pull/2814)

This is a straightforward cut and paste implementation of File.lstat and File.lstat! based on the File.stat implementation. It more or less implements the same functionality, but just uses the underlying erlang call
:file.read_link_info, rather than :file.read_file_info. 
- Booker C. Bense


#### [#2906] - (2014-11-29T15:28:01Z) - [Fix splitting of empty strings on regex with trim: true](https://github.com/elixir-lang/elixir/pull/2906)

Make String.split and Regex.split called on empty string with
trim: true return []. Add testcase for String.split, fix incorrect
testcase for Regex.split.


#### [#2905] - (2014-11-28T08:37:02Z) - [Fix typo in module documentation](https://github.com/elixir-lang/elixir/pull/2905)



#### [#2902] - (2014-11-26T12:02:46Z) - [Add missing @spec](https://github.com/elixir-lang/elixir/pull/2902)



#### [#2901] - (2014-11-25T18:28:23Z) - [Add Enum.minmax and Enum.minmax_by](https://github.com/elixir-lang/elixir/pull/2901)

Continuing with the great tradition of following Ruby's footsteps when it comes to bringing happiness to developers: here is a couple of small but handy additions to the Enum module: `minmax` and `minmax_by` which will return the minimum and maximum values of a given collection in a single pass.


#### [#2900] - (2014-11-21T17:36:38Z) - [Making type options a bit more clear, adding float-32 example](https://github.com/elixir-lang/elixir/pull/2900)



#### [#2898] - (2014-11-19T15:44:37Z) - [Add number of skipped tests to ExUnit output](https://github.com/elixir-lang/elixir/pull/2898)

Based on [discussion on elixir-lang-talk](https://groups.google.com/forum/#!topic/elixir-lang-talk/5lZnUIO3YDw). When running ExUnit, it shows the number of skipped tests:

```
Finished in 4.8 seconds (3.1s on load, 1.7s on tests)
138 tests, 0 failures, 1 skipped
```

Since this output is not tested in any current unit tests, I decided not to write any new tests. Let me know if you want me to write automated tests as well.

I couldn't find any places in the documentation that need updating because of this change, but I might have missed something.

Currently, `ExUnit.run/0` returns the number of tests and number of failures. Should I update it to return all three numbers?

**TODOs**
- [x] Only show number of skipped tests when there are any.
- [x] Return `skipped` tests from `ExUnit.run/0`.
- [x] Update tests to verify added output.
- [x] Update tests to verify return value of `ExUnit.run/0`.
- [x] Update docs for `ExUnit.run/0`.
- [x] Make `tests` total, instead of excluding skipped.


#### [#2897] - (2014-11-18T22:14:31Z) - [Fix GenServer.cast/2 docs](https://github.com/elixir-lang/elixir/pull/2897)

- Removes ambiguity about what occurs when an atom is used to reference a `GenServer`.
-  Clarifies comment about another process being used to send a cast in OTP. Another process is only used if there is no connection the node and only casts to other nodes are not guaranteed to arrive in order.


#### [#2891] - (2014-11-13T09:19:26Z) - [Fix command_to_module_name not converting snakecased names properly](https://github.com/elixir-lang/elixir/pull/2891)

Currently, snake cased project names did not get converted properly into modules from `Mix.Utils.command_to_module_name`, i.e.:

``` elixir
Mix.Utils.command_to_module_name "my_app.task"
=> "My_app.Task"
```

This PR uses `camelize` to properly convert the commands to module namespaces.


#### [#2890] - (2014-11-11T11:31:48Z) - [Make map_reduce @spec stricter](https://github.com/elixir-lang/elixir/pull/2890)



#### [#2889] - (2014-11-11T10:59:26Z) - [[MIX] Add doctest to the test template](https://github.com/elixir-lang/elixir/pull/2889)



#### [#2886] - (2014-11-09T12:03:47Z) - [fix wrong CRLF grapheme](https://github.com/elixir-lang/elixir/pull/2886)

This fixes issue #2883.


#### [#2887] - (2014-11-09T02:15:54Z) - [fix broken link in GenServer module](https://github.com/elixir-lang/elixir/pull/2887)

Seeing sammyt's PR #2884, I wrote a script to hit all html links included in master branch's '.ex' source files.

It turns out there is one more link (which is the same link as the one discovered by sammyt in another file) that gives 404 response code.

Update: The rest of the urls all return 200 response code.

: )


#### [#2884] - (2014-11-08T20:01:42Z) - [correcting broken url in GenEvent docs](https://github.com/elixir-lang/elixir/pull/2884)



#### [#2882] - (2014-11-07T13:56:31Z) - [Make IO.ANSI.Docs readable on white background](https://github.com/elixir-lang/elixir/pull/2882)

The `default_options` for `IO.ANSI.Docs` uses bright yellow for
documentation headers and titles.

This is very nice and readable when using a terminal with a dark
background. However, when using a terminal with a bright (e.g. white)
background, those parts are unfortunately illegible.

This patch removes the `:bright` part from the `default_options`, to
make the defaults better suited to those of us who uses white terminals.

I have seen the issues and thread about adding an `.iex` file for having
local settings, and I think that's a great idea, but I still think that having
defaults that work for a wider group of developers is a good idea.

Below is a couple of screenshots on the before and after.

![iex_diff_dark_terminal](https://cloud.githubusercontent.com/assets/2308/4952583/60529ff4-6676-11e4-834e-490adff6c46f.png)
![iex_diff_white_background](https://cloud.githubusercontent.com/assets/2308/4952585/631b32d2-6676-11e4-9ff1-f9623680fc1d.png)


#### [#2881] - (2014-11-07T09:09:50Z) - [rename two identical variables to same name and remove guard](https://github.com/elixir-lang/elixir/pull/2881)



#### [#2879] - (2014-11-06T13:49:44Z) - [Move guards to fun heads](https://github.com/elixir-lang/elixir/pull/2879)



#### [#2878] - (2014-11-06T11:20:23Z) - [Fix SupervisorTest :push handle_cast method](https://github.com/elixir-lang/elixir/pull/2878)

- handle_cast/2 does not take 'from' param


#### [#2873] - (2014-11-04T15:03:00Z) - [improve and examples for Float.parse/1 and String.to_float](https://github.com/elixir-lang/elixir/pull/2873)

fixes issue #2869


#### [#2877] - (2014-11-03T17:12:53Z) - [fix wrong String.at/2 output when second arg is not an integer](https://github.com/elixir-lang/elixir/pull/2877)

String.at/2 has the same issue as String.split_at/2 in issue #2874:  

```
iex(1)> String.at("elixir", 0.1)
** (FunctionClauseError) no function clause matching in String.do_at/3
    (elixir) lib/string.ex:1025: String.do_at({"l", "ixir"}, 0.1, 1)
iex(1)> String.at("elixir", -0.1)
nil
```

The fix is similar. 

---

I took a look at the other similar functions right now at String module expecting a second integer parameter, they all seem to be correctly using `is_integer` guards and I ran some random floating point inputs as tests and the tests are all passing, so hopefully there wouldn't need any similar patch regarding this kind of issue for the String module.


#### [#2875] - (2014-11-02T13:16:21Z) - [fix wrong String.split_at/2 output when second arg is not an integer](https://github.com/elixir-lang/elixir/pull/2875)

This fixed issue #2874.


#### [#2868] - (2014-10-31T11:08:42Z) - [fix typo](https://github.com/elixir-lang/elixir/pull/2868)



#### [#2866] - (2014-10-30T13:37:49Z) - [fix inline documentation because of broken ansi representation in iex](https://github.com/elixir-lang/elixir/pull/2866)

Hi,

I stumbled over a representation issue with the ansi doc inside `iex`.

before:

![BAD ANSI](http://i.imgur.com/tAvq7JL.png)

after:

![GOOD ANSI](http://i.imgur.com/ddbkIWS.png)

I also made the information about the `l/1` function shorter. The more precise information you get via `h(l/1)`.


#### [#2865] - (2014-10-30T13:12:35Z) - [Improve documentation of Dict module](https://github.com/elixir-lang/elixir/pull/2865)



#### [#2861] - (2014-10-29T19:45:27Z) - [Improve String module](https://github.com/elixir-lang/elixir/pull/2861)



#### [#2858] - (2014-10-29T12:47:37Z) - [Fix type of Inspect.Opts limit](https://github.com/elixir-lang/elixir/pull/2858)



#### [#2859] - (2014-10-29T12:47:19Z) - [Correct Enum.take, Enum.take_every, Stream.take, Stream.take_every](https://github.com/elixir-lang/elixir/pull/2859)

Correct Enum.take, Enum.take_every, Stream.take, Stream.take_every to accept proper nth/count values.

Make these functions deal with:
- empty collections directly return an empty list
- non-integer values for Enum.take and Stream.take
- negative and non-integer values for Enum.take_ever and Stream.take_every


#### [#2856] - (2014-10-29T11:29:19Z) - [Improve string justification functions](https://github.com/elixir-lang/elixir/pull/2856)



#### [#2855] - (2014-10-28T17:46:01Z) - [complete test coverage for Stream.take_every/2](https://github.com/elixir-lang/elixir/pull/2855)

Like Enum.take_every/2, when the second argument of Stream.take_every/2 is negative, we should expect an FunctionClauseError.


#### [#2851] - (2014-10-28T17:10:54Z) - [Enum.take_every/2 should throw an exception when the second argument is not positive](https://github.com/elixir-lang/elixir/pull/2851)

Fixed issue #2850.


#### [#2854] - (2014-10-28T13:40:56Z) - [fix typo](https://github.com/elixir-lang/elixir/pull/2854)



#### [#2848] - (2014-10-27T12:12:52Z) - [fix typo](https://github.com/elixir-lang/elixir/pull/2848)



#### [#2847] - (2014-10-27T12:12:40Z) - [change some doc examples to iex style](https://github.com/elixir-lang/elixir/pull/2847)



#### [#2841] - (2014-10-26T18:37:02Z) - [fix escaped terminators in sigil](https://github.com/elixir-lang/elixir/pull/2841)

This fixes #2840 

Now we have:

```
iex(1)> ~S(Interpolation?: #{3+0.14} ' '\))
"Interpolation?: \#{3+0.14} ' ')"
iex(2)> ~S(foo\))
"foo)"
```


#### [#2844] - (2014-10-26T18:22:14Z) - [Fix @doc of List.keyfind,keymember? and keydelete](https://github.com/elixir-lang/elixir/pull/2844)

Given params is `key`, so replace `item` with `key`.


#### [#2845] - (2014-10-26T18:21:26Z) - [Replace `defstruct/2` with `defstruct/1`](https://github.com/elixir-lang/elixir/pull/2845)



#### [#2837] - (2014-10-21T19:47:04Z) - [corrected a spelling mistake in the iex docs: dafailt -> default](https://github.com/elixir-lang/elixir/pull/2837)



#### [#2834] - (2014-10-20T12:25:16Z) - [mix.ex: example "mix run hello" -> "mix hello"](https://github.com/elixir-lang/elixir/pull/2834)



#### [#2829] - (2014-10-19T16:14:21Z) - [List foldl, foldr @doc](https://github.com/elixir-lang/elixir/pull/2829)

minor typos regarding the direction of foldl and foldr


#### [#2831] - (2014-10-19T15:30:49Z) - [making #elixir-lang more clear](https://github.com/elixir-lang/elixir/pull/2831)

the markdown parser doesn't recognize the irc:// link, so it's not clear what #elixir-lang is. (it actually looks more like a twitter hashtag)


#### [#2830] - (2014-10-19T12:55:30Z) - [fix link to bug reports](https://github.com/elixir-lang/elixir/pull/2830)



#### [#2828] - (2014-10-18T07:25:05Z) - [correct is_nil @doc + String.grapheme better example](https://github.com/elixir-lang/elixir/pull/2828)

- corrects is_nil @doc to have the same format as the other is_\* functions, so it is consistent in the Kernel > Summary docs
- provides a better example for  String.grapheme


#### [#2824] - (2014-10-17T07:22:41Z) - [Fix typo](https://github.com/elixir-lang/elixir/pull/2824)



#### [#2822] - (2014-10-16T17:53:24Z) - [fix typos](https://github.com/elixir-lang/elixir/pull/2822)



#### [#2793] - (2014-10-15T19:02:54Z) - [Introduce `StringIO.flush/1` function](https://github.com/elixir-lang/elixir/pull/2793)

Related discussion: https://groups.google.com/forum/#!topic/elixir-lang-core/nUbm1rn-cYg


#### [#2807] - (2014-10-15T19:00:30Z) - [Support mix help --search PATTERN](https://github.com/elixir-lang/elixir/pull/2807)

Implements #2799


#### [#2821] - (2014-10-15T10:25:51Z) - [set null prompt function in dumb term mode](https://github.com/elixir-lang/elixir/pull/2821)

The erl prompt is displayed when I start iex with dumb terminal mode.
I evaded it by changing a default prompt function of erlang.

before:
bash-3.2$ TERM=DUMB bin/iex
Warning: could not run smart terminal, falling back to dumb one
Eshell V6.2  (abort with ^G)
1> 1> 1> 1> Interactive Elixir (1.1.0-dev) - press Ctrl+C to exit (type h() ENT\
ER for help)
1> iex(1)> 1> 
after:
bash-3.2$ env TERM=DUMB bin/iex
Warning: could not run smart terminal, falling back to dumb one
Eshell V6.2  (abort with ^G)
Interactive Elixir (1.1.0-dev) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> 


#### [#2819] - (2014-10-15T09:46:30Z) - [Fix missing concatenation operator.](https://github.com/elixir-lang/elixir/pull/2819)



#### [#2816] - (2014-10-12T20:12:34Z) - [fix typos](https://github.com/elixir-lang/elixir/pull/2816)



#### [#2813] - (2014-10-10T13:09:29Z) - [Fix a couple of minor typos in docstrings](https://github.com/elixir-lang/elixir/pull/2813)

Nothing major, just noticed a couple of typos. This is my first Elixir PR - please let me know if there's a different process I should follow for these. =)


#### [#2812] - (2014-10-09T19:44:25Z) - [ Add OTP 17.3 to run on Travis CI](https://github.com/elixir-lang/elixir/pull/2812)

http://blog.travis-ci.com/2014-10-08-october-2014-build-environment-update/


#### [#2808] - (2014-10-07T08:13:37Z) - [downcase path comparison in application directory test](https://github.com/elixir-lang/elixir/pull/2808)

Fix issue #2788


#### [#2803] - (2014-10-05T13:13:57Z) - [Fix documentation of IO module](https://github.com/elixir-lang/elixir/pull/2803)



#### [#2796] - (2014-09-30T14:30:23Z) - [Make some docs more gender neutral](https://github.com/elixir-lang/elixir/pull/2796)



#### [#2787] - (2014-09-27T09:14:31Z) - [Report correct location if local.hex failed](https://github.com/elixir-lang/elixir/pull/2787)

Fixes #2765.


#### [#2782] - (2014-09-27T09:09:31Z) - [Remove previously generated beams before installing new ones](https://github.com/elixir-lang/elixir/pull/2782)

At install phase in Makefile, remove previous installed ones before copying the new ones.


#### [#2789] - (2014-09-27T08:57:34Z) - [System.cmd path resolution](https://github.com/elixir-lang/elixir/pull/2789)

The way `System.cmd` finds executables right now does not match the description in the docs.

This PR has 3 commits.
1. In the first commit I simply added tests for the current behaviour.
2. In the second commit I have changed the implementation to match the docs.
3. In the third commit I have proposed a new way for `System.cmd` to look for executables.

The reason I'm proposing a breaking change is because the proposed behaviour matches how shells find executables. It also resolves the issue of passing relative paths as commands: according to current docs it should result in an error (or it can be interpreted as unspecified behaviour which is not good either).


#### [#2792] - (2014-09-26T19:44:43Z) - [Fix compiler warning](https://github.com/elixir-lang/elixir/pull/2792)



#### [#2783] - (2014-09-22T07:56:23Z) - [Documented File.stat options](https://github.com/elixir-lang/elixir/pull/2783)

Since I spent most of an afternoon chasing down the erlang documentation to figure out what these options
actually mean. I thought I would submit a small documentation patch to record that effort. 


#### [#2778] - (2014-09-17T17:45:57Z) - [Small fix for Application docs. Returning value is not a tuple](https://github.com/elixir-lang/elixir/pull/2778)

Small fix for documentation. Application.get_env/3 returns a value not a tuple.


#### [#2777] - (2014-09-17T16:00:30Z) - [Add compatibilty with OTP 18 typespec changes](https://github.com/elixir-lang/elixir/pull/2777)



#### [#2774] - (2014-09-16T08:22:55Z) - [Change Regex ungreedy option to U](https://github.com/elixir-lang/elixir/pull/2774)

Soft-deprecate `r` option


#### [#2775] - (2014-09-15T20:41:11Z) - [Fix a typo in Dict's docs](https://github.com/elixir-lang/elixir/pull/2775)



#### [#2776] - (2014-09-15T20:40:32Z) - [Default ports for WebSocket](https://github.com/elixir-lang/elixir/pull/2776)

Added default ports for WebSocket according to http://tools.ietf.org/html/rfc6455#section-3


#### [#2772] - (2014-09-14T12:31:22Z) - [fix example sample.ex -> sample.eex](https://github.com/elixir-lang/elixir/pull/2772)

Not sure about this...


#### [#2770] - (2014-09-13T08:37:37Z) - [Fixed String doc link](https://github.com/elixir-lang/elixir/pull/2770)



#### [#2768] - (2014-09-12T08:16:06Z) - [Fix a typo in Code.eval_file's doc](https://github.com/elixir-lang/elixir/pull/2768)



#### [#2767] - (2014-09-11T18:59:45Z) - [fix previous commit typo bug in bin/elixir](https://github.com/elixir-lang/elixir/pull/2767)

#2670 There is a typo, `cygpath -m "SCRIPT_PATH"` missed a `$` .


#### [#2766] - (2014-09-11T14:38:26Z) - [Fix my own typo in helpers.ex](https://github.com/elixir-lang/elixir/pull/2766)

Brand-new language, and I put a ding in it. Sorry about that. :-(

Congratulations on 1.0!


#### [#2759] - (2014-09-07T20:29:51Z) - [Fix typos in Stream.transform/3 docs](https://github.com/elixir-lang/elixir/pull/2759)

Seems to read better to me.

"`Stream.transform/3` is a useful as it can be used as basis to implement"

vs

"`Stream.transform/3` is useful as it can be used as the basis to implement"


#### [#2702] - (2014-09-07T10:06:29Z) - [Introduce new operators intended for use by parser combinator libraries.](https://github.com/elixir-lang/elixir/pull/2702)

The expected definitions (which are by no means required) in
parser combinator speak are:
- `p  ~>> f   =  bind(p, f)`
- `p1 ~>  p2  =  pair_right(p1, p2)`
- `p1 <~  p2  =  pair_left(p1, p2)`
- `p1 <~> p2  =  pair_both(p1, p2)`
- `p  |~> f   =  map(p, f)`
- `1p <|> p2  =  either(p1, p2)`

Example usage with ExParsec: https://gist.github.com/alexrp/937b3da51f22f90c4e90


#### [#2756] - (2014-09-06T18:12:49Z) - [Fetch Hex with wget or curl](https://github.com/elixir-lang/elixir/pull/2756)

This way we can use https and do peer verification without bundling
certificates with elixir.


#### [#2752] - (2014-09-03T19:05:29Z) - [Fix some dialyzer warnings](https://github.com/elixir-lang/elixir/pull/2752)

Three bug fixes are included:
- Fix `make dialyze` to stop checking for race conditions (http://erlang.org/pipermail/erlang-bugs/2014-July/004518.html)
- Fix `:sys.replace_state` for `GenEvent` (GenEvent should have some tests for system messages)
- Fix mix lock files to always use maps (the code and docs didn't quite match up here but I think I got it right)

I think I handled most obvious warnings (except for compiler unmatched warnings) that aren't compiler generated. Adding specs to `Regex` has generated quite a few more warnings (https://github.com/elixir-lang/elixir/issues/2750), please be extra diligent when review the return values of these specs as I am not overly familiar with `Regex`.

There is still an issue with unmatched warnings from `for` comprehensions, I am unsure whether this is solvable by changing the generated Erlang AST or not.


#### [#2720] - (2014-09-03T12:24:16Z) - [Print process mailbox on failing assert_receive](https://github.com/elixir-lang/elixir/pull/2720)

After almost one year (https://github.com/elixir-lang/elixir/pull/1728), that's my second attempt to make assert_receive(d) error messages better.

When assert_receive fails we don't know if we have any message received or we just matched the wrong pattern. My proposal is: print the mailbox of the process.

Is it something desirable?


#### [#2746] - (2014-09-03T11:46:23Z) - [Fixes #2744](https://github.com/elixir-lang/elixir/pull/2746)

Initial version, awaiting for review (:


#### [#2749] - (2014-09-03T11:13:15Z) - [Document how to obtain a custom instance of Macro.Env](https://github.com/elixir-lang/elixir/pull/2749)

Closes #2727.


#### [#2743] - (2014-09-02T10:22:23Z) - [Fix exit signal race condition in logger tests](https://github.com/elixir-lang/elixir/pull/2743)

Test process must wait for exit signal before untrapping exits, otherwise exit signal may cause it to exit.

An example of this race condition: https://travis-ci.org/elixir-lang/elixir/jobs/33988884#L292


#### [#2736] - (2014-09-01T23:33:12Z) - [Fix Logger.log/2 not to raise on Logger exit](https://github.com/elixir-lang/elixir/pull/2736)



#### [#2741] - (2014-09-01T23:31:55Z) - [Fixes #2737](https://github.com/elixir-lang/elixir/pull/2741)

If I understand the description right, here is the solution.


#### [#2740] - (2014-09-01T11:36:43Z) - [Typo fix](https://github.com/elixir-lang/elixir/pull/2740)



#### [#2738] - (2014-09-01T11:36:18Z) - [Correct documentation for proper grammer.](https://github.com/elixir-lang/elixir/pull/2738)

Noticed this while reading through...


#### [#2734] - (2014-08-30T18:58:30Z) - [Friendlier unquote_splicing error with hints](https://github.com/elixir-lang/elixir/pull/2734)

Closes https://github.com/elixir-lang/elixir/issues/2655

I'm not familiar with Erlang at all but wanted to try contributing to Elixir. This seemed like a simple issue to take on. Hope it's good enough! Please let me know if there's anything I should change. 


#### [#2725] - (2014-08-28T18:10:41Z) - [Document that @compile accumulates.](https://github.com/elixir-lang/elixir/pull/2725)



#### [#2715] - (2014-08-28T15:38:46Z) - [Add an unused flag to deps.clean & deps.unlock](https://github.com/elixir-lang/elixir/pull/2715)

This addresses issues #2569
https://github.com/elixir-lang/elixir/issues/2569


#### [#2723] - (2014-08-27T20:08:55Z) - [Make do_surround_many private on Inspect.Algebra](https://github.com/elixir-lang/elixir/pull/2723)

`do_surround_many` does not seem to be expected to be public as it does not have [doc](http://elixir-lang.org/docs/stable/elixir/Inspect.Algebra.html) and it's not used outside this module.


#### [#2701] - (2014-08-23T20:24:48Z) - [Escript protocol consolidation](https://github.com/elixir-lang/elixir/pull/2701)



#### [#2712] - (2014-08-23T18:34:05Z) - [Fix logger watcher race condition](https://github.com/elixir-lang/elixir/pull/2712)

Previously a backend could be removed from logger and the watcher would not have exited before the `Logger.remove_backend/1` call returned. This meant that a new watcher could not always be started because the child (watcher) might still exist but be about to die.

I need to investigate whether switching to a `simple_one_for_one` with non-temporary children that can return `:ignore` will cause a problem - it might.


#### [#2713] - (2014-08-23T18:32:48Z) - [Fix race condition in Logger.ErrorHandlerTest](https://github.com/elixir-lang/elixir/pull/2713)

When crashing the error logger handler, the handler's watcher could log its message before Logger was flushed, causing the watcher's log message to appear in the first, rather than second, `capture_log`.


#### [#2708] - (2014-08-22T16:02:31Z) - [Fix a typo in Mix.Project.compile_path doc](https://github.com/elixir-lang/elixir/pull/2708)



#### [#2703] - (2014-08-21T10:19:11Z) - [Update CONTRIBUTING.md](https://github.com/elixir-lang/elixir/pull/2703)

Corrected 'should be send' to 'should be sent'


#### [#2687] - (2014-08-20T17:56:20Z) - [Mix language setting](https://github.com/elixir-lang/elixir/pull/2687)

Closes #2656 and #2657.


#### [#2698] - (2014-08-20T13:08:20Z) - [Update CONTRIBUTING.md](https://github.com/elixir-lang/elixir/pull/2698)

renamed 'issues tracker' to 'issue tracker' for consistency


#### [#2697] - (2014-08-20T09:24:32Z) - [Fix docs (missing indentation in examples)](https://github.com/elixir-lang/elixir/pull/2697)

Somehow I botched the original doc examples with not enough spacing.


#### [#2695] - (2014-08-18T20:33:11Z) - [GenEvent++ ](https://github.com/elixir-lang/elixir/pull/2695)



#### [#2691] - (2014-08-17T12:57:53Z) - [fix doc typo in Macro.expand/2](https://github.com/elixir-lang/elixir/pull/2691)



#### [#2684] - (2014-08-16T21:05:00Z) - [Properly handle compilation errors in Erlang compiler](https://github.com/elixir-lang/elixir/pull/2684)

Closes #2654.

This what the output before the change looked like:

```
src/cliproj_cli.erl:6: syntax error before: ':'
src/cliproj_cli.erl:2: function main/1 undefined
02:11:30.212 [error] Error in process <0.47.0> with exit value: {#{'__exception__'=>true,'__struct__'=>'Elixir.ArgumentError',message=><<188 bytes>>},[{'Elixir.Exception',message,1,[{file,"lib/exception.ex"},{line,48}]},{'Elixir.Exception',format_banner,3,[{file,"lib/exception.ex"},{line,106}]},{'Elixir.Exception'...


** (EXIT from #PID<0.47.0>) an exception was raised:
    ** (ArgumentError) Got FunctionClauseError with message "no function clause matching in IO.chardata_to_string/1" while retrieving message for %CompileError{description: "compile error", file: nil, line: nil}
        (elixir) lib/exception.ex:48: Exception.message/1
        (elixir) lib/exception.ex:106: Exception.format_banner/3
        (elixir) lib/exception.ex:141: Exception.format/3
        (elixir) lib/kernel/cli.ex:113: Kernel.CLI.print_error/3
        (elixir) lib/kernel/cli.ex:83: anonymous fn/3 in Kernel.CLI.exec_fun/2
```

I made a controversial change to the compiler.erlang task in this patch. Instead for raising a `CompilerError`, I'm raising `Mix.Error` to get a nice error message:

```
src/cliproj_cli.erl:6: syntax error before: ':'
src/cliproj_cli.erl:2: function main/1 undefined
** (Mix) Encountered some compilation errors.
```

However, there are now 10 tests breaking because all of them relied on `CompileError` being raised.

When there is a syntax error in Elixir source, the error message is rather short:

```
== Compilation error on file lib/compilerror.ex ==
** (SyntaxError) lib/compilerror.ex:4: unexpected token: end
    (elixir) lib/kernel/parallel_compiler.ex:93: anonymous fn/3 in Kernel.ParallelCompiler.spawn_compilers/8
```

I suppose it also emits a `CompileError` but it gets formatted before propagating to the top.

My question is this: should I keep the `CompileError` in `compile.erlang` and where should I catch it to format it more nicely?


#### [#2686] - (2014-08-16T19:58:01Z) - [Docs: Using autocomplete for function discovery in IEx](https://github.com/elixir-lang/elixir/pull/2686)

I had to go to the mailing list to discover this trick. Knowing it's autocomplete supplying the information makes it obvious in hindsight, but I had it in my head that it would be part of the h() command. It might also be worth adding a mention of autocomplete to the h(IEx) page, as well, but since this is likely first help page a new user would come across, this may be enough.


#### [#2674] - (2014-08-12T19:40:02Z) - [Minor unquote/1 doc fix.](https://github.com/elixir-lang/elixir/pull/2674)

Example uses `name`, but code example uses `value`.


#### [#2668] - (2014-08-12T17:32:33Z) - [fix --no-color / --color option for `mix test`](https://github.com/elixir-lang/elixir/pull/2668)

The `--no-color` flag builds up an options hash to include `[color: false]` which is then passed to `ExUnit.configure/1`. The ExUnit application isn't aware of a `:color` attribute, but it does know of a `:colors` attribute which takes a list of colors to be used by formatters.

This PR will convert the `:color` flag given to the `mix test` task into the proper option format that `ExUnit.configure/1` expects.


#### [#2670] - (2014-08-12T07:34:41Z) - [Use quotes to avoid space-in-path issues with cygpath](https://github.com/elixir-lang/elixir/pull/2670)

This commit ensures that if `$SCRIPT_PATH` has spaces in it, `cygpath` will still treat it as one path.

@josevalim I found this through testing shell redirection (calling the batch files at the beginning of the bash files if in Cygwin).  That approach introduces issues with using Ctrl+C whereas what we have currently works great.


#### [#2671] - (2014-08-12T07:34:25Z) - [No need in some purges in `Kernel.WarningTest`](https://github.com/elixir-lang/elixir/pull/2671)



#### [#2673] - (2014-08-12T00:02:35Z) - [Clarify match?/2 docs.](https://github.com/elixir-lang/elixir/pull/2673)

I think because the subject usually is the first argument in Elixir, I expected the expression to be the left side. After looking at the implementation and realizing that it's supposed to mirror matching with `=`, it makes sense that the pattern is on the left side. However, I think it's worth it to make this a bit clearer in the docs.


#### [#2667] - (2014-08-11T18:51:03Z) - [Fix example in config/config.exs that's created for new projects.](https://github.com/elixir-lang/elixir/pull/2667)

The example in `config/config.exs` got out of date.


#### [#2666] - (2014-08-11T07:53:38Z) - [Add special case for lists in Stream.cycle](https://github.com/elixir-lang/elixir/pull/2666)

Performance improvement demonstrated:

``` elixir
iex(5)> :timer.tc fn -> Stream.cycle(1..3) |> Enum.take(1_000_000) end
{387861,
 [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2,
  3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, ...]}
iex(6)> :timer.tc fn -> Stream.cycle([1,2,3]) |> Enum.take(1_000_000) end
{145768,
 [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2,
  3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, ...]}
iex(7)> Protocol.consolidated?(Enumerable)
true
```


#### [#2664] - (2014-08-11T06:16:51Z) - [Add Stream.interval/1 and Stream.timer/1](https://github.com/elixir-lang/elixir/pull/2664)

Per discussion on https://groups.google.com/forum/#!topic/elixir-lang-core/lhvytBduo3Q

Tests here are interesting. Anything time based is always a pain to test. Open to suggestions.


#### [#2663] - (2014-08-10T15:56:59Z) - [Bind value to proper name in `elixir_tokenizer`](https://github.com/elixir-lang/elixir/pull/2663)

:zap: fortunately it didn't evolve to heisenbug.


#### [#2652] - (2014-08-09T08:36:32Z) - [Suppress "-s elixir start_cli" for IEx](https://github.com/elixir-lang/elixir/pull/2652)

This adds a `runMode` variable to `bin\elixir.bat`, similar to `$MODE` in `bin\elixir`.  This lets us suppress `-s elixir start_cli` for IEx, which is also derived from the bash script's behavior.


#### [#2651] - (2014-08-08T20:19:23Z) - [Improve translator formatting](https://github.com/elixir-lang/elixir/pull/2651)

- Improve application stop reasons
- Include stacktrace in crash reports


#### [#2648] - (2014-08-08T18:41:26Z) - [Makefile: shorten tip about Unicode embedding time](https://github.com/elixir-lang/elixir/pull/2648)

The estimate about this step taking "up to a minute" really depends on
the machine we're compiling on.  For example, on an old or underpowered
machine, it may take _longer_ than a minute.  So this patch changes the
wording accordingly and puts the reason for the delay at the beginning.


#### [#2647] - (2014-08-08T14:30:12Z) - [Fixed doc typos in Task and URI](https://github.com/elixir-lang/elixir/pull/2647)



#### [#2646] - (2014-08-08T14:18:46Z) - [Fixed Logger.configure_backend spec](https://github.com/elixir-lang/elixir/pull/2646)



#### [#2645] - (2014-08-08T09:25:56Z) - [Added @doc false to handle_info function](https://github.com/elixir-lang/elixir/pull/2645)



#### [#2638] - (2014-08-07T14:16:30Z) - [Fixing typos in Logger module docs](https://github.com/elixir-lang/elixir/pull/2638)



#### [#2637] - (2014-08-06T20:37:22Z) - [Improve Logger's SASL report translation](https://github.com/elixir-lang/elixir/pull/2637)

- Pattern match keyword lists for faster parsing
- Support `:supervisor_bridge` reports
- Support missing `:initial_call` in `:crash_report`
- Improve formatting of registered name in `:crash_report` output
- More tests


#### [#2636] - (2014-08-06T19:20:48Z) - [Improved RFC compliance for URI to_string](https://github.com/elixir-lang/elixir/pull/2636)

URI.parse works according to RFC 3986 Appendix B, but to_string is a simplification that can lead to illegal URIs. In particular, it does not handle URIs without a schema (e.g. "//example.net/path") correctly.

Compare Elixir 0.15.0:

```
iex(1)> to_string URI.parse("//example.net/path")
"example.net/path"
```

To Ruby:

```
irb :001 > URI.parse("//example.net/path").to_s
 => "//example.net/path" 
```

This PR implements the URI recomposition according to section 5.3 of the RFC.


#### [#2634] - (2014-08-06T10:05:59Z) - [Add SASL log forwarding option to Logger](https://github.com/elixir-lang/elixir/pull/2634)

Before I add tests can you confirm the format is approximately ok?


#### [#2633] - (2014-08-05T16:12:12Z) - [Use `not` instead of `!` in `IO.ANSI.enabled?/0`](https://github.com/elixir-lang/elixir/pull/2633)



#### [#2631] - (2014-08-05T07:18:27Z) - [Remove Windows-related CONTRIBUTING.md section (now in Wiki)](https://github.com/elixir-lang/elixir/pull/2631)

There is now documentation on building Elixir on Windows at [this wiki page](https://github.com/elixir-lang/elixir/wiki/Windows).  I removed it altogether, rather than linking to the new page because it seems out of place for the CONTRIBUTING.md file.


#### [#2630] - (2014-08-04T16:51:15Z) - [Doc correction for GenEvent](https://github.com/elixir-lang/elixir/pull/2630)



#### [#2627] - (2014-08-04T08:42:34Z) - [Add integer base support to inspect](https://github.com/elixir-lang/elixir/pull/2627)

Option :base for inspect/2 supports :binary, :octal, :decimal, :hex.
Includes tests and documentation. Completes #2583


#### [#2625] - (2014-08-03T18:04:12Z) - [Improve IEx docs about .iex.exs](https://github.com/elixir-lang/elixir/pull/2625)



#### [#2624] - (2014-08-03T18:03:25Z) - [Reuse pathtype detection in `Path` module](https://github.com/elixir-lang/elixir/pull/2624)



#### [#2619] - (2014-08-02T01:00:03Z) - [Print app name before compiling Makefile deps](https://github.com/elixir-lang/elixir/pull/2619)

This should close out #2616.

There were no tests.  I didn't add one, but I verified it on a make dependency of my own.


#### [#2618] - (2014-08-01T19:22:56Z) - [Validate app and module on mix new](https://github.com/elixir-lang/elixir/pull/2618)

https://github.com/elixir-lang/elixir/issues/2601


#### [#2613] - (2014-08-01T08:12:05Z) - [Use Command Prompt for stdlib test on Windows](https://github.com/elixir-lang/elixir/pull/2613)

This is to ensure that tests are run via `elixir.bat` rather than the bash script, so that we can catch test failures specific to the environment (one has already come up.)


#### [#2611] - (2014-07-31T17:05:34Z) - [Handle tilde in `Path.expand/1,2` properly](https://github.com/elixir-lang/elixir/pull/2611)

Closes #2579 
- `~`:

Ruby, Zsh, Python expand it to `HOME`
- `~/dir`:

Ruby, Zsh, Python expand it to `HOME` + `/dir`
- `~user`:

Ruby, Zsh, Python use `getpwnam` call but behave differently.
In case of `user` existence `user`'s dir will be returned, otherwise:
- Python returns path unchanged
- Ruby, Zsh raise


#### [#2609] - (2014-07-31T10:43:06Z) - [Add ANSI support to console logger](https://github.com/elixir-lang/elixir/pull/2609)

- Coloring is off by default because I could not think of a way to choose a default with `IO.ANSI.terminal?/1`
- Advanced coloring can be done by the formatter for `:console` backend because the formatter can return a value that is passed to `IO.ANSI.format/2` (chardata with ANSI atoms)
- `:console` backend does smart options merging so the old `:colors` options are not lost


#### [#2562] - (2014-07-30T11:00:20Z) - [Implement IO.ANSI format/2 and format_fragment/2](https://github.com/elixir-lang/elixir/pull/2562)

Fixes #2550.


#### [#2606] - (2014-07-30T10:50:12Z) - [Add OTP 17.1 to run on Travis CI](https://github.com/elixir-lang/elixir/pull/2606)

It's now available: http://blog.travis-ci.com/2014-07-24-upcoming-build-environment-updates/


#### [#2600] - (2014-07-29T14:53:41Z) - [Remove duplicate test](https://github.com/elixir-lang/elixir/pull/2600)



#### [#2599] - (2014-07-29T14:53:27Z) - [Update gen_server.ex](https://github.com/elixir-lang/elixir/pull/2599)



#### [#2592] - (2014-07-28T20:09:33Z) - [Added @doc false to terminate and code_change](https://github.com/elixir-lang/elixir/pull/2592)

Added more `@doc false` to locals_tracker and lexical_tracker, following on from 0fe940a621a8a0d823b85dee26ffaeb2a19b5490


#### [#2573] - (2014-07-28T20:09:00Z) - [Windows IEx enhancements](https://github.com/elixir-lang/elixir/pull/2573)

These commits mainly allow for users to invoke IEx in shells other than `werl.exe` if they so choose.  This is done by providing a new `iexw.bat` which starts a `werl.exe` shell, and having `iex.bat` stay in whatever shell it was called in.

There's also some miscellaneous tweaks:
- Use the `setlocal` directive so that variables used in `elixir.bat` don't linger in the user's environment
- Use the `start` command for calls to `werl.exe` so that the command prompt window doesn't have to stick around
- Hide the "dumb terminal" warning if on Windows (since the concept of TTY doesn't exist in Windows, and since we aren't "falling back" to it)


#### [#2585] - (2014-07-28T07:34:59Z) - [use os.timestamp for setting random seed in doc examples](https://github.com/elixir-lang/elixir/pull/2585)

As mentioned in https://github.com/elixir-lang/elixir/pull/2584.


#### [#2586] - (2014-07-28T07:34:23Z) - [small IEx evaluator refactoring](https://github.com/elixir-lang/elixir/pull/2586)



#### [#2590] - (2014-07-28T07:30:49Z) - [Fix mix escript](https://github.com/elixir-lang/elixir/pull/2590)

This also fixes Elixir's escript config, but it seems the escript for Elixir doesn't work even if it builds. (So maybe we just want to completely remove the escript section for Elixir?)


#### [#2556] - (2014-07-27T13:33:58Z) - [Allow --app flag to be passed on mix new](https://github.com/elixir-lang/elixir/pull/2556)

Addressing https://github.com/elixir-lang/elixir/issues/2546


#### [#2580] - (2014-07-27T13:31:43Z) - [[MIX] allow lowercase http(s)_proxy env var](https://github.com/elixir-lang/elixir/pull/2580)

Hi all.

I noticed that `Mix.Utils.read_url/1` considers only uppercase environment variable `HTTP(S)_PROXY`.
No reason to ignore `http(s)_proxy` comes to my mind and I guess lowercase version of them are pretty common.

thanks.


#### [#2581] - (2014-07-27T13:27:29Z) - [Parse unary/binary operators regardless of number of spaces](https://github.com/elixir-lang/elixir/pull/2581)

closes #2534.


#### [#2582] - (2014-07-27T12:58:05Z) - [Added @doc false to handle_call functions](https://github.com/elixir-lang/elixir/pull/2582)

Added `@doc false` to handle_call functions as they do not have documentation and it appears that most functions in locals_tracker.ex have `@docs false`


#### [#2576] - (2014-07-26T04:30:30Z) - [Docs: change Dict.merge description to read more naturally](https://github.com/elixir-lang/elixir/pull/2576)

Previously there was an additional "dict" - this is as a result of it
previously saying "dict `a`"

Apologies for the small pull request - this issue came up when being reviewed. @khia - could you just leave a note on this pull request to confirm there are no other documentation issues in the https://github.com/elixir-lang/elixir/pull/2575 pull request?


#### [#2575] - (2014-07-25T20:42:48Z) - [Docs: ensure docs for Dict use full variable names](https://github.com/elixir-lang/elixir/pull/2575)

The following variable switches have been made:
- `d` has been changed to `dict`
- `a` has been changed to `dict1`
- `b` has been changed to `dict2`
- `d1` has been changed to `dict1`
- `d2` has been changed to `dict2`
  
  This fixes #2574


#### [#2570] - (2014-07-24T05:12:38Z) - [Fallback to no tab expansion if not supported](https://github.com/elixir-lang/elixir/pull/2570)

`:io.setops` returns `{error, enotsup}` for those terminals which don't support tab expansion.  We should instead be falling back silently (or we could add a warning) when this happens.


#### [#2566] - (2014-07-21T21:42:52Z) - [Fixed typos in Mix.Tasks.Clean docs](https://github.com/elixir-lang/elixir/pull/2566)



#### [#2563] - (2014-07-20T09:05:43Z) - [Fix a typo in typespec doc](https://github.com/elixir-lang/elixir/pull/2563)



#### [#2554] - (2014-07-19T18:52:29Z) - [mix.ps1 Revision](https://github.com/elixir-lang/elixir/pull/2554)

This revises `mix.ps1` to:
- Use `&` instead of `cmd /C` to call the batch file
- Modify and use `$args` directly instead of building a string which represents the final command
- Represent the path to `mix.bat` as a FileInfo object

This was done mainly to fix quoting/spacing issues which generated similar errors as with the `call %~dp0` saga (ex. 'C:\Program is not recognized`).


#### [#2559] - (2014-07-19T08:58:16Z) - [Fixing doc typos in Keyword](https://github.com/elixir-lang/elixir/pull/2559)



#### [#2553] - (2014-07-17T19:02:06Z) - [Skip additional refutation due to code server file handle on Windows](https://github.com/elixir-lang/elixir/pull/2553)

In `Mix.Tasks.ArchiveTest`, this refutation needs to be skipped for the same reason as the one before it in `test archive`.


#### [#2552] - (2014-07-17T14:22:22Z) - [Fix a typo on Application.format_error doc](https://github.com/elixir-lang/elixir/pull/2552)



#### [#2549] - (2014-07-16T20:08:03Z) - [Fixed typos in Exception docs](https://github.com/elixir-lang/elixir/pull/2549)



#### [#2541] - (2014-07-16T10:07:04Z) - [Call Mix.start, Mix.CLI.main directly in bin\mix.bat](https://github.com/elixir-lang/elixir/pull/2541)

Revisit [#2506](https://github.com/elixir-lang/elixir/pull/2506).


#### [#2544] - (2014-07-16T09:44:47Z) - [Remove non-existing from argument from handle_cast](https://github.com/elixir-lang/elixir/pull/2544)

`handle_cast` does not support a `from` argument and this example will crash if it has one.


#### [#2539] - (2014-07-15T18:56:59Z) - [Update doc for GenEvent.stream/2](https://github.com/elixir-lang/elixir/pull/2539)

- GenEvent streams are not two way, so remove language suggesting that
  you can notify via the streams.
- Clarify that consumption doesn't start until we enumerate.


#### [#2536] - (2014-07-15T08:56:42Z) - [Optimize String.slice by using binary_part](https://github.com/elixir-lang/elixir/pull/2536)

This is not the actual optimization we've been discussing yet, but it was easier to get done. More to come tomorrow.

Some benchmarks (input string ‚Äì `String.duplicate("hello world", 10000)`, full code ‚Äì https://gist.github.com/alco/aea769ba02dce93de29f#file-slice_10000-ex). I've also tried strings duplicated 10 and 100000 times: the relative difference was mostly the same.

```
# master
StringSlice.slice left half:         100   20628.67 ¬µs/op
StringSlice.slice right half:         50   33514.14 ¬µs/op
StringSlice.slice almost all:         50   40865.84 ¬µs/op
StringSlice.slice -1:                 50   63981.30 ¬µs/op

# PR
StringSlice.slice -1:           10000000   0.60 ¬µs/op
StringSlice.slice left half:         100   15272.15 ¬µs/op
StringSlice.slice right half:         50   29207.42 ¬µs/op
StringSlice.slice almost all:         50   30960.10 ¬µs/op

# speedup
# This is the ratio of (PR execution time) / (master execution time)
StringSlice:slice -1:         0.0
StringSlice:slice left half:  0.76
StringSlice:slice almost all: 0.77
StringSlice:slice right half: 0.88

# same ratios expressed as percent
StringSlice:slice -1:         -100.00%
StringSlice:slice left half:  -24.22%
StringSlice:slice almost all: -22.77%
StringSlice:slice right half: -11.68%
```


#### [#2531] - (2014-07-14T14:11:05Z) - [Updating System.cmd return types](https://github.com/elixir-lang/elixir/pull/2531)

Looks like the return value of `System.cmd/3` has changed from the specified type. No longer returns `:ok` or `:error` in the tuple.


#### [#2530] - (2014-07-14T09:29:57Z) - [use pure erlang function to judge the erlang version, no shell.](https://github.com/elixir-lang/elixir/pull/2530)

use pure erlang function to judge the erlang version, no shell.
and for any version >= 17, not just 17/18/19


#### [#2528] - (2014-07-13T07:22:59Z) - [Update bitstring syntax in base.ex](https://github.com/elixir-lang/elixir/pull/2528)



#### [#2526] - (2014-07-12T14:31:42Z) - [Clarify the consequences of using System.at_exit](https://github.com/elixir-lang/elixir/pull/2526)



#### [#2520] - (2014-07-12T10:38:35Z) - [Add precision to Float.ceil/1 & Float.floor/1](https://github.com/elixir-lang/elixir/pull/2520)

Float.ceil/1 and Float.floor/1 no longer accepts integers. They now accept a precision argument that defaults to 0 (as in round/2) and always return floats. The documentation of Float.round/2 was updated to cover the use of Kernel.round/1 which accepts both integers and floats, always returns integers and is allowed in guards.


#### [#2521] - (2014-07-11T19:08:16Z) - [Add typespec syntax for records](https://github.com/elixir-lang/elixir/pull/2521)

Closes #2389.


#### [#2517] - (2014-07-11T15:31:21Z) - [Add field retrieval of records via `record(record())`](https://github.com/elixir-lang/elixir/pull/2517)



#### [#2516] - (2014-07-11T15:29:02Z) - [Make sigil docs more readable in the source](https://github.com/elixir-lang/elixir/pull/2516)



#### [#2513] - (2014-07-10T18:44:28Z) - [Warn and reset mime on future files](https://github.com/elixir-lang/elixir/pull/2513)

Closes #2323.


#### [#2511] - (2014-07-09T22:32:58Z) - [Use sigil syntax in Macro.to_string](https://github.com/elixir-lang/elixir/pull/2511)



#### [#2508] - (2014-07-09T09:06:37Z) - [Use short filenames to handle spaces in path to bin\mix](https://github.com/elixir-lang/elixir/pull/2508)

The extra `s` modifier denotes that the path should be expanded using short (8.3) names.  This removes spaces and therefore fixes the issue of paths with spaces breaking `call`.


#### [#2502] - (2014-07-08T08:46:31Z) - [Fix the usage of `embed_elixir` in escript.build](https://github.com/elixir-lang/elixir/pull/2502)



#### [#2495] - (2014-07-05T20:11:31Z) - [Fix typo in GenEvent moduledoc](https://github.com/elixir-lang/elixir/pull/2495)



#### [#2494] - (2014-07-05T08:39:49Z) - [fix typo in range moduledoc](https://github.com/elixir-lang/elixir/pull/2494)



#### [#2493] - (2014-07-05T01:13:44Z) - [Fixed Changelog typos](https://github.com/elixir-lang/elixir/pull/2493)



#### [#2484] - (2014-07-04T09:54:56Z) - [Fix unmatched returns dialyzer warnings](https://github.com/elixir-lang/elixir/pull/2484)

Fixes unmatched returns dialyzer warnings from #2478.

Generated erlang issues:
- There are still warnings for `for` comprehensions when matched against an empty variable.
- Unmatched returns for `cond` expressions report the wrong line (the line of the first clause).


#### [#2481] - (2014-07-03T12:45:17Z) - [Fix remote call AST](https://github.com/elixir-lang/elixir/pull/2481)



#### [#2479] - (2014-07-02T20:35:49Z) - [Fixed Process doc typos](https://github.com/elixir-lang/elixir/pull/2479)



#### [#2477] - (2014-07-02T15:37:17Z) - [Fix dialyzer makefile commands](https://github.com/elixir-lang/elixir/pull/2477)

This PR requires the following workflow to run dialyzer on elixir:
Before first run (slow):

```
make build_plt
```

To run dialyze (relatively fast):

```
make dialyze
```

If OTP release is changed (slow):

```
make clean_plt built_plt
```
- Should we detect if plt missing when calling `dialyze` and if so build a plt?
- Should we include any of the additional warnings: `-Werror_handling -Wrace_conditions -Wunmatched_returns -Wunderspecs`? These can find bugs! But also may produce warnings everytime we want to ignore.
- Might want to add `--fullpath` I haven't actually run this PR yet (no time to build the plt until later)


#### [#2474] - (2014-07-01T22:12:56Z) - [Fix for batch file misbehaving with parenthetical arguments](https://github.com/elixir-lang/elixir/pull/2474)

This fixes an issue where parentheses in arguments were interpreted by `cmd` as closing IF blocks.  In these commits, we have a kind of short-circuiting (for lack of a better term), by moving the simpler Elixir arguments first in the loop.  I've also changed the conditions to check against an empty string (that's what the hideous `""""` garbage is) rather than just check if the string changed.  This mainly avoids `--erl` being interpreted from `-e`, since `-e` is a substring of `--erl`.

It's basically witchcraft that I can't quite explain, but this does fix the test in question (Kernel.CLI.ErrorTest "properly format errors") and causes no other failures.


#### [#2475] - (2014-07-01T22:02:43Z) - [Fix weird examples in Version docs](https://github.com/elixir-lang/elixir/pull/2475)



#### [#2473] - (2014-07-01T18:45:46Z) - [Fixed CHANGELOG typo](https://github.com/elixir-lang/elixir/pull/2473)



#### [#2472] - (2014-07-01T17:06:30Z) - [Use absolute symbolic links on windows](https://github.com/elixir-lang/elixir/pull/2472)

This re-adds support for doing symlinks inside of _build instead of copying on Windows.  This helps greatly when dealing with static content inside of the "priv" directory.

The fundamental bug is that file:make_symlink() is creating a symbolic link for a file instead of a directory (they are different on Windows).  The Erlang code responsible for making the decision (file or directory) is only looking at the source path, which causes it to not find the correct source location (relative symbolic links in windows are relative to the the link, not to the current working directory).

This patch works around the issue by creating an absolute link (Windows only).  This causes the Erlang code to find the directory and make the correct type of link.


#### [#2467] - (2014-07-01T14:51:12Z) - [Raise on multiple clauses with default arg](https://github.com/elixir-lang/elixir/pull/2467)

I decided to raise instead of warn because the resulting code is very confusing (arguably even wrong). From @josevalim's stackoverflow answer:

``` elixlir
def sum([], total \\ 0), do: total
# becomes
def sum(list), do: sum(list, 0)
```

Adding another element to the function definitions table was quite scary since it's a big a tuple used in many places. I may have missed a place if it was not tested, so please take a closer look. Maybe it's time to make it a map?

Closes #2078.


#### [#2466] - (2014-07-01T14:51:01Z) - [Remove default generation of `@type t` for structs](https://github.com/elixir-lang/elixir/pull/2466)

`Struct{}` in typespecs will generate default types for all missing fields.


#### [#2464] - (2014-06-30T08:09:45Z) - [Enum.sort_by/3](https://github.com/elixir-lang/elixir/pull/2464)

Fixes #2460

Implement the `Enum.sort_by` I requested in #2460 using the signature Enum.sort_by(collection, mapper, sorter).  sorter is optional and default to `<=/2`.


#### [#2463] - (2014-06-29T09:13:40Z) - [Update documentation on Kernel.var!/2](https://github.com/elixir-lang/elixir/pull/2463)

The documentation is no longer accurate since passing atoms to `Kernel.var!/2` has been deprecated and removed.


#### [#2457] - (2014-06-26T15:07:00Z) - [Ensure we can only use variables and `\\` as arguments of bodyless clause](https://github.com/elixir-lang/elixir/pull/2457)

closes #2374

I'm not sure this error message is proper.


#### [#2453] - (2014-06-25T20:01:35Z) - [Fixed typos in Kernel.SpecialForms docs](https://github.com/elixir-lang/elixir/pull/2453)



#### [#2447] - (2014-06-23T18:16:09Z) - [Fixing doc typos in Task](https://github.com/elixir-lang/elixir/pull/2447)



#### [#2444] - (2014-06-22T12:38:55Z) - [Support paths inside archives in -pa and -pz options. Closes #2442](https://github.com/elixir-lang/elixir/pull/2444)



#### [#2443] - (2014-06-22T12:15:53Z) - [Remove a stray XML tag from the path docs](https://github.com/elixir-lang/elixir/pull/2443)



#### [#2440] - (2014-06-21T14:15:06Z) - [Fix unclear doc in Stream.unfold](https://github.com/elixir-lang/elixir/pull/2440)

Hi. I tried to imrove this text.


#### [#2431] - (2014-06-21T09:12:55Z) - [Mention the fact that :escript_name is also used as a module name](https://github.com/elixir-lang/elixir/pull/2431)

We could use the app name, for instance, and pass `-escript main #{app}` to the emu args by default, but that would have additional implications if the user decides to provide custom emu args.

We can revise this once atoms support utf-8.


#### [#2438] - (2014-06-21T09:12:01Z) - [Cleaning up IEx.Helpers.Flush warning](https://github.com/elixir-lang/elixir/pull/2438)



#### [#2437] - (2014-06-20T21:01:41Z) - [Let `URI.parse/1` work with `%URI{}`](https://github.com/elixir-lang/elixir/pull/2437)



#### [#2435] - (2014-06-20T18:10:55Z) - [workaround 'epmd -daemon' not working on Windows](https://github.com/elixir-lang/elixir/pull/2435)

On Windows `epmd -daemon` doesn't work as expected, so this dirty trick makes sure it stays running for the test.  Travis will let us know if this fix affects Unix or not.


#### [#2433] - (2014-06-20T18:10:34Z) - [Add extra Path directory, remove PowerShell warning](https://github.com/elixir-lang/elixir/pull/2433)

We need `C:\Program Files\erl6.0\erts-6.0\bin` to run `epmd`, and the PowerShell script I wrote for Mix a week or two ago means no worries with incompatibilities there.


#### [#2434] - (2014-06-20T17:51:30Z) - [Fixed doc typos in Agent and File.Stream](https://github.com/elixir-lang/elixir/pull/2434)



#### [#2429] - (2014-06-19T20:01:56Z) - [Fixing typos in Application doc](https://github.com/elixir-lang/elixir/pull/2429)



#### [#2427] - (2014-06-19T09:09:39Z) - [Set :proc_lib initial call on task](https://github.com/elixir-lang/elixir/pull/2427)

Sets the `:proc_lib` initial call to the `{mod, fun, arity}` of the task.

This allows `:proc_lib.translate_initial_call(task.pid)` to show the `mfa` of a task process when debugging. Tools such as `:observer` and the erlang shell make use of this function when getting information on a process.

This gives a useful initial call in the crash report sent to the error logger when a task raises.


#### [#2428] - (2014-06-18T23:39:29Z) - [Fix typo in deriving docs](https://github.com/elixir-lang/elixir/pull/2428)



#### [#2426] - (2014-06-18T21:07:52Z) - [make manager calls nmake /F Makefile.win on Windows](https://github.com/elixir-lang/elixir/pull/2426)

Dependencies on Windows should compile with `nmake /F Makefile.win`.  So these commits set `:make` as the manager if either `Makefile` OR `Makefile.win` exist, then makes the platform-appropriate call.


#### [#2424] - (2014-06-18T18:01:17Z) - [Delay typespec compilation to after expansion](https://github.com/elixir-lang/elixir/pull/2424)



#### [#2423] - (2014-06-18T08:26:31Z) - [Improve GenEvent.stream/2 cleanup](https://github.com/elixir-lang/elixir/pull/2423)

Just had a different idea how to solve the stream cleanup.


#### [#2415] - (2014-06-17T14:39:43Z) - [Reformat unordered lists in all docstrings](https://github.com/elixir-lang/elixir/pull/2415)

WIP for #2411. Pushing this to get initial feedback.

I did a visual check of the rendered docs (generated by stock html formatter and my pandoc+sphinx combo) for some pathological modules (File, GenServer, Module, Regex). They seem to be consistent.

TODO:
- [x] convert unordered lists
  - [x] apply feedback
- [x] convert ordered lists

/cc @ericmj @jwarwick

---

List items are marked with a star (*). Bullets marking list elements
must have a 2-space indent. The continuation lines should be indented
by 2 more spaces.

The second and subsequent paragraphs need to be indented 4 spaces
from the beginning of the line to be included in the list item.

The code fragments have to be indented 8 spaces from the beginning
of the line (or 4 spaces from the beginning of the preceding paragraph).

Sublists are marked with a hyphen (-). They follow the rules above
with the difference that their initial indent will be greater
(8 spaces from the beginning of the line).


#### [#2419] - (2014-06-17T08:43:15Z) - [Make `URI.encode*` to work only with binaries](https://github.com/elixir-lang/elixir/pull/2419)



#### [#2416] - (2014-06-17T08:35:09Z) - [Add normalize dispatch for Windows volume letters](https://github.com/elixir-lang/elixir/pull/2416)

This fixes things like `Path.expand("/..")` not working on WIndows; in `Path.normalize` this extra dispatch treats volume letters as roots.


#### [#2414] - (2014-06-17T08:31:27Z) - [Ensures Enum.slice always returns a list.](https://github.com/elixir-lang/elixir/pull/2414)

Both Enum.slice/3 and Enum.slice/2 now will return empty lists for
impossible or out of bound ranges, rather than `nil`.

Fixes #2410.


#### [#2418] - (2014-06-17T08:29:52Z) - [fix typo in docstring of Enum.at and Enum.slice](https://github.com/elixir-lang/elixir/pull/2418)

In reference's to Jose's proposal in pull request #2413


#### [#2412] - (2014-06-16T21:09:36Z) - [Ensures String.slice always returns a string.](https://github.com/elixir-lang/elixir/pull/2412)

Both String.slice/3 and String.slice/2 now will return empty strings for
impossible or out of bound ranges, rather than `nil`.

Spinoff of issue #2410.


#### [#2408] - (2014-06-16T20:04:15Z) - [Add options for which case to use in Base functions](https://github.com/elixir-lang/elixir/pull/2408)



#### [#2409] - (2014-06-16T20:03:34Z) - [Put escript options under :escript in the project config](https://github.com/elixir-lang/elixir/pull/2409)



#### [#2402] - (2014-06-13T12:51:43Z) - [Introduce `URI.encode(decode)_www_form/2` functions](https://github.com/elixir-lang/elixir/pull/2402)

Following #2392


#### [#2400] - (2014-06-13T07:07:00Z) - [Fix a typo in Kernel docs](https://github.com/elixir-lang/elixir/pull/2400)



#### [#2399] - (2014-06-12T19:30:26Z) - [Disambiguate (w)erl to (w)erl.exe](https://github.com/elixir-lang/elixir/pull/2399)

Closes [#2398](https://github.com/elixir-lang/elixir/issues/2398).


#### [#2397] - (2014-06-12T17:52:11Z) - [Do not allow underscores in option names. Closes #2391](https://github.com/elixir-lang/elixir/pull/2397)



#### [#2395] - (2014-06-11T20:19:15Z) - [fix typo in `mix help new`](https://github.com/elixir-lang/elixir/pull/2395)



#### [#2392] - (2014-06-11T09:15:14Z) - [Make `URI.encode/1` to conform to RFC 3986. Introduce `URI.encode/2` function.](https://github.com/elixir-lang/elixir/pull/2392)

- According to RFC 3986 the space character should be escaped as `%20`, not `+` (it is behaviour of  very early version of the URI percent-encoding rules).
- `URI.encode/2`


#### [#2390] - (2014-06-10T10:10:25Z) - [Update IEx.pry documentation](https://github.com/elixir-lang/elixir/pull/2390)

Modified example that works with the current version of Elixir. Fix some typos in the pry console.


#### [#2386] - (2014-06-09T15:34:22Z) - [Fix a typo](https://github.com/elixir-lang/elixir/pull/2386)



#### [#2379] - (2014-06-05T11:09:25Z) - [Fix broken promise in Kernel.SpecialForms](https://github.com/elixir-lang/elixir/pull/2379)

This is the patch for issue #2377.


#### [#2378] - (2014-06-05T08:29:22Z) - [Grammar fix.](https://github.com/elixir-lang/elixir/pull/2378)



#### [#2376] - (2014-06-04T16:33:44Z) - [Initial PowerShell script addressing mix commas](https://github.com/elixir-lang/elixir/pull/2376)

This script simply preserves the intended formatting (comma placement) and calls the mix batch file.  PowerShell will call this script first if `mix` is given without an extension.  So doing things like `mix do deps.get, compile` functions as expected.  The next thing to fix is quoting, since quotes still get stripped.

Addresses [#2347](https://github.com/elixir-lang/elixir/issues/2347).


#### [#2365] - (2014-06-03T15:26:23Z) - [Support on_exit for registering callbacks in ExUnit.](https://github.com/elixir-lang/elixir/pull/2365)

closes #2319


#### [#2373] - (2014-06-03T08:25:50Z) - [Fixed reading .mix/config.exs](https://github.com/elixir-lang/elixir/pull/2373)



#### [#2372] - (2014-06-02T16:19:20Z) - [:eaccess becomes :eacces](https://github.com/elixir-lang/elixir/pull/2372)

Why the POSIX people spelled it `eacces` with only one S is beyond me... :)


#### [#2371] - (2014-06-02T14:33:14Z) - [Fix operator precedence bug in Mix.Compilers.Elixir.clean/1](https://github.com/elixir-lang/elixir/pull/2371)

A wrong placement of a parentheses caused a operator precedence bug in Mix.Compilers.Elixir.clean/1


#### [#2370] - (2014-06-01T15:12:36Z) - [Fix Path.absname("/") and Path.expand("/") to return the absolute path "/".](https://github.com/elixir-lang/elixir/pull/2370)

Since "/" is surely an absolute path and Path.absname("/foo") returns "/foo", programmers will expect that Path.absname("/") should return "/", and the same applies to Path.expand("/").
The past code retruned "" for Path.absname("/") and FunctionClauseError for Path.expand("/").


#### [#2367] - (2014-06-01T07:39:57Z) - [File.rm makes files writeable on Windows before deletion](https://github.com/elixir-lang/elixir/pull/2367)

Proposal to address [Issue #2366](https://github.com/elixir-lang/elixir/issues/2366)


#### [#2368] - (2014-06-01T07:37:23Z) - [Add http and https proxy options](https://github.com/elixir-lang/elixir/pull/2368)

Tested using [mitmproxy](http://mitmproxy.org/). 

![screen shot 2014-05-30 at 10 37 44 pm](https://cloud.githubusercontent.com/assets/1072933/3138163/3bfeb072-e875-11e3-87f4-cc8422e95c48.png)


#### [#2350] - (2014-05-30T14:03:43Z) - [Raise if giving non-keywords to Keyword](https://github.com/elixir-lang/elixir/pull/2350)



#### [#2364] - (2014-05-30T13:34:54Z) - [Document the additional `--names` argument that `mix help` can take](https://github.com/elixir-lang/elixir/pull/2364)



#### [#2361] - (2014-05-29T18:27:46Z) - [Mix help names](https://github.com/elixir-lang/elixir/pull/2361)



#### [#2358] - (2014-05-28T18:46:46Z) - [qualify that PowerShell doesn't work yet](https://github.com/elixir-lang/elixir/pull/2358)

[As suggested by Onorio](https://groups.google.com/forum/#!topic/elixir-lang-talk/fCBj2__X8G4), we should point out that PowerShell won't work for building Elixir on Windows.


#### [#2354] - (2014-05-28T17:30:53Z) - [EEx tests aware of CR+LF newline on Windows](https://github.com/elixir-lang/elixir/pull/2354)

The EEx tests were suffering the same problem as Mix tests, where `\n` needs to be `\r\n` on Windows.  There are no other failures for EEx.


#### [#2351] - (2014-05-28T12:08:38Z) - [Do not allow custom compiler options](https://github.com/elixir-lang/elixir/pull/2351)



#### [#2353] - (2014-05-28T08:20:50Z) - [Supervisor documentation updates](https://github.com/elixir-lang/elixir/pull/2353)



#### [#2352] - (2014-05-28T08:17:32Z) - [Mix tests aware of Windows' esoteric newline behavior](https://github.com/elixir-lang/elixir/pull/2352)

Windows exhibits a couple of strange behavior regarding newlines:
1. Since Windows uses `CR+LF` rather than `LF`, `\n` becomes `\r\n`.
2. `echo` doesn't trim its output.

This commit makes the shell test aware of this, although it's more of a workaround than anything.


#### [#2348] - (2014-05-27T06:54:58Z) - [Mix.Project.build_structure tested for copying fallback](https://github.com/elixir-lang/elixir/pull/2348)

I'm getting Utils, Project, build_project, build_structure mixed up...

Anyway, this is for Mix.ProjectTest to handle when `Mix.Utils.symlink_or_copy` copies rather than symlinks, by comparing directory contents.  Also, `Mix.Project.build_structure` returns `:ok`, rather than the return value of its last function call.


#### [#2349] - (2014-05-26T21:28:56Z) - [Mix.CLITest redirects stderr to stdout for testing on Windows](https://github.com/elixir-lang/elixir/pull/2349)

The title says it all. :)


#### [#2346] - (2014-05-26T12:43:57Z) - [Fix formatting in .md files](https://github.com/elixir-lang/elixir/pull/2346)



#### [#2344] - (2014-05-26T07:48:34Z) - [fix documentation of `:timeout` option in `start_link/2`](https://github.com/elixir-lang/elixir/pull/2344)

added line break to make it clearer that `:timeout` is a different option to `:name`.


#### [#2343] - (2014-05-26T07:48:19Z) - [Escape invalid characters in the docstring for String.chunk](https://github.com/elixir-lang/elixir/pull/2343)

This cost me at least a couple of hours trying to feed the extracted docstrings to another tool :rage: :sob:


#### [#2341] - (2014-05-25T11:27:29Z) - [Convert Mix.Tasks.Compile.Elixir.ManifestCompiler from GenServer to Agent](https://github.com/elixir-lang/elixir/pull/2341)

#2336


#### [#2340] - (2014-05-25T08:21:09Z) - [Instructions for contribution from Windows (first draft)](https://github.com/elixir-lang/elixir/pull/2340)

Here's a section on how to get Elixir up and running on Windows.  I tried to put it in the best place logically as well as make it understandable for folks of all Windows expertise levels, but let me know what I can change.


#### [#2339] - (2014-05-24T23:43:13Z) - [Convert Mix.ProjectStack from a GenServer to an Agent](https://github.com/elixir-lang/elixir/pull/2339)

#2336


#### [#2337] - (2014-05-24T18:01:35Z) - [Convert Mix.TasksServer from a GenServer to an Agent](https://github.com/elixir-lang/elixir/pull/2337)

https://github.com/elixir-lang/elixir/issues/2336


#### [#2338] - (2014-05-24T17:27:36Z) - [Fixing doc links](https://github.com/elixir-lang/elixir/pull/2338)



#### [#2331] - (2014-05-24T11:52:37Z) - [Add String.chunk/2](https://github.com/elixir-lang/elixir/pull/2331)

As discussed in #1832.


#### [#2327] - (2014-05-24T11:42:55Z) - [Mix.Utils.symlink_or_copy always copies on Windows](https://github.com/elixir-lang/elixir/pull/2327)

This is a start to avoiding symlinking on WIndows; fixing this method alone brings the number of test failures down from 13 to 8.  There are other uses of symlinks that need to be handled, namely [Mix.Project.build_structure/2](https://github.com/elixir-lang/elixir/blob/master/lib/mix/lib/mix/project.ex#L306).


#### [#2335] - (2014-05-24T10:46:03Z) - [Genserver doc](https://github.com/elixir-lang/elixir/pull/2335)



#### [#2334] - (2014-05-24T10:22:00Z) - [Proof-read Supervisor docs](https://github.com/elixir-lang/elixir/pull/2334)



#### [#2333] - (2014-05-24T09:57:05Z) - [Fix formatting and proof-read GenEvent docs](https://github.com/elixir-lang/elixir/pull/2333)



#### [#2326] - (2014-05-24T09:26:11Z) - [Docs beam chunks](https://github.com/elixir-lang/elixir/pull/2326)

Straightforward implementation of #1908.

Currently, we read the docs from .beam each time they are requested. Perhaps, we could cache them in memory. I haven't noticed any difference in performance though.

/cc @nox @krestenkrab


#### [#2332] - (2014-05-24T05:20:44Z) - [Change Stream's struct to just %Stream{}](https://github.com/elixir-lang/elixir/pull/2332)

I'm about to implement a `defimpl` specifically for Streams, and found it odd that the struct wasn't just called `%Stream{}`.


#### [#2320] - (2014-05-23T14:41:49Z) - [Draft implementation of custom inspect algorithm for regexes](https://github.com/elixir-lang/elixir/pull/2320)

This is a sketch of my ideas for #2250.

Do we need it to be smarter? I.e., choose different delimiters based on the contents of the source.

```
iex(1)> ~r"\d+\n"
~r/\d+\n/

iex(2)> ~r"\d+/\n"
~r/\d+\/\n/

iex(3)> ~r"\a\d+/\n"
~r/\a\d+\/\n/

iex(4)> Regex.compile!("\a\\d+/\n")
~r/\a\d+\/\n/

iex(5)> Regex.compile!("\a\d+/\n") 
~r/\a\177+\/\n/

iex(6)> Regex.compile!("\a\x{fe34}+/\n")
~r/\aÔ∏¥+\/\n/
```


#### [#2324] - (2014-05-22T21:07:31Z) - [elixir.bat fixed to prevent eating quotes](https://github.com/elixir-lang/elixir/pull/2324)

The expression `"%*"==""` doesn't work if an argument contains quotes.  Work around this by using `%1` instead.


#### [#2321] - (2014-05-22T19:02:52Z) - [elixir.bat defers to mix for handling help options](https://github.com/elixir-lang/elixir/pull/2321)

On a Windows cmd, calling `mix --help` currently causes `elixir.bat` to interpret the `--help` argument as applying to elixir itself.  This ensures if mix is being called, then mix will handle arguments on its own.


#### [#2322] - (2014-05-22T18:48:06Z) - [Proof-read Agent docs](https://github.com/elixir-lang/elixir/pull/2322)



#### [#2312] - (2014-05-22T09:19:52Z) - [Return invalid options as strings](https://github.com/elixir-lang/elixir/pull/2312)

Closes  #2308.


#### [#2317] - (2014-05-22T08:30:42Z) - [Fix doc example for exception/1](https://github.com/elixir-lang/elixir/pull/2317)

- Use value instead of opts to generate message
- Remove extra %
- Use %MyAppError instead of %MyException 


#### [#2315] - (2014-05-22T08:27:54Z) - [Mix.CLITest: explicitly declare environment variables (Windows-friendly)](https://github.com/elixir-lang/elixir/pull/2315)

Bash shell commands happily allow prefixing environment variable assignments for temporary use (i.e. MY_ENV="my_value" my_command --my-args), but Windows shells don't support this.  So, we need to use System.put_env/2 and System.delete_env/1 to mimic this behavior (which should also work in bash.)


#### [#2316] - (2014-05-21T22:48:31Z) - [String to char list](https://github.com/elixir-lang/elixir/pull/2316)



#### [#2311] - (2014-05-21T18:41:14Z) - [Do not assume invalid options are of boolean type](https://github.com/elixir-lang/elixir/pull/2311)

Fixes part of #2308.


#### [#2298] - (2014-05-21T13:20:13Z) - [Report errors about missing files in the mix run task](https://github.com/elixir-lang/elixir/pull/2298)

Closes #2280.

Looks good? I will add tests later.


#### [#2309] - (2014-05-21T13:19:04Z) - [Fix parsing of "-" in OptionParser](https://github.com/elixir-lang/elixir/pull/2309)

Closes #2302.


#### [#2290] - (2014-05-21T09:09:50Z) - [Tentative implementation of the `next` function](https://github.com/elixir-lang/elixir/pull/2290)

As outlined in https://github.com/elixir-lang/elixir/issues/2262#issuecomment-43190083

~~This PR will conflict with https://github.com/elixir-lang/elixir/pull/2289!~~

~~This also probably obsoletes https://github.com/elixir-lang/elixir/pull/2286 (except for the strict behaviour I haven't implemented for `next` yet).~~


#### [#2304] - (2014-05-21T08:33:24Z) - [Fix typo in Agent docs](https://github.com/elixir-lang/elixir/pull/2304)

Replace reference to GenEvent with reference to Agent


#### [#2305] - (2014-05-21T08:33:10Z) - [Fix typo](https://github.com/elixir-lang/elixir/pull/2305)



#### [#2306] - (2014-05-21T08:32:57Z) - [Trailing whitespace.](https://github.com/elixir-lang/elixir/pull/2306)



#### [#2301] - (2014-05-20T22:59:29Z) - [Make the title in the Readme generated by mix new more prominent](https://github.com/elixir-lang/elixir/pull/2301)

`mix new something` generates the following Readme:

```
Something
=========

** TODO: Add description **
```


#### [#2300] - (2014-05-20T21:28:13Z) - [Fix match in `Mix.Tasks.Run` test](https://github.com/elixir-lang/elixir/pull/2300)



#### [#2299] - (2014-05-20T20:25:22Z) - [Fix typos](https://github.com/elixir-lang/elixir/pull/2299)



#### [#2297] - (2014-05-20T14:44:09Z) - [Small fix in the run task tests](https://github.com/elixir-lang/elixir/pull/2297)



#### [#2289] - (2014-05-20T14:14:04Z) - [Change `OptionParser` to remove `--`. Fix command-line arguments handling.](https://github.com/elixir-lang/elixir/pull/2289)

- [x] `OptionsParser`
- [x] `Mix.Tasks.Run`
- [x] `Kernel.CLI`

Closes #2263 and #2268


#### [#2296] - (2014-05-20T12:16:37Z) - [Fix example of using `defrecord`](https://github.com/elixir-lang/elixir/pull/2296)



#### [#2294] - (2014-05-20T08:31:55Z) - [reraise should work like raise](https://github.com/elixir-lang/elixir/pull/2294)



#### [#2295] - (2014-05-20T08:00:14Z) - [Add links to LEGAL and LICENSE files in README.md](https://github.com/elixir-lang/elixir/pull/2295)



#### [#2293] - (2014-05-19T10:44:12Z) - [fix Enum.join for empty elements in the begining of the collection](https://github.com/elixir-lang/elixir/pull/2293)



#### [#2292] - (2014-05-19T09:37:24Z) - [Fix ExUnit.DocTest docs](https://github.com/elixir-lang/elixir/pull/2292)



#### [#2288] - (2014-05-17T13:53:53Z) - [Make deprecations compiler warnings](https://github.com/elixir-lang/elixir/pull/2288)



#### [#2281] - (2014-05-16T16:51:58Z) - [Add typespecs for builtins, __record__,  __struct__, exception](https://github.com/elixir-lang/elixir/pull/2281)

I've been working with the erl compiler flag `warn_missing_spec`, and things get super noisy because a handful of builtin functions don't have typespecs. These specs aren't meant to be super useful, though they should be at least roughly accurate - they're mostly intended to silence the warnings and prevent dialyzer from complaining about their usages. If you'd like me to tighten up the specs, let me know which ones, and what specificity you'd like to see.

Good times learning about the deep underbelly of Elixir's compiler though :)

Added typespecs for:
- `__FILE__/1`
- `__MODULE__/1`
- `__info__/1`
- `__record__/1`, `__record__/2`, `__record__/3`
- `__struct__/0`
- `exception/1`, `exception/2`


#### [#2282] - (2014-05-15T20:28:12Z) - [Properly handle atom keys in kw_list_to_string](https://github.com/elixir-lang/elixir/pull/2282)

If you have a keyword list, with an atom key like `["foo.bar": "baz"]`, previously, Macro.to_string would render it as `"[foo.bar: \"baz\"]"`. This is incorrect, instead it should be `"[\"foo.bar\": \"baz\"]"`. This change fixes that.


#### [#2283] - (2014-05-15T09:18:43Z) - [Update String moduledoc](https://github.com/elixir-lang/elixir/pull/2283)

`Kernel.binary_to_term` does not exist anymore


#### [#2279] - (2014-05-13T07:52:48Z) - [Keyword doc fixes](https://github.com/elixir-lang/elixir/pull/2279)

Closes #2278.


#### [#2276] - (2014-05-12T18:44:06Z) - [Option parser fix](https://github.com/elixir-lang/elixir/pull/2276)



#### [#2277] - (2014-05-12T18:37:00Z) - [Remove unused import in elixir_translator.erl](https://github.com/elixir-lang/elixir/pull/2277)



#### [#2275] - (2014-05-12T17:50:50Z) - [Rename some Makefile targets. Closes #2274](https://github.com/elixir-lang/elixir/pull/2275)

kernel -> core
test_kernel -> test_stdlib


#### [#2270] - (2014-05-12T10:13:06Z) - [Format EXIT signals consistently](https://github.com/elixir-lang/elixir/pull/2270)

Adds support for formatting an `:EXIT` reason using `Exception` functions:

```
** (EXIT) normal
```


#### [#2267] - (2014-05-10T18:03:34Z) - [Rename Application.format_reason/1 to format_error](https://github.com/elixir-lang/elixir/pull/2267)

Makes the function name consistent with OTP modules, which all use `format_error` to format `reason` in `{:error, reason}`.

Examples:
- `:inet.format_error/1`
- `:file.format_error/1`
- `:ssl.format_error/1`

There are many more but they are all called `format_error/1`.


#### [#2266] - (2014-05-10T16:46:11Z) - [Remove some cruft from Version and fix to_string/1](https://github.com/elixir-lang/elixir/pull/2266)



#### [#2265] - (2014-05-10T16:28:26Z) - [Fix handling of end of command options (`--`) in `OptionParser`](https://github.com/elixir-lang/elixir/pull/2265)

Closes https://github.com/elixir-lang/elixir/issues/2263


#### [#2254] - (2014-05-09T08:05:27Z) - [Implement default split/2 for Dict.Behaviour](https://github.com/elixir-lang/elixir/pull/2254)

Realized there's this function as well, no more warnings with a basic implementation now.

We probably do need some more tests with a dummy Dict implementation tho, but I don't know how to do that.


#### [#2257] - (2014-05-09T08:05:05Z) - [URI.decode_query returns a map, not a HashDict](https://github.com/elixir-lang/elixir/pull/2257)



#### [#2252] - (2014-05-08T21:02:40Z) - [Changed error message shown when escript_embed_elixir is incorrect](https://github.com/elixir-lang/elixir/pull/2252)

First attempt at a fix for #2232. This is my first Elixir contribution so I may be completely wrong :). I have two questions regarding this pull request:

1) I'm assuming that just changing the error message string is good enough to fix #2232. Is that assumption correct?

2) I've written a test which seems to work fine. However, the test is throwing `warning: redefining module :escripttest`. I'm going to investigate this further but if anyone can advise on writing a better test, that would be great!


#### [#2253] - (2014-05-08T19:10:41Z) - [Print help when --help, -h, or /h are given on windows](https://github.com/elixir-lang/elixir/pull/2253)

This will make sure that all the common help flags work properly on windows for iex, mix, elixirc, and elixir commands.


#### [#2249] - (2014-05-07T17:43:47Z) - [Add a target to check minimum required Erlang version](https://github.com/elixir-lang/elixir/pull/2249)

I tested it by trying various values for the `rel` variable: R16B, r16, 17, 17.1, 18. Can't promise it's without flaws though.


#### [#2248] - (2014-05-07T12:49:14Z) - [Update travis badge [skip ci]](https://github.com/elixir-lang/elixir/pull/2248)

I know this is a bit lame, but the svg badge does look better =)


#### [#2242] - (2014-05-07T12:16:21Z) - [[WIP] Improve OTP behaviour error formatting](https://github.com/elixir-lang/elixir/pull/2242)

More improvements are required to format application errors nicely. Master currently formats like this when a `:gen_server` down the tree fails to start due to error in `:init/1`. Note that `Ppp.Worker` is a child of `Ppp.Supervisor2`, `Ppp.Supervisor2` is a child of `Ppp.Supervisor`, and `Ppp.Supervisor.start_link/0` is called in the tail of `Ppp.start/2`:

```
** (Mix) Could not start application ppp: exited in: Ppp.start(:normal, [])
    ** (EXIT) shutdown: {:failed_to_start_child, Ppp.Supervisor2, {:shutdown, {:failed_to_start_child, Ppp.Worker, {:badarg, [{Ppp.Worker, :init, 1, [file: 'lib/ppp/supervisor.ex', line: 30]}, {:gen_server, :init_it, 6, [file: 'gen_server.erl', line: 306]}, {:proc_lib, :init_p_do_apply, 3, [file: 'proc_lib.erl', line: 239]}]}}}}
```

This change will format it like (you may need to scroll to the right to see that you can follow the errors down the supervision tree nicely):

```
** (Mix) Could not start application ppp: Ppp.start(:normal, []) returned an error: shutdown: failed to start child: Ppp.Supervisor2
    ** (EXIT) shutdown: failed to start child: Ppp.Worker
        ** (EXIT) an exception was raised:
            ** (ArgumentError) argument error
                (ppp) lib/ppp/supervisor.ex:30: Ppp.Worker.init/1
                (stdlib) gen_server.erl:306: :gen_server.init_it/6
                (stdlib) proc_lib.erl:239: :proc_lib.init_p_do_apply/3
```

The `:gen_server` reason formatting will also be useful for error loggers (e.g. `Logger`), and will also work for `:gen_fsm`'s used in erlang land.

```
** (Mix) Could not start application ppp: Ppp.start(:normal, []) returned an error: shutdown: failed to start child: Ppp.Supervisor2
    ** (EXIT) shutdown: failed to start child: Ppp.Worker
        ** (EXIT) bad return value: :oops
```

Are there any other OTP behaviour reasons we want to handle? 
Should also add a few tests before this is merged for the OTP behaviour (`:application`, `:supervisor` and `:gen_server`) exit formatting.


#### [#2243] - (2014-05-07T12:09:44Z) - [Implement default pop/2, pop/3, update/4, update!/3 for Dict.Behaviour](https://github.com/elixir-lang/elixir/pull/2243)

As discussed on IRC.


#### [#2123] - (2014-05-06T11:24:59Z) - [Adds symlink to File](https://github.com/elixir-lang/elixir/pull/2123)

implementation of feature request #2114


#### [#2240] - (2014-05-06T08:40:21Z) - [Improve compiler message when duplicated modules are detected](https://github.com/elixir-lang/elixir/pull/2240)

As per #2131.

Now when you `mix compile` a project with the following files,

foo.ex

```
defmodule Foo do
    def foo do
        42
    end

end
```

bar.ex

```
defmodule Foo do
  def foo do
    42
  end
end
```

You now get:

```
== Compilation error on file lib/foo.ex ==
** (CompileError) lib/foo.ex:1: cannot define module Foo because it is currently being defined in lib/bar.ex:1
```


#### [#2241] - (2014-05-06T08:39:19Z) - [Grammar, removed superfluous 'be'](https://github.com/elixir-lang/elixir/pull/2241)



#### [#2235] - (2014-05-05T15:11:47Z) - [Format exceptions consistently](https://github.com/elixir-lang/elixir/pull/2235)

The first commit resolves #2231 and introduces `Exception.format_message` and `Exception.format` to format exceptions. It also fixes:
- A slight bug in the displaying of stacktraces in `IEx` when an entry has no application.
- Insures that exception messages and stacktrace are sent in one io request so that they always appears together.

The second commit is quite cheeky and could do the wrong thing in an edge case:

```
Interactive Elixir (0.13.2-dev) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> spawn_link(fn() -> exit(:bye) end)                                                   
** (EXIT) #PID<0.49.0> exited: :bye

Interactive Elixir (0.13.2-dev) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> spawn_link(fn() -> raise(ArgumentError, []) end)                                     
** (EXIT) #PID<0.55.0> exited: (ArgumentError) argument error
    :erlang.apply/2
```


#### [#2233] - (2014-05-04T09:09:14Z) - [Make String.split behave more like Regex.split](https://github.com/elixir-lang/elixir/pull/2233)

See #2127 for original issue.

This is my first pass at this. It keeps the old `:global` functionality, but is easily deprecated when the time comes. Some of the extra conditional logic here is to keep the behavior of `String.split` and `Regex.split` consistent. If you have any suggestions on how to improve this, fire away!

cc @alco


#### [#2229] - (2014-05-02T06:32:40Z) - [Migrate records in mix to maps.](https://github.com/elixir-lang/elixir/pull/2229)



#### [#2230] - (2014-05-02T06:31:55Z) - [Fixed typo and improper use of their in documentation](https://github.com/elixir-lang/elixir/pull/2230)

Fixed "dependnecy" misspelling typo and improper use of their.


#### [#2226] - (2014-05-01T17:25:13Z) - [Update erl version header in README](https://github.com/elixir-lang/elixir/pull/2226)

so people don't get confused whether elixir works on 17 RC1


#### [#2225] - (2014-05-01T16:52:33Z) - [Convert Stream.Lazy, StringIO, Kernel.CLI.Config, Version.Schema, Version.Requirement into structs and maps](https://github.com/elixir-lang/elixir/pull/2225)



#### [#2219] - (2014-04-30T09:29:44Z) - [Fix pruning IEx stacktraces too aggressively](https://github.com/elixir-lang/elixir/pull/2219)

Wrote this while trying to find a test case for https://github.com/elixir-lang/elixir/pull/2216

Before:

```
iex(1)> Code.eval_quoted(quote(do: <<((fn() -> :error end).())>>))  
** (ArgumentError) argument error
```

After:

```
iex(1)> Code.eval_quoted(quote(do: <<((fn() -> :error end).())>>))  
** (ArgumentError) argument error
    (stdlib) :erl_eval.expr/3
    (elixir) src/elixir.erl:157: :elixir.erl_eval/2
    (elixir) src/elixir.erl:150: :elixir.eval_forms/4
    (elixir) lib/code.ex:159: Code.eval_quoted/3
```


#### [#2216] - (2014-04-30T09:27:10Z) - [Fix stacktraces for :elixir.eval_forms/4](https://github.com/elixir-lang/elixir/pull/2216)

:erl_eval and :eval_bits can call :erlang.raise/3 with an incomplete
stacktrace, so extend the stacktrace when this occurs.

Mailing list thread:
https://groups.google.com/forum/#!topic/elixir-lang-core/cpSlgBjrRBQ

Edit: This needs a test to prevent regression. 


#### [#2221] - (2014-04-30T07:12:14Z) - [Fix some dialyzer warnings](https://github.com/elixir-lang/elixir/pull/2221)

Remaing warnings:

```
behaviour.ex:108: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
code.ex:121: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
code.ex:153: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
compiler.ex:24: The call _@1:'engine'() requires that _@1 is of type atom() | tuple() not #{}
compiler.ex:29: The call _@1:'file'() requires that _@1 is of type atom() | tuple() not #{}
compiler.ex:30: The call _@2:'engine'() requires that _@2 is of type atom() | tuple() not #{}
compiler.ex:38: The call _@1:'engine'() requires that _@1 is of type atom() | tuple() not #{}
compiler.ex:49: The call _@2:'file'() requires that _@2 is of type atom() | tuple() not #{}
compiler.ex:49: The call _@1:'start_line'() requires that _@1 is of type atom() | tuple() not #{}
compiler.ex:50: The call _@3:'quoted'() requires that _@3 is of type atom() | tuple() not #{}
compiler.ex:59: The call _@1:'engine'() requires that _@1 is of type atom() | tuple() not #{}
compiler.ex:69: The call _@1:'line'() requires that _@1 is of type atom() | tuple() not #{}
compiler.ex:70: The call _@2:'quoted'() requires that _@2 is of type atom() | tuple() not #{}
compiler.ex:73: The call _@3:'quoted'() requires that _@3 is of type atom() | tuple() not #{}
assertions.ex:335: Guard test is_binary(_@5::atom() | tuple()) can never succeed
assertions.ex:337: Guard test is_map(_@4::atom() | tuple()) can never succeed
cli_formatter.ex:26: Guard test is_map(_@1::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:31: Guard test is_map(_@1::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:40: Guard test is_map(_@1::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:55: Guard test is_map(_@1::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:64: Guard test is_map(_@1::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:114: Guard test is_map(_@2::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:114: Guard test is_map(_@1::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:116: Guard test is_map(_@3::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:117: Guard test is_map(_@4::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:121: Guard test is_map(_@5::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:122: Guard test is_map(_@6::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:126: Guard test is_map(_@7::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,boolean(),_}) can never succeed
cli_formatter.ex:141: Guard test is_map(_@1::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:142: Guard test is_map(_@2::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:147: Guard test is_map(_@1::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:148: Guard test is_map(_@2::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
cli_formatter.ex:154: Guard test is_map(_@1::{'Elixir.ExUnit.CLIFormatter.Config',_,_,_,_,_,_,_,_}) can never succeed
doc_test.ex:328: Guard test is_map(_@2::atom() | tuple()) can never succeed
doc_test.ex:359: The created fun has no local return
filters.ex:93: The variable _ can never match since previous clauses completely covered the type {'ok',_}
formatter.ex:122: Guard test is_map(_@1::{'Elixir.ExUnit.AssertionError',_,_,_,_,_}) can never succeed
formatter.ex:123: Guard test is_map(_@2::{'Elixir.ExUnit.AssertionError',_,_,_,_,_}) can never succeed
formatter.ex:124: Guard test is_map(_@3::{'Elixir.ExUnit.AssertionError',_,_,_,_,_}) can never succeed
formatter.ex:125: Guard test is_map(_@4::{'Elixir.ExUnit.AssertionError',_,_,_,_,_}) can never succeed
formatter.ex:134: Guard test is_map(_@1::atom() | tuple()) can never succeed
runner.ex:48: Guard test is_map(_@2::{'Elixir.ExUnit.Runner.Config',_,_,_,_,_,_,_,_}) can never succeed
runner.ex:48: Guard test is_map(_@1::{'Elixir.ExUnit.Runner.Config',_,_,_,_,_,_,_,_}) can never succeed
runner.ex:61: Guard test is_map(_@4::{'Elixir.ExUnit.Runner.Config',_,_,_,_,_,_,_,_}) can never succeed
runner.ex:103: Guard test is_map(_@2::{'Elixir.ExUnit.TestCase',_,_,_}) can never succeed
runner.ex:116: Guard test is_map(_@4::{'Elixir.ExUnit.Runner.Config',_,_,_,integer(),_,_,_,_}) can never succeed
runner.ex:122: Guard test is_map(_@1::{'Elixir.ExUnit.Runner.Config',_,_,_,integer(),_,_,_,_}) can never succeed
runner.ex:123: Guard test is_map(_@2::{'Elixir.ExUnit.Runner.Config',_,_,_,integer(),_,_,_,_}) can never succeed
runner.ex:125: The created fun has no local return
runner.ex:176: Guard test is_map(_@1::{'Elixir.ExUnit.Runner.Config',_,_,_,integer(),_,_,_,_}) can never succeed
runner.ex:182: Guard test is_map(_@4::{'Elixir.ExUnit.Runner.Config',_,_,_,integer(),_,_,_,_}) can never succeed
runner.ex:194: Guard test is_map(_@1::{'Elixir.ExUnit.Test',_,_,_,_,_}) can never succeed
runner.ex:215: Guard test is_map(_@1::{'Elixir.ExUnit.Test',_,_,_,_,_}) can never succeed
runner.ex:223: Guard test is_map(_@2::{'Elixir.ExUnit.Test',_,_,_,_,_}) can never succeed
runner.ex:223: Guard test is_map(_@1::{'Elixir.ExUnit.Test',_,_,_,_,_}) can never succeed
runner.ex:231: Guard test is_map(_@1::{'Elixir.ExUnit.Test',_,_,_,_,_}) can never succeed
runner.ex:235: Guard test is_map(_@2::{'Elixir.ExUnit.Test',_,_,_,_,_}) can never succeed
runner.ex:254: Guard test is_map(_@1::{'Elixir.ExUnit.Runner.Config',_,_,_,_,_,_,_,_}) can never succeed
runner.ex:263: Guard test is_map(_@1::{'Elixir.ExUnit.Runner.Config',_,_,_,_,_,_,_,_}) can never succeed
file.ex:646: The call _@1:'mode'() requires that _@1 is of type atom() | tuple() not #{}
autocomplete.ex:209: Clause guard cannot succeed. The variable _@3 was matched against the type binary()
cli.ex:127: The created fun has no local return
evaluator.ex:163: Guard test is_map(_@1::atom() | tuple()) can never succeed
inspect.ex:226: Guard test is_map(_@1::{'Elixir.Inspect.Opts',_,_,_,_,_,_,_}) can never succeed
inspect.ex:282: Guard test is_map(_@4::{'Elixir.Inspect.Opts',_,_,_,_,_,_,_}) can never succeed
inspect.ex:284: Guard test is_map(_@3::{'Elixir.Inspect.Opts',_,_,_,_,_,_,_}) can never succeed
inspect.ex:317: Guard test is_map(_@1::{'Elixir.Inspect.Opts',_,_,_,_,_,_,_}) can never succeed
inspect.ex:320: Guard test is_map(_@3::{'Elixir.Inspect.Opts',_,_,_,_,_,_,_}) can never succeed
inspect.ex:332: Guard test is_map(_@4::{'Elixir.Inspect.Opts',_,_,_,_,_,_,_}) can never succeed
inspect.ex:351: Guard test is_map(_@1::{'Elixir.Inspect.Opts',_,_,_,_,_,_,_}) can never succeed
inspect.ex:426: Guard test is_map(_@2::atom()) can never succeed
algebra.ex:105: Function do_is_doc/1 will never be called
algebra.ex:120: Guard test is_map(_@1::tuple()) can never succeed
algebra.ex:127: Guard test is_map(_@5::tuple()) can never succeed
algebra.ex:127: Guard test is_map(_@4::atom() | tuple()) can never succeed
algebra.ex:136: Guard test is_map(_@1::tuple()) can never succeed
algebra.ex:143: Guard test is_map(_@5::tuple()) can never succeed
algebra.ex:143: Guard test is_map(_@4::atom() | tuple()) can never succeed
io.ex:248: Overloaded contract for 'Elixir.IO':getn/2 has overlapping domains; such contracts are currently unsupported and are simply ignored
kernel.ex:1740: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:1770: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:1789: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:1891: Guard test is_map(_@1::{'Elixir.Inspect.Opts',_,_,_,_,_,_,_}) can never succeed
kernel.ex:1892: Guard test is_map(_@2::{'Elixir.Inspect.Opts',_,_,_,_,_,_,_}) can never succeed
kernel.ex:2094: The pattern 'false' can never match the type 'true'
kernel.ex:2102: The pattern 'true' can never match the type 'false'
kernel.ex:2108: The pattern 'true' can never match the type 'false'
kernel.ex:2186: Guard test is_map(_@2::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2186: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2205: Guard test is_map(_@2::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2205: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2209: Guard test is_map(_@2::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2209: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2231: Guard test is_map(_@2::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2231: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2644: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2655: Guard test is_map(_@3::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2663: Guard test is_map(_@5::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2663: Guard test is_map(_@4::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2715: The pattern 'false' can never match the type 'true'
kernel.ex:2885: The pattern 'false' can never match the type 'true'
kernel.ex:2922: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2926: Guard test is_map(_@3::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2926: Guard test is_map(_@2::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2926: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2930: Guard test is_map(_@4::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:2936: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:3532: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:3913: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
kernel.ex:3914: The pattern 'false' can never match the type 'true'
cli.ex:37: Function run/1 has no local return
cli.ex:37: The call 'Elixir.Kernel.CLI':run(_@D0::any(),'true') will never return since it differs in the 2nd argument from the success typing arguments: (fun(() -> any()),'false' | 'nil')
cli.ex:88: Guard test is_map(_@1::atom() | tuple()) can never succeed
typespec.ex:769: The created fun has no local return
cli.ex:79: Guard test is_map(_@6::atom() | tuple()) can never succeed
dep.ex:166: The call _@1:'from'() requires that _@1 is of type atom() | tuple() not #{}
converger.ex:159: The call _@2:'deps'() requires that _@2 is of type atom() | tuple() not #{}
converger.ex:164: The call _@5:'deps'() requires that _@5 is of type atom() | tuple() not #{}
converger.ex:164: The call _@4:'deps'() requires that _@4 is of type atom() | tuple() not #{}
converger.ex:217: The call _@1:'status'() requires that _@1 is of type atom() | tuple() not #{}
converger.ex:219: The call _@3:'app'() requires that _@3 is of type atom() | tuple() not #{}
converger.ex:219: The call _@2:'requirement'() requires that _@2 is of type atom() | tuple() not #{}
loader.ex:46: The call _@1:'status'() requires that _@1 is of type atom() | tuple() not #{}
loader.ex:208: The call _@3:'app'() requires that _@3 is of type atom() | tuple() not #{}
loader.ex:236: The call _@1:'app'() requires that _@1 is of type atom() | tuple() not #{}
umbrella.ex:33: The call _@1:'deps'() requires that _@1 is of type atom() | tuple() not #{}
umbrella.ex:34: The call _@2:'app'() requires that _@2 is of type atom() | tuple() not #{}
project.ex:347: Guard test is_map(_@1::atom()) can never succeed
project_stack.ex:101: Guard test is_map(_@1::{'Elixir.Mix.ProjectStack.State',_,_,_}) can never succeed
project_stack.ex:129: Guard test is_map(_@1::{'Elixir.Mix.ProjectStack.Project',_,_,_,_,_,_}) can never succeed
project_stack.ex:139: Guard test is_map(_@1::{'Elixir.Mix.ProjectStack.Project',_,_,_,_,_,_}) can never succeed
project_stack.ex:148: Guard test is_map(_@1::{'Elixir.Mix.ProjectStack.Project',_,_,_,_,_,_}) can never succeed
compile.app.ex:85: Guard test is_map(_@7::atom() | tuple()) can never succeed
compile.elixir.ex:102: The created fun has no local return
compile.erlang.ex:188: The created fun has no local return
compile.erlang.ex:193: The created fun has no local return
compile.erlang.ex:206: The created fun has no local return
compile.erlang.ex:230: The created fun has no local return
compile.erlang.ex:267: Fun application will fail since _callback :: none() is not a function of arity 2
compile.ex:33: Clause guard cannot succeed. The variable _@3 was matched against the type binary()
compile.ex:82: Guard test is_map(_@2::atom() | tuple()) can never succeed
deps.compile.ex:101: The call _@1:'app'() requires that _@1 is of type atom() | tuple() not #{}
deps.ex:102: The call _@2:'opts'() requires that _@2 is of type atom() | tuple() not #{}
escriptize.ex:126: Clause guard cannot succeed. The variable _@1 was matched against the type [any()]
escriptize.ex:134: The call _@1:'mode'() requires that _@1 is of type atom() | tuple() not #{}
utils.ex:428: The call _@1:'scheme'() requires that _@1 is of type atom() | tuple() not #{}
module.ex:348: Guard test is_map(_@2::tuple()) can never succeed
module.ex:348: Guard test is_map(_@1::tuple()) can never succeed
module.ex:352: Guard test is_map(_@1::tuple()) can never succeed
module.ex:395: Guard test is_map(_@1::tuple()) can never succeed
locals_tracker.ex:147: Clause guard cannot succeed. The variable _@3 was matched against the type [any()]
locals_tracker.ex:264: The created fun has no local return
consolidation.ex:127: Function apply_to/2 has no local return
consolidation.ex:137: Function ensure_protocol/1 will never be called
consolidation.ex:152: Function beam_file/1 will never be called
consolidation.ex:161: Function change_debug_info/2 will never be called
consolidation.ex:168: Function change_impl_for/6 will never be called
consolidation.ex:190: The created fun has no local return
consolidation.ex:209: Function builtin_clause_for/4 will never be called
consolidation.ex:219: Function struct_clause_for/1 will never be called
consolidation.ex:233: Function each_struct_clause_for/3 will never be called
consolidation.ex:238: Function fallback_clause_for/3 will never be called
consolidation.ex:244: Function compile/1 will never be called
record.ex:60: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
record.ex:91: Guard test is_map(_@1::{'Elixir.Macro.Env',_,_,_,_,_,_,_,_,_,_,_,_,_,_,_}) can never succeed
deprecated.ex:269: The call 'Elixir.Record.Deprecated':find_index(values::atom() | binary() | fun() | pid() | number() | {atom() | binary() | fun() | pid() | [atom() | binary() | fun() | pid() | [any()] | number() | {_,_} | {_,_,_}] | number() | {atom() | binary() | fun() | pid() | [any()] | number() | {_,_} | {_,_,_},atom() | binary() | fun() | pid() | [any()] | number() | {_,_} | {_,_,_}} | {atom() | {_,_,_},[any()],atom() | [any()]},atom() | binary() | fun() | pid() | [atom() | binary() | fun() | pid() | [any()] | number() | {_,_} | {_,_,_}] | number() | {atom() | binary() | fun() | pid() | [any()] | number() | {_,_} | {_,_,_},atom() | binary() | fun() | pid() | [any()] | number() | {_,_} | {_,_,_}} | {atom() | {_,_,_},[any()],atom() | [any()]}} | {atom() | {_,_,_},[{_,_}],atom() | [any()]},k::any(),0) will never return since it differs in the 1st argument from the success typing arguments: (maybe_improper_list(),any(),non_neg_integer())
deprecated.ex:484: The created fun has no local return
string_io.ex:279: Function do_get_until/6 will never be called
system.ex:8: Function strip_re/2 will never be called
system.ex:12: Function read_stripped/1 will never be called
system.ex:194: The call _@2:'access'() requires that _@2 is of type atom() | tuple() not #{}
system.ex:194: The call _@1:'type'() requires that _@1 is of type atom() | tuple() not #{}
elixir.erl:24: The created fun has no local return
elixir.erl:26: The call io:setopts('standard_error',[{'unicode','true'},...]) breaks the contract (IoDevice,Opts) -> 'ok' | {'error',Reason} when is_subtype(IoDevice,device()), is_subtype(Opts,[setopt()]), is_subtype(Reason,term())
elixir_parser.erl:2914: Function yeccpars2_192/7 has no local return
elixir_parser.erl:4066: Function yeccpars2_305/7 has no local return
elixir_parser.erl:4098: Function yeccpars2_311/7 has no local return
elixir_parser.erl:4103: Function yeccpars2_312/7 has no local return
elixir_parser.erl:4288: Function yeccpars2_328/7 has no local return
elixir_parser.yrl:375: Function yeccpars2_192_/1 has no local return
elixir_parser.yrl:392: Function yeccpars2_305_/1 has no local return
elixir_parser.yrl:393: Function yeccpars2_311_/1 has no local return
elixir_parser.yrl:394: Function yeccpars2_312_/1 has no local return
elixir_parser.yrl:405: Function yeccpars2_318_/1 has no local return
elixir_parser.yrl:405: Function yeccpars2_328_/1 has no local return
elixir_parser.yrl:707: Function throw_no_parens_strict/1 has no local return
elixir_parser.yrl:712: Function throw_no_parens_many_strict/1 has no local return
```

This could use a comment in the code because its not documented/speced:

```
elixir.erl:26: The call io:setopts('standard_error',[{'unicode','true'},...]) breaks the contract (IoDevice,Opts) -> 'ok' | {'error',Reason} when is_subtype(IoDevice,device()), is_subtype(Opts,[setopt()]), is_subtype(Reason,term())
```

Confused about this one:

```
compile.erlang.ex:267: Fun application will fail since _callback :: none() is not a function of arity 2
```

There seems to be a few warnings with the `for` comprehensions, I think this is due to the way they are expanded but need to investigate:

```
compile.elixir.ex:102: The created fun has no local return
```

Can't find `String.Chars.t` but surely this is a subset of `char_data`:

```
io.ex:248: Overloaded contract for 'Elixir.IO':getn/2 has overlapping domains; such contracts are currently unsupported and are simply ignored
```

Unused private functions - once private macros have been evaluated - could be removed by compiler at some point?

```
system.ex:8: Function strip_re/2 will never be called
system.ex:12: Function read_stripped/1 will never be called
```


#### [#2214] - (2014-04-29T17:39:18Z) - [Support line numbers in mix test, e.g. test/some/file_test.exs:12](https://github.com/elixir-lang/elixir/pull/2214)

I'm not happy that there are no tests and I'm wondering if I should put the code in its own function (and return a tuple of the new file list and exunit options to apply) so I can unit test it separately.

/cc @josevalim


#### [#2217] - (2014-04-29T17:31:10Z) - [Convert StringIO to a struct.](https://github.com/elixir-lang/elixir/pull/2217)



#### [#2208] - (2014-04-29T09:31:36Z) - [[WIP] Fix some dialyzer warnings](https://github.com/elixir-lang/elixir/pull/2208)



#### [#2209] - (2014-04-29T09:30:26Z) - [Fix some typos](https://github.com/elixir-lang/elixir/pull/2209)



#### [#2207] - (2014-04-28T18:44:31Z) - [Fix remote calls to work with dialyzer in 17.0](https://github.com/elixir-lang/elixir/pull/2207)

In 17.0 dialyzer will crash on an empty map case pattern when its is
known that pattern will not match. The is_map guard is used instead of
the empty map pattern.


#### [#2206] - (2014-04-28T15:54:29Z) - [Make ExUnit.Filters parse integers and match atoms to binaries.](https://github.com/elixir-lang/elixir/pull/2206)

Makes mix test --only line:9 or --only "test:Test Message" work. Fixes #2064.


#### [#2200] - (2014-04-28T04:44:08Z) - [Rename the `args` variable to `attrs` or `opts` where appropriate](https://github.com/elixir-lang/elixir/pull/2200)

It is a good convention to have the name "args" refer to variables
that actually contain a list of arguments dispatched to a function
in some way.

When passing a keyword list to a record constructor,
it is referred to as "attributes" or "attrs".

When passing a list of arbitrary options,
it is referred to as "opts".


#### [#2201] - (2014-04-28T04:43:41Z) - [docfix: delete the extra 'the'](https://github.com/elixir-lang/elixir/pull/2201)



#### [#2199] - (2014-04-27T18:57:52Z) - [Fix compiler abstract code](https://github.com/elixir-lang/elixir/pull/2199)

This makes the abstract code valid and ensures dialyzer works when a function clashes with an auto imported bif.

A PR should be done to OTP so that dialyzer reads the `options` from the `compile_info` chunk of a beam and uses them when creating core from a beam.


#### [#2198] - (2014-04-27T08:05:20Z) - [Fix typo on MacroTest](https://github.com/elixir-lang/elixir/pull/2198)



#### [#2197] - (2014-04-26T20:26:47Z) - [Don't load dependencies in remote converger](https://github.com/elixir-lang/elixir/pull/2197)

Remote converger returns list of names that filters children returned
from Mix.Dep.Loader.load/1.


#### [#2195] - (2014-04-25T22:51:10Z) - [Allow remote converger to set children of dependency](https://github.com/elixir-lang/elixir/pull/2195)



#### [#2194] - (2014-04-25T18:34:03Z) - [Use esl package to get erlang 17.0 on travis](https://github.com/elixir-lang/elixir/pull/2194)

Looks like it works: https://travis-ci.org/elixir-lang/elixir/builds/23772501


#### [#2193] - (2014-04-25T15:24:36Z) - [Don't mention default EEx engine twice; add a note about it in the code](https://github.com/elixir-lang/elixir/pull/2193)

The docs mention default engine twice in the span of two paragraphs and the first mention is incorrect.


#### [#2186] - (2014-04-23T12:17:24Z) - [Docfix: write error](https://github.com/elixir-lang/elixir/pull/2186)



#### [#2185] - (2014-04-22T12:11:35Z) - [Add String.split_at](https://github.com/elixir-lang/elixir/pull/2185)

While it is straightforward to split a string given
an offset in bytes from its beginning like this

```
<<left::[binary, size(offset)], right::binary>> = string
```

splitting at grapheme boundary or using negative offset
is not so simple. Hence this function.


#### [#2182] - (2014-04-21T08:43:31Z) - [use 0.13 exunit exception in doctest](https://github.com/elixir-lang/elixir/pull/2182)



#### [#1984] - (2014-04-21T07:01:22Z) - [Improve Enumerable count/member? docs](https://github.com/elixir-lang/elixir/pull/1984)

This avoids saying "pre-calculated" for `count?` (there might be a faster than linear algorithm that's not pre-calculated). Also  be slightly more explicit about what happens if `{ :error, __MODULE__ }` is returned.


#### [#2181] - (2014-04-20T06:29:39Z) - [Allow overriding of undefined dependency SCM](https://github.com/elixir-lang/elixir/pull/2181)

This allows a developer to override an unrecognized SCM without Mix
raising.


#### [#2180] - (2014-04-18T01:05:36Z) - [Docfix: Use Map.put/3 in Kernel.SpecialForms struct docs.](https://github.com/elixir-lang/elixir/pull/2180)



#### [#2177] - (2014-04-17T21:27:02Z) - [Small grammar fix](https://github.com/elixir-lang/elixir/pull/2177)

Add in an "of" to clarify a sentence near the beginning of the file.


#### [#2178] - (2014-04-17T21:26:41Z) - [Minor grammar tweak](https://github.com/elixir-lang/elixir/pull/2178)

Subject/verb agreement at the top


#### [#2175] - (2014-04-17T16:31:28Z) - [Fix bad conditional logic when checking for +iex](https://github.com/elixir-lang/elixir/pull/2175)

I didn't check this very thoroughly in my first PR. I've tested this pretty heavily and looks like this fix will put Windows where it needs to be.


#### [#2174] - (2014-04-16T18:00:10Z) - [Use werl instead of erl when executing iex.bat](https://github.com/elixir-lang/elixir/pull/2174)

This is more to start some discussion around this than necessarily the final solution for the problem. This commit sets an environment variable `useWerl`, which is then checked prior to executing `erl` in `elixir.bat`. If it is set to 1, `werl` is used instead of `erl`. This allows someone to override it and use `erl` for iex if they just want to use their native shell for `iex` (which still works, it's just missing some features like the CTRL+C and CTRL+G menus).

Thoughts?


#### [#2173] - (2014-04-16T07:54:32Z) - [--app argument should be converted to atom](https://github.com/elixir-lang/elixir/pull/2173)



#### [#2170] - (2014-04-14T17:39:51Z) - [Fetch if remote converger updated dependency lock](https://github.com/elixir-lang/elixir/pull/2170)



#### [#2169] - (2014-04-14T05:44:08Z) - [Accept :structs, :binaries and :char_lists as iex inspect options](https://github.com/elixir-lang/elixir/pull/2169)



#### [#2167] - (2014-04-12T06:43:30Z) - [Fix ExUnit.Assertions receive macros compiler warnings](https://github.com/elixir-lang/elixir/pull/2167)

Previously receive macros would produce warnings when a message was supplied.

Fixes #2132


#### [#2164] - (2014-04-11T16:53:08Z) - [fix matching on every map in Enum.into/2](https://github.com/elixir-lang/elixir/pull/2164)



#### [#2161] - (2014-04-10T08:38:10Z) - [Remote converger should receive and update lock](https://github.com/elixir-lang/elixir/pull/2161)

Confirmed that it works with hex and that `mix deps.update` works as expected.


#### [#2160] - (2014-04-09T16:40:38Z) - [Fix version scheme for Erlang/OTP](https://github.com/elixir-lang/elixir/pull/2160)



#### [#2155] - (2014-04-08T17:50:35Z) - [Add `handle_body/1` callback to EEx.Engine](https://github.com/elixir-lang/elixir/pull/2155)



#### [#2148] - (2014-04-04T07:42:32Z) - [Fixed doc typos. Fixed unused function arg.](https://github.com/elixir-lang/elixir/pull/2148)



#### [#2138] - (2014-03-28T00:23:50Z) - [Support older gits in mix](https://github.com/elixir-lang/elixir/pull/2138)

Do not add `‚Äîprogress` flag to `git fetch` command unless git version
is 1.7.1 or newer.


#### [#2096] - (2014-03-27T08:04:52Z) - [StringIO improvements](https://github.com/elixir-lang/elixir/pull/2096)

I've begun StringIO improvements, and I've had several rewrites (e.g. https://gist.github.com/devinus/c8fc12b63f1c73aedbae) that have all led me to question my own interpretation of the IO protocol and appreciate some design decisions that @mururu took.

However, there are several performance improvements we can still make. For example, @josevalim has confirmed that we only need to care about `:latin1` (terribly named, but this is what's used when using `binread`/`binwrite` because there's no concept of multibyte codepoints) and `:unicode` (which should only be UTF-8), but I wanted to go on a line by line basis with @mururu to confirm behaviour and maybe @josevalim can chime in when necessary.

I've already fixed several potential bugs that I'd like a second pair of eyes to double check.


#### [#2137] - (2014-03-27T08:03:39Z) - [Added Base module with implementation for base 64 and base 16](https://github.com/elixir-lang/elixir/pull/2137)



#### [#2126] - (2014-03-19T09:38:52Z) - [IO.stream/1 isn't a thing, this fixes the example](https://github.com/elixir-lang/elixir/pull/2126)



#### [#2111] - (2014-03-11T00:04:20Z) - [Allow splicing of binaries with specified size](https://github.com/elixir-lang/elixir/pull/2111)

Closes #2110.


#### [#2108] - (2014-03-10T17:13:08Z) - [Convert Mix.Dep record to struct](https://github.com/elixir-lang/elixir/pull/2108)



#### [#2102] - (2014-03-08T15:44:34Z) - [Fixed Kernel.SpecialForms.try reference](https://github.com/elixir-lang/elixir/pull/2102)



#### [#2104] - (2014-03-08T15:43:31Z) - [Remove support to MIX_GIT_FORCE_HTTPS environment option](https://github.com/elixir-lang/elixir/pull/2104)

Fix https://github.com/elixir-lang/elixir/issues/2101

This used to be useful in case the git port was blocked, as stated in the [CHANGELOG entry](https://github.com/elixir-lang/elixir/blame/v0.13/CHANGELOG.md#L361) which added this feature.


#### [#2100] - (2014-03-08T00:09:55Z) - [Fixing doc typos in Kernel.SpecialForms](https://github.com/elixir-lang/elixir/pull/2100)



#### [#2099] - (2014-03-07T12:52:48Z) - [Fixed typos in Collectable docs](https://github.com/elixir-lang/elixir/pull/2099)



#### [#2098] - (2014-03-06T22:02:18Z) - [Fixed typos in File docs](https://github.com/elixir-lang/elixir/pull/2098)



#### [#2093] - (2014-03-06T18:50:39Z) - [Initial work on traversable](https://github.com/elixir-lang/elixir/pull/2093)

This pull requests adds a Traversable protocol to Elixir.

A summary of the changes can be found in this gist: https://gist.github.com/josevalim/337baccd6c31528c47d1

Pending to merge this is:
- [x] Deprecate a couple functions in the Dict API, namely `Dict.empty/1`, `Dict.new/1` and `Dict.new/2`.
- [x] Implementation of `Traversable` for functions
- [x] Implementation of `Stream.into/2` and `Stream.into/3` for side-effects
- [x] Implementation of traversable for File and IO streams
- [ ] Support for traversables in comprehensions with the `:into` option
- [x] Rename Traversable to ???

/cc @devinus @ericmj @meh


#### [#2092] - (2014-03-05T15:53:56Z) - [Support interpolation in keyword list atoms](https://github.com/elixir-lang/elixir/pull/2092)

``` elixir
key = "foo"
["#{key}": :value]
```


#### [#2070] - (2014-03-05T12:20:49Z) - [Raise error if another capture_io process already captured the device](https://github.com/elixir-lang/elixir/pull/2070)

closes #2066


#### [#2090] - (2014-03-03T18:33:52Z) - [Update Gen_FSM example to be more explicit, clear.](https://github.com/elixir-lang/elixir/pull/2090)

By using a locally registered process name, this example has caused some initial confusion to new users of Elixir. Using explicit PIDs will more closely align with other examples, and reduce the number of things one must understand in order to understand this example.

I know this is a trivial change, but after hearing about at least two other cases where this example has caused some confusion for new users, I felt like it made sense to take the time to update it.


#### [#2087] - (2014-03-03T13:39:14Z) - [Support :io.get_password in StringIO](https://github.com/elixir-lang/elixir/pull/2087)

Do we want to add `IO.get_password` as well?


#### [#2089] - (2014-03-03T06:44:32Z) - [Fixed doc typos in Module](https://github.com/elixir-lang/elixir/pull/2089)



#### [#2088] - (2014-03-02T07:48:27Z) - [Fixing doc typos](https://github.com/elixir-lang/elixir/pull/2088)

In `StringIO` and `Kernel.SpecialForms`.


#### [#2085] - (2014-03-01T07:19:56Z) - [Fixing doc typos in Kernel](https://github.com/elixir-lang/elixir/pull/2085)



#### [#2079] - (2014-02-28T21:23:55Z) - [Add `:only` dep option to filter on environments](https://github.com/elixir-lang/elixir/pull/2079)

mix deps.get will by default fetch all deps unless --only flag is given.

Closes https://github.com/elixir-lang/elixir/issues/2038.

We should update getting started guide with this.


#### [#2076] - (2014-02-27T15:07:26Z) - [Fix typo in Maps, add 2 examples to docs](https://github.com/elixir-lang/elixir/pull/2076)



#### [#2069] - (2014-02-22T12:23:50Z) - [Add RemoteConverger](https://github.com/elixir-lang/elixir/pull/2069)



#### [#2060] - (2014-02-18T21:17:10Z) - [Add `System.delete_env/1`](https://github.com/elixir-lang/elixir/pull/2060)

@josevalim I am sending this as a PR because I also changed a few places to use `String.to_char_list!` and `String.from_char_list!` instead of `iolist_to_binary` and `:binary.bin_to_list`. But I'm not sure if the changes are correct because a few other places in `system.ex` had the following comment:

```
# Notice we don't use unicode for conversion
# because the OS is expecting and returning raw bytes
```

Or if the current behaviour was because of performance reasons.


#### [#2057] - (2014-02-14T18:38:54Z) - [Mix.Utils handling empty strings](https://github.com/elixir-lang/elixir/pull/2057)

Made `Mix.Utils.underscore` and `Mix.Utils.camelize` handle empty string inputs (and `..` inputs for `underscore`). Ran into these bugs while passing filesystem paths to these functions in phoenix.


#### [#2050] - (2014-02-10T09:24:44Z) - [Updated specs in Version](https://github.com/elixir-lang/elixir/pull/2050)

Addressing these dialyzer warnings:

```
version.ex:283: Invalid type specification for function 'Elixir.Version.Parser':parse_requirement/1. The success typing is (binary()) -> 'error' | {'o    k',[{{_,_,_,_},[any(),...],[any(),...]},...]}                                                                                                         
version.ex:292: Invalid type specification for function 'Elixir.Version.Parser':parse_version/1. The success typing is (binary()) -> 'error' | {'ok',{    integer(),integer(),'nil' | integer(),[any()]}}
version.ex:476: Clause guard cannot succeed. The variable _@1 was matched against the type integer()
```

The first two were caused by new return values (`:error` or `{:ok, value}`). The third by the fact that preceding functions guaranteed that the `minor` version value was always defined.

Also fixed some simple doc typos in a separate commit.


#### [#2042] - (2014-02-08T09:49:25Z) - [Add R16B03, R16B03-1 and 17.0-rc1 to .travis.yml](https://github.com/elixir-lang/elixir/pull/2042)



#### [#2031] - (2014-02-05T07:46:47Z) - [Macro.to_string/1 for maps and struct AST](https://github.com/elixir-lang/elixir/pull/2031)



#### [#2028] - (2014-02-03T07:53:53Z) - [Enforce semantic versioning](https://github.com/elixir-lang/elixir/pull/2028)

- Mix will now error on versions and requirements that doesn't follow SemVer
- Dependencies that does not follow SemVer can only be matched with a regex
- Refactor Version to make it more performant and only parse SemVer
  - Remove the validation functions in favor of parsing functions returning error tuples
  - `match?/2` and `compare/2` only raises on parse errors, if given already parsed version and requirement they will not raise


#### [#2016] - (2014-02-02T16:47:04Z) - [Add exception formatting and colorization to iex](https://github.com/elixir-lang/elixir/pull/2016)



#### [#2017] - (2014-02-01T14:45:58Z) - [Improve error on bad return](https://github.com/elixir-lang/elixir/pull/2017)

Working on issue #2006,

I believe I have everything working, it raises the correct exception but it also logs to INFO the erlang exception. Let me know what you think!


#### [#2023] - (2014-02-01T09:01:32Z) - [Prefix all warnings with [warning]](https://github.com/elixir-lang/elixir/pull/2023)

Resolves #2022

We concatenate [warning] onto error strings in elixir_errors.erl
Note also that the test for module redfinition is performed in
helpers_test.exs rather than in warning_test.exs Perhaps this is
something that should be moved.


#### [#2018] - (2014-01-25T10:42:03Z) - [Make sure unintialized @attribute warnings points to the correct file](https://github.com/elixir-lang/elixir/pull/2018)

closes #1996


#### [#2012] - (2014-01-21T08:55:50Z) - [Fix functions as default values in records](https://github.com/elixir-lang/elixir/pull/2012)

successful check_value/2 needs to return its second argument

before:

iex(1)> defrecord Baz, foo: &Dict.get/1, bar: 4711
iex(2)> IO.puts inspect Baz[]
Baz[foo: nil, bar: 4711]
:ok
iex(3)> 

after:

iex(4)> defrecord Baz, foo: &Dict.get/1, bar: 4711  
iex(5)> IO.puts inspect Baz[]  
Baz[foo: &Dict.get/1, bar: 4711]
:ok
iex(6)> 


#### [#2009] - (2014-01-19T19:37:01Z) - [minor typo in doc](https://github.com/elixir-lang/elixir/pull/2009)

i find this typo when learn to use it.


#### [#2004] - (2014-01-18T08:56:18Z) - [Deprecates binary_to_term and term_to_binary in Kernel.](https://github.com/elixir-lang/elixir/pull/2004)

Closes #2003


#### [#1995] - (2014-01-14T09:35:36Z) - [Cleaning up Module docs](https://github.com/elixir-lang/elixir/pull/1995)



#### [#1994] - (2014-01-13T21:30:55Z) - [Allow EEx.AssignsEngine to accept any Dict.t](https://github.com/elixir-lang/elixir/pull/1994)



#### [#1993] - (2014-01-13T18:21:20Z) - [Fix Module.definitions_in documentation typo.](https://github.com/elixir-lang/elixir/pull/1993)



#### [#1989] - (2014-01-12T20:22:55Z) - [fix issue with Float.round/3 (midpoint_rounding)](https://github.com/elixir-lang/elixir/pull/1989)

There is an issue in Float.round/3, where the midpoint rounding is causing the number to always round up by default or down if that option is passed.  This PR removes the midpoint_rounding option and will always midpoint round away from 0 (same as ruby).

Current: 

``` elixir
iex> Float.round(3.991, 2)
4.0 # incorrect, should round to 3.99
iex> Float.round(3.996, 2, :down)
3.99 # incorrect, should only round 3.995 down
```

After this change:

``` elixir
iex> Float.round(3.991, 2)
3.99
iex> Float.round(3.995, 2)
4.0
```


#### [#1988] - (2014-01-12T11:50:41Z) - [Dict.Behaviour doc cleanup](https://github.com/elixir-lang/elixir/pull/1988)



#### [#1981] - (2014-01-09T17:37:09Z) - [Add Keyword.delete/3 for deleting explicit values.](https://github.com/elixir-lang/elixir/pull/1981)



#### [#1980] - (2014-01-08T04:36:28Z) - [Fixing doc typos in ExUnit and Kernel.Typespec](https://github.com/elixir-lang/elixir/pull/1980)



#### [#1976] - (2014-01-02T12:53:38Z) - [Fix a couple of typos in the File module](https://github.com/elixir-lang/elixir/pull/1976)



#### [#1959] - (2014-01-01T12:58:58Z) - [Using relative symlinks, fixes issue #1953](https://github.com/elixir-lang/elixir/pull/1959)

Uses relative symlinks when building projects with mix, to fix issue #1953

If you have improvement suggestions before merging, don't hesitate! 


#### [#1974] - (2013-12-31T17:59:26Z) - [ex_unit teardown should run even if setup fails](https://github.com/elixir-lang/elixir/pull/1974)



#### [#1971] - (2013-12-31T16:49:47Z) - [Improve error message for IEx.Helpers.r when module does not exist.](https://github.com/elixir-lang/elixir/pull/1971)

Fixes https://github.com/elixir-lang/elixir/issues/1968

Before this commit, when trying to reload an unloaded module, the
user would see an error like:

iex(1)> r InexistentModule
*\* (UndefinedFunctionError) undefined function: InexistentModule.module_info/1
    InexistentModule.module_info(:compile)
    lib/iex/lib/iex/helpers.ex:352: IEx.Helpers.source/1
    lib/iex/lib/iex/helpers.ex:311: IEx.Helpers.do_r/1
    lib/iex/lib/iex/helpers.ex:304: IEx.Helpers.r/1

After this commit, the user should see

iex(1)> r InexistentModule
*\* (ArgumentError) Unloaded module Elixir.InexistentModule. Try loading the module's beam file with `IEx.Helpers.l\1`
    lib/iex/lib/iex/helpers.ex:312: IEx.Helpers.do_r/1
    lib/iex/lib/iex/helpers.ex:304: IEx.Helpers.r/1

Which is more informative.


#### [#1975] - (2013-12-31T16:47:19Z) - [Move IEx.ANSIDocs to IO.ANSI.Docs and decouple it from IEx](https://github.com/elixir-lang/elixir/pull/1975)

This is the first step towards addressing #1762. For context, read the conversation thread on that issue.


#### [#1970] - (2013-12-31T16:45:19Z) - [Stop GenServer on unknown call/cast request](https://github.com/elixir-lang/elixir/pull/1970)

This references #1962.

No tests failed when I changed the behaviour.ex file. I'm new to Elixir / Erlang / OTP so unsure if the way I've gone about the tests is correct. The ones below unfortunately output too the error logger which dirties up the test output. I couldn't see a way around it but will happily change the tests if there's a better way.


#### [#1961] - (2013-12-31T16:44:53Z) - [Fix Float.parse to handle numbers of the form "-0.x", fixes issue #1960](https://github.com/elixir-lang/elixir/pull/1961)

Fix for #1960, this is my first non-documentation PR to Elixir, so any feedback on how it could be improved would be appreciated :)

Since Float.parse uses Integer.parse, the -0 would be parsed independently of what came after the decimal point and would become 0.


#### [#1954] - (2013-12-31T16:43:55Z) - [Ensure deps.get updates origin if lock origin and dep origin do not match.](https://github.com/elixir-lang/elixir/pull/1954)

See #1939 for more context.
#### Scenario:

You create a project and add lager as a dependency.

``` elixir
defp deps do
    [{:lager, github: "basho/lager", tag: "2.0.1"}]
end
```

You decide to fork lager and point your app's dependency to your fork. So you update mix.exs:

``` elixir
defp deps do
    [{:lager, github: "bitwalker/lager", tag: "2.0.1"}]
end
```

Then you `mix deps.unlock lager` and `mix deps.get lager`. The lock file gets updated appropriately:

``` erlang
["goldrush": {:git, "git://github.com/DeadZen/goldrush.git", "1d883423ac360b3536ca52dc733a0164bacf3109", [{:tag, "0.1.5"}]},
  "lager": {:git, "git://github.com/bitwalker/lager.git", "ad400896af5b1ad8b4f7a4d34e609b5a990640bb", [{:tag, "2.0.1"}]} ]
```

However, `cat deps/lager/.git/config` returns:

```
...
[remote "origin"]
    url = git://github.com/basho/lager.git
...
```

Obviously, running `mix deps.clean lager` fixes this problem, but if you forget that step, you might believe your dependency was updated correctly, when really it wasn't. This change will flag the lock status as `:outdated` if the lock origin and the cloned dependency's origin do not match, and on `update` will force an update of the cloned repo's origin url to ensure they match. This test is performed after all the other tests in `lock_status` so that this is only done if someone has updated their dependency in the same way as the scenario above. The origin url update will be done every time `update` is called, but should be effectively a no-op unless they differed in the way shown above.

I left the commits split up for now, but I'll squash them if you decide you want to merge this change.


#### [#1943] - (2013-12-31T16:39:26Z) - [Add raw string compare in doctests for #Module<...>](https://github.com/elixir-lang/elixir/pull/1943)

Will now do raw string compare for doctests of #Module<...> format:

``` iex
iex> HashDict.new a: 0, b: 1, c: 2
#HashDict<[a: 0, b: 1, c: 2]>
```


#### [#1933] - (2013-12-31T16:33:15Z) - [Elixirc: fail when one of the provided file pattern is missing](https://github.com/elixir-lang/elixir/pull/1933)

The previous logic didn't allow for a simple fix (patterns were converted all at once and then everything was concatened, thus squashing all the empty lists == missing files).

In this PR, I am proposing to solve the issue #1923 by going through the list of patterns and collect all the patterns that returned no files. If there was at least one, then the process_command for :compile will return an error with a similar error message as before, except that now it's a bit more descriptive (only the missing patterns are mentioned). 

It wouldn't be very difficult to change the code to proceed with the compilation despite the missing files and just issue a warning, but it's probably more sane to just fail right away.


#### [#1909] - (2013-12-31T16:04:05Z) - [Support ExUnit filters](https://github.com/elixir-lang/elixir/pull/1909)

- [x] ExUnit.configure
  - Made the assumption that you would never have a tag with a value of `nil`. Let me know if we need to allow it.
- [x] Tags support
  - Do we need any kind of option for running everything of the tests if all tests are filtered?
  - Testing this was pretty weird. Any thoughts on a better way to keep track of all passed/skipped tests compared to defining a custom formatter?
- [x] Mix support
  - Any thoughts on adding support for exclusion with a [`~` prefix similar to rspec](https://www.relishapp.com/rspec/rspec-core/v/2-4/docs/command-line/tag-option)? Might be nice to just use the tag name combined with the exclusion for `true` and `false` (`win32` or `~unix`). Then everything else could be a string by default instead of needing a `--filter os:unix:` style filter.
  - Now all command line options are passed to `ExUnit.configure` after the `test_helper.exs` is run. Any scenarios where that would be a problem?

Closes https://github.com/elixir-lang/elixir/issues/1898


#### [#1973] - (2013-12-30T11:51:41Z) - [Split elixir expansion for translation to erlang ast in the compiler](https://github.com/elixir-lang/elixir/pull/1973)

Prior to this pull request, Elixir compiler had one pass that expanded the AST and translated it to Erlang Abstract Format at once. This pull request breaks it in two steps and also simplifies the compiler front-end by moving all main functions to the `elixir` module.


#### [#1958] - (2013-12-25T09:56:47Z) - [Remove unneeded assert in assert_raise](https://github.com/elixir-lang/elixir/pull/1958)



#### [#1956] - (2013-12-23T15:10:54Z) - [fix bug in code sample for Stream.resource](https://github.com/elixir-lang/elixir/pull/1956)

In the documentation for Stream.resource there's a sample code that
makes a reference to "File.close!", which doesn't exist.

Also, the pattern matching in the function passed as second argument
doesn't match {:ok, file}, so it should use "File.open!" instead.

Errors:
*\* (UndefinedFunctionError) undefined function: File.close!/1

*\* (FunctionClauseError) no function clause matching in :io.request/2
    io.erl:553: :io.request({:ok, #PID<0.50.0>}, {:get_line, :unicode,
[]})


#### [#1955] - (2013-12-23T08:04:10Z) - [fix typo in URI docs](https://github.com/elixir-lang/elixir/pull/1955)

URI.decode_query returns a `HashDict`


#### [#1940] - (2013-12-16T20:24:04Z) - [Run tests against erlang R16B03](https://github.com/elixir-lang/elixir/pull/1940)



#### [#1938] - (2013-12-16T08:13:17Z) - [Fixed doc typos in Kernel and String](https://github.com/elixir-lang/elixir/pull/1938)



#### [#1928] - (2013-12-15T20:48:32Z) - [Change typespec guards to keyword list](https://github.com/elixir-lang/elixir/pull/1928)

Previous syntax: `@spec fun(a) :: b when is_var(a) and is_subtype(b, [a])`
New syntax: `@spec fun(a) :: b when a: var, b: [a]`

Also changes `Macro.to_string` to not print `[]` for keyword lists in tuples, lists and when. Unsure if we should do it for tuples and lists, maybe it is too confusing?


#### [#1935] - (2013-12-15T08:41:49Z) - [Added links to Regex docs](https://github.com/elixir-lang/elixir/pull/1935)



#### [#1932] - (2013-12-14T10:13:51Z) - [Correct the function name in Stream.take_every spec](https://github.com/elixir-lang/elixir/pull/1932)



#### [#1930] - (2013-12-13T19:28:56Z) - [Cleaning up Stream docs](https://github.com/elixir-lang/elixir/pull/1930)



#### [#1927] - (2013-12-13T17:19:45Z) - [Add Float.round function](https://github.com/elixir-lang/elixir/pull/1927)

Float.round allows rounding floats to arbitrary precision, as well
as specifying how midpoint rounding is performed (up/down).

This should provide accurate rounding for up to 15 digits of
precision (the max guaranteed by the IEEE-754 standard for
64-bit floating point numbers). If you can think of anything my
tests won't catch, let me know.


#### [#1926] - (2013-12-13T09:15:03Z) - [Fixing typos in Enum/Enumerable docs](https://github.com/elixir-lang/elixir/pull/1926)



#### [#1925] - (2013-12-12T21:17:26Z) - [Fixed typo in CHANGELOG](https://github.com/elixir-lang/elixir/pull/1925)



#### [#1924] - (2013-12-12T21:16:34Z) - [Add floor and ceil functions to Float](https://github.com/elixir-lang/elixir/pull/1924)

Let me know if you spot anything wrong with this, I think the tests are fairly comprehensive, but if you can think of any edge cases I may have missed, I'll certainly add tests for them.

Right now this will take either an integer or a float, truncate it as part of the floor/ceil operation, then convert it back to a float. The result of calling Float.floor or Float.ceil will always be a float this way. I think that makes more sense than returning an integer, but let me know if that's an incorrect assumption.


#### [#1920] - (2013-12-12T10:21:01Z) - [Added URI to doc_test list](https://github.com/elixir-lang/elixir/pull/1920)

Updated doctests to not run tests with `HashSet` return values. Fixed minor doc typos.


#### [#1922] - (2013-12-12T10:19:55Z) - [Migrate Enumerable to use an iteratees based solution](https://github.com/elixir-lang/elixir/pull/1922)

This pull request migrates the Enumerable protocol to use a solution based on iteratees. This allow us to halt enumeration (cleaning up the implementation of functions like `take/2` and `drop/2`) and also adds the possibility of interleaving enumerables via suspend. To show case the new functionalities we got, this pull request considerably extends the `Stream` API, by adding functions like `zip/2`, `chunks/4` and more. More info can be found in the updated documentation for Enumerable. @pminten is also working on a blog post that explains the underlying mechanisms quite well.

On the negative side, this pull request does backwards incompatible changes on how the Enumerable protocol works. For this reason, the next Elixir release will be tagged 0.12.0 (to be released this weekend).

Huge thanks to @jessitron for pairing with me on the initial implementation of iteratees. Feedback is welcome!

/cc @ericmj @pminten @devinus @meh


#### [#1921] - (2013-12-11T11:38:19Z) - [Cleaning up ExUnit.CaptureIO docs](https://github.com/elixir-lang/elixir/pull/1921)



#### [#1919] - (2013-12-10T17:01:54Z) - [Fix Version.match? with ~> and -dev versions](https://github.com/elixir-lang/elixir/pull/1919)

Fixes #1918.


#### [#1917] - (2013-12-09T15:04:51Z) - [Simplify the logic of translate_assert](https://github.com/elixir-lang/elixir/pull/1917)

There is no visible need to pass the fallback function through all the
cases of translate_assert. It's makes the code simpler if we keep
the conditional logic at the beginning.


#### [#1916] - (2013-12-08T08:32:56Z) - [Add examples to URI](https://github.com/elixir-lang/elixir/pull/1916)

Adds examples for encode_query, encode, decode, decode_query, query_decoder, and parse.


#### [#1914] - (2013-12-06T10:26:21Z) - [A series of minor Enum description text changes for clarity and consistency.](https://github.com/elixir-lang/elixir/pull/1914)

Lines 909 and 259 were missing words. Other changes are made for minor grammatical clarity and consistency.


#### [#1911] - (2013-12-04T08:07:27Z) - [Use :elixir_env.ex_to_scope/1 insted of :elixir_scope.to_erl_env/1](https://github.com/elixir-lang/elixir/pull/1911)

from IRC jadams


#### [#1912] - (2013-12-04T00:34:58Z) - [Cleaning up Macro docs](https://github.com/elixir-lang/elixir/pull/1912)



#### [#1907] - (2013-12-01T15:42:35Z) - [Add R16B02 and R16B01 to .travis.yml](https://github.com/elixir-lang/elixir/pull/1907)

Now Travis CI supports them.
http://about.travis-ci.org/docs/user/languages/erlang/


#### [#1906] - (2013-12-01T09:35:09Z) - [Fixed docstrings in URI](https://github.com/elixir-lang/elixir/pull/1906)

Old function names removed from docstrings and replaced with a text consistent with other docstrings in the module.


#### [#1905] - (2013-11-30T19:47:30Z) - [Cleaning up Exception docs (and other Kernel doc typos)](https://github.com/elixir-lang/elixir/pull/1905)



#### [#1837] - (2013-11-29T21:37:40Z) - [Add Macro.decompose_call/1](https://github.com/elixir-lang/elixir/pull/1837)

Hereby an implementation of Macro.decompose_call/1, as discussed on elixir-lang-core (see: https://groups.google.com/d/msg/elixir-lang-core/RaJYbKBB7vU/Ff3HTECx8pgJ )

We didn't decided on the final name, so if you think a different name should be used, I'll update the pull request.


#### [#1903] - (2013-11-29T13:51:44Z) - [More precise regex exception match [for erjang]](https://github.com/elixir-lang/elixir/pull/1903)

This is for Erjang, which generates different exception messages.

Let me know if there is a better way to assert_match exception messages; this seems a bit verbose.


#### [#1901] - (2013-11-29T11:50:37Z) - [defrecordp support dynamic name and fields](https://github.com/elixir-lang/elixir/pull/1901)

Also adds unquote fragment support to typespecs


#### [#1900] - (2013-11-29T11:49:18Z) - [In response to "The string type is broken"](https://github.com/elixir-lang/elixir/pull/1900)

Since this blog post [1] caused some stir, I added
tests corresponding to how most languages referred
to are broken. Naturally, that's not the case for
Elixir.

[1] http://mortoray.com/2013/11/27/the-string-type-is-broken/


#### [#1899] - (2013-11-29T07:59:53Z) - [Cleaning up ex_unit docs](https://github.com/elixir-lang/elixir/pull/1899)



#### [#1897] - (2013-11-26T19:37:45Z) - [fix for issue #1896](https://github.com/elixir-lang/elixir/pull/1897)

If the enumerable is an even multiple of the counter (n) and an explicit
pad is given, you get an extra element.

Enum.chunks([1,2,3], 3)
iex> [[1,2,3]]
as expected, but

Enum.chunks([1,2,3], 3, 3, [""])
iex> [[1,2,3],[""]]
as not expected


#### [#1895] - (2013-11-25T15:32:10Z) - [Fixing CHANGELOG typos](https://github.com/elixir-lang/elixir/pull/1895)

Think I got the wording right on the `quote location: :keep` line.


#### [#1892] - (2013-11-24T12:45:27Z) - [Fix some typos](https://github.com/elixir-lang/elixir/pull/1892)

Fix some typos


#### [#1893] - (2013-11-24T12:44:42Z) - [Rewrite elixir_macros.erl in Elixir](https://github.com/elixir-lang/elixir/pull/1893)

This branch moves most of the macros implemented in erlang to elixir.

The exceptions are `case/2`, `try/2` and `receive/1` that cannot be written
in Elixir and therefore were converted to special forms.

On the plus side, `var!/1`, `var!/2` and `alias!/1` were converted to regular
macros (and demoted from special forms).

This also simplifies dispatching, as we no longer need to special case
some of the Kernel macros.


#### [#1878] - (2013-11-21T12:53:02Z) - [Enum.intersperse, change to join](https://github.com/elixir-lang/elixir/pull/1878)

Add an intersperse function and make join work with it (and with
iolist_to_binary). In theory that should be a minor performance improvement.

Not quite sure if the new join function is that much better in practice, it very much depends on how well iolist_to_binary performs, but that's a bif so it should be fairly fast.

Intersperse is different than join because join would (if the implementation actually obeyed the doc instead of failing when the joiner is a list) result in `[1, 0, 0, 2, 0, 0, 3]` for `Enum.join([1,2,3],[0,0])` whereas `Enum.intersperse([1,2,3],[0,0])` gives `[1, [0, 0], 2, [0, 0], 3]`.


#### [#1886] - (2013-11-19T06:58:03Z) - [Updated 'make docs' to latest ex_doc cli args](https://github.com/elixir-lang/elixir/pull/1886)

`ex_doc` wants the path to the `.beam` files on the command line


#### [#1883] - (2013-11-18T11:04:58Z) - [Implement List.delete_at](https://github.com/elixir-lang/elixir/pull/1883)

Should it raise when the index is out of bounds?


#### [#1868] - (2013-11-16T08:27:12Z) - [Add is_var/1 to typespecs and move guards to end of spec](https://github.com/elixir-lang/elixir/pull/1868)

Closes #1327.


#### [#1882] - (2013-11-16T08:26:07Z) - [Make surround_many accept an optional seperator per-invocation, or fall ...](https://github.com/elixir-lang/elixir/pull/1882)

...back to module attribute default. Passes tests+doc_tests.


#### [#1880] - (2013-11-15T07:30:31Z) - [Minor consistency update to Dict.values doc](https://github.com/elixir-lang/elixir/pull/1880)

Adds a period to the end of the first line in the doc, for consistency
with the rest of the module

I am aware that it is trivial, but the generated doc looked a bit silly and I figured I might as well fix it, since I was going through the module anyway :)


#### [#1876] - (2013-11-13T13:33:23Z) - [Fix the example for @before_compile hook](https://github.com/elixir-lang/elixir/pull/1876)



#### [#1875] - (2013-11-13T07:54:26Z) - [Catch attempts to compile missing files in iex and give slightly tidier error messages](https://github.com/elixir-lang/elixir/pull/1875)

While we're tidying the UI... :)


#### [#1874] - (2013-11-12T23:10:29Z) - [Updated mix.new success wording](https://github.com/elixir-lang/elixir/pull/1874)



#### [#1871] - (2013-11-12T13:02:26Z) - [Add mix iex that simply fails and tell users to use iex -S mix](https://github.com/elixir-lang/elixir/pull/1871)



#### [#1872] - (2013-11-12T13:02:00Z) - [Compile projects to _build](https://github.com/elixir-lang/elixir/pull/1872)



#### [#1867] - (2013-11-11T08:18:33Z) - [s/wether/whether](https://github.com/elixir-lang/elixir/pull/1867)



#### [#1866] - (2013-11-10T13:38:14Z) - [Add :++, :-- and :** to Macro#binary_op_props](https://github.com/elixir-lang/elixir/pull/1866)

This is about Issue #1865.

Thank you for the reference to elixir_parser.yrl. I've included the :++, :-- and :*\*  in the table. I am leaving the other ones (the followings), as I could find specific error cases.
- :->  
  - "fn -> xxx end" seems working fine.
- :~~~
  - It seems like unary operator though it's in binary_ops macro.
- :,
  - The list representation [1,2,3] is working fine.


#### [#1863] - (2013-11-09T07:22:03Z) - [Remove unused variables from mix test file](https://github.com/elixir-lang/elixir/pull/1863)

Removes a warning about vars not been used in mix test suite.


#### [#1860] - (2013-11-06T19:18:04Z) - [Fixed warning message.](https://github.com/elixir-lang/elixir/pull/1860)

And updated typo in changelog.


#### [#1859] - (2013-11-06T17:29:34Z) - [Improving docs on var!](https://github.com/elixir-lang/elixir/pull/1859)

Remove implementation details about variable name.
Try and make it clear its just unquoting a var.

Based on discussion here: https://groups.google.com/forum/#!searchin/elixir-lang-talk/joseph$20wilk/elixir-lang-talk/m8-gaOcTdl4/4BYzlbQYSikJ


#### [#1855] - (2013-11-05T20:34:14Z) - [Mark the autogenerated lib/src/elixir.app.src as such](https://github.com/elixir-lang/elixir/pull/1855)



#### [#1856] - (2013-11-05T20:33:31Z) - [Allow compilation in R17A](https://github.com/elixir-lang/elixir/pull/1856)

Allow elixir to be compiled using R17A as well. Fixes #1854.


#### [#1841] - (2013-11-03T16:30:43Z) - [use a separat compilation status per parallel compilation](https://github.com/elixir-lang/elixir/pull/1841)

@josevalim Could you give me some feedback about this, I'm not sure if it goes in the right direction as you explained in issue #1828. ;)


#### [#1842] - (2013-11-03T06:55:10Z) - [Fix typo in CHANGELOG](https://github.com/elixir-lang/elixir/pull/1842)



#### [#1838] - (2013-11-02T04:36:32Z) - [Updated defexception docs](https://github.com/elixir-lang/elixir/pull/1838)



#### [#1834] - (2013-11-01T13:06:11Z) - [fix wrong error message for `nil.func()` call](https://github.com/elixir-lang/elixir/pull/1834)

The expected behavior for `nil.func()` should be:

``` elixir
iex(1)> nil.test()
** (UndefinedFunctionError) undefined function: nil.test/0
   nil.test()
```

Also via cli `elixir -e`:

``` shell
$ elixir -e 'nil.test()'
** (UndefinedFunctionError) undefined function: nil.test/0
   nil.test()
   ....
```

@josevalim as you can see I explicit give an `:no_module` symbol as argument for the module inside of `normalize_exception/2` function to get around the problem that `nil` get in front of every function name inside of the `UndefinedFunctionError` exception.

Maybe it's not the nicest solution, I'm open for feedback and ideas. :)

reference: https://github.com/elixir-lang/elixir/issues/1823


#### [#1835] - (2013-11-01T09:04:54Z) - [Updated Code docs](https://github.com/elixir-lang/elixir/pull/1835)



#### [#1830] - (2013-10-31T05:35:59Z) - [Doc updates for Application.Behaviour and Behaviour](https://github.com/elixir-lang/elixir/pull/1830)



#### [#1829] - (2013-10-30T20:41:32Z) - [underlines within links have to be escaped](https://github.com/elixir-lang/elixir/pull/1829)

@josevalim That's a first attempt to fix the issue.

In links the underline will be escaped with the ansi escape sequence code `4` (underline).
To avoid this behavior it have to be properly escaped.

cheers

PS: I couldn't add the pull-request to the already open issue, so I had to make a separat PR. https://github.com/elixir-lang/elixir/issues/1811


#### [#1827] - (2013-10-30T14:51:17Z) - [Make unicode the default for regular expressions](https://github.com/elixir-lang/elixir/pull/1827)

This doesn't include an option to turn unicode off. Not sure if that's really needed.


#### [#1826] - (2013-10-30T10:04:18Z) - [Completion of . (dot) terminates shell process](https://github.com/elixir-lang/elixir/pull/1826)

Hi,

I run into an error when I try to complete (TAB) after a . (dot).

I use the elixir `HEAD` version https://github.com/elixir-lang/elixir/commit/7120a5e05053c83547c04187ceceb262a06fd023

``` shell
‚ùØ iex
Erlang R16B01 (erts-5.10.2) [source] [64-bit] [smp:8:8] [async-threads:10] [hipe] [kernel-poll:false] [dtrace]

Interactive Elixir (0.10.4-dev) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> .*** ERROR: Shell process terminated! (^G to start new job) ***

=ERROR REPORT==== 30-Oct-2013::10:14:24 ===
Error in process <0.25.0> with exit value: {function_clause,[{string,tokens1,[nil,"(",[]],[{file,"string.erl"},{line,227}]},{'Elixir.IEx.Autocomplete',last_token,2,[{file,"/private/tmp/-1sUr/lib/iex/lib/iex/autocomplete.ex"},{line,112}]},{'Elixir.IEx.Autocomplete',expand...
```

cheers


#### [#1825] - (2013-10-29T20:51:29Z) - [Added advice to clean when building into the README](https://github.com/elixir-lang/elixir/pull/1825)

People seem to have problems building when pulling new sources. Added recommendation to run `make clean` to the README.


#### [#1822] - (2013-10-29T07:24:04Z) - [Cleaned up Record docs](https://github.com/elixir-lang/elixir/pull/1822)



#### [#1813] - (2013-10-28T07:39:55Z) - [Cleaning up Version docs](https://github.com/elixir-lang/elixir/pull/1813)



#### [#1818] - (2013-10-28T06:36:27Z) - [Cleaned up ExUnit docs](https://github.com/elixir-lang/elixir/pull/1818)



#### [#1817] - (2013-10-27T16:27:12Z) - [Doc fix for Kernel.SpecialForms](https://github.com/elixir-lang/elixir/pull/1817)

__DIR__ is missing in the description.


#### [#1816] - (2013-10-27T06:05:20Z) - [Fixing docs typos in IO.ANSI](https://github.com/elixir-lang/elixir/pull/1816)



#### [#1809] - (2013-10-25T17:43:33Z) - [fix defrecord doc error](https://github.com/elixir-lang/elixir/pull/1809)

The defrecord documentation had an errant "user," which was apparently left over from a proposed but never accepted feature. 


#### [#1803] - (2013-10-24T20:40:53Z) - [Document try else clause](https://github.com/elixir-lang/elixir/pull/1803)

The `else` clause in a `try` is documented and a relevant exception has been added.


#### [#1807] - (2013-10-24T18:43:27Z) - [Fixed interpolation per issue 1758](https://github.com/elixir-lang/elixir/pull/1807)

It seems that interpolation wasn't ignoring quoted open parens and others. Interpolation now ignores all characters after an open quote except a non-escaped closed quote.

Also, less-than operators were being confused for half of a binary declaration. I am unaware of and couldn't find any use of single < > which interpolation would care about, so it now only looks for double << >>.


#### [#1805] - (2013-10-24T15:20:41Z) - [Add an 's' to an expresion.](https://github.com/elixir-lang/elixir/pull/1805)



#### [#1804] - (2013-10-24T06:31:36Z) - [Added summary friendly docs to System](https://github.com/elixir-lang/elixir/pull/1804)



#### [#1801] - (2013-10-23T12:40:25Z) - [Make mix work out of the box if it's escriptize-d.](https://github.com/elixir-lang/elixir/pull/1801)

As discussed in IRC


#### [#1800] - (2013-10-23T06:01:41Z) - [Doc typos](https://github.com/elixir-lang/elixir/pull/1800)

Updated CHANGELOG, Tuple, Integer, Float.


#### [#1799] - (2013-10-22T20:45:40Z) - [Fix type of name passed to :code.lib_dir](https://github.com/elixir-lang/elixir/pull/1799)

`:code.lib_dir/1` may only accept an atom in the future, and should only
be passed an atom according to the spec. Found from the following dialyzer warning from #1569:

```
lib/elixir/lib/record/extractor.ex:22: The call code:lib_dir(app::binary() | string()) breaks the contract (Name) -> file:filename() | {'error','bad_name'} when is_subtype(Name,atom())
```

Edit: Note warning at http://www.erlang.org/doc/man/code.html#lib_dir-1

Edit2: This is broken sorry.


#### [#1798] - (2013-10-22T20:45:18Z) - [Fix type of executable passed to Port.open in IEx.CLI.tty_works/0](https://github.com/elixir-lang/elixir/pull/1798)

It should be `Port.open({:spawn, charlist}, ...)` not `Port.open({:spawn, atom}, ...)`. Found by the following dialyzer warning from #1569:

```
lib/iex/lib/iex/cli.ex:68: The call 'Elixir.Port':open({'spawn', 'tty_sl -c -e'},['eof',...]) will never return since it differs in the 1st argument from the success typing arguments: ({'spawn',string()} | {'spawn_driver',[byte()]} | {'spawn_executable',atom() | [atom() | [any()] | char()]} | {'fd',non_neg_integer(),non_neg_integer()},['binary' | 'eof' | 'exit_status' | 'hide' | 'in' | 'nouse_stdio' | 'out' | 'stderr_to_stdout' | 'stream' | 'use_stdio' | {'arg0' | 'args' | 'cd' | 'env' | 'line' | 'packet' | 'parallelism',boolean() | binary() | [binary() | [any()] | char() | {_,_}] | non_neg_integer()}])
```


#### [#1797] - (2013-10-22T20:43:25Z) - [Remove dead code from Protocol.Consolidation.ensure_protcol/1](https://github.com/elixir-lang/elixir/pull/1797)

Found by the following dialyzer warning from #1569:

```
lib/elixir/lib/protocol/consolidation.ex:142: The variable _other can never match since previous clauses completely covered the type {'ok',atom()}
```

Arguably the code is clearer without this patch.


#### [#1791] - (2013-10-22T17:53:10Z) - [Fix Regex specs](https://github.com/elixir-lang/elixir/pull/1791)

A couple of errors in the specs in the `Regex` module were found by the dialyzer warnings in #1569. A warning was:

```
ib/elixir/lib/regex.ex:69: Invalid type specification for function 'Elixir.Regex':compile/2. The success typing is (_,binary() | [any()]) -> {'error',{'invalid_option' | string(),binary() | non_neg_integer()}} | {'ok',{'Elixir.Regex',{'re_pattern',_,_,_},binary(),binary(),'nil' | [atom()]}}
```


#### [#1796] - (2013-10-22T17:51:22Z) - [Fix elixir_errors.erl specs to include binary paths](https://github.com/elixir-lang/elixir/pull/1796)

Previously elixir_errors.erl did not allow binary paths according to its specs. Found by the following dialyzer warnings from #1569:

```
lib/iex/lib/iex/evaluator.ex:119: The call elixir_errors:parse_error(any(),#{#<105>(8, 1, 'integer', ['unsigned', 'big']), #<101>(8, 1, 'integer', ['unsigned', 'big']), #<120>(8, 1, 'integer', ['unsigned', 'big'])}#,"incomplete expression",[]) breaks the contract (non_neg_integer() | [any()],file:filename(),iolist() | atom(),[] | iolist()) -> no_return()
lib/iex/lib/iex/evaluator.ex:144: The call elixir_errors:parse_error(line@1::any(),#{#<105>(8, 1, 'integer', ['unsigned', 'big']), #<101>(8, 1, 'integer', ['unsigned', 'big']), #<120>(8, 1, 'integer', ['unsigned', 'big'])}#,error::any(),token::any()) breaks the contract (non_neg_integer() | [any()],file:filename(),iolist() | atom(),[] | iolist()) -> no_return()
```


#### [#1792] - (2013-10-22T17:46:40Z) - [Fix IEx.Instrospection.beam_specs/1 when no abstract code in beam](https://github.com/elixir-lang/elixir/pull/1792)

Previously `IEx.Introspection.beam_specs/1` would raise an error when a beam did not contain abstract code. This was found due to the following dialyzer warnings from #1569:

```
lib/iex/lib/iex/introspection.ex:225: The pattern 'nil' can never match the type maybe_improper_list()
lib/iex/lib/iex/introspection.ex:236: The pattern 'nil' can never match the type maybe_improper_list()
lib/iex/lib/iex/introspection.ex:255: The pattern 'nil' can never match the type maybe_improper_list()
```


#### [#1793] - (2013-10-22T17:41:04Z) - [Fix Inspect.Algebra.format/3 to handle :infinity correctly](https://github.com/elixir-lang/elixir/pull/1793)

Previous `Inspect.Algebra.format/3` could not handle `:infinity` as a first argument. This patch also corrects some related type specs. These were found by the following dialyzer warnings from #1569:

```
lib/elixir/lib/inspect/algebra.ex:279: Fun application with arguments (d::any(),'doc_nil' | binary() | {'doc_break',binary()} | {'doc_group','doc_nil' | binary() | {_,_} | {_,_,_}} | {'doc_cons','doc_nil' | binary() | {_,_} | {_,_,_},'doc_nil' | binary() | {_,_} | {_,_,_}} | {'doc_nest',non_neg_integer(),'doc_nil' | binary() | {_,_} | {_,_,_}}) will fail since the function has type fun((_,['doc_nil' | binary() | {'doc_break',binary()} | {'doc_group','doc_nil' | binary() | {_,_} | {_,_,_}} | {'doc_cons','doc_nil' | binary() | {_,_} | {_,_,_},'doc_nil' | binary() | {_,_} | {_,_,_}} | {'doc_nest',non_neg_integer(),'doc_nil' | binary() | {_,_} | {_,_,_}}]) -> 'doc_nil' | binary() | {'doc_break',binary()} | {'doc_group','doc_nil' | binary() | {_,_} | {_,_,_}} | {'doc_cons','doc_nil' | binary() | {_,_} | {_,_,_},'doc_nil' | binary() | {_,_} | {_,_,_}} | {'doc_nest',non_neg_integer(),'doc_nil' | binary() | {_,_} | {_,_,_}})
lib/elixir/lib/kernel.ex:2022: The call 'Elixir.Inspect.Algebra':pretty('doc_nil' | binary() | {'doc_break',binary()} | {'doc_group','doc_nil' | binary() | {_,_} | {_,_,_}} | {'doc_cons','doc_nil' | binary() | {_,_} | {_,_,_},'doc_nil' | binary() | {_,_} | {_,_,_}} | {'doc_nest',non_neg_integer(),'doc_nil' | binary() | {_,_} | {_,_,_}},'infinity') will never return since it differs in the 2nd argument from the success typing arguments: ('doc_nil' | binary() | {_,_} | {_,_,_},integer())
```


#### [#1789] - (2013-10-22T17:16:19Z) - [Fix invalid raises in Code](https://github.com/elixir-lang/elixir/pull/1789)

`ArgumentError` were raised with incorrect arguments. Found by dialyzer warnings in #1569. An example of the warning was:

```
lib/elixir/lib/code.ex:172: The call 'Elixir.ArgumentError':exception(<<_:8,_:_*1>>) will never return since it differs in the 1st argument from the success typing arguments: ([{'__exception__' | 'message' | binary(),_}])
```


#### [#1790] - (2013-10-22T17:15:36Z) - [Fix spec for Enum.chunks/4](https://github.com/elixir-lang/elixir/pull/1790)

Resolves the following dialyzer warnings from #1569:

```
lib/elixir/lib/enum.ex:1299: Function chunks/2 has no local return
lib/elixir/lib/enum.ex:1299: The call 'Elixir.Enum':chunks(coll::any(),n::any(),n::any(),'nil') breaks the contract (t(),non_neg_integer(),non_neg_integer(),[any()]) -> [[any()]]
lib/elixir/lib/enum.ex:1325: Function chunks/3 has no local return
lib/elixir/lib/enum.ex:1325: The call 'Elixir.Enum':chunks(_@D0::any(),_@D1::any(),_@D2::any(),'nil') breaks the contract (t(),non_neg_integer(),non_neg_integer(),[any()]) -> [[any()]]
```


#### [#1788] - (2013-10-22T17:14:07Z) - [Fix Version.parse/1 specs](https://github.com/elixir-lang/elixir/pull/1788)

This resolves some dialyzer warnings from #1569, an example is:

```
lib/elixir/lib/version.ex:95: The call 'Elixir.Version':'match?'({'error',_} | {'ok',{'Elixir.Version.Schema',_,_,_,_,_,_}},requirement::any()) will never return since the success typing is ({'Elixir.Version.Schema',_,_,_,_,_,_},binary() | {'Elixir.Version.Requirement',_,[{atom() | tuple(),[any()],[any()]}]}) -> boolean() and the contract is (t(),requirement()) -> boolean()
```


#### [#1787] - (2013-10-22T17:02:50Z) - [Fix typo s/Mix.Shell.error/Mix.shell.error/](https://github.com/elixir-lang/elixir/pull/1787)

Resolves the following dialyzer warning from #1569:

```
lib/mix/lib/mix/rebar.ex:142: Call to missing or unexported function 'Elixir.Mix.Shell':error/1
```


#### [#1786] - (2013-10-22T16:58:49Z) - [Optimise raise/1,2 at compile time](https://github.com/elixir-lang/elixir/pull/1786)

The raise macro can be optimised to infer the type of its first argument at compile time, saving a case a run time. This removes many of the dialyzer warnings from #1569, a sample of these are:

```
lib/eex/lib/eex/compiler.ex:50: Guard test is_binary(_@2::'Elixir.EEx.SyntaxError') can never succeed
lib/eex/lib/eex/compiler.ex:58: Guard test is_binary(_@2::'Elixir.EEx.SyntaxError') can never succeed
lib/eex/lib/eex/tokenizer.ex:79: Guard test is_binary(_@2::'Elixir.EEx.SyntaxError') can never succeed
lib/elixir/lib/access.ex:3: Guard test is_binary(_@4::'Elixir.Protocol.UndefinedError') can never succeed
lib/elixir/lib/access.ex:56: The call _@1:'exception'([]) requires that _@1 is of type atom() | tuple() not <<_:8,_:_*1>>
```


#### [#1785] - (2013-10-22T16:12:25Z) - [Fix docs for the [test_coverage] option of the [mix test]](https://github.com/elixir-lang/elixir/pull/1785)

Fix docs for the following commit.

[Fix status code in mix test]
https://github.com/elixir-lang/elixir/commit/4fc3fc11de37dff41f439140e027a7743e00dc3e


#### [#1783] - (2013-10-21T12:56:51Z) - [Ensure consolidator works when functions are reordered](https://github.com/elixir-lang/elixir/pull/1783)

I could only reproduce this error on one machine but there I could reproduce it consistently. nox confirmed on IRC that erlang can reorder functions.


#### [#1774] - (2013-10-20T22:49:27Z) - [Add Enum.slice(coll, range)](https://github.com/elixir-lang/elixir/pull/1774)

By analogy to the new String.slice function.


#### [#1777] - (2013-10-20T22:34:05Z) - [Fix mix tests](https://github.com/elixir-lang/elixir/pull/1777)

Another fix for #1585


#### [#1775] - (2013-10-20T08:39:54Z) - [Float.parse and Integer.parse Elixir native and fast implementation](https://github.com/elixir-lang/elixir/pull/1775)

The current solution for Integer.parse and Float.parse rely on converting the entire binary string into a charlist, passing it to the erlang native parser and converting back into binary the remainder that the erlang native parser returns. 

When processing big strings, and trying to parse multiple floats / integers in a tight loop, this can cause severe performance degradation due to all the conversions from binary to charlist and vice-versa (it triggers the gc, and makes things very slow). 

I ran into this issue while implementing [Elixir JSON](https://github.com/cblage/elixir-json). My interim solution was converting all binary strings into charlists once when entering the library, but this is not the optimal solution. I would much rather prefer using the Elixir primitives without worrying :)

Cheers,
Carlos


#### [#1771] - (2013-10-18T19:21:44Z) - [Use bitwise and to check if an integer is odd/even](https://github.com/elixir-lang/elixir/pull/1771)



#### [#1772] - (2013-10-18T18:48:21Z) - [:ok should the default gen_fsm reply](https://github.com/elixir-lang/elixir/pull/1772)

`:default_implementation` is a weird atom to use.


#### [#1769] - (2013-10-18T06:09:17Z) - [Add version of String.slice that accepts a Range](https://github.com/elixir-lang/elixir/pull/1769)

Adding `String.slice/2` that accepts a Range, similar to the equivalent method on String in Ruby, with the notable minor exception that this version will return `nil` in all cases of a negative range (eg. `-2..-4` or `5..2`) whereas I believe the Ruby version would return `""` if the start of the range was a valid offset. I implemented it this way for consistency with how `String.slice/3` works, which returns nil for negative offsets.

I am very new to Elixir, so I very much welcome feedback and will gladly make any necessary changes! I'm particularly uncertain if I wrote the `@spec` line correctly.

Thanks!


#### [#1770] - (2013-10-18T06:04:52Z) - [Fix documentation wording on String.split/1](https://github.com/elixir-lang/elixir/pull/1770)

Make the beginning match String.split/3. The "on substrings" bit seemed odd and I liked how String.split/3 phrased it instead.


#### [#1761] - (2013-10-16T08:00:27Z) - [Provide IEx.pry functionality](https://github.com/elixir-lang/elixir/pull/1761)

This allows a developer to hook into some existing process to explore its variables, lexical scope and process info. Please check out the docs for `IEx.pry` and give it a go!


#### [#1759] - (2013-10-12T12:54:41Z) - [Iex history reset](https://github.com/elixir-lang/elixir/pull/1759)



#### [#1750] - (2013-10-10T10:45:30Z) - [Implement protocol consolidation](https://github.com/elixir-lang/elixir/pull/1750)

I still need to write detailed CHANGELOG entries but basically this changes how protocols work in order to make consolidation possible. We get the following from this:
1. Improved fallbacks. A record now fallbacks to the `Tuple` implementation which then fallbacks to `Any` if no record implementation is available;
2. No need for `@only` and `@except` attributes. They were available as an optimization mechanism which is useless due to consolidation. The consolidation compiles to very fast binary tree lookups via pattern matching, there is no linear lookup;
3. Falling back to the `Any` implementation is now opt-in since implementing `Any` is a bad idea in the majority of the cases (more info in the `defprotocol` docs);
4. Speed, lots of speed. After the protocol is consolidated, dispatching to an existing record implementation is about 20x times faster. Dispatching to a fallback is about 1000x faster, as we don't trigger the code loading mechanisms. If you want to run the benchmark on your own, it is [available here](https://gist.github.com/josevalim/6529394df9950b19f6cb);
5. It is now easy to query if a given type implements a protocol, via the `impl_for/1` function available to every protocol;


#### [#1754] - (2013-10-09T14:28:15Z) - [Fix indentation on doc example](https://github.com/elixir-lang/elixir/pull/1754)



#### [#1753] - (2013-10-09T06:48:03Z) - [Remove unused warning](https://github.com/elixir-lang/elixir/pull/1753)



#### [#1740] - (2013-10-02T18:32:52Z) - [Allow for string names when instantiating or updating records](https://github.com/elixir-lang/elixir/pull/1740)

This provides a great added benefit of allowing to import untrusted
dictionary-like structures without having to sanitize keys before
converting them to atoms, without the risk of running out of atoms.

The performance for atom field names remains the same, string names
are somewhat slower (as expected)


#### [#1733] - (2013-09-29T13:11:28Z) - [Add validity checking for Inspect.Algebra documents](https://github.com/elixir-lang/elixir/pull/1733)

Fix for #1687.


#### [#1734] - (2013-09-29T13:11:18Z) - [`Dict.size` incorrectly returning `true` when left dict is subset of right dict](https://github.com/elixir-lang/elixir/pull/1734)

Fixes bug where `true` was incorrectly returned for `Dict.equal?` when the 1st argument was a subset of the 2nd argument.

e.g:

``` elixir
iex> h1 = HashDict.new(foo: 1, bar: 2)
iex> h2 = HashDict.new(foo: 1, bar: 2, baz: 3)
iex> Dict.equal?(h1, h2)
true # OOPS
iex> Dict.equal?(h2, h1)
false # works as expected other way round
```

The code to check equality was checking size (incorrectly), and then checking to see if every element in the first dict was present in the 2nd.

However, `size` was being used instead of `Dict.size`. This ended up calling `Kernel.size` instead - and would always return `true` regardless of whever the actual size of the `Dict` arguments were the same or not.


#### [#1725] - (2013-09-25T09:23:11Z) - [Add a tricky pattern example for assert_receive](https://github.com/elixir-lang/elixir/pull/1725)

Closes #1724.

I think it's a matter of first experience -- to learn the fact that `assert_receive` takes a pattern. I have simply added the tricky case of `^x` as another example.


#### [#1726] - (2013-09-25T09:22:37Z) - [Kernel.raise should be a macro to avoid messing up the stack trace](https://github.com/elixir-lang/elixir/pull/1726)

Closes #1723 


#### [#1720] - (2013-09-23T09:42:58Z) - [Minor english correction](https://github.com/elixir-lang/elixir/pull/1720)



#### [#1716] - (2013-09-17T21:44:36Z) - [Fix `compile: false` dependency option](https://github.com/elixir-lang/elixir/pull/1716)



#### [#1715] - (2013-09-16T22:19:40Z) - [Preserve correct order when deps are overriding](https://github.com/elixir-lang/elixir/pull/1715)



#### [#1693] - (2013-09-15T17:12:45Z) - [Add Stream.unfold](https://github.com/elixir-lang/elixir/pull/1693)

This generates a possibly finite stream of values.

Unlike `Stream.iterate`, which passes the previously created value to the function,  `Stream.unfold` passes an accumulator to the function. Hence the different name.

(EDIT 2013-09-15: Change name from generate to unfold based on Jos√©'s request in #1713)


#### [#1714] - (2013-09-15T17:11:23Z) - [Make --sup the default for mix](https://github.com/elixir-lang/elixir/pull/1714)

Closes #1706


#### [#1711] - (2013-09-12T13:44:14Z) - [An example for Regex.compile and correction of small typos in Regex docs.](https://github.com/elixir-lang/elixir/pull/1711)

- Add missing 's'
- Add some missing Markdown markup.
- Add two examples for Regex.compile


#### [#1635] - (2013-09-10T21:21:11Z) - [Add a take_nth function](https://github.com/elixir-lang/elixir/pull/1635)

This is analogous to Clojure's `take-nth`. Thought you might be interested.


#### [#1637] - (2013-09-10T15:01:19Z) - [Typedoc rebased](https://github.com/elixir-lang/elixir/pull/1637)

Like #1627 but rebased on newest master.


#### [#1614] - (2013-09-10T12:51:10Z) - [Move Mix.Version to Version in kernel.](https://github.com/elixir-lang/elixir/pull/1614)

I need to write a package manager for my language, and it would really be a shame if I had to reinvent all of this glorious stuff just because it sits in Mix.


#### [#1700] - (2013-09-09T20:24:55Z) - [List types in docs giving the idea of aliases](https://github.com/elixir-lang/elixir/pull/1700)

The order was changed to follow to explanation in the next paragraph.


#### [#1702] - (2013-09-09T14:44:08Z) - [Update IO docs and clarify bin* functions](https://github.com/elixir-lang/elixir/pull/1702)



#### [#1703] - (2013-09-09T14:43:51Z) - [Update quote docs](https://github.com/elixir-lang/elixir/pull/1703)

:binding => :bind_quoted.


#### [#1698] - (2013-09-09T12:50:34Z) - [Rename File.IteratorError -> IO.StreamError](https://github.com/elixir-lang/elixir/pull/1698)

Fixes #1696


#### [#1699] - (2013-09-09T12:38:39Z) - [Handling of multiple heredocs on the same line](https://github.com/elixir-lang/elixir/pull/1699)

Fixes #1697.

Adds an ability to have multiple heredocs on the same line like this:

```
[ """, """, 1 ]
a
"""
b
"""
```

which results in:

```
[ "a\n", "b\n", 1 ]
```


#### [#1689] - (2013-09-07T10:43:55Z) - [Improve String.split and Regex.split docs for empty patterns.](https://github.com/elixir-lang/elixir/pull/1689)

Include examples showing that splitting with an empty pattern results in a final (trim-able) empty string, as discussed in #1688.

This behavior is different than developers coming from Ruby, Perl, and other languages may initially expect.


#### [#1685] - (2013-09-04T11:32:24Z) - [Make clear behaviour of assignments in comprehensions](https://github.com/elixir-lang/elixir/pull/1685)

Related #1684.


#### [#1683] - (2013-09-02T19:39:05Z) - [Fix handling pre/build data when minor/patch is missing in Mix.Version](https://github.com/elixir-lang/elixir/pull/1683)

Closes #1681.


#### [#1675] - (2013-08-31T12:34:32Z) - [Support negative indicies in Enum.at/fetch/fetch!](https://github.com/elixir-lang/elixir/pull/1675)



#### [#1671] - (2013-08-31T11:27:46Z) - [No longer trim by default when splitting](https://github.com/elixir-lang/elixir/pull/1671)

Further discussion here:

  https://groups.google.com/forum/#!topic/elixir-lang-core/66gb3J0bnUA


#### [#1672] - (2013-08-31T11:21:47Z) - [Return error on unsupported options in Regex.compile](https://github.com/elixir-lang/elixir/pull/1672)

As discussed on IRC with @josevalim.


#### [#1669] - (2013-08-31T10:16:08Z) - [URI.parse supports IPv6 addresses](https://github.com/elixir-lang/elixir/pull/1669)

Solves https://github.com/elixir-lang/elixir/issues/1663

Using a very simplified regex for IPv6 addresses, should we go for something more precise such as http://vernon.mauery.com/content/projects/linux/ipv6_regex ?


#### [#1667] - (2013-08-29T10:16:27Z) - [Fix Stream.take/2 and Stream.take_while/2 for Stream.Lazy](https://github.com/elixir-lang/elixir/pull/1667)

When an accumulator is thrown from a `Stream.Lazy` fun, it doesn't get unwrapped correctly for nested `Stream.Lazy`s.

Fixes #1664


#### [#1668] - (2013-08-29T10:07:54Z) - [Markdown rendering fix](https://github.com/elixir-lang/elixir/pull/1668)

Used to emphasize instead of keeping the underscore, see: http://elixir-lang.org/docs/stable/Supervisor.Behaviour.html


#### [#1662] - (2013-08-28T11:58:58Z) - [Add note to Enum to clarify what's returned](https://github.com/elixir-lang/elixir/pull/1662)

In particular clarify that infinite streams don't work with many of the functions.

The documentation didn't mention that very clearly yet and it's an easy mistake to make.


#### [#1660] - (2013-08-28T11:54:39Z) - [Add Stream.concat/1,2 and Enum.concat/1,2](https://github.com/elixir-lang/elixir/pull/1660)

For lazy and non-lazy concatenation of enumerables.


#### [#1658] - (2013-08-27T10:15:05Z) - [Add bit about documentation style to CONTRIBUTING](https://github.com/elixir-lang/elixir/pull/1658)

A bit about the preferred style of documentation. See https://groups.google.com/d/msg/elixir-lang-core/40vwemfdE6Q/WjLgS7d4mtsJ


#### [#1651] - (2013-08-26T18:23:42Z) - [Add support for `trim` option to `String.split` and `Regex.split`](https://github.com/elixir-lang/elixir/pull/1651)

To support the trim option I had to reimplement `split` to remove all empty strings from the result.

Here's an example:

``` elixir
iex> String.split(" a b c ", " ", trim: false)
["", "a", "b", "c", ""]
iex> String.split(" a b c ", " ", trim: true)
["a", "b", "c"]
```


#### [#1655] - (2013-08-26T18:22:50Z) - [Enum.slice returns nil when start is out of bounds](https://github.com/elixir-lang/elixir/pull/1655)



#### [#1652] - (2013-08-26T12:42:10Z) - [Implement `Stream.flat_map/2`](https://github.com/elixir-lang/elixir/pull/1652)

This is a pretty basic implementation. It still fails like `Enum.flat_map/2` if the `map` function does not return a list.

Fixes #1642


#### [#1654] - (2013-08-26T12:26:26Z) - [Use ifnone in Enum.find for all collections](https://github.com/elixir-lang/elixir/pull/1654)

Closes #1653


#### [#1650] - (2013-08-26T01:08:48Z) - [Add Enum.slice/3](https://github.com/elixir-lang/elixir/pull/1650)



#### [#1648] - (2013-08-25T10:45:37Z) - [Allow Macro.escape([1|2])](https://github.com/elixir-lang/elixir/pull/1648)

This fixes #1646

I'm not 100% happy with this change, it adds one list traversal in the common case and another in the uncommon case (improper list). However I couldn't see a better way. I suspect a more elegant solution would involve rewriting do_splice to not use a reversed list as input.


#### [#1643] - (2013-08-24T18:15:21Z) - [Add --verbose to elixirc](https://github.com/elixir-lang/elixir/pull/1643)

This fixes #1618


#### [#1645] - (2013-08-24T12:21:14Z) - [Keep empty strings when splitting](https://github.com/elixir-lang/elixir/pull/1645)

To stay consistent with both `String.split/2` and `:binary.split` we
need to keep around empty strings that are accumulated while splitting.
In the future we could support the `:trim` option to consistently remove
these in call calls to `String.split`.

Fixes #1636


#### [#1644] - (2013-08-24T12:02:29Z) - [Fixed doc typos in String and Node](https://github.com/elixir-lang/elixir/pull/1644)



#### [#1638] - (2013-08-23T09:31:27Z) - [Fixed typo in Enum docs](https://github.com/elixir-lang/elixir/pull/1638)



#### [#1629] - (2013-08-22T06:48:59Z) - [Add a pair of even and odd checking functions](https://github.com/elixir-lang/elixir/pull/1629)



#### [#1634] - (2013-08-21T20:24:23Z) - [Fixed doc typos in Code and Path](https://github.com/elixir-lang/elixir/pull/1634)



#### [#1630] - (2013-08-21T08:30:26Z) - [Add chunks_by](https://github.com/elixir-lang/elixir/pull/1630)



#### [#1632] - (2013-08-21T07:01:22Z) - [Fixed typos in CHANGELOG.md](https://github.com/elixir-lang/elixir/pull/1632)



#### [#1626] - (2013-08-20T09:38:44Z) - [Refactored Mix.Tasks.Local.Install to make it more explicit](https://github.com/elixir-lang/elixir/pull/1626)

In an attempt to resolve the first bug for #1585, I refactored this code a bit to make at more explicit; feel free to accept or refuse.


#### [#1624] - (2013-08-20T07:49:47Z) - [Add Enum.chunks](https://github.com/elixir-lang/elixir/pull/1624)

This adds a `chunks` function that is essentially the same as Clojure's [partition](http://clojure.github.io/clojure/clojure.core-api.html#clojure.core/partition).

Let me know if the examples/tests look good and if there are others you'd like added.


#### [#1625] - (2013-08-20T07:14:50Z) - [Fixed doc typos in IEx.Helpers](https://github.com/elixir-lang/elixir/pull/1625)



#### [#1621] - (2013-08-18T19:43:38Z) - [Fix for Mix.Version comparisons with dev versions ](https://github.com/elixir-lang/elixir/pull/1621)

This should fix #1620, more edge case tests would be nice tho.


#### [#1616] - (2013-08-17T07:10:23Z) - [Add underscore for avoiding variable unused warning](https://github.com/elixir-lang/elixir/pull/1616)

Just showing some warnings at compile.


#### [#1610] - (2013-08-16T06:34:34Z) - [Fixed comment typo in lib/elixir/src/elixir_translator.erl](https://github.com/elixir-lang/elixir/pull/1610)



#### [#1611] - (2013-08-16T06:32:18Z) - [Fix typo in CHANGELOG.md](https://github.com/elixir-lang/elixir/pull/1611)



#### [#1608] - (2013-08-15T18:56:22Z) - [Fixed typos in Mix.Shell.Process docs](https://github.com/elixir-lang/elixir/pull/1608)

Made `put_app` private as well.


#### [#1606] - (2013-08-15T12:24:53Z) - [Macro.to_string: don't add unneeded binop parens](https://github.com/elixir-lang/elixir/pull/1606)

This changes the `Macro.to_string` output of (quoted) `1+2+3+4` from
`((1 + 2) + 3) + 4` to `1 + 2 + 3 + 4`. Fixes #1605.


#### [#1602] - (2013-08-15T06:53:52Z) - [Cleaned up Kernel.iolist_to_binary/1 docs](https://github.com/elixir-lang/elixir/pull/1602)



#### [#1604] - (2013-08-15T06:51:56Z) - [Update file.ex](https://github.com/elixir-lang/elixir/pull/1604)

fixed typo: opened with "two" modes


#### [#1597] - (2013-08-15T06:51:18Z) - [Improve DocTest indentation handling](https://github.com/elixir-lang/elixir/pull/1597)

Closes #1350.


#### [#1601] - (2013-08-14T21:04:32Z) - [Macro.to_string handles access and kw-lists nicer](https://github.com/elixir-lang/elixir/pull/1601)



#### [#1600] - (2013-08-14T18:52:42Z) - [do_justify should be private](https://github.com/elixir-lang/elixir/pull/1600)



#### [#1592] - (2013-08-14T06:27:05Z) - [Return an empty string from slice with valid index](https://github.com/elixir-lang/elixir/pull/1592)

To keep in line with ruby semantics of
[`String#slice`](http://ruby-doc.org/core-2.0/String.html#method-i-slice)
slice should return an empty string instead of nil when the starting
index is valid even if the length is 0.

Fixes #1591


#### [#1593] - (2013-08-14T06:27:04Z) - [Implement string justification functions](https://github.com/elixir-lang/elixir/pull/1593)

:warning: Not yet ready to merge. Depends on https://github.com/elixir-lang/elixir/pull/1592.

Adding helper functions for string justification was mentioned here: https://github.com/elixir-lang/elixir/issues/1544#issuecomment-22068194

Any thoughts or suggestions? Totally open to changing the implementation.


#### [#1596] - (2013-08-14T05:50:08Z) - [Add example to Enum.take docs using negative count.](https://github.com/elixir-lang/elixir/pull/1596)

Outside of experimenting/viewing the `Enum.take` source, the Enum.take docs don't mention being able to use a negative count to exclude the last n items. A simple example in the docs should be helpful to those using `h Enum.take` from iex.


#### [#1590] - (2013-08-12T14:17:40Z) - [Fixed Kernel.defrecord arity in docs](https://github.com/elixir-lang/elixir/pull/1590)



#### [#1587] - (2013-08-12T07:37:03Z) - [Process fix](https://github.com/elixir-lang/elixir/pull/1587)

Some fixes for Process.


#### [#1588] - (2013-08-12T07:36:50Z) - [Support removing unicode characters with strip](https://github.com/elixir-lang/elixir/pull/1588)

Thanks for the suggested fix @josevalim

Fixes #1586


#### [#1589] - (2013-08-12T06:08:02Z) - [Fix typo in File.rmdir/1](https://github.com/elixir-lang/elixir/pull/1589)



#### [#1561] - (2013-08-11T09:54:18Z) - [Improve OptionParser switch validation](https://github.com/elixir-lang/elixir/pull/1561)

Closes #1537.

This adds a third element to the tuple returned from OptionParser.parse/2 when the value for an option doesn't match its switch type.


#### [#1584] - (2013-08-11T09:48:13Z) - [Return error when tokenizing oversized atom](https://github.com/elixir-lang/elixir/pull/1584)

When "atomizing" an unsafe string, we need to make sure the atom length
is going to be less than the system limit (255). Any function calling
`unsafe_to_atom` checks for an error and returns it if present.

Fixes #1384


#### [#1577] - (2013-08-10T17:08:42Z) - [Force recompile of project when elixir version changes](https://github.com/elixir-lang/elixir/pull/1577)



#### [#1579] - (2013-08-10T13:42:38Z) - [Add location of overridden def in warning message](https://github.com/elixir-lang/elixir/pull/1579)

When a def is overridden (for example because it had multiple clauses and a different def was put between two clauses) it would be nice to have the location of the original def as well, not just the location of the redefined def. This adds
the original def's filename and line number in the format suggested by #1559.

One potential problem with the patch as is is that the filename is an absolute path, so it could be a bit long.


#### [#1578] - (2013-08-10T08:28:43Z) - [Add Enum.flat_map](https://github.com/elixir-lang/elixir/pull/1578)

Returns a new collection appending the result of invoking `fun` on each corresponding item of `collection`.
Given function should return a list.

This similar to Scala's `flatMap`, Haskell's `>>=` and it uses Erlang's `lists:flatmap` when collection is a list.


#### [#1574] - (2013-08-09T06:37:11Z) - [Fixed doc typos in Dict](https://github.com/elixir-lang/elixir/pull/1574)



#### [#1571] - (2013-08-09T06:37:02Z) - [added Dict.Behaviour](https://github.com/elixir-lang/elixir/pull/1571)

Dict.Behaviour helper, as discussed [here](https://groups.google.com/forum/?fromgroups#!topic/elixir-lang-core/BBtbdOv5FcI)

A couple of poins/issues:
1. Perhaps it would be useful if `use Dict.Behaviour` automatically generates `@behaviour Dict`?
2. `Dict.Behaviour` relies on reduce. However, this is not required by the `@behaviour Dict`. Perhaps it would make sense to add this requirement to the behaviour.
3. `HashDict` now relies on `Dict.Behaviour`. This is mostly straightforward, except in `merge` which in `HashDict` has multiple clauses. I made only the last clause to call the default implementation.
4. The doctests rely on existence of `dict_impl`, as suggested in the mailing list thread. This will work only if the dict implementation contains `new/0` and `new/1`. This is again not enforced anywhere.
5. I didn't document the generated functions, because `HashDict` also doesn't document them. If this is needed let me know.


#### [#1567] - (2013-08-08T06:40:01Z) - [Fixed doc typos in List and Enum](https://github.com/elixir-lang/elixir/pull/1567)



#### [#1562] - (2013-08-07T10:49:01Z) - [Make System.get_env/0 behave sanely.](https://github.com/elixir-lang/elixir/pull/1562)

The format returned by Erlang is fairly useless for most real world purposes, so do the splitting work for people who call this function. This also makes the function match what the type specs say.


#### [#1558] - (2013-08-07T05:45:58Z) - [List.replace_at](https://github.com/elixir-lang/elixir/pull/1558)

This is motivated by the comment from [here](https://groups.google.com/forum/?fromgroups#!topic/elixir-lang-talk/b4bcdTI1fpA).

I added replace_at to the List module. Even such seemingly simple intervention raised some questions:
1. Should an exception be raised if a target position is out of bounds? Currently, the unmodified list is returned. 
2. I used `List.insert_at` as a role model. By doing this I have noticed that it (and by extension `List.replace_at`) is not tail recursive. I don't know if this is accidental or by design.
3. I noticed and fixed a typo in doc for insert_at :-)


#### [#1557] - (2013-08-06T19:15:07Z) - [Add regex pattern support to String.replace](https://github.com/elixir-lang/elixir/pull/1557)



#### [#1556] - (2013-08-06T13:53:07Z) - [Fix for #1555](https://github.com/elixir-lang/elixir/pull/1556)

Some parameters are passed into the batch file already quoted. Test specifically for this.


#### [#1552] - (2013-08-06T12:34:44Z) - [IEx helpers r and c can handle erlang sources](https://github.com/elixir-lang/elixir/pull/1552)



#### [#1554] - (2013-08-05T21:14:09Z) - [Pass clean arguments to deps.clean](https://github.com/elixir-lang/elixir/pull/1554)

In regards to #1550 when you call `mix clean --all` `Mix.Tasks.Clean.run` delegates to `deps.clean` if the `--all` option is passed, however the arguments aren't being passed to `deps.clean` and therefore an error is being raised. `deps.clean` expects either a dependency name or the `--all` flag. This pull request just passes the arguments supplied to `mix clean` onto `mix deps.clean`.


#### [#1546] - (2013-08-04T18:53:06Z) - [Fix default shutdown of child supervisors to infinity](https://github.com/elixir-lang/elixir/pull/1546)

A supervisor should wait for a child supervisor to shutdown its
children, and not kill it. By killing a supervisor you may prevent the
correct termination of processes further down the supervision tree.


#### [#1545] - (2013-08-04T16:38:35Z) - [Ensure even a greater level of quiteness when --quiet is used in deps](https://github.com/elixir-lang/elixir/pull/1545)

Before (on deps.get --quiet):

```
==> project
* Compiling project_p1
==> project_p2
* Compiling project_p1
* Compiling project
* Compiling project
==> project_p3
* Compiling project_p1
* Compiling project
* Compiling project
==> project_p4
* Compiling project_p1
* Compiling project
* Compiling project
==> project_p5
* Compiling project_p1
* Compiling project
* Compiling project
```

Now:

(empty)

And yet when there's something to compile, it prints enough to know what app is compiled, etc.


#### [#1542] - (2013-08-04T07:46:34Z) - [Allow for strings in iex h helper](https://github.com/elixir-lang/elixir/pull/1542)

Closes #1540.


#### [#1532] - (2013-08-03T13:43:35Z) - [Issue 1531 - fix issue with slow batch files.](https://github.com/elixir-lang/elixir/pull/1532)



#### [#1529] - (2013-08-02T05:56:04Z) - [Fixed doc typos in Macro](https://github.com/elixir-lang/elixir/pull/1529)



#### [#1528] - (2013-08-01T18:37:02Z) - [Fixed doc typos in Regex](https://github.com/elixir-lang/elixir/pull/1528)



#### [#1521] - (2013-08-01T06:15:05Z) - [Fix Stream bugs and add more composing tests](https://github.com/elixir-lang/elixir/pull/1521)

Fix Stream.take_while looping infinitely when given lazy stream.
Fix Stream.take and Stream.take_while calling fun one extra time.
Add more tests where Stream functions are given streams.


#### [#1519] - (2013-07-31T10:58:31Z) - [Fixing doc typos in File](https://github.com/elixir-lang/elixir/pull/1519)



#### [#1517] - (2013-07-30T12:42:10Z) - [Fixed problem with elixir.bat removing exclamation marks from command line](https://github.com/elixir-lang/elixir/pull/1517)

![image](https://f.cloud.github.com/assets/155977/877910/038df938-f900-11e2-9a91-878f72f684af.png)


#### [#1514] - (2013-07-29T06:35:39Z) - [Fixed typos in Enum docs](https://github.com/elixir-lang/elixir/pull/1514)



#### [#1509] - (2013-07-29T06:34:43Z) - [Return values for Code.eval_string and Code.eval_quoted](https://github.com/elixir-lang/elixir/pull/1509)

Fixes Issue #1506. Plus addition doc cleanup.


#### [#1513] - (2013-07-29T06:34:29Z) - [Fix Enum.at docs](https://github.com/elixir-lang/elixir/pull/1513)



#### [#1511] - (2013-07-28T20:50:32Z) - [Move definition of with_index below](https://github.com/elixir-lang/elixir/pull/1511)

Right now it's defined in the middle of two definitions of max function:

``` elixir
def max(collection)
# ...
end

def with_index(collection)
# ...
end

def max([h|t], fun)
# ...
end
```


#### [#1507] - (2013-07-28T17:55:05Z) - [revive a non-functioning test](https://github.com/elixir-lang/elixir/pull/1507)

tested on Windows


#### [#1510] - (2013-07-28T17:54:33Z) - [Dont escape " in shell commands on windows](https://github.com/elixir-lang/elixir/pull/1510)



#### [#1502] - (2013-07-26T20:52:59Z) - [Fixed docs typos and added code markers around functions in docs](https://github.com/elixir-lang/elixir/pull/1502)



#### [#1501] - (2013-07-26T20:11:57Z) - [fixing a test to also work in Windows](https://github.com/elixir-lang/elixir/pull/1501)

used to do this:
'MIX_ENV' is not recognized as an internal or external command,
operable program or batch file.
Tested to work on both Windows and Linux.
However the following is seen on console:
Mix requires the compile path "ebin" to be inside a directory with the
 same name as the application name :no_mixfile,
got "s:/workspace.elixir.2013/elixir/lib/mix/tmp/Mix.CLITest/test env/ebin"

quick test with `make test_mix`

I notice I forgot to put spaces around the `=` should I add a new commit fixing those or how would you go about doing that if it were necessary (assuming extra commits are not an option **EDIT:** ok i'm reading about rebase)? (and I forgot an extra word there `afterwards`)


#### [#1497] - (2013-07-26T06:24:09Z) - [Trivial wording changes in the Changelog](https://github.com/elixir-lang/elixir/pull/1497)



#### [#1492] - (2013-07-25T06:30:58Z) - [Fixed Kernel.match? example. Added formatting to Kernel docs.](https://github.com/elixir-lang/elixir/pull/1492)



#### [#1487] - (2013-07-24T15:52:43Z) - [Fixed docs typos in recent commits](https://github.com/elixir-lang/elixir/pull/1487)



#### [#1485] - (2013-07-23T20:51:08Z) - [Fixed typos in Mix.Tasks.Test docs](https://github.com/elixir-lang/elixir/pull/1485)



#### [#1481] - (2013-07-23T11:10:47Z) - [Split @protocol into @protocol and @for and add __impl__(:for)](https://github.com/elixir-lang/elixir/pull/1481)

Fix for #1479.


#### [#1477] - (2013-07-23T06:43:51Z) - [Updated GenFSM](https://github.com/elixir-lang/elixir/pull/1477)

Fixed doc typos. Updated example code to handle more cases and removed an unneeded state.


#### [#1478] - (2013-07-23T06:43:36Z) - [Wrap Mix.Shell.cmd with " instead of '](https://github.com/elixir-lang/elixir/pull/1478)

Single quotes can't be escaped in the shell so commands containing '
will not work. Instead wrap the command in double quotes that can be
escaped and escape " in the command.


#### [#1476] - (2013-07-22T10:46:09Z) - [Add String.to_char_list and String.from_char_list](https://github.com/elixir-lang/elixir/pull/1476)



#### [#1473] - (2013-07-22T06:23:21Z) - [Add the clear helper, which cleared the screen. Also introduced the ...](https://github.com/elixir-lang/elixir/pull/1473)

...convention that if a helper returns dont_display_result/0, then we skip the inspecting of the result. Changed the introspection helpers h, s, and t to use this.


#### [#1474] - (2013-07-22T06:16:45Z) - [Fixed typos in Mix.Tasks.Compile.Erlang and Mix.Tasks.Test](https://github.com/elixir-lang/elixir/pull/1474)



#### [#1470] - (2013-07-21T09:53:11Z) - [Updated windows elixir.bat to use -pa instead of -env ERL_LIBS](https://github.com/elixir-lang/elixir/pull/1470)

Fixes #1469

As [requested](https://github.com/elixir-lang/elixir/commit/b830485541dba7b9f4ed5943aed023b61717218d#commitcomment-3603075) by @josevalim 


#### [#1460] - (2013-07-21T08:04:59Z) - [Add String.reverse to reverse the given string.](https://github.com/elixir-lang/elixir/pull/1460)



#### [#1468] - (2013-07-21T07:17:48Z) - [Fixed doc typos in Mix.Projects and Mix.Utils](https://github.com/elixir-lang/elixir/pull/1468)



#### [#1467] - (2013-07-20T20:32:26Z) - [Add Enum.shuffle](https://github.com/elixir-lang/elixir/pull/1467)

Enum.shuffle returns a list of collection elements shuffled.


#### [#1466] - (2013-07-20T19:23:02Z) - [Add MIX_GIT_FORCE_HTTPS system environment var](https://github.com/elixir-lang/elixir/pull/1466)

Fixes #1421.


#### [#1465] - (2013-07-20T15:56:09Z) - [Dont raise on erroneous rebar.config.script](https://github.com/elixir-lang/elixir/pull/1465)

Fixes #1457.


#### [#1464] - (2013-07-20T15:35:09Z) - [Remove deprecation warn on regex dep requirement](https://github.com/elixir-lang/elixir/pull/1464)



#### [#1458] - (2013-07-20T11:28:13Z) - [Add List.keysort](https://github.com/elixir-lang/elixir/pull/1458)

Receives a list of tuples and sorts the items at position `pos` of the tuples.


#### [#1461] - (2013-07-20T11:28:03Z) - [reverse @__behaviour_docs__](https://github.com/elixir-lang/elixir/pull/1461)

Behaviour callback docs are top accumulated as module attributes, so are therefore stored internally in reverse order to how they were added.

However, they weren't being reversed again when being accessed, so ended up backwards. 

Fix is to just reverse them when we get them back out to put them in the right order.

This is used by ex_doc, and callbacks are listed backwards otherwise (e.g. see http://elixir-lang.org/docs/stable/Dict.html )

Raised initially as https://github.com/elixir-lang/ex_doc/pull/47 , but made fix here instead as recommended by @josevalim


#### [#1454] - (2013-07-19T20:09:05Z) - [Issue #1448, Mix.Tasks.Compiler.*.manifests returns complete path](https://github.com/elixir-lang/elixir/pull/1454)

Proposed fix for Issue #1448

Updated places where external tasks were prepending the `compile_path` to the manifest name. Did not update internal instances on `Path.join(compile_path, manifest)`, but that would be straightforward.

Assuming that's what you had in mind.


#### [#1453] - (2013-07-19T17:51:31Z) - [Fixed doc typos in Mix.Tasks.Escriptize](https://github.com/elixir-lang/elixir/pull/1453)



#### [#1449] - (2013-07-19T16:35:24Z) - [Possible fix for Issue #1441](https://github.com/elixir-lang/elixir/pull/1449)

Updated Mix.Tasks.Compile.\* to generate a CompileError exception if compilation fails. Had to munge some of the existing test cases to catch the exception, which prevented verification of the compiler error message. Not sure that's entirely acceptable.

Most of the commits are additional test fixtures to verify failure of the different compilers.


#### [#1452] - (2013-07-19T14:10:08Z) - [Move the Elixir version requirement check to a better place](https://github.com/elixir-lang/elixir/pull/1452)

Supposed fix for #1451.


#### [#1450] - (2013-07-19T05:39:54Z) - [Make Mix.SystemVersionError message more meaningful](https://github.com/elixir-lang/elixir/pull/1450)



#### [#1447] - (2013-07-18T06:03:20Z) - [Fixed typos in Kernel.ParallelCompiler docs](https://github.com/elixir-lang/elixir/pull/1447)



#### [#1444] - (2013-07-17T13:08:47Z) - [Fixed doc typos in Mix.deps and IO](https://github.com/elixir-lang/elixir/pull/1444)



#### [#1435] - (2013-07-17T09:18:22Z) - [Check mix path deps to see if we need recompile project](https://github.com/elixir-lang/elixir/pull/1435)

'mix compile' will check the manifest files' mtime of all mix path
dependencies - if they are newer then the local .compile.elixir file
we need to recompile.


#### [#1439] - (2013-07-17T06:50:28Z) - [Add @protocol attribute to defimpl](https://github.com/elixir-lang/elixir/pull/1439)



#### [#1438] - (2013-07-17T06:11:55Z) - [Fixed doc typos in Mix.Tasks.Compile.*](https://github.com/elixir-lang/elixir/pull/1438)



#### [#1433] - (2013-07-16T10:55:30Z) - [Rename mix flag --no-check -> --no-deps-check, document it and use it everywhere](https://github.com/elixir-lang/elixir/pull/1433)

Closes #1430.


#### [#1422] - (2013-07-16T09:45:18Z) - [Add manifests for yecc, leex and erlang compilers](https://github.com/elixir-lang/elixir/pull/1422)

Ensures that files are cleaned better and that the correct files are deleted on recompiles.

Also makes sure that elixir code is recompiled when erlang files change.


#### [#1425] - (2013-07-16T09:42:56Z) - [Mix.Tasks.Help.run([]) outputs information about current default task](https://github.com/elixir-lang/elixir/pull/1425)

Hi,

`mix help` now outputs information about the current default mix task.

Cheers


#### [#1427] - (2013-07-16T09:04:45Z) - [Fixed doc typos in Kernel.Special_Forms](https://github.com/elixir-lang/elixir/pull/1427)



#### [#1429] - (2013-07-16T09:04:19Z) - [Fixed doc typos in ExUnit](https://github.com/elixir-lang/elixir/pull/1429)



#### [#1417] - (2013-07-12T06:35:49Z) - [Fix for Issue 1414, Record.__record__(:index) syntax](https://github.com/elixir-lang/elixir/pull/1417)

Left Record.**index** function in place, did not add an "[WARNING]" output message.


#### [#1419] - (2013-07-12T06:34:55Z) - [kwlist are inspected as a list of tuples with raw: true](https://github.com/elixir-lang/elixir/pull/1419)

As discussed on the elixir-talk list:

```
iex(1)> Kernel.inspect [a: 1,b: 2], raw: true
"[{:a, 1}, {:b, 2}]"
iex(2)> Kernel.inspect [a: 1,b: 2], raw: false
"[a: 1, b: 2]"
iex(3)> Kernel.inspect [a: 1,b: 2]            
"[a: 1, b: 2]"
```


#### [#1402] - (2013-07-12T06:34:21Z) - [Fixed typos in Mix.Deps.Retriever docs](https://github.com/elixir-lang/elixir/pull/1402)



#### [#1415] - (2013-07-11T14:21:36Z) - [Fixed doc typos in Mix.Tasks.Test](https://github.com/elixir-lang/elixir/pull/1415)



#### [#1412] - (2013-07-10T22:24:11Z) - [Fixed doc typos in OptionParser](https://github.com/elixir-lang/elixir/pull/1412)

Also added a new doctest for parse_head


#### [#1408] - (2013-07-10T14:04:29Z) - [Delete files in the manifest instead of removing the loadpath](https://github.com/elixir-lang/elixir/pull/1408)

This should close #1405.


#### [#1407] - (2013-07-10T13:12:58Z) - [Makefile improvements](https://github.com/elixir-lang/elixir/pull/1407)

See commits.


#### [#1406] - (2013-07-10T06:26:00Z) - [Fixed typos in various Mix modules](https://github.com/elixir-lang/elixir/pull/1406)



#### [#1403] - (2013-07-09T21:13:02Z) - [Raise an error when Dict/Set doesn't support the target](https://github.com/elixir-lang/elixir/pull/1403)



#### [#1400] - (2013-07-09T16:24:30Z) - [All deps of a rebar dep should be handled by rebar](https://github.com/elixir-lang/elixir/pull/1400)



#### [#1399] - (2013-07-09T12:25:43Z) - [Dont use manager to decide where a dep was defined](https://github.com/elixir-lang/elixir/pull/1399)

Fixes #1396.


#### [#1395] - (2013-07-09T06:44:02Z) - [String.split("") should be [""], %w() should be []](https://github.com/elixir-lang/elixir/pull/1395)

Fixes #1394


#### [#1397] - (2013-07-09T06:38:59Z) - [Fixed doc typos in Kernel and Record](https://github.com/elixir-lang/elixir/pull/1397)



#### [#1392] - (2013-07-08T18:59:46Z) - [Update rebar to rebar 2.1.0-pre. This (among other things) fixes a crash...](https://github.com/elixir-lang/elixir/pull/1392)

... if an environment variable contains non-ascii characters


#### [#1388] - (2013-07-08T07:15:39Z) - [Add Stream.seq() for generating potentially infinite streams of values](https://github.com/elixir-lang/elixir/pull/1388)

Emit a sequence of values, starting with `start_value`. Successive
values are generated by calling `incr_func` on the previous value.
The default parameters generate a sequence of integers starting at 0.


#### [#1390] - (2013-07-08T07:15:38Z) - [Iterate](https://github.com/elixir-lang/elixir/pull/1390)

Add the functions `Stream.iterate` and `Stream.repeatedly`.

The former takes a seed and a function and returns a stream of values `seed`, `func(seed)`, `func(fund(seed))` and so on

The latter repeatedly invokes its parameter, returning a stream of the returned values. 


#### [#1391] - (2013-07-08T07:13:48Z) - [Fixed doc typos in IEx, IEx.Options and IEx.Helpers](https://github.com/elixir-lang/elixir/pull/1391)



#### [#1389] - (2013-07-07T21:13:42Z) - [Refactor IEx.Options and raise on bad key](https://github.com/elixir-lang/elixir/pull/1389)



#### [#1376] - (2013-07-07T19:10:10Z) - [Use Mix.Version for dependencies](https://github.com/elixir-lang/elixir/pull/1376)

Require `override: true` option to override a dependency.

Closes #1314.


#### [#1385] - (2013-07-07T06:55:29Z) - [Fixed doc typos for Inspect](https://github.com/elixir-lang/elixir/pull/1385)



#### [#1382] - (2013-07-06T09:50:04Z) - [Fixed doc typos in Path and Kernel](https://github.com/elixir-lang/elixir/pull/1382)



#### [#1381] - (2013-07-06T09:49:47Z) - [Fixed typos in Set module docs](https://github.com/elixir-lang/elixir/pull/1381)



#### [#1377] - (2013-07-06T09:48:10Z) - [Pretty printing](https://github.com/elixir-lang/elixir/pull/1377)

This is a final tidy up of the pretty printing branch for merge. WIP.


#### [#1369] - (2013-07-04T18:10:49Z) - [Improve Mix dependency error messages](https://github.com/elixir-lang/elixir/pull/1369)

Closes #1246 and #1247.


#### [#1366] - (2013-07-03T15:30:54Z) - [Show exit messages in IEx](https://github.com/elixir-lang/elixir/pull/1366)

Closes #1351


#### [#1365] - (2013-07-03T12:52:24Z) - [Fixing typos in Mix.Task docs](https://github.com/elixir-lang/elixir/pull/1365)



#### [#1361] - (2013-07-03T08:57:58Z) - [Doc cleanup and more examples for Regex module](https://github.com/elixir-lang/elixir/pull/1361)



#### [#1360] - (2013-07-02T18:02:18Z) - [Fixed typos in Kernel](https://github.com/elixir-lang/elixir/pull/1360)

This line of code is referenced from the blog post by the following link: https://peepcode.com/blog/2013/elixir-is-for-programmers


#### [#1359] - (2013-07-02T17:00:52Z) - [Fixed typos in Kernel](https://github.com/elixir-lang/elixir/pull/1359)

Reworded some docstrings to make more sense as well


#### [#1356] - (2013-07-02T07:07:59Z) - [Fixed typos in Regex module docs](https://github.com/elixir-lang/elixir/pull/1356)



#### [#1355] - (2013-07-02T07:06:59Z) - [Fixed doc typos in Kernel.defrecord and Kernel.defrecordp](https://github.com/elixir-lang/elixir/pull/1355)



#### [#1354] - (2013-07-02T07:06:44Z) - [Fixing Record doc typos](https://github.com/elixir-lang/elixir/pull/1354)

Also fixed a typo in an ArgumentError message. Tests pass, but not sure if it's okay to modify user accessible text.


#### [#1352] - (2013-07-01T19:09:11Z) - [Remove the URI lookup mechanism in favor of application env](https://github.com/elixir-lang/elixir/pull/1352)

/cc @meh @ericmj 


#### [#1349] - (2013-07-01T07:46:08Z) - [Fixing typos in the Code module](https://github.com/elixir-lang/elixir/pull/1349)



#### [#1348] - (2013-07-01T07:45:46Z) - [Fixing typos in Stream docs](https://github.com/elixir-lang/elixir/pull/1348)



#### [#1339] - (2013-06-30T14:13:43Z) - [defrecordp/3](https://github.com/elixir-lang/elixir/pull/1339)

The motivation for this is simple:
1. I do want to define multiple private records per module and be able to distinguish them
2. I don't want to memorize `deffunctions`/`defmacros` API
3. In many cases, even a single `defrecordp` in the module should rather have a different tag, for example a module with a `gen_server` and a `defrecordp` for its state. Currently, it'be something like this:

``` elixir
defmodule MyServer do
 use GenServer.Behaviour
 defrecordp :state, data: nil
end
```

The problem with this is that the tuples will look like `{MyServer, nil}` which is far from being ideal. With this pull request, one can do this:

``` elixir
defmodule MyServer do
 use GenServer.Behaviour
 defrecordp State, :state, data: nil
end
```

which will have the tag as `MyServer.State` or

``` elixir
defmodule MyServer do
 use GenServer.Behaviour
 defrecordp :state, :state, data: nil
end
```

which will have the tag as `:state`


#### [#1241] - (2013-06-30T13:43:36Z) - [Add Sets to Elixir](https://github.com/elixir-lang/elixir/pull/1241)

## What?

Adding the Set type to Elixir 

``` elixir
HashSet.new([1,2,3,4,5,6,6,6]) # => #Set<1,2,3,4,5,6> 
```
## How?

Based on a similar strategy to HashMap (using ordered sets) selecting the right data structure for the size of the Set to maximise performance. 
1. A single bucket to start with
2. Expanding to a set of buckets on larger size.

Idea and discussion came from google group:
https://groups.google.com/forum/?fromgroups#!topic/elixir-lang-talk/RNVN-uBLKIw


#### [#1345] - (2013-06-30T12:19:23Z) - [when contributing it is important to run the tests](https://github.com/elixir-lang/elixir/pull/1345)

Although there is already a reference to 'make test' in the CONTRIBUTING file I missed it. I am not sure if this is the best way to make it more prominent but I've added a new step to make it more obvious.


#### [#1341] - (2013-06-30T06:47:50Z) - [Return empty string when given 0 for n in String.duplicate](https://github.com/elixir-lang/elixir/pull/1341)

Currently, String.duplicate("abc", 0) is illegal.
However, I would expect it to return an empty string.
This is the behavior in languages such as Ruby and Python: "abc" \* 0 returns an empty string.
It actually turns out to already be the default behavior of :binary.copy as well, so it's only an issue of changing the guard clause.


#### [#1342] - (2013-06-30T06:23:28Z) - [Fixing GenEvent.Behaviour doc typos](https://github.com/elixir-lang/elixir/pull/1342)



#### [#1340] - (2013-06-30T06:23:09Z) - [Fixed GenServer.Behaviour docs typos and example bug](https://github.com/elixir-lang/elixir/pull/1340)



#### [#1335] - (2013-06-29T07:36:34Z) - [Fix typo in Module.get_attribute doc](https://github.com/elixir-lang/elixir/pull/1335)



#### [#1333] - (2013-06-28T20:01:21Z) - [Some more fixes for #1280](https://github.com/elixir-lang/elixir/pull/1333)



#### [#1332] - (2013-06-28T08:26:21Z) - [Disable coloring by default in IEx on Windows](https://github.com/elixir-lang/elixir/pull/1332)

Closes https://github.com/elixir-lang/elixir/issues/1329


#### [#1330] - (2013-06-28T06:24:00Z) - [Doc cleanup for Keyword module](https://github.com/elixir-lang/elixir/pull/1330)



#### [#1331] - (2013-06-28T06:23:36Z) - [Fixed doc typos in IEx module](https://github.com/elixir-lang/elixir/pull/1331)



#### [#1328] - (2013-06-27T06:32:44Z) - [Fixed doc typos in Enum](https://github.com/elixir-lang/elixir/pull/1328)

Adding examples in doc for `Enum.each` generates string output during `make test` (during the doctest phase). Since `each` is used for its side effects, I couldn't think of a simple example that generated usable output and didn't put something on stdout.


#### [#1326] - (2013-06-25T12:47:19Z) - [Fixed typo in mix task local.uninstall doc](https://github.com/elixir-lang/elixir/pull/1326)



#### [#1316] - (2013-06-25T09:09:36Z) - [Mix system version](https://github.com/elixir-lang/elixir/pull/1316)



#### [#1320] - (2013-06-25T07:17:03Z) - [Add version number to mix archive files by default per #1284](https://github.com/elixir-lang/elixir/pull/1320)

As described in #1284.


#### [#1311] - (2013-06-25T06:31:09Z) - [Don't leak matched variables when calling `match?`](https://github.com/elixir-lang/elixir/pull/1311)

I wrapped up the `match?` macro in an IIFE and added a tiny test. The test is sorta weird so let me know if that needs to be improved at all.

Fixes https://github.com/elixir-lang/elixir/issues/1304


#### [#1323] - (2013-06-24T11:23:38Z) - [Skip windows test for CHMOD 777, as this does not work on windows](https://github.com/elixir-lang/elixir/pull/1323)

See screenshot:
![image](https://f.cloud.github.com/assets/155977/694951/cf1dbba4-dcbf-11e2-8703-01d4fc4a77d9.png)


#### [#1322] - (2013-06-24T10:35:27Z) - [Tests on windows now intercept stderr from elixir(c) invocations](https://github.com/elixir-lang/elixir/pull/1322)

Previously tests on windows did not intercept stderr when they were
invoked through `:os.cmd`, so we now add a pipe redirect from `stderr`
to `stdout` when invoking elixir(c) on windows.
![image](https://f.cloud.github.com/assets/155977/694658/2774182a-dcb6-11e2-97f2-5a6cabd53c92.png)

Fixes some more issues from #1280.


#### [#1321] - (2013-06-24T05:39:36Z) - [Add Enum.reject](https://github.com/elixir-lang/elixir/pull/1321)

Enum.reject returns elements of collection for which `fun` returns false.


#### [#1300] - (2013-06-22T12:10:43Z) - [Added chgrp!, chown!, and chmod! to module File](https://github.com/elixir-lang/elixir/pull/1300)

Closes Issue #1285


#### [#1308] - (2013-06-21T17:09:08Z) - [Fixed some incorrect markdown in binary_to_list/3's documentation.](https://github.com/elixir-lang/elixir/pull/1308)

The docs for binary_to_list/3 weren't monospacing their reference to binary_to_list/1, which resulted in some bad italicization.


#### [#1302] - (2013-06-21T06:36:04Z) - [Fixed doc typos](https://github.com/elixir-lang/elixir/pull/1302)

Fixed a few typos in file.ex comments. In README.md fixed the path in the steps to build docs.


#### [#1299] - (2013-06-20T20:46:32Z) - [Show original statement if assert or refute fails](https://github.com/elixir-lang/elixir/pull/1299)

If the asserted statement evaluates to false, show the unevaluated
statement in the assertion error output message for more context about
the failure. Refute also now follows similar semantics.

Fixes #1276


#### [#1293] - (2013-06-20T10:22:07Z) - [Updated elixir.bat so one can also pass in non ".ex" files](https://github.com/elixir-lang/elixir/pull/1293)

Commands like mix etc do not pass in an ex-file, but a file without an
extension, so I added a check if a parameter is a file or not. If it is,
it assumes this is the file to be ran.

this also fixes the `test_argv` in issue #1280 .


#### [#1295] - (2013-06-20T10:00:49Z) - [Fix the rebar wrapper on windows](https://github.com/elixir-lang/elixir/pull/1295)

System.find_executable for rebar returns a rebar.cmd file, which should not
be wrapped by escript. We now have an extra check that verifies whether the
invoked file is indeed a cmd file.


#### [#1292] - (2013-06-19T21:47:03Z) - [Use the significantly faster Git protocol for github: dependencies](https://github.com/elixir-lang/elixir/pull/1292)

See: http://git-scm.com/book/ch4-1.html#The-Git-Protocol


#### [#1289] - (2013-06-19T17:32:37Z) - [Fix formatting issues in Typespec's docs](https://github.com/elixir-lang/elixir/pull/1289)



#### [#1287] - (2013-06-19T16:18:11Z) - [Added .gitattribute for fixtures in tests, so CRLF is not autoconverted](https://github.com/elixir-lang/elixir/pull/1287)

This should fix the issues @AlbertMoscow has with the line endings.

It a partial fix  for #1280.


#### [#1286] - (2013-06-19T15:00:40Z) - [Fixed path tests when running on Windows: removed drive prefixes from check](https://github.com/elixir-lang/elixir/pull/1286)

Fixes for #1280.

This gets the amount of errors down to 3 or 5 on my machine:

```
==> kernel (exunit)
................................................................................................................................................................
................................................................................................................................................................
................................................................................................................................................................
..................................................F................................................................................** (TokenMissingError) nofile
:1: missing terminator: ] (for "[" starting at line 1)
......................................** (throw) 1
............................................** (SyntaxError) nofile:1: unexpected token: end
.    :erlang.system_info({:purify,'Node: nonode@nohost'})
    init.erl:757: :init.do_boot/3

.........** (ErlangError) erlang error: 1
......    erl_eval.erl:569: :erl_eval.do_apply/6
    src/elixir.erl:152: :elixir.eval_forms/3
    c:/dev/elixir/elixir/lib/elixir/lib/code.ex:113: Code.do_eval_string/3
    c:/dev/elixir/elixir/lib/elixir/lib/kernel/cli.ex:264: Kernel.CLI.process_command/2
    c:/dev/elixir/elixir/lib/elixir/lib/enum.ex:604: Enum."-map/2-lc$^0/1-0-"/2
    c:/dev/elixir/elixir/lib/elixir/lib/kernel/cli.ex:18: Kernel.CLI."-main/1-fun-2-"/1
    c:/dev/elixir/elixir/lib/elixir/lib/kernel/cli.ex:39: Kernel.CLI.run/2
    init.erl:1054: :init.start_it/1

................................................................................................................................................................
...............................................................................................................** (SyntaxError) nofile:1: invalid token: \x{3042
}
.    :erlang.system_info({:purify,'Node: nonode@nohost'})
    init.erl:757: :init.do_boot/3

...** (SyntaxError) nofile:1: invalid token: ¬µ
    :erlang.system_info({:purify,'Node: nonode@nohost'})
    init.erl:757: :init.do_boot/3

.F...........F...............................................................................................

Failures:

  1) test_argv (SystemTest)
     ** (SyntaxError) nofile:1: syntax error before: 'ERROR'
     stacktrace:

  2) test_possible_deadlock (Kernel.CLI.CompileTest)
     ** (ExUnit.AssertionError) expected foo.ex to miss module Bar
     at test/elixir/kernel/cli_test.exs:88

  3) test_rm_rf_with_symlink (FileTest.Rm)
     ** (ExUnit.AssertionError) Expected false to be true
     at test/elixir/file_test.exs:774

Finished in 8.3 seconds (5.2s on load, 3.1s on tests)
1093 tests, 3 failures
make: *** [test_kernel] Error 1

Tom@Jommeke /c/dev/elixir/elixir
$ make test
==> elixir (compile)
==> elixir (eunit)
  All 213 tests passed.

==> kernel (exunit)
................................................................................................................................................................
................................................................................................................................................................
................................................................................................................................................................
..............................................................................F................................** (TokenMissingError) nofile:1: missing terminat
or: ] (for "[" starting at line 1)
.    :erlang.system_info({:purify,'Node: nonode@nohost'})
    init.erl:757: :init.do_boot/3

........................F.** (throw) 1
......................................................................** (SyntaxError) nofile:1: unexpected token: end
.    :erlang.system_info({:purify,'Node: nonode@nohost'})
    init.erl:757: :init.do_boot/3

.........** (ErlangError) erlang error: 1
...................................................................................................................................F............................
..................................................................................................** (SyntaxError) nofile:1: invalid token: \x{3042}
..........................F..** (SyntaxError) nofile:1: invalid token: ¬µ
    :erlang.system_info({:purify,'Node: nonode@nohost'})
    init.erl:757: :init.do_boot/3

............F...............................................................................................

Failures:

  1) test_argv (SystemTest)
     ** (SyntaxError) nofile:1: syntax error before: 'ERROR'
     stacktrace:

  2) test_at_exit (SystemTest)
     ** (ExUnit.ExpectationError)
                  expected: []
       to be equal to (==): '0\n'
     at test/elixir/system_test.exs:51

  3) test_at_exit (Kernel.CLI.AtExitTest)
     ** (ExUnit.ExpectationError)
                  expected: 'goodbye '
       to be equal to (==): 'goodbye cruel world with status 0\n'
     at test/elixir/kernel/cli_test.exs:39

  4) test_possible_deadlock (Kernel.CLI.CompileTest)
     ** (ExUnit.AssertionError) expected foo.ex to miss module Bar
     at test/elixir/kernel/cli_test.exs:88

  5) test_rm_rf_with_symlink (FileTest.Rm)
     ** (ExUnit.AssertionError) Expected false to be true
     at test/elixir/file_test.exs:774

Finished in 8.4 seconds (5.1s on load, 3.2s on tests)
1093 tests, 5 failures
make: *** [test_kernel] Error 1
```

Apparently the `test_at_exit` code does not work all the time...


#### [#1283] - (2013-06-19T08:13:43Z) - [cleanup after refactoring of Code.string_to_qouted ](https://github.com/elixir-lang/elixir/pull/1283)

cleanup after refactoring of Code.string_to_qouted 


#### [#1282] - (2013-06-19T05:57:38Z) - [rename of Macro.to_binary and Code.string_to_ast regards to #1143](https://github.com/elixir-lang/elixir/pull/1282)

rename of `Macro.to_binary` and `Code.string_to_ast` regards to #1143


#### [#1281] - (2013-06-19T05:55:52Z) - [Add Process.self](https://github.com/elixir-lang/elixir/pull/1281)

As discussed on IRC with @josevalim.


#### [#1279] - (2013-06-18T18:18:05Z) - [Windows bugfixing](https://github.com/elixir-lang/elixir/pull/1279)



#### [#1277] - (2013-06-18T15:54:49Z) - [Some IO tests return alternate error codes on windows](https://github.com/elixir-lang/elixir/pull/1277)

Now these tests allow different kinds of error codes. However, I currently
duplicate the is_io_error? method; I would assume there would be an easier
way to do this; maybe just put it in a namespace and reference the
namespace?


#### [#1275] - (2013-06-18T10:04:05Z) - [Emit warning for 'x in []' in guards](https://github.com/elixir-lang/elixir/pull/1275)



#### [#1273] - (2013-06-18T06:20:57Z) - [Fixed grammar and wrong word (exit, not exist) in Process.exit/2 documentation.](https://github.com/elixir-lang/elixir/pull/1273)

Fixed grammar and wrong word (exit, not exist) in Process.exit/2 documentation.


#### [#1270] - (2013-06-17T11:46:46Z) - [With the new elixir.bat version the batch script only worked from the ./bin folder on windows](https://github.com/elixir-lang/elixir/pull/1270)

Apparently, when shifting parameters, the %~dp0 is not preserved, 
so it needs to keep this value. This will fix things like iex on Windows, which just crashed with the version I just committed; my apologies !


#### [#1269] - (2013-06-17T11:19:31Z) - [On Windows Erlang parameters were not getting passed to elixir.bat in a proper way](https://github.com/elixir-lang/elixir/pull/1269)

I altered the batch file so it parses, translates some and validates parameters that need to be fed into the Erlang run-time.

It might not look nice, but it works.

Fixes issue #1149 


#### [#1264] - (2013-06-16T19:05:36Z) - [Fix rebar config scripts evaluation](https://github.com/elixir-lang/elixir/pull/1264)

Scripts are evaluated using the dependency directory as current directory

Closes #1262


#### [#1263] - (2013-06-16T16:20:16Z) - [Change the bullet points on code.ex to follow the standard on this file](https://github.com/elixir-lang/elixir/pull/1263)



#### [#1261] - (2013-06-16T10:07:23Z) - [Don't assume terminal availability in ANSI doctests](https://github.com/elixir-lang/elixir/pull/1261)



#### [#1259] - (2013-06-16T05:52:39Z) - [Uniform use of whitespace after commas on codebase](https://github.com/elixir-lang/elixir/pull/1259)

This make easier to read and also follow some standard in the code


#### [#1223] - (2013-06-15T16:34:55Z) - [add mix package and related tasks](https://github.com/elixir-lang/elixir/pull/1223)

This is related to #1124. This adds three related tasks and supporting modules:

mix package -- package up any project into an erlang archive format file
mix local.install.package -- install current project into MIX_HOME/tasks
mix local.uninstall.package -- uninstall specified package (app) name

This also adds the logic within Mix.Task and Mix.Local to find the archive files in MIX_HOME/tasks and add (their inner code path) to the code paths.


#### [#1258] - (2013-06-15T16:10:24Z) - [Review documentation of `.split`, `.drop` and `.take` on `Dict`](https://github.com/elixir-lang/elixir/pull/1258)

Also I removed duplication of these documentation on `HashDict` and `ListDict`


#### [#1130] - (2013-06-15T15:25:53Z) - [Implement Mix.Version](https://github.com/elixir-lang/elixir/pull/1130)

Here we go, there are some differences from the proposed API in #1115.
- `Mix.Version.match?/2` is used to match a version specification with the passed version, if there are issues parsing the specification or the version, it raises an exception
- instead of `Mix.Version.compile/1` there's `Mix.Version.Specification.parse/1`, this is because I can implement `to_binary` and `inspect` for both `Mix.Version` and `Mix.Version.Specification`, it shouldn't be used by hand normally anyway
- There are various other public functions in `Mix.Version`, for instance `semver?/1`, `major/1`, `minor/1`, `patch/1`, `extra/1` and `to_tuple/1`.
- There are various public functions in `Mix.Version.Specification`, for instance `parse/1` and `match?/2`, the latter is the one called by `Mix.Version.match?/2` with the unwrapped version value.
- Currently `1.0` is greater than `1.0.0`, this is because my life is easier this way, given `nil` is always greater than numbers, if this is a problem I can change it tho.

The doc might need some added examples, but I want feedback on the code first given the usage might change.

Feedbacks, corrections, anything, let them come.


#### [#1256] - (2013-06-15T11:52:14Z) - [Fix typo in doc](https://github.com/elixir-lang/elixir/pull/1256)



#### [#1255] - (2013-06-15T10:53:24Z) - [Fix typo in the @doc for Code.eval_string](https://github.com/elixir-lang/elixir/pull/1255)

Just a small one. :smile: 

cheers

Sam


#### [#1214] - (2013-06-15T06:20:25Z) - [Feature/898 warnings as errors](https://github.com/elixir-lang/elixir/pull/1214)

This pull request implements --warnings-as-errors command line option. It will also set the exit status to 1 if there is a compilation error and halt.

The one part that makes me a little concerned is I have changed the callback for the parallel compiler to take two parameters. The filename and the exit status. The exit status will be undefined if everything went OK. It's only set if the compile failed. This will allow the parallel compiler to pass back different exit statuses.


#### [#1253] - (2013-06-15T06:08:22Z) - [Fix compiler_options docblock formatting errors](https://github.com/elixir-lang/elixir/pull/1253)

This fixes markdown formatting errors with a few options in Code.compiler_options(opts)


#### [#1245] - (2013-06-14T11:40:49Z) - [Bug: HashDict equal?](https://github.com/elixir-lang/elixir/pull/1245)

Noticed browsing the HashDict code HashDict.equal? was only checking against the size of the HashDicts and not their contents.

Patch fixes this bug.


#### [#1240] - (2013-06-13T18:00:20Z) - [Improve efficiency of HashDict contract](https://github.com/elixir-lang/elixir/pull/1240)

When contracting in size the HashDict does not need to relocate (re-hash) key-value pairs. It is not required because each of the deepest nodes (8 element tuples) in the trie become a bucket (list) on contraction. This bucket contains all the key-value pairs in that node (8 element tuple).

Discovered while porting hashdict to erlang's dict API (see https://github.com/fishcakez/hashdict).


#### [#1199] - (2013-06-13T13:13:32Z) - [Reimplement =~ to use Regex.match? or String.contains?](https://github.com/elixir-lang/elixir/pull/1199)

I'm not sure this is how it should be done. Besides, the compiler is being too smart here and spams warnings.


#### [#1187] - (2013-06-13T13:12:26Z) - [Pipeline op fix + additional assertion](https://github.com/elixir-lang/elixir/pull/1187)

Notice `FIXME`s in the code.


#### [#1237] - (2013-06-13T03:43:58Z) - [Fix typo on List documentation](https://github.com/elixir-lang/elixir/pull/1237)

-posistion
+position


#### [#1235] - (2013-06-12T18:11:38Z) - [Update docs for `defoverridable` and `super`](https://github.com/elixir-lang/elixir/pull/1235)



#### [#1234] - (2013-06-12T15:56:55Z) - [Implicit super arguments is deprecated](https://github.com/elixir-lang/elixir/pull/1234)

Closes #1232


#### [#1233] - (2013-06-12T13:10:00Z) - [Optimize doctest generation. Closes #1226](https://github.com/elixir-lang/elixir/pull/1233)



#### [#1229] - (2013-06-11T17:30:07Z) - [Provide reference documentation for module attributes](https://github.com/elixir-lang/elixir/pull/1229)

Work in progress.

Closes https://github.com/elixir-lang/elixir/issues/1132


#### [#1222] - (2013-06-10T01:29:14Z) - [Added more informative error to Makefile when ex_doc is not available.](https://github.com/elixir-lang/elixir/pull/1222)

Added more information to README about building docs.

fixes #1151


#### [#1221] - (2013-06-10T01:25:45Z) - [Add a --force option to `mix local.install`.](https://github.com/elixir-lang/elixir/pull/1221)

Useful for makefiles and such where automation is desired. While it would be possible to just pipe a `Y` value into the Mix process, that ends up in shell-specific land. Easier to just have a portable `--force`.


#### [#1217] - (2013-06-09T14:58:41Z) - [Improve error message for diverged deps](https://github.com/elixir-lang/elixir/pull/1217)

Follow up on https://groups.google.com/forum/?fromgroups#!topic/elixir-lang-talk/TLNfyuz3KvQ


#### [#1218] - (2013-06-09T13:54:39Z) - [remove dependency on bash in shell scripts](https://github.com/elixir-lang/elixir/pull/1218)

Elixir currently doesn't build on SmartOS (Illumos/OpenSolaris based OS), because it evaluates shell scripts defined as #!/bin/sh in strict sh mode, but Elixir's shell scripts are actually not sh compliant because of the use of the Bash specific 'local' keyword.

The above means that Elixir almost certainly won't build on any platform that doesn't use bash.

This Pull request simply removes the use of the local keyword, since it's use doesn't seem to have any significant meaning in Elixir's shell scripts, which makes it now possible to build Elixir on SmartOS and probably any other platform with strict shell evaluating behaviour, or without bash at all.


#### [#1198] - (2013-06-08T01:14:44Z) - [Dont run deps tasks recursively when they are started non-recursively](https://github.com/elixir-lang/elixir/pull/1198)

Fixes #1194


#### [#1211] - (2013-06-07T12:50:32Z) - [to_binary for URI.Info do not ignore the path](https://github.com/elixir-lang/elixir/pull/1211)



#### [#1209] - (2013-06-07T12:39:18Z) - [Remove unneeded `case`](https://github.com/elixir-lang/elixir/pull/1209)

`:os.type/0` always returns a tuple in R16B


#### [#1208] - (2013-06-07T09:02:42Z) - [Fix Enum.uniq/2 spec](https://github.com/elixir-lang/elixir/pull/1208)



#### [#1201] - (2013-06-06T23:21:18Z) - [Extend ExUnit docs](https://github.com/elixir-lang/elixir/pull/1201)



#### [#1195] - (2013-06-05T16:20:54Z) - [String fixes](https://github.com/elixir-lang/elixir/pull/1195)

Closes #1191.


#### [#1193] - (2013-06-05T14:44:23Z) - [Document `super` and add more docs to `defoverridable`](https://github.com/elixir-lang/elixir/pull/1193)

Closes #1189


#### [#1188] - (2013-06-05T12:04:44Z) - [Adding String.contains?](https://github.com/elixir-lang/elixir/pull/1188)

Along the lines of String.starts_with? and String.ends_with? I suggest `contains?`:

``` elixir
String.contains? "elixir of life", "of" ; true
String.contains? "elixir of life", "mercury" ; false
```
### What?

contains? detects whether a string contains another string.
### Why?

This is for a string match and you don't want to use regular expressions. For example I have a string which contains lots of regular expression reserved symbols and I don't want to go through the pain of escaping them or convert the string. Or I want something fast that bypasses regex.
### Erlang

Really I'm trying to replicate Erlangs string:str http://www.erlang.org/doc/man/string.html#str-2
though I only care about the boolean result rather than the position of matches.


#### [#1186] - (2013-06-05T12:03:04Z) - [Add support for direct dependencies of umbrella project](https://github.com/elixir-lang/elixir/pull/1186)

Closes #1129


#### [#1181] - (2013-06-05T06:07:50Z) - [Added -v --version option to all elixir commands.](https://github.com/elixir-lang/elixir/pull/1181)

Fixes #1178

This adds support for `-v` and `--version` to all command line entry points into elixir.

It still has the problem that @alco pointed out with `iex` there is an extra header printed out above.


#### [#1183] - (2013-06-05T00:02:15Z) - [Bring system.ex back to bootstrap](https://github.com/elixir-lang/elixir/pull/1183)

Is this on the right track?


#### [#1185] - (2013-06-04T23:41:02Z) - [Implement Binary.Chars for URI.Info](https://github.com/elixir-lang/elixir/pull/1185)



#### [#1184] - (2013-06-04T09:55:11Z) - [Make rebar skip deps since mix compiles them](https://github.com/elixir-lang/elixir/pull/1184)



#### [#1137] - (2013-06-03T12:13:13Z) - [Test framework for IEx](https://github.com/elixir-lang/elixir/pull/1137)

This is WIP. Curious to know if I'm moving in the right direction.

TODO
- [x] write docs for `IEx.Case`
- [x] test other helpers


#### [#1177] - (2013-06-03T11:29:34Z) - [Fix HashDict so that key comparison uses exact match](https://github.com/elixir-lang/elixir/pull/1177)

This change means that a HashDict is nolonger ordered. Previously
HashDicts did some ordering and for small sizes were fully ordered.
However this meant that keys which compared equal (==) but not exactly
equal (===) would be considered different for large sizes but
equivalent for small sizes. This ambiguity occured because hashes are
only equal when terms are exactly equal (===).

See github issue #1171 for examples, and #1175 for some discussion.

Note: If assumptions were made about the form of a HashDict they may
nolonger be valid. Particularly that HashDicts can nolonger be reliably
pattern matched on for equality.

Sorry for the issue spam, can't get the github API to work to add a PR to existing issue.


#### [#1174] - (2013-06-02T12:07:43Z) - [Option that enable to decide whether `capture_io` captures a prompt or not](https://github.com/elixir-lang/elixir/pull/1174)

from #1167


#### [#1170] - (2013-06-02T03:02:34Z) - [Set load paths for dependencies with Makefile](https://github.com/elixir-lang/elixir/pull/1170)

A recent update (036d016 2013-06-02; Rebar dep with no config is given rebar
as manager) introduced :make as a value for a dependency's manager, but
Mix.Deps.load_path has no function clause to handle this.

Add :make to the nil manager clause, as it seems the closest equivalent.


#### [#1172] - (2013-06-02T03:00:37Z) - [Fix IEx's module source lookup](https://github.com/elixir-lang/elixir/pull/1172)

`Module.module_info(:compile)[:source]` returns the value, not a tuple
as the code was expecting, making r/1 think that no module has a
source. Fix this expectation.


#### [#1167] - (2013-06-01T10:15:38Z) - [capture_io captures a prompt when capturing of stdio](https://github.com/elixir-lang/elixir/pull/1167)

discussing at #1145

If we need have the option, I'll implement it.


#### [#1160] - (2013-05-31T23:10:48Z) - [Don't ignore nil during aliasing. Attempt to fix #1159](https://github.com/elixir-lang/elixir/pull/1160)

Attempting to fix https://github.com/elixir-lang/elixir/issues/1159.

I'm not sure if this is the right fix because I don't know the logic why `:nil` was ignored during aliasing. It passes all the tests with this change and now `Enum.reverse {nil}` results in the error `(UndefinedFunctionError) undefined function: :"Elixir.Enumerable.nil".reduce/3  like any other {:atom} passes to reverse.`

Also, I added a test case (although its not a perfect test since it will detect an infinite loop by hanging rather than playing with something more sophisticated which terminates).


#### [#1163] - (2013-05-31T18:13:16Z) - [Support extended syntax in Regex.escape](https://github.com/elixir-lang/elixir/pull/1163)

`\s` should take care of everything in unicode mode, also added # given it's used as comment in extended mode.

Also I'm against escaping all non-alphanumeric graphemes because it's useless overhead.


#### [#1164] - (2013-05-31T18:12:33Z) - [documentation for record generated functions](https://github.com/elixir-lang/elixir/pull/1164)

Resolves #1162.
As discussed in the issue, I included short descriptions for update and to_keywords in the doc for Kernel.defrecord.


#### [#1150] - (2013-05-31T09:21:16Z) - [Better error message for Binary.Chars.List.to_binary. Closes #1144](https://github.com/elixir-lang/elixir/pull/1150)

@josevalim please take a look at `FIXME`s in the code.


#### [#1122] - (2013-05-31T09:14:05Z) - [Handle rebar dependencies better](https://github.com/elixir-lang/elixir/pull/1122)

Download dependencies specified in rebar.config and go through `Converger` to handle conflicts. Handle `sub_dirs` in rebar.config when getting dependencies and by the `sub_dirs` to the code load path.

Closes #903.


#### [#1153] - (2013-05-31T02:38:51Z) - [Implement Regex.escape](https://github.com/elixir-lang/elixir/pull/1153)

This needs more tests, give your best try at breaking it.


#### [#1152] - (2013-05-31T00:06:01Z) - [Use the shell to run Mix.Shell.cmd commands](https://github.com/elixir-lang/elixir/pull/1152)

Closes #1127


#### [#1136] - (2013-05-29T08:57:34Z) - [Add tests for %w(BigAtom)a mentioned in #1131](https://github.com/elixir-lang/elixir/pull/1136)



#### [#1128] - (2013-05-29T08:53:51Z) - [Implement extended doctests](https://github.com/elixir-lang/elixir/pull/1128)

This works. But I'm not entirely happy with this approach.

I had to split the logic of `test_content` into two cases: when there is an exception and when there is none. The reason for this is that we need different `rescue` clauses for those cases.

Please take a look @josevalim, @yrashk.

TODO
- [x] clean up `FIXME`s in the code
- [x] mention extended doctests in the docs
- [x] verify that error messages are not broken for extended doctests


#### [#1135] - (2013-05-29T07:53:33Z) - [Add space to error message in mix](https://github.com/elixir-lang/elixir/pull/1135)



#### [#1126] - (2013-05-27T17:49:32Z) - [Add tests for body-less functions](https://github.com/elixir-lang/elixir/pull/1126)



#### [#1121] - (2013-05-27T15:57:37Z) - [Iex limit history](https://github.com/elixir-lang/elixir/pull/1121)

I've replaced the list with a queue to be able to limit and index the history in both directions efficiently.


#### [#1120] - (2013-05-26T17:45:06Z) - [Contributing guidelines](https://github.com/elixir-lang/elixir/pull/1120)

Mention that merging upstream into a local branch and making changes in master are discouraged.


#### [#1117] - (2013-05-26T08:23:21Z) - [Fix for a problem with String.ends_with?](https://github.com/elixir-lang/elixir/pull/1117)

iex> String.ends_with? "hello", ["hell", "lo"]
  false

 The problem was that the implementation uses :binary.matches, and that returns only
 one match. It would find "hell", but pos+len != size, and so returned false.

 Changed for a less efficient implementation.


#### [#1113] - (2013-05-25T13:41:42Z) - [Add String.starts_with? and String.ends_with?](https://github.com/elixir-lang/elixir/pull/1113)

Adds two new functions to the `String` module: `starts_with?` and `ends_with?`.
## starts_with?

Returns true if `string` starts with any of the prefixes given, otherwise false. `prefixes` can be either a single prefix or a list of prefixes.
### Examples

```
  iex> String.starts_with? "elixir", "eli"
  true
  iex> String.starts_with? "elixir", ["erlang", "elixir"]
  true
  iex> String.starts_with? "elixir", ["erlang", "ruby"]
  false
```
## ends_with?

Returns true if `string` ends with any of the suffixes given, otherwise false. `suffixes` can be either a single suffix or a list of suffixes.
### Examples

```
  iex> String.ends_with? "language", "age"
  true
  iex)> String.ends_with? "language", ["youth", "age"]
  true
  iex)> String.ends_with? "language", ["youth", "elixir"]
  false
```
## Notes
- I'm open to suggestions on names. Is it possible to create aliases which are then exported from a module (to have e.g. `start_with?` also available)?
- Would it be possible to implement these functions on the level of `Enumerable`? It would be cool to be able to run them on any collection (although it is not the first place you would look for such functions).


#### [#1106] - (2013-05-24T10:56:27Z) - [Implement IEx.Options per #1062](https://github.com/elixir-lang/elixir/pull/1106)

TODO:
- [x] validate option keys (`FIXME` in the code)
- [x] Write top-level documentation for `IEx.Options`


#### [#1107] - (2013-05-23T16:02:50Z) - [Fix missing unused private function and add test for warnings](https://github.com/elixir-lang/elixir/pull/1107)

```
defmodule Sample do
  def a, do: b
  defp b, do: nil
  defp c(x // 1), do: x
end
```

This should emit a warning because `c` is not called.

And added tests for such warnings.


#### [#1102] - (2013-05-23T12:25:10Z) - [Reducers](https://github.com/elixir-lang/elixir/pull/1102)



#### [#1104] - (2013-05-22T17:27:48Z) - [Remove warning in capture_io](https://github.com/elixir-lang/elixir/pull/1104)

I'm sorry to bother you.


#### [#1103] - (2013-05-22T17:03:52Z) - [Capture_io can has mock input and ExUnit.Server stops when getting :eof as an input](https://github.com/elixir-lang/elixir/pull/1103)

discussing at #919

Using this patch, we can test IEx like the following.

``` elixir
ExUnit.start []

defmodule IEx.InteractiveTest do
  use ExUnit.Case, async: true

  import ExUnit.CaptureIO

  setup_all do
    :application.start(:iex)
  end

  setup do
    scope = :elixir.scope_for_eval(
      file: "iex",
      delegate_locals_to: IEx.Helpers
    )

    config=IEx.Config[
      binding: [],
      scope: scope,
    ]

    { :ok, config: config }
  end


  test "iex", context do
    input  = %B"""
             a = 2
             a + 3
             """
    expect = %B"""
             2
             5
             """

    assert capture_io(input, fn ->
      IEx.Server.start(context[:config])
    end) |> strip == expect
  end

  test "#iex:break", context do
    input = %B"""
            "a
            #iex:break
            """

    output = capture_io(input, fn ->
      IEx.Server.start(context[:config])
    end) |> strip

    assert output =~ %r/TokenMissingError/
    assert output =~ %r/incomplete expression/
  end


  defp strip(output) do
    output |> String.split("\n") |> tl |> Enum.join("\n")
  end
end
```


#### [#1100] - (2013-05-22T13:40:41Z) - [Add support for .iex files](https://github.com/elixir-lang/elixir/pull/1100)

This is the first half of implementing #1062.

In the description of .iex files I mention the `f()` helper which would erase variable bindings. IEx does not have it yet, but it would be really useful as the last expression in an .iex file if the user doesn't want to keep var bindings. Or, perhaps, there is another way to scope the code in the .iex file lexically so it doesn't leak into the shell if the user doesn't want it to?

The fact that it leaks by default is by design.


#### [#1098] - (2013-05-21T07:46:03Z) - [Fix behavior of Path.expand/2. Improve docstrings](https://github.com/elixir-lang/elixir/pull/1098)



#### [#1096] - (2013-05-20T12:50:40Z) - [Implement a break-trigger for incomplete expressions in IEx.](https://github.com/elixir-lang/elixir/pull/1096)



#### [#1095] - (2013-05-19T19:29:12Z) - [Fix docs for IO.getn](https://github.com/elixir-lang/elixir/pull/1095)



#### [#1094] - (2013-05-19T18:45:58Z) - [Deprecate IO.getb in favor of IO.getn](https://github.com/elixir-lang/elixir/pull/1094)

Closes #1091


#### [#1093] - (2013-05-19T13:54:08Z) - [Only mix compile -q recompiles unnecessarly](https://github.com/elixir-lang/elixir/pull/1093)

mix compile --quick was recompiling previously compiled files even when nothing had changed

Fixes #1061


#### [#1090] - (2013-05-18T11:59:53Z) - [Fix docstring for require_file](https://github.com/elixir-lang/elixir/pull/1090)



#### [#1087] - (2013-05-17T16:16:23Z) - [Review IEx docs](https://github.com/elixir-lang/elixir/pull/1087)



#### [#1081] - (2013-05-17T14:23:44Z) - [TokenMissingError fix](https://github.com/elixir-lang/elixir/pull/1081)

Closes #1051.

Distinguish between TokenMissingError raised during parsing from the one raised during evaluation in IEx.

Have I taken a correct direction here? I don't know how to get `file` from `config.scope` [here](https://github.com/elixir-lang/elixir/pull/1081/files#L0R20).

I should also add a test for this. We don't have any existing tests for IEx, do we?


#### [#1085] - (2013-05-17T10:12:41Z) - [Issue #1069: Add Dict.drop, Dict.take and Dict.split](https://github.com/elixir-lang/elixir/pull/1085)

As per the issue description, the drop/2, take/2, and split/2 functions have been implemented in the Dict module.  

One potential addition (which is not implemented), is for the 3 functions to also accept single keys. So for example: 

``` elixir
d = HashDict.new([a: 1, b: 2])
Dict.take(d, :a) # => [:a 1]
```

instead of having to always use a list of keys:

``` elixir
Dict.take(d, [:a]) #=> [:a 1]
```

Not sure how important saving the effort of typing 2 characters (open and close bracket) is though ....


#### [#1078] - (2013-05-17T07:47:31Z) - [Retrieve the most suitable revision for source links in the docs](https://github.com/elixir-lang/elixir/pull/1078)



#### [#1083] - (2013-05-17T07:46:45Z) - [Remove unnecessary Mix test output](https://github.com/elixir-lang/elixir/pull/1083)

Removes the "fatal: repository '...' does not exist" output.
Also removes the "Creating git repo for tests" output which I feel is unnecessary, or does anyone think this is needed?


#### [#1082] - (2013-05-16T18:58:19Z) - [Clean up mix dependency retrieving and converging](https://github.com/elixir-lang/elixir/pull/1082)

Rename Mix.Deps.Project -> Mix.Deps.Retriever.
Retrieve the entire dependency tree in Retriever and let Converger only handle converging.
Don't require setting app: false on umbrella deps.


#### [#1079] - (2013-05-16T14:02:12Z) - [Change == to === in tests for String.to_integer and String.to_float.](https://github.com/elixir-lang/elixir/pull/1079)

Change made per @alco; test is more rational and robust than ==.


#### [#1077] - (2013-05-16T12:20:32Z) - [Make String.slice consistent with Ruby semantics, closes #1034](https://github.com/elixir-lang/elixir/pull/1077)



#### [#1076] - (2013-05-16T12:19:50Z) - [Fix warning for unused default arguments](https://github.com/elixir-lang/elixir/pull/1076)

Closes #1075


#### [#1044] - (2013-05-15T22:59:24Z) - [String.to_integer and String.to_float](https://github.com/elixir-lang/elixir/pull/1044)

Implement String.to_integer/1 and String.to_float/1. A successful conversion returns a tuple in the form {value, remainder} where remainder is the part of the string following the valid number. An unsuccessful conversion returns :error.

Unlike Erlang's :string.to_float/1 function, String.to_float/1 will accept an integer as valid and return it as an integer value.


#### [#1072] - (2013-05-15T22:03:56Z) - [Ignore files in umbrella apps directory](https://github.com/elixir-lang/elixir/pull/1072)

Closes #1071


#### [#1059] - (2013-05-15T15:54:43Z) - [Implement capture_io for ex_unit](https://github.com/elixir-lang/elixir/pull/1059)

Closes #1035.


#### [#1068] - (2013-05-15T15:52:44Z) - [Propagate dependencies in mix tasks](https://github.com/elixir-lang/elixir/pull/1068)

Closes #1036


#### [#1030] - (2013-05-14T23:00:34Z) - [Report setup_all errors and mark tests as invalid](https://github.com/elixir-lang/elixir/pull/1030)

Closes #878


#### [#1058] - (2013-05-14T01:01:45Z) - [Add String.valid?](https://github.com/elixir-lang/elixir/pull/1058)

Added `String.valid?` and fixed `String.valid_codepoint?` tests.


#### [#1056] - (2013-05-13T14:50:32Z) - [Downcase host and scheme in URIs](https://github.com/elixir-lang/elixir/pull/1056)

They're treated as case insensitive anyway and it makes your matching life easier.


#### [#1055] - (2013-05-13T13:59:58Z) - [Add missing trivial clauses to record rewriter](https://github.com/elixir-lang/elixir/pull/1055)

Maybe fixes #1054. We don't have a way to have tests for this yet, do we?


#### [#1048] - (2013-05-13T00:03:26Z) - [Add --umbrella option to 'mix new'](https://github.com/elixir-lang/elixir/pull/1048)



#### [#1049] - (2013-05-12T17:33:44Z) - [Add '--quiet' option to 'mix deps.get'](https://github.com/elixir-lang/elixir/pull/1049)

Closes #1028.


#### [#1026] - (2013-05-09T23:55:17Z) - [Warn on unused imports](https://github.com/elixir-lang/elixir/pull/1026)

This is a pull request to solve issue #821. After this pull request is merged, an unused import is going to trigger a warn. This warning is not per function but per module. So if you import any number of functions from a module `Foo`, as long as you use one of those functions, you won't get a warning.

There are two "issues" with this patch:
1. We only warn missing imports inside a module.
2. It is common in Elixir code to provide "DSLs". For example, in ExUnit, we provide both `setup` and `teardown` macros that you may or may not use. Since this is part of ExUnit's DSL, we don't want to emit warnings. I have originally fixed this issue by passing a `warn: false` argument to those imports. However, [in a later commit](https://github.com/elixir-lang/elixir/commit/7bae0029f274f2a8398160d9567c31cc93e58a3f) I changed the code to automatically detect if the import should warn or not. Basically, if the import is explicit (i.e. it is not generated by a macro), it warns by default. The logic is simple but it is code complexity regardless.

Yay or nay (and why)?


#### [#1040] - (2013-05-09T23:55:03Z) - [Add support for umbrella project as dependency](https://github.com/elixir-lang/elixir/pull/1040)

Closes #1031


#### [#1042] - (2013-05-09T23:54:01Z) - [One liner in mix do_rebar in deps.compile](https://github.com/elixir-lang/elixir/pull/1042)

Fix problem with an in-dep rebar not being found‚Äîneed to pass in the full path to it, and not just ./rebar


#### [#1041] - (2013-05-09T17:44:35Z) - [Fix badmatch with Regex.captures(%r/(.)/g, "cat")](https://github.com/elixir-lang/elixir/pull/1041)

The above caused a badmatch because Regex.run didn't handle a return from re:run of just :match.

:match is returned if a pattern has /g but no captures are made. My fix was to have .run return [] in this case. The tests pass, but I'm a little nervous about compatibility in the field.

Dave


#### [#1024] - (2013-05-07T14:13:04Z) - [Run tasks for umbrella projects in correct order](https://github.com/elixir-lang/elixir/pull/1024)

Fixes #1018


#### [#1022] - (2013-05-07T01:52:23Z) - [Add List.insert_at/3 and List.delete_at/2](https://github.com/elixir-lang/elixir/pull/1022)



#### [#1023] - (2013-05-06T23:21:56Z) - [Add support for unicode to EEx.Tokenizer](https://github.com/elixir-lang/elixir/pull/1023)



#### [#1010] - (2013-05-06T15:19:17Z) - [Add a CONTRIBUTING.md](https://github.com/elixir-lang/elixir/pull/1010)



#### [#1016] - (2013-05-05T20:46:35Z) - [Add support for umbrella projects in mix](https://github.com/elixir-lang/elixir/pull/1016)

This adds support for umbrella projects as detailed in #667.

Notable changes from the proposal is that a task must be explicitly set as `@recursive true` if it is to run for the sub projects - `false` is the default value.

It would be great if you can test this functionality as much as possible and report any bugs you find.

EDIT:
Also note that there is no support for umbrella projects as dependencies. This will be handled in a separate PR.


#### [#1013] - (2013-05-05T15:21:09Z) - [Add Enum.uniq/2](https://github.com/elixir-lang/elixir/pull/1013)



#### [#1009] - (2013-05-03T21:26:40Z) - [Liberate `in`, fixes #817](https://github.com/elixir-lang/elixir/pull/1009)



#### [#1008] - (2013-05-03T20:25:43Z) - [Add Enum.empty? and Enum.member? to the Enum.Iterator protocol, fixes #804](https://github.com/elixir-lang/elixir/pull/1008)



#### [#1006] - (2013-05-03T16:55:35Z) - [Kernel doc clarifications](https://github.com/elixir-lang/elixir/pull/1006)

Is the last commit correct? I could not find the implementation for `x in [1,2,3]`.


#### [#1007] - (2013-05-03T16:39:05Z) - [Evaluate first argument in is_record once](https://github.com/elixir-lang/elixir/pull/1007)



#### [#1005] - (2013-05-03T13:46:18Z) - [Clarify on the return value of Enum.sort](https://github.com/elixir-lang/elixir/pull/1005)



#### [#1001] - (2013-05-02T14:54:10Z) - [Fix unexpected error in Kernel.CLI.main](https://github.com/elixir-lang/elixir/pull/1001)

This issue is similar to #961.

now:

```
$ elixir -e "„ÅÇ"
{"init terminating in do_boot",{badarg,[{erlang,list_to_binary,[[12354]],[]},{'Elixir-Kernel-CLI','-main/1-lc$^0/1-0-',1,[{file,"/Users/yuki_ito/.exenv/versions/master/lib/elixir/lib/kernel/cli.ex"},{line,12}]},{'Elixir-Kernel-CLI','-main/1-lc$^0/1-0-',1,[{file,"/Users/yuki_ito/.exenv/versions/master/lib/elixir/lib/kernel/cli.ex"},{line,12}]},{'Elixir-Kernel-CLI',main,1,[{file,"/Users/yuki_ito/.exenv/versions/master/lib/elixir/lib/kernel/cli.ex"},{line,12}]},{init,start_it,1,[]},{init,start_em,1,[]}]}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot ()
```

```
$ elixir -e "√¶"
** (FunctionClauseError) no function clause matching: :elixir.eval({:incomplete,[],<<230>>}, [], 1, {:elixir_scope,nil,false,true,false,false,false,nil,nil,[],[],nil,nil,[],nil,[],[],[],"nofile",[Kernel,Kernel.Typespec,Record],[],[{Kernel,[!: 1, !=: 2, !==: 2, &&: 2, *: 2, +: 1, +: 2, ++: 2, -: 1, -: 2, --: 2, ..: 2, /: 2, <: 2, <-: 2, <=: 2, <>: 2, ==: 2, ===: 2, =~: 2, >: 2, >=: 2, @: 1, __B__: 2, __C__: 2, __R__: 2, __W__: 2, __b__: 2, __c__: 2, __r__: 2, __w__: 2, access: 2, and: 2, apply: 2, apply: 3, atom_to_binary: 1, binary_to_atom: 1, binary_to_existing_atom: 1, binary_to_float: 1, binary_to_integer: 1, binary_to_integer: 2, case: 2, cond: 1, def: 1, def: 2, def: 4, defdelegate: 2, defexception: 2, defexception: 3, defexception: 4, defimpl: 2, defimpl: 3, defmacro: 1, defmacro: 2, defmacro: 4, defmacrop: 1, defmacrop: 2, defmacrop: 4, defmodule: 2, defoverridable: 1, defp: 1, defp: 2, defp: 4, defprotocol: 2, defrecord: 2, defrecord: 3, defrecord: 4, defrecordp: 2, delete_elem: 2, destructure: 2, div: 2, elem: 2, float_to_binary: 1, float_to_binary: 2, function: 1, function: 3, if: 2, in: 2, insert_elem: 3, inspect: 1, inspect: 2, integer_to_binary: 1, integer_to_binary: 2, is_exception: 1, is_range: 1, is_record: 1, is_record: 2, is_regex: 1, match?: 2, nil?: 1, not: 1, or: 2, receive: 1, rem: 2, set_elem: 3, setelem: 3, to_binary: 1, to_char_list: 1, try: 1, unless: 2, use: 1, use: 2, xor: 2, |>: 2, ||: 2]}],[],[{Kernel,[abs: 1, atom_to_binary: 2, atom_to_list: 1, binary_part: 3, binary_to_atom: 2, binary_to_existing_atom: 2, binary_to_list: 1, binary_to_list: 3, binary_to_term: 1, binary_to_term: 2, bit_size: 1, bitstring_to_list: 1, byte_size: 1, exit: 1, float: 1, float_to_list: 1, function_exported?: 3, hd: 1, integer_to_list: 1, integer_to_list: 2, iolist_size: 1, iolist_to_binary: 1, is_alive: 0, is_atom: 1, is_binary: 1, is_bitstring: 1, is_boolean: 1, is_float: 1, is_function: 1, is_function: 2, is_integer: 1, is_list: 1, is_number: 1, is_pid: 1, is_port: 1, is_reference: 1, is_tuple: 1, length: 1, list_to_atom: 1, list_to_binary: 1, list_to_bitstring: 1, list_to_existing_atom: 1, list_to_float: 1, list_to_integer: 1, list_to_integer: 2, list_to_pid: 1, list_to_tuple: 1, macro_exported?: 3, make_ref: 0, max: 2, min: 2, node: 0, node: 1, pid_to_list: 1, raise: 1, raise: 2, raise: 3, round: 1, self: 0, size: 1, spawn: 1, spawn: 3, spawn_link: 1, spawn_link: 3, term_to_binary: 1, term_to_binary: 2, throw: 1, tl: 1, trunc: 1, tuple_size: 1, tuple_to_list: 1]}]})
    src/elixir.erl:95: :elixir.eval({:incomplete,[],<<230>>}, [], 1, {:elixir_scope,nil,false,true,false,false,false,nil,nil,[],[],nil,nil,[],nil,[],[],[],"nofile",[Kernel,Kernel.Typespec,Record],[],[{Kernel,[!: 1, !=: 2, !==: 2, &&: 2, *: 2, +: 1, +: 2, ++: 2, -: 1, -: 2, --: 2, ..: 2, /: 2, <: 2, <-: 2, <=: 2, <>: 2, ==: 2, ===: 2, =~: 2, >: 2, >=: 2, @: 1, __B__: 2, __C__: 2, __R__: 2, __W__: 2, __b__: 2, __c__: 2, __r__: 2, __w__: 2, access: 2, and: 2, apply: 2, apply: 3, atom_to_binary: 1, binary_to_atom: 1, binary_to_existing_atom: 1, binary_to_float: 1, binary_to_integer: 1, binary_to_integer: 2, case: 2, cond: 1, def: 1, def: 2, def: 4, defdelegate: 2, defexception: 2, defexception: 3, defexception: 4, defimpl: 2, defimpl: 3, defmacro: 1, defmacro: 2, defmacro: 4, defmacrop: 1, defmacrop: 2, defmacrop: 4, defmodule: 2, defoverridable: 1, defp: 1, defp: 2, defp: 4, defprotocol: 2, defrecord: 2, defrecord: 3, defrecord: 4, defrecordp: 2, delete_elem: 2, destructure: 2, div: 2, elem: 2, float_to_binary: %
```

fixed:

```
$ elixir -e " „ÅÇ"
** (SyntaxError) nofile:1: invalid token: „ÅÇ
    :erlang.system_info({:purify,'Node: nonode@nohost'})
    :init.do_boot/3
```

```
$ elixir -e "√¶"
** (SyntaxError) nofile:1: invalid token: √¶
    :erlang.system_info({:purify,'Node: nonode@nohost'})
    :init.do_boot/3
```


#### [#998] - (2013-05-01T19:42:58Z) - [Remove custom dispatch to records in Binary.Inspect.Tuple](https://github.com/elixir-lang/elixir/pull/998)

Removes unnecessary code in Binary.Inspect.Tuple and prepares the code so we can use the performance improvements in #950.

Also fixes #997.


#### [#996] - (2013-05-01T02:54:11Z) - [Fixing typo in docstring for List.keyfind](https://github.com/elixir-lang/elixir/pull/996)

Just a typo I noticed when looking through the docs. 


#### [#964] - (2013-04-30T19:50:56Z) - [Add local.rebar task](https://github.com/elixir-lang/elixir/pull/964)

Hope this is inline with the way you'd want it.

Dave


#### [#992] - (2013-04-29T15:29:32Z) - [Implement Enum.member?](https://github.com/elixir-lang/elixir/pull/992)



#### [#991] - (2013-04-29T15:15:42Z) - [Use monitors in ExUnit and document callbacks](https://github.com/elixir-lang/elixir/pull/991)

Fixes what was discussed in #985


#### [#983] - (2013-04-29T14:17:09Z) - [More Enum.equal? stuff](https://github.com/elixir-lang/elixir/pull/983)

Added a specialization for Range, because it could do a lot of useless work when comparing two ranges.

Also added `Enum.equal?/3` with an additional function to check for equality, useful in many situation, and also to easily compare with `===` instead of `==`.


#### [#988] - (2013-04-28T18:26:44Z) - [Return early in Dict.equal? if the dicts have different size](https://github.com/elixir-lang/elixir/pull/988)

I don't know why I didn't think about it first.


#### [#980] - (2013-04-28T04:39:03Z) - [Implement Dict.equal?](https://github.com/elixir-lang/elixir/pull/980)

This is initial work to verify the logic pleases the astral beast, I'm using `function_exported?` to allow optional more performant implementation of dict equality.

So it's optional and fallbacks to using `List.Dict.equal?` which just sorts by key, and checks for equality with `==`.

Thoughts?


#### [#986] - (2013-04-28T04:38:04Z) - [Implement Keyword.delete_first](https://github.com/elixir-lang/elixir/pull/986)

Couldn't figure out if it was removed on purpose and forgotten to be removed from the documentation, or the other way around, so here it is.


#### [#985] - (2013-04-28T04:35:58Z) - [Handle exit messages from tests in ex_unit](https://github.com/elixir-lang/elixir/pull/985)

Fixes #982

Spawns a new process where we run a single test. This way we can trap_exit for a single test and add it as a failure if it emits exit. Is this an okay solution?

Doesn't run `teardown` at the moment. Is it okay run `teardown` from a different process? If so, I will run `teardown` when I receive the exit message.

There are no tests for the failure handling in exunit atm. How can we do that? Creating a custom formatter?


#### [#978] - (2013-04-27T14:19:26Z) - [Implement Enum.equal?](https://github.com/elixir-lang/elixir/pull/978)

It compares different kinds of collections based on the elements it would iterate through.

In my case, it would be useful to compare ets tables of ordered set type, it would also be used as fallback in Dict.equal? which I'm going to implement now.


#### [#981] - (2013-04-27T05:11:30Z) - [Improve flag error messages in CLI](https://github.com/elixir-lang/elixir/pull/981)

Now consistent in error messages and tries to show as many error messages
as possible before exiting.


#### [#976] - (2013-04-26T17:24:20Z) - [Flags -p and -pr fails if pattern match no files](https://github.com/elixir-lang/elixir/pull/976)

Fixes #851


#### [#979] - (2013-04-26T15:23:27Z) - [Implement Enum.to_list, closes #977](https://github.com/elixir-lang/elixir/pull/979)



#### [#973] - (2013-04-25T15:30:59Z) - [Don't swallow UndefinedFunctionError in Binary.Inspect](https://github.com/elixir-lang/elixir/pull/973)

When Binary.Inspect.Tuple tries to dispatch to a record implement it swallows all UndefinedFunctionError. 

Fixes #960


#### [#971] - (2013-04-24T22:38:26Z) - [Ls helper](https://github.com/elixir-lang/elixir/pull/971)

Closes #970.


#### [#969] - (2013-04-24T04:32:18Z) - [add parens for function calls in examples](https://github.com/elixir-lang/elixir/pull/969)

As discussed in the mail list today: update examples to use parens for function application in most cases.


#### [#958] - (2013-04-16T18:01:42Z) - [Implement GenEvent.Behaviour](https://github.com/elixir-lang/elixir/pull/958)



#### [#952] - (2013-04-15T23:20:21Z) - [Make Enum.Iterator's docstring more descriptive](https://github.com/elixir-lang/elixir/pull/952)

Previous description was a bit ambiguous, one could mix up `iterator` (which is a function in `Enum.Iterator` protocol) and iterator function (which is returned from the call to `iterator`).

I tried to clarify the distinction.


#### [#922] - (2013-04-13T01:44:29Z) - [Allow 'foo . (42)' calls](https://github.com/elixir-lang/elixir/pull/922)

Fixes #901


#### [#870] - (2013-04-12T05:45:50Z) - [Add support for %w and %W (words) sigils with return type modifiers](https://github.com/elixir-lang/elixir/pull/870)

As discussed previously in #501, %w can now return a few core data types other than just binaries (extendible to support further types in the future without breaking backwards compatibility). My enthusiasm for this jumped ten-fold now that I'm writing things that could be written like this:

``` elixir
fields %w(
  contact_id
  contact_guid
  brand_id
  title
  first_name
  middle_name
  last_name
  suffix
  eligibility_mask
  username
  user_password
  dob
  gender
  passport_country
  password_number
)a
```


#### [#945] - (2013-04-12T05:09:53Z) - [Implement Record.import macro that allows using private macros on public...](https://github.com/elixir-lang/elixir/pull/945)

... records


#### [#859] - (2013-04-11T13:41:01Z) - [Add insert_elem/3 and delete_elem/2 functions](https://github.com/elixir-lang/elixir/pull/859)

For Erlang versions prior to R16B, emulate corresponding BIFs


#### [#931] - (2013-04-11T10:33:51Z) - [Add import: option to doctests](https://github.com/elixir-lang/elixir/pull/931)



#### [#938] - (2013-04-10T22:48:23Z) - [Clarify import conflict semantics.](https://github.com/elixir-lang/elixir/pull/938)



#### [#937] - (2013-04-10T22:29:09Z) - [Only error on ambiguous imported function calls, not on the imports themselves.](https://github.com/elixir-lang/elixir/pull/937)

Fixes #788.


#### [#924] - (2013-04-10T01:59:30Z) - [Initial ExUnit.DocTest implementation](https://github.com/elixir-lang/elixir/pull/924)

Arguably needs improvements (but already works). Want to start the discussion on how we should improve it before merging, iterate and get it done.


#### [#930] - (2013-04-10T01:59:29Z) - [Doctest kernel](https://github.com/elixir-lang/elixir/pull/930)



#### [#909] - (2013-04-06T14:32:36Z) - [Unicode split](https://github.com/elixir-lang/elixir/pull/909)



#### [#899] - (2013-04-06T14:30:59Z) - [Added File.ls & File.ls!](https://github.com/elixir-lang/elixir/pull/899)

Tested the API in iex.

listdir! is incoming in the next commit.


#### [#907] - (2013-04-06T14:30:36Z) - [Fix is_record tests to check tuple_size before accessing the first eleme...](https://github.com/elixir-lang/elixir/pull/907)

...nt


#### [#918] - (2013-04-06T14:29:45Z) - [Make h() in IEx look at Kernel.SpecialForms too](https://github.com/elixir-lang/elixir/pull/918)



#### [#914] - (2013-03-29T21:26:55Z) - [Update binary_to_ macros to use binary_to_ functions in R16B.](https://github.com/elixir-lang/elixir/pull/914)

Also add support for float_to_binary/2


#### [#877] - (2013-03-08T14:58:03Z) - [change comments to match the code](https://github.com/elixir-lang/elixir/pull/877)

The example for the open/3 function called open! instead of open.

For the iterator/1 function, if you pass in a string instead of a device, the return value is
{ :ok, iterator_fn } instead of just iterator_fn, which breaks the example.  Since the comment
talks about converting a device to an iterator, it seemed appropriate to change to comment
to:

```
{ :ok, device } = File.open("README.md")
source = File.iterator(device)
```

instead of changing it to:

```
{ :ok, source } = File.iterator("README.md")
```


#### [#874] - (2013-03-05T15:05:25Z) - [add some missing parenthesis in an assert](https://github.com/elixir-lang/elixir/pull/874)

One of the unit test was failing after the latest commit.  This fixes it.


#### [#867] - (2013-02-28T15:45:26Z) - [defrecord should return body evaluation result](https://github.com/elixir-lang/elixir/pull/867)

Closes #861


#### [#860] - (2013-02-27T15:44:05Z) - [Change the color of result printouts in IEx](https://github.com/elixir-lang/elixir/pull/860)

![Screen Shot 2013-02-27 at 7 35 55 AM](https://f.cloud.github.com/assets/452/201438/8d8ccb08-80f3-11e2-8104-8244201f8b04.png)
![Screen Shot 2013-02-27 at 7 35 25 AM](https://f.cloud.github.com/assets/452/201439/8d90e3f0-80f3-11e2-9841-ae2610e27735.png)
![Screen Shot 2013-02-27 at 7 35 04 AM](https://f.cloud.github.com/assets/452/201440/8d904e86-80f3-11e2-8537-fe267797e8aa.png)
![Screen Shot 2013-02-27 at 7 35 36 AM](https://f.cloud.github.com/assets/452/201441/8d934e6a-80f3-11e2-93ea-d55cb065311d.png)
![Screen Shot 2013-02-27 at 7 35 15 AM](https://f.cloud.github.com/assets/452/201442/8d8fca88-80f3-11e2-8ad3-806475b14ffe.png)
![Screen Shot 2013-02-27 at 7 34 46 AM](https://f.cloud.github.com/assets/452/201443/8e6e2df0-80f3-11e2-8af9-84a10a3bc6ae.png)


#### [#847] - (2013-02-18T02:38:51Z) - [correct apply/3 example](https://github.com/elixir-lang/elixir/pull/847)

The example in the @doc for Kernel.apply is outdated or incorrect; please see commit.


#### [#844] - (2013-02-17T17:20:54Z) - [Make Mix support --help, -h and -help](https://github.com/elixir-lang/elixir/pull/844)

A fix for #843, per discussion with @yrashk.


#### [#776] - (2013-02-16T23:43:32Z) - [WiP for compiling of erlang/leex/yecc source files](https://github.com/elixir-lang/elixir/pull/776)

This is (WiP)work in progress, but I would like to get a feedback and review, how one or other thing better to do. Because this is my second or third pull request, and first "not a simple bug fix" commit to a big open source project.

This change has:
- checking of erlang source file and dependencies(like .hrl files) for changes before compiling
- error and warning output messages by erlang compiling(if you have an error, you will see, which one in a readable way) with relative path to your project
- compiling of leex and yecc files too(with error and warning output too)

This comment has some code duplication, that I personaly don't like. And I want to remove it in a beautifull and understandable way(like in leex, yecc compilers, that do the same work with two changes). May be move code in Mix.Tasks.Compile with this arguments and simply call from leex and yecc compile tasks a generic task?

This commit doesn't have:
1) there are some code duplication, that I want to eliminate in a beautiful way, and may be I have rewritten some existing functionality?

I will be very happy for review and feedback!


#### [#842] - (2013-02-15T22:27:24Z) - [Kernel doc fixes](https://github.com/elixir-lang/elixir/pull/842)

Some of these changes are for legitimate errors (e.g out of date bit syntax), but I'm sensitive that many of the changes are merely stylistic; hopefully they don't seem too pedantic :) I'm happy to break apart the commits.


#### [#841] - (2013-02-15T20:57:21Z) - [Tiny typo in IEx.Helpers.h/1](https://github.com/elixir-lang/elixir/pull/841)

The typo leads to output like this:

```
iex(1)> h(Enum.map/3)
No docs for Enum#.{function}/3 have been found
:ok
```


#### [#833] - (2013-02-09T22:58:47Z) - [Change references or invocations of Process.self to Kernel.self](https://github.com/elixir-lang/elixir/pull/833)

I noticed some comments in kernel.ex still referred to Process.self and one of the unit tests, in protocol_test.exs, still invoked Process.self.


#### [#825] - (2013-02-08T18:36:00Z) - [Node.connect/1](https://github.com/elixir-lang/elixir/pull/825)



#### [#813] - (2013-01-31T05:16:17Z) - [Fix #812: Write a trailing newline character to the Mix lockfile.](https://github.com/elixir-lang/elixir/pull/813)



#### [#800] - (2013-01-28T19:18:20Z) - [Initial ANSIfication of mix](https://github.com/elixir-lang/elixir/pull/800)

Thoughts?


#### [#775] - (2013-01-28T18:46:29Z) - [Initial IO.ANSI implementation (based on https://github.com/yrashk/ansiex)](https://github.com/elixir-lang/elixir/pull/775)

Lets discuss ‚Äî or if there's nothing wrong, merge it in and proceed with further steps (mix & exunit, once exunit uses gen_event)


#### [#793] - (2013-01-26T03:55:49Z) - [Consolidate Elixir's version into a VERSION file](https://github.com/elixir-lang/elixir/pull/793)



#### [#796] - (2013-01-26T02:24:47Z) - [Implement integer -> size(integer) syntax shortcut for bitsyntax](https://github.com/elixir-lang/elixir/pull/796)

Closes #795


#### [#778] - (2013-01-23T16:13:55Z) - [Fix issue #769.](https://github.com/elixir-lang/elixir/pull/778)



#### [#777] - (2013-01-20T19:54:43Z) - [mix escriptize: Only include .beam and .app files from ebin.](https://github.com/elixir-lang/elixir/pull/777)

Fixes #768.


#### [#774] - (2013-01-19T19:19:43Z) - [fix deprication message typo](https://github.com/elixir-lang/elixir/pull/774)

Fixes a minor typo in the deprecation message, Fild -> File.


#### [#771] - (2013-01-18T02:29:18Z) - [Introduce List.Dict, DRYing the tuple list as Dict implementation](https://github.com/elixir-lang/elixir/pull/771)



#### [#764] - (2013-01-13T21:20:14Z) - [Mix: Support --no-compile options in deps.get and deps.update.](https://github.com/elixir-lang/elixir/pull/764)

Fixes #763.


#### [#761] - (2013-01-13T19:21:26Z) - [A few 'mix escriptize' fixes.](https://github.com/elixir-lang/elixir/pull/761)

- Check timestamps of .beam files before generating escript.
- Don't generate an escript if no .beam files exist.
- Add --force option to disregard timestamps.
- List command line options in docs.
- Correctly specify --no-compile as a switch to OptionParser.


#### [#762] - (2013-01-13T19:20:56Z) - [Use binary matching with the utf8 specifier to implement String.next_codepoint/1.](https://github.com/elixir-lang/elixir/pull/762)



#### [#754] - (2013-01-08T14:01:51Z) - [mix escriptize: Correctly set :escript_embed_elixir to true by default.](https://github.com/elixir-lang/elixir/pull/754)



#### [#751] - (2013-01-08T08:23:35Z) - [The pipeline operator is now '|>'.](https://github.com/elixir-lang/elixir/pull/751)

Fixes #718.


#### [#753] - (2013-01-08T08:22:16Z) - [Support indexed Enum.{each/2, map/2}.](https://github.com/elixir-lang/elixir/pull/753)

Fixes #748.


#### [#752] - (2013-01-08T08:20:35Z) - [Remove unused optional argument from Record.{deffunctions, deftypes}.](https://github.com/elixir-lang/elixir/pull/752)

Fixes #744.


#### [#750] - (2013-01-07T12:23:39Z) - [mix escriptize: Support escript_path to specify the path on disk to write the escript to.](https://github.com/elixir-lang/elixir/pull/750)

Fixes #714.


#### [#747] - (2013-01-06T18:11:58Z) - [Initial mix compile.erlang task, issue #625](https://github.com/elixir-lang/elixir/pull/747)



#### [#749] - (2013-01-06T14:16:55Z) - [fixing some docs indentation](https://github.com/elixir-lang/elixir/pull/749)



#### [#746] - (2013-01-05T09:55:22Z) - [Add String.valid_codepoint?/1 function.](https://github.com/elixir-lang/elixir/pull/746)

First step towards #711.


#### [#745] - (2013-01-04T07:52:17Z) - [Extend the Dict protocol to work with tuple lists](https://github.com/elixir-lang/elixir/pull/745)

Thoughts for the future:
- Dict as a protocol
- List.Dict implementing the Dict callbacks and Dict.Common

Addresses #611.


#### [#742] - (2012-12-27T08:12:36Z) - [Fix record documentation](https://github.com/elixir-lang/elixir/pull/742)



#### [#739] - (2012-12-27T05:02:58Z) - [Support "\a"](https://github.com/elixir-lang/elixir/pull/739)

Fixed #736.


#### [#738] - (2012-12-26T09:30:58Z) - [Fix indent](https://github.com/elixir-lang/elixir/pull/738)



#### [#731] - (2012-12-24T18:55:20Z) - [add octal and hex escapes for characters](https://github.com/elixir-lang/elixir/pull/731)

This implements the suggestion in issue 726.

Hex escapes can have 1 or 2 digits and the x can be upper or lower case.  Examples:

```
?\xA
?\X1b
```

Octal escapes can have 1, 2, or 3 digits and the o can be upper or lower case.  In addition, for 3 digit octal numbers, the first one must be =< 3.  Examples:

```
?\o1
?\O21
?\o377
```


#### [#730] - (2012-12-22T08:39:23Z) - [add code and tests for case insensitive hex interpolation.](https://github.com/elixir-lang/elixir/pull/730)

This fixes the problem mentioned in issue #725.


#### [#729] - (2012-12-22T08:38:55Z) - [Modify atom with interpolation tokenizer](https://github.com/elixir-lang/elixir/pull/729)

Fixed #728.
please check this.

I'm sorry to open new poll request.
Somehow I can't attach this to the issue.


#### [#723] - (2012-12-20T19:31:37Z) - [Implement some String functions](https://github.com/elixir-lang/elixir/pull/723)

Implemented String.capitalize/1 and String.slice/3


#### [#715] - (2012-12-17T08:56:46Z) - [Step towards improved assertion messages](https://github.com/elixir-lang/elixir/pull/715)

This isn't a complete solution (e.g., it doesn't address issue #265); however, it is a step in the right direction and is useful as of itself.

It also contains a small fix to the Makefile, making "make clean" to be more complete.


#### [#706] - (2012-12-09T08:58:05Z) - [Fix some String.Unicord functions behavior.](https://github.com/elixir-lang/elixir/pull/706)

1.„ÄÄString.Unicode.lstrip raise error when an argument is not binary.

```
#before
iex(1)> String.lstrip 'a'
'a'

#after
iex(1)> String.lstrip 'a'
** (FunctionClauseError) no function clause matching: String.Unicode.lstrip('a')
    /Users/yuki_ito/.exenv/versions/master/lib/elixir/priv/unicode.ex:78: String.Unicode.lstrip('a')
    erl_eval.erl:572: :erl_eval.do_apply/6
    src/elixir.erl:127: :elixir.eval_forms/3
    /Users/yuki_ito/.exenv/versions/master/lib/iex/lib/iex/server.ex:19: IEx.Server.do_loop/1
```

2.„ÄÄString.Unicode.rstrip raise error at there when an argument is not binary.

```
#before
iex(1)> String.rstrip 'a'
** (FunctionClauseError) no function clause matching: String.Unicode.rstrip('a')
    /Users/yuki_ito/.exenv/versions/master/lib/elixir/priv/unicode.ex:88: String.Unicode.rstrip('a')
    erl_eval.erl:572: :erl_eval.do_apply/6
    src/elixir.erl:127: :elixir.eval_forms/3
    /Users/yuki_ito/.exenv/versions/master/lib/iex/lib/iex/server.ex:19: IEx.Server.do_loop/1

#after
iex(1)> String.rstrip 'a'
** (FunctionClauseError) no function clause matching: String.Unicode.do_rstrip('a', "")
    /Users/yuki_ito/.exenv/versions/master/lib/elixir/priv/unicode.ex:97: String.Unicode.do_rstrip('a', "")
    erl_eval.erl:572: :erl_eval.do_apply/6
    src/elixir.erl:127: :elixir.eval_forms/3
    /Users/yuki_ito/.exenv/versions/master/lib/iex/lib/iex/server.ex:19: IEx.Server.do_loop/1
```


#### [#701] - (2012-12-06T12:34:39Z) - [More improvements to bitstring docs.](https://github.com/elixir-lang/elixir/pull/701)



#### [#683] - (2012-12-03T08:06:23Z) - [Add String.Unicode.{lstrip,rstrip}](https://github.com/elixir-lang/elixir/pull/683)



#### [#678] - (2012-11-30T07:13:02Z) - [Change fun(... :: signature) specification format to (... -> signature)](https://github.com/elixir-lang/elixir/pull/678)



#### [#675] - (2012-11-29T08:18:15Z) - [elixir_code_server should not trap exits and should not log on terminate](https://github.com/elixir-lang/elixir/pull/675)

The behaviour removed in this commit is wrong on many levels:
1. It logs using io:format (not using actual OTP error log mechanism)
2. It logs errors in any case, even if it was a legitimate shutdown
3. It doesn't do any cleanup in terminate (and it doesn't need to)
4. Crash reporting is done using SASL and there's no need for elixir_code_server to do its own reporting


#### [#665] - (2012-11-27T09:37:30Z) - [Add function(Module.fun/arity) and function(fun/arity) syntax](https://github.com/elixir-lang/elixir/pull/665)

These are equivalent to function(Module, :fun, arity) and function(:fun, arity) constructs, respectively


#### [#660] - (2012-11-26T07:09:12Z) - [Fix mix dependency format error string](https://github.com/elixir-lang/elixir/pull/660)

The app name is an atom, but the error message says it should be a
binary, which causes confusion.

Fix that and also add a version without the "requirement" field, which
is optional.


#### [#658] - (2012-11-26T07:07:38Z) - [fix some doc typos](https://github.com/elixir-lang/elixir/pull/658)



#### [#656] - (2012-11-24T20:13:16Z) - [String.strip should strip other whitespace characters](https://github.com/elixir-lang/elixir/pull/656)

Fixes #655

Not sure if rstrip is done correctly.


#### [#648] - (2012-11-20T09:09:51Z) - [Add `make install` task](https://github.com/elixir-lang/elixir/pull/648)

To change the install path, simply override the `INSTALL_PATH`:

```
$ make INSTALL_PATH=/opt/local install
```


#### [#650] - (2012-11-20T07:51:27Z) - [Fix percent encoding algorithm used by URI.encode](https://github.com/elixir-lang/elixir/pull/650)

Expecting `URI.encode("\r\n")` to return `"%0D%0A"`

Currently returns `"%D%A"`


#### [#646] - (2012-11-17T10:48:26Z) - [enum doc typo](https://github.com/elixir-lang/elixir/pull/646)

RuPy 2012 in talk bug hunt


#### [#640] - (2012-11-12T07:44:20Z) - [default extracted record vals to :undefined instead of :nil](https://github.com/elixir-lang/elixir/pull/640)

When translating erlang records into elixir records, use :undefined
as the default record value since that's what erlang uses, and
presumably you're going to be using these records with erlang apis.

Ran into an issue trying to use [erlcloud](https://github.com/gleber/erlcloud/blob/master/include/erlcloud_ec2.hrl#L11) records. Since the api expects the undefined atom, when it see the nil atom, it thinks it's data and tries to pass it along to the EC2 api, which bombs out on it.


#### [#636] - (2012-11-08T12:30:51Z) - [Add support for ExUnit user configs](https://github.com/elixir-lang/elixir/pull/636)

Motivation:

![Motivation](https://dl.dropbox.com/u/923732/elixir_ansi.png)

(What this means is I can configure my ERL_LIBS and ~/.ex_unit.exs and have exunit tests for _any_ project formatted the way _I_ want)


#### [#637] - (2012-11-08T11:15:50Z) - [Flexible formatters for ExUnit](https://github.com/elixir-lang/elixir/pull/637)

Main goals:

1) The formatter is free to choose between cast and call messages (for example, an html formatter that generates an html file does not need to rely on call messages)
2) Expose also start and ending of each case and run

@yrashk: the motivation for this commit was `ex_unit_ansi` (great job!). The idea is to define a more robust API more unlikely to change and that will easily support more formatters, like HTML formatter in the future. Feedback is welcome.


#### [#632] - (2012-11-08T11:08:58Z) - [Add keyword?/1 function](https://github.com/elixir-lang/elixir/pull/632)



#### [#635] - (2012-11-07T23:05:50Z) - [Bring one more check back in mix's deps.git_test](https://github.com/elixir-lang/elixir/pull/635)



#### [#633] - (2012-11-07T15:55:41Z) - [Suppress an unnecessary (optimization-related) warning in one of the ker...](https://github.com/elixir-lang/elixir/pull/633)

...nel tests


#### [#631] - (2012-11-07T13:59:56Z) - [Improve defrecord documentation](https://github.com/elixir-lang/elixir/pull/631)



#### [#630] - (2012-11-07T13:05:53Z) - [Improve t helper documentation](https://github.com/elixir-lang/elixir/pull/630)



#### [#628] - (2012-11-07T12:42:44Z) - [Resurrect t/3 iex helper](https://github.com/elixir-lang/elixir/pull/628)

Closes #627


#### [#626] - (2012-11-07T12:01:49Z) - [Add support for printing record typespecs](https://github.com/elixir-lang/elixir/pull/626)



#### [#618] - (2012-11-01T14:07:52Z) - [Support annotated types in Kernel.Typespec.to_binary](https://github.com/elixir-lang/elixir/pull/618)



#### [#615] - (2012-11-01T13:48:16Z) - [Kernel.Typespec.types/1,3 should recognize typeps and opaques](https://github.com/elixir-lang/elixir/pull/615)

Also improves code reuse


#### [#609] - (2012-11-01T12:23:03Z) - [Implement a simple version of the t helper for the interactive shell](https://github.com/elixir-lang/elixir/pull/609)

Prints out type/spec information

(If Haskell has :t, why can't we have it, too?)


#### [#610] - (2012-10-31T15:42:58Z) - [Fix Kernel.Typespec.to_binary for tuple() type (with no element type spe...](https://github.com/elixir-lang/elixir/pull/610)

...cified)


#### [#608] - (2012-10-31T13:33:54Z) - [Typespec misc](https://github.com/elixir-lang/elixir/pull/608)



#### [#606] - (2012-10-31T12:42:47Z) - [Add typespecs for Dict](https://github.com/elixir-lang/elixir/pull/606)



#### [#605] - (2012-10-31T12:42:24Z) - [Add typespecs for Enum](https://github.com/elixir-lang/elixir/pull/605)

Also fixes some documentation mistakes


#### [#602] - (2012-10-31T11:59:17Z) - [Add typespecs for String](https://github.com/elixir-lang/elixir/pull/602)



#### [#601] - (2012-10-31T11:44:28Z) - [Add typespecs for Keyword](https://github.com/elixir-lang/elixir/pull/601)



#### [#600] - (2012-10-30T19:59:31Z) - [Use Behaviour in Dict](https://github.com/elixir-lang/elixir/pull/600)



#### [#599] - (2012-10-30T10:41:59Z) - [Add Typespec.to_binary/1](https://github.com/elixir-lang/elixir/pull/599)



#### [#596] - (2012-10-30T08:16:49Z) - [Add get! method to dict behaviour](https://github.com/elixir-lang/elixir/pull/596)



#### [#597] - (2012-10-30T08:16:18Z) - [Add support for access macro in typespecs](https://github.com/elixir-lang/elixir/pull/597)

Not sure it is complete, but it's a starter. Anything I might have missed?


#### [#593] - (2012-10-29T09:06:13Z) - [Run make dialyze only after .release](https://github.com/elixir-lang/elixir/pull/593)



#### [#592] - (2012-10-29T09:04:47Z) - [Add String.t() and char_list() types, discourage use of string() because...](https://github.com/elixir-lang/elixir/pull/592)

... it might lead to confusion.

Note, however, that dialyzer will often talk about string() anyway.

Addresses #588


#### [#590] - (2012-10-29T07:40:38Z) - [Typespec build fix](https://github.com/elixir-lang/elixir/pull/590)

When I checked out latest master, it couldn't even build itself. So I fixed it. Would appreciate it if you can merge it in ;-)


#### [#586] - (2012-10-28T09:26:09Z) - [Add make dialyze target](https://github.com/elixir-lang/elixir/pull/586)

First run is slow then it gets much better :ok: 


#### [#584] - (2012-10-27T19:44:26Z) - [Typespec fix in Kernel](https://github.com/elixir-lang/elixir/pull/584)



#### [#579] - (2012-10-27T08:47:57Z) - [Macro.to_binary should correctly process expressions involving regular a...](https://github.com/elixir-lang/elixir/pull/579)

...tom module names (e.g. :lists.seq(1,100))


#### [#575] - (2012-10-24T21:32:58Z) - [Minor documentation fix for defdelegate](https://github.com/elixir-lang/elixir/pull/575)



#### [#573] - (2012-10-24T10:59:41Z) - [Out-of-bounds String.at should return nil](https://github.com/elixir-lang/elixir/pull/573)



#### [#566] - (2012-10-24T08:57:22Z) - [Add support for named sequences and make String module aware of it so it...](https://github.com/elixir-lang/elixir/pull/566)

... does correct job at calculating length, picking characters, etc.


#### [#569] - (2012-10-22T08:43:54Z) - [README: List all applications provided](https://github.com/elixir-lang/elixir/pull/569)



#### [#563] - (2012-10-21T22:40:17Z) - [Minor improvements to the unicode compilation step](https://github.com/elixir-lang/elixir/pull/563)



#### [#562] - (2012-10-21T21:55:27Z) - [Add String.Unicode.version/0](https://github.com/elixir-lang/elixir/pull/562)



#### [#555] - (2012-10-19T09:54:14Z) - [Unordered keywords](https://github.com/elixir-lang/elixir/pull/555)

Continuation of #546.

/cc @yrashk @devinus


#### [#551] - (2012-10-18T15:11:36Z) - [Rename d helper to h, and h helper to v/0](https://github.com/elixir-lang/elixir/pull/551)



#### [#550] - (2012-10-18T14:43:56Z) - [Slightly better helpers documentation in IEx](https://github.com/elixir-lang/elixir/pull/550)



#### [#547] - (2012-10-18T09:18:29Z) - [Add binary_to_(integer|float) to (integer|float)_to_binary](https://github.com/elixir-lang/elixir/pull/547)



#### [#548] - (2012-10-18T04:24:32Z) - [fixing indentation in docs examples](https://github.com/elixir-lang/elixir/pull/548)



#### [#543] - (2012-10-16T10:13:18Z) - [Better inspect for floats](https://github.com/elixir-lang/elixir/pull/543)

This is the same technique that libraries such as JSX use to minimally represent a floating point.


#### [#539] - (2012-10-15T10:37:15Z) - [Prevent List.zip([]) and List.unzip([]) from hanging forever](https://github.com/elixir-lang/elixir/pull/539)



#### [#538] - (2012-10-14T16:56:06Z) - [File.cp family should preserve file's mode](https://github.com/elixir-lang/elixir/pull/538)

Addresses #534


#### [#532] - (2012-10-14T16:24:16Z) - [Add support for defining multiple protocol implementations in one go](https://github.com/elixir-lang/elixir/pull/532)

``` elixir
defimpl SomeProtocol, for: [Atom, Number, List] do
    ...
end
```


#### [#536] - (2012-10-14T09:24:49Z) - [A protocol should not generate documentation to behavior_info](https://github.com/elixir-lang/elixir/pull/536)



#### [#537] - (2012-10-14T09:22:43Z) - [Make mix compile.app task populate description & registered properties](https://github.com/elixir-lang/elixir/pull/537)

This is required by systools

Closes #533


#### [#531] - (2012-10-12T18:05:55Z) - [Fixing bug introduced in 'Protocols are powered by behaviours...'(11f934...](https://github.com/elixir-lang/elixir/pull/531)



#### [#530] - (2012-10-12T16:25:44Z) - [Fix some spelling mistakes in Kernel](https://github.com/elixir-lang/elixir/pull/530)



#### [#529] - (2012-10-12T08:13:00Z) - [fixing some docs indentation](https://github.com/elixir-lang/elixir/pull/529)



#### [#527] - (2012-10-11T19:46:37Z) - [Include the most recent tag into System.build_info](https://github.com/elixir-lang/elixir/pull/527)



#### [#526] - (2012-10-11T19:09:49Z) - [Add support for record.update/2](https://github.com/elixir-lang/elixir/pull/526)



#### [#523] - (2012-10-11T03:32:16Z) - [Add support for inspecting keywords](https://github.com/elixir-lang/elixir/pull/523)



#### [#521] - (2012-10-09T20:31:01Z) - [Support for decreasing ranges](https://github.com/elixir-lang/elixir/pull/521)

Closes #518


#### [#517] - (2012-10-09T04:56:42Z) - [Add Macro.term?/1](https://github.com/elixir-lang/elixir/pull/517)



#### [#514] - (2012-10-07T13:47:09Z) - [cp_r/c test file should be managed in tests' setup/teardown](https://github.com/elixir-lang/elixir/pull/514)

The reason for this is because if it is stored in the repository, reltool can't build elixir's release.


#### [#507] - (2012-10-05T21:40:20Z) - [Typo fix](https://github.com/elixir-lang/elixir/pull/507)



#### [#499] - (2012-10-01T20:36:33Z) - [Separate sigil tests into their own test case](https://github.com/elixir-lang/elixir/pull/499)



#### [#494] - (2012-09-29T06:23:22Z) - [Fix escriptize mix task](https://github.com/elixir-lang/elixir/pull/494)



#### [#488] - (2012-09-24T15:30:42Z) - [Properly idented case statement](https://github.com/elixir-lang/elixir/pull/488)



#### [#485] - (2012-09-24T04:55:44Z) - [String improvements](https://github.com/elixir-lang/elixir/pull/485)

Implemented String.first/1, String.last/1 and String.at/2 as describe at #456


#### [#484] - (2012-09-20T03:32:41Z) - [Feature/defmacros](https://github.com/elixir-lang/elixir/pull/484)



#### [#483] - (2012-09-19T18:52:31Z) - [Feature/read macro in records](https://github.com/elixir-lang/elixir/pull/483)



#### [#480] - (2012-09-18T12:12:38Z) - [Implementing codepoints](https://github.com/elixir-lang/elixir/pull/480)

This implements #464. I tried to support as many codepoints as possible and i'll appreciate your comments. Thanks!

/cc @bellthoven


#### [#477] - (2012-09-14T16:36:28Z) - [Improve the docstring for reduce](https://github.com/elixir-lang/elixir/pull/477)

Make the argument ordering more clear. Also clarify the points about return values.


#### [#476] - (2012-09-13T22:09:21Z) - [Use exec to replace the shell process instead of forking](https://github.com/elixir-lang/elixir/pull/476)



#### [#475] - (2012-09-13T19:44:41Z) - [defmodule returns module name, binary and the result](https://github.com/elixir-lang/elixir/pull/475)

Previously, 58eea96fc22f2ba0527a699b3731c42af17e72f5 was
attempting to solve the ambiguity of records and defmodule result.

This solves the problem completely by tagging defmodule results with
the :module atom and it brings the module name back into the tuple


#### [#474] - (2012-09-13T19:42:18Z) - [Updating documantation in regards to renaming of Binary into String.](https://github.com/elixir-lang/elixir/pull/474)



#### [#471] - (2012-09-13T18:04:17Z) - [Fix examples in dict docs.](https://github.com/elixir-lang/elixir/pull/471)



#### [#466] - (2012-09-11T16:52:55Z) - [Implementing String.replace/3, String.replace/4 and String.duplicate/2](https://github.com/elixir-lang/elixir/pull/466)



#### [#465] - (2012-09-11T15:03:29Z) - [s/keywords lists/keyword lists/](https://github.com/elixir-lang/elixir/pull/465)

I made these doc edits in the doc repo but those are generated from the source, so here are the changes in the inline docs, plus a bunch I missed. No actual code changes were made, doc only.


#### [#463] - (2012-09-11T09:00:50Z) - [String improvements](https://github.com/elixir-lang/elixir/pull/463)

This implements rstrip, lstrip and strip. refs #456


#### [#429] - (2012-09-10T06:44:23Z) - [Add initial escript support to mix](https://github.com/elixir-lang/elixir/pull/429)



#### [#460] - (2012-09-10T06:12:40Z) - [Improvements on String module](https://github.com/elixir-lang/elixir/pull/460)

This implements some improvementes on String module. refs #456 .

I'd like to know if this is ready to merge or should I improve some thing.

Thanks!


#### [#449] - (2012-09-10T06:09:44Z) - [Adding support for Enum.split to accept negative numbers](https://github.com/elixir-lang/elixir/pull/449)



#### [#461] - (2012-09-10T06:08:56Z) - [Features/443 exclude hidden files on mix compilation](https://github.com/elixir-lang/elixir/pull/461)

This pull request contains commits to ignore hidden files in mix. Even though it doesn't ignore hidden directories it works for my use case.


#### [#454] - (2012-09-05T18:08:32Z) - [travis-ci.org now provides R15B02](https://github.com/elixir-lang/elixir/pull/454)



#### [#444] - (2012-08-30T12:24:53Z) - [Implementation for Record.__index__](https://github.com/elixir-lang/elixir/pull/444)



#### [#446] - (2012-08-30T12:18:32Z) - [Implementation of Module.split_name](https://github.com/elixir-lang/elixir/pull/446)



#### [#434] - (2012-08-27T01:22:23Z) - [Support for named groups in Regexp.scan and Regexp.run](https://github.com/elixir-lang/elixir/pull/434)



#### [#441] - (2012-08-22T22:57:54Z) - [Fixing the crash in Macro.to_binary when it receives a list. ](https://github.com/elixir-lang/elixir/pull/441)

I.e. something like (quote do: foo([1, 2, 3])).


#### [#440] - (2012-08-22T16:56:00Z) - [[SOLVED] #439](https://github.com/elixir-lang/elixir/pull/440)

Added `;`s to the end of the lines where calls to the `time` are made. Now correct performance is guaranteed if at least one of two instruments are avaliable:
- time shell builtin
- GNU time binary

That solves #439 properly (in terms of makefile shamanism), not with `eval` that was suggested.

The reason for such a strange `make` behaviour is optimization that refuses to run shell builtins.

Please note that if both GNU time and time builtin is present, builtin will be run with the highest priority and thus no additional output will be printed. Here is an example stderr diff for `$ make test` between builtin and GNU timex

``` diff
0a1,2
> 1.58user 0.25system 0:02.19elapsed 83%CPU (0avgtext+0avgdata 16252maxresident)k
> 0inputs+0outputs (0major+12503minor)pagefaults 0swaps
```

So now even if there are systems that have bash but no GNU time (for instance strangely packaged fresh Virtual Machine installations) make won't fail.

---

Jonn Mostovoy,
DA234FE7


#### [#437] - (2012-08-15T11:10:10Z) - [Features/return option in regex](https://github.com/elixir-lang/elixir/pull/437)



#### [#432] - (2012-08-10T16:52:19Z) - [Make elixir source $HOME/.elixirrc if it exists](https://github.com/elixir-lang/elixir/pull/432)

This allows to set ELIXIR_ERL_OPTS easily.

Here's an example .elixirrc to have iex play nice with @ferd's [erlang-history](https://github.com/ferd/erlang-history):
`ELIXIR_ERL_OPTS="-kernel hist_file \"$HOME/.iex-history\""`


#### [#430] - (2012-08-08T14:50:41Z) - [Allow the access protocol on nil, and always return nil](https://github.com/elixir-lang/elixir/pull/430)



#### [#428] - (2012-08-07T17:08:01Z) - [Allow empty except option in import statements](https://github.com/elixir-lang/elixir/pull/428)

This fixes things like `use Bitwise` that are broken when called without option


#### [#427] - (2012-08-04T10:56:41Z) - [Remove referance to accessing tuples.](https://github.com/elixir-lang/elixir/pull/427)

Just some docs cleanup.


#### [#426] - (2012-08-01T07:39:53Z) - [Allow URI.parse/1 to take a char_list without throwing an error](https://github.com/elixir-lang/elixir/pull/426)

Currently passing a char list to URI.parse/1 throws a nasty error.  This comment adds a guard for the method, and converts char lists to binaries. 


#### [#423] - (2012-07-31T10:41:55Z) - [Fix IEx remsh autocompletion when the connecting node does not have Elix...](https://github.com/elixir-lang/elixir/pull/423)

...ir


#### [#420] - (2012-07-30T22:55:45Z) - [Print node name in IEx prompt](https://github.com/elixir-lang/elixir/pull/420)



#### [#406] - (2012-07-28T07:23:46Z) - [add mix in 'make release_erl'](https://github.com/elixir-lang/elixir/pull/406)

Hi, I try 'make release_erl', but not found mix in rel/elixir... 


#### [#400] - (2012-07-27T11:21:22Z) - [Add reload helper to iex](https://github.com/elixir-lang/elixir/pull/400)



#### [#399] - (2012-07-27T07:08:19Z) - [Fix function list expansion for modules called using the Erlang alias](https://github.com/elixir-lang/elixir/pull/399)



#### [#391] - (2012-07-13T06:44:38Z) - [Fixes a bug that broke the correct behavior of the `in` guard](https://github.com/elixir-lang/elixir/pull/391)

The correct behavior is:

> [] in [1,2,3] == false

However, recently introduced bug made this work like this:

> [] in [1,2,3] == true


#### [#389] - (2012-07-10T19:45:51Z) - [Add very basic shell history support](https://github.com/elixir-lang/elixir/pull/389)



#### [#388] - (2012-07-10T18:58:37Z) - [Fixes specification for list_to_bitstring/1](https://github.com/elixir-lang/elixir/pull/388)



#### [#387] - (2012-07-10T10:24:16Z) - [Adds function type specifications to Elixir.Builtin](https://github.com/elixir-lang/elixir/pull/387)

This commit also fixes a few minor documentation/naming mistakes in the
same module


#### [#379] - (2012-07-08T13:23:06Z) - [Added the ability to toggle bolean fields in Records](https://github.com/elixir-lang/elixir/pull/379)

Introduced an extension that allows to toggle fields easily in records

```
defrecord Config, allow_override: false
Config.new.toggle_allow_override
```


#### [#372] - (2012-06-23T16:26:58Z) - [Fixes mismatched length record-like tuple printing](https://github.com/elixir-lang/elixir/pull/372)

Fixes #371


#### [#366] - (2012-06-15T10:29:51Z) - [Map device name in runtime to save some typing](https://github.com/elixir-lang/elixir/pull/366)

Here's my take on the issue #318. I ran into a compiler crash when placing the `defmacrop` part at the bottom of the module.

```
elixir/lib/io.ex:114: macro map_dev/1 is unused
error: {'__MAIN__.CompileError','__exception__',
                                <<"function map_dev/1 undefined">>,
                                <<"/Users/alco/Documents/git/elixir/lib/io.ex">>,
                                19}
stacktrace: [{io,'__info__',[macros],[]},
             {elixir_dispatch,get_optional_macros,1,
                              [{file,"src/elixir_dispatch.erl"},{line,225}]},
             {elixir_dispatch,expand_require,8,
                              [{file,"src/elixir_dispatch.erl"},{line,135}]},
             {elixir_dispatch,dispatch_require,6,
                              [{file,"src/elixir_dispatch.erl"},{line,83}]},
             {lists,mapfoldl,3,[{file,"lists.erl"},{line,1278}]},
             {elixir_clauses,assigns_block,6,
                             [{file,"src/elixir_clauses.erl"},{line,44}]},
             {elixir_def,translate_definition,7,
                         [{file,"src/elixir_def.erl"},{line,165}]},
             {elixir_def,store_definition,8{"init terminating in do_boot",1}
,
                         [{file,"src/elixir_def.erl"},{line,81}]}]
```

Also, I tried to make a wrapper for `def` to streamline the mapping experience, but got stuck with unquoting and concatenating module refs. Not sure if it's of any use:

``` elixir
  defmacrop ErlIO(fun, dev, args) do
    quote do
      Erlang.io.unquote(fun) unquote(map_dev(dev)), unquote_splicing(args)
    end
  end
```


#### [#363] - (2012-06-11T07:53:07Z) - [Adds record '_' syntax to match with Erlang syntax](https://github.com/elixir-lang/elixir/pull/363)



#### [#359] - (2012-06-09T01:17:11Z) - [Fix type in lib/ex_unit.ex docs.](https://github.com/elixir-lang/elixir/pull/359)



#### [#357] - (2012-06-08T20:23:00Z) - [Adds support for @callback type specification attribute](https://github.com/elixir-lang/elixir/pull/357)



#### [#353] - (2012-06-08T08:47:24Z) - [Adds m/0 and m/1 helpers to iex (similar to their equivalents in erlang'...](https://github.com/elixir-lang/elixir/pull/353)

...s shell)


#### [#355] - (2012-06-08T08:19:33Z) - [Matching the return value in ExUnit.Server.start_link is too early](https://github.com/elixir-lang/elixir/pull/355)



#### [#352] - (2012-06-07T20:44:45Z) - [Adds support for the range operator (..) in typespecs](https://github.com/elixir-lang/elixir/pull/352)



#### [#351] - (2012-06-07T20:12:58Z) - [Adds support for `opaque` option in deftype](https://github.com/elixir-lang/elixir/pull/351)



#### [#344] - (2012-06-07T19:28:55Z) - [Changes function type syntax in type specification adjusted according to...](https://github.com/elixir-lang/elixir/pull/344)

... the plan outlined in #333

This is sort of WIP. 

So far:
1. Adopted new fun definition syntax (`fun(...args..., do: ...)

Working on @spec and @type, but I ran into a problem:

``` elixir
@type mytype
```

results in `function mytype/0 undefined`


#### [#345] - (2012-06-07T08:08:33Z) - [Allows use of externally supplied ERL_LIBS in release-packaged elixir](https://github.com/elixir-lang/elixir/pull/345)



#### [#340] - (2012-06-06T06:34:45Z) - [Fixes regression in record access protocol handling introduced in ...](https://github.com/elixir-lang/elixir/pull/340)

.... 088eff4c19614101cea55dfef9966d4de89181e3

It was mistreating nil values for undefined keys


#### [#338] - (2012-06-05T14:20:31Z) - [Add File.open and File.close](https://github.com/elixir-lang/elixir/pull/338)



#### [#334] - (2012-06-04T16:30:55Z) - [Add IO.gets and IO.getb](https://github.com/elixir-lang/elixir/pull/334)

Now I'm working to add File.open but I'm stuck with the default values.

I think I'll finish this today


#### [#331] - (2012-06-04T16:29:28Z) - [Add File.delete](https://github.com/elixir-lang/elixir/pull/331)

Tries to delete file. The `file` cannot be a directory. 


#### [#320] - (2012-06-04T14:00:27Z) - [Initial implementation of type specifications](https://github.com/elixir-lang/elixir/pull/320)

Before I proceed with reindentation, documentation (and possibly some refactoring :), I want to get this reviewed, discussed and set to be merged once trivial stuff is done (such as docs/indent, etc.).

Please let me know what do you think. You can find examples in tests, they should be fairly self-explanatory.

My further plans include adding typespec support to Elixir records. I have some ideas, but need to polish them. At this moment the only way to do this is something like this:

``` elixir
defrecord MyRecord, [a: nil, b: nil] do
  import Typespec
  deftype __type__, as: {MyRecord, a, b}
  deftype a, as: integer
  deftype b, as: string
end
```

Is this good enough or should we improve it? The above approach won't, for example, generate `defspec` for functions generated, which would be very nice to have. 

I have a few problems injecting typespecs into all records, we can discuss them here or (better) on IRC. May be we can come up with a solution?


#### [#327] - (2012-06-03T20:46:22Z) - [Adds `rel` makefile target that builds a self-contained elixir distribution](https://github.com/elixir-lang/elixir/pull/327)

This:

```
make rel
```

will generate (hopefully :) a fully self-contained elixir distribution in rel/elixir


#### [#329] - (2012-06-03T06:53:47Z) - [Fixes the problem with skewed error logger's output in IEx](https://github.com/elixir-lang/elixir/pull/329)

Before this patch:

``` erlang
iex> :application.start :sasl

=PROGRESS REPORT==== 2-Jun-2012::18:05:48 ===
                                                       supervisor: {local,sasl_safe_sup}
                                                                                                     started: [{pid,<0.41.0>},
                                                                                                                                                     {name,alarm_handler},
                                                                                                                                                                                                 {mfargs,{alarm_handler,start_link,[]}},
                                                                                                                                                                                                                                                               {restart_type,permanent},
                                                                                                                                                                                                                                                                                                               {shutdown,2000},
                         {child_type,worker}]

                                             =PROGRESS REPORT==== 2-Jun-2012::18:05:48 ===
                                                                                                    supervisor: {local,sasl_safe_sup}
                                                                                                                                                  started: [{pid,<0.42.0>},
                                                                                                                                                                                                  {name,overload},
                                                                                                                                                                                                                                         {mfargs,{overload,start_link,[]}},
                                                                                                                                                                                                                                                                                                  {restart_type,permanent},
                                                                                                                                                                                                                                                                                                                                                  {shutdown,2000},
                                                            {child_type,worker}]

                                                                                =PROGRESS REPORT==== 2-Jun-2012::18:05:48 ===
                                                                                                                                       supervisor: {local,sasl_sup}
                                                                                                                                                                                started: [{pid,<0.40.0>},
                                                                                                                                                                                                                                {name,sasl_safe_sup},
                                                                                                                                                                                                                                                                            {mfargs,
                                                                                                                                                                                                                                                                                                               {supervisor,start_link,
                                        [{local,sasl_safe_sup},sasl,safe]}},
                                                                                                   {restart_type,permanent},
                                                                                                                                                   {shutdown,infinity},
                                                                                                                                                                                              {child_type,supervisor}]
                                                                                                                                                                                                                      :ok
                                                                                                                                                                                                                         =PROGRESS REPORT==== 2-Jun-2012::18:05:48 ===
                                                                                                                                                                                                                                                                                supervisor: {local,sasl_sup}
                                                                                                                                                                                                                                                                                                                         started: [{pid,<0.43.0>},
                                            {name,release_handler},
                                                                                          {mfargs,{release_handler,start_link,[]}},
                                                                                                                                                          {restart_type,permanent},
                                                                                                                                                                                                          {shutdown,2000},
                                                                                                                                                                                                                                                 {child_type,worker}]

iex> 
     =PROGRESS REPORT==== 2-Jun-2012::18:05:48 ===
                                                           application: sasl
                                                                                      started_at: nonode@nohost
```

After this patch:

``` erlang
iex> :application.start(:sasl)

=PROGRESS REPORT==== 2-Jun-2012::18:39:03 ===
          supervisor: {local,sasl_safe_sup}
             started: [{pid,<0.42.0>},
                       {name,alarm_handler},
                       {mfargs,{alarm_handler,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]
:ok
iex> 
=PROGRESS REPORT==== 2-Jun-2012::18:39:03 ===
          supervisor: {local,sasl_safe_sup}
             started: [{pid,<0.43.0>},
                       {name,overload},
                       {mfargs,{overload,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 2-Jun-2012::18:39:03 ===
          supervisor: {local,sasl_sup}
             started: [{pid,<0.41.0>},
                       {name,sasl_safe_sup},
                       {mfargs,
                           {supervisor,start_link,
                               [{local,sasl_safe_sup},sasl,safe]}},
                       {restart_type,permanent},
                       {shutdown,infinity},
                       {child_type,supervisor}]

=PROGRESS REPORT==== 2-Jun-2012::18:39:03 ===
          supervisor: {local,sasl_sup}
             started: [{pid,<0.44.0>},
                       {name,release_handler},
                       {mfargs,{release_handler,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 2-Jun-2012::18:39:03 ===
         application: sasl
          started_at: nonode@nohost

```


#### [#325] - (2012-06-01T19:10:58Z) - [Adds :append_first boolean option to defdelegate](https://github.com/elixir-lang/elixir/pull/325)



#### [#326] - (2012-06-01T19:01:10Z) - [Add tests for custom range iterator](https://github.com/elixir-lang/elixir/pull/326)

These tests are a way to assert that the Enum.Iterator protocol works when you implement it for a type that transforms itself to a List and then uses the implementation of Enum.Iterator for List.

As the Range record is not used outside the tests I didn't add the possibility to have a negative Range.


#### [#317] - (2012-05-31T16:30:10Z) - [Use refute instead of negative assert](https://github.com/elixir-lang/elixir/pull/317)



#### [#313] - (2012-05-31T15:06:44Z) - [Add File.write and File.write_file](https://github.com/elixir-lang/elixir/pull/313)

They are just simple wrappers for the Erlang functions with the same name


#### [#312] - (2012-05-30T06:27:41Z) - [Adds `to_keyword(record)` function to all records](https://github.com/elixir-lang/elixir/pull/312)

This function can be used to convert any record to a Keyword:

``` elixir
    iex> defrecord A, a: 1, b: 2, c: nil
    nil
    iex> A.new
    A[a: 1, b: 2, c: nil]
    iex> A.new.to_keyword
    [{:a,1},{:b,2},{:c,nil}]
    iex> A.new(c: "a").to_keyword
    [{:a,1},{:b,2},{:c,"a"}]
```


#### [#309] - (2012-05-29T15:03:37Z) - [Add mkdir and mkdir_p](https://github.com/elixir-lang/elixir/pull/309)

I choose to not add `mkdir!` and `mkdir_p!` to follow the Erlang convention to not raise exceptions in these cases.


#### [#290] - (2012-05-21T09:04:14Z) - [Adding File.rootname, File.extname and File.dirname [#288]](https://github.com/elixir-lang/elixir/pull/290)

I've just been digging into elixir over the last day or two, so I'll apologize ahead of time.

Following up on #288


#### [#296] - (2012-05-18T17:54:28Z) - [Implements new syntax, as per #291](https://github.com/elixir-lang/elixir/pull/296)



#### [#294] - (2012-05-13T21:55:32Z) - [specify master branch in the build status image](https://github.com/elixir-lang/elixir/pull/294)



#### [#284] - (2012-05-06T12:48:50Z) - [Implement decode_query in URI](https://github.com/elixir-lang/elixir/pull/284)



#### [#281] - (2012-05-05T19:45:38Z) - [OptionParser.Simple receives aliases](https://github.com/elixir-lang/elixir/pull/281)



#### [#280] - (2012-05-05T15:05:55Z) - [use correct doc format in ExUnit](https://github.com/elixir-lang/elixir/pull/280)



#### [#276] - (2012-05-05T06:52:10Z) - [Adding File.exists?](https://github.com/elixir-lang/elixir/pull/276)

Check if the file exists by taking [last modified](http://www.erlang.org/doc/man/filelib.html#last_modified-1).


#### [#277] - (2012-05-03T13:52:03Z) - [fix typo in argument name](https://github.com/elixir-lang/elixir/pull/277)



#### [#275] - (2012-05-02T20:18:36Z) - [return a keyword in module.__info__(:compile)](https://github.com/elixir-lang/elixir/pull/275)



#### [#272] - (2012-04-29T09:44:20Z) - [Fix #197. Add URI.url_decode](https://github.com/elixir-lang/elixir/pull/272)

Fix #197.

The return data type probably has to be changed.
Not sure if this is the right way of converting + to space when %20 is not used.

decode_query and other functions are not yet implemented.

p.s. I am new to erlang. :blush:


#### [#269] - (2012-04-27T02:38:55Z) - [fixing Keyword docs examples](https://github.com/elixir-lang/elixir/pull/269)



#### [#250] - (2012-04-26T08:46:17Z) - [New dict module](https://github.com/elixir-lang/elixir/pull/250)

Here's what's cooking for the new dict protocol.

If you try to run tests, you'll see how they fail because of issue #247.

I'm also missing the ability to write docstrings for functions in a protocol declaration.

---

Next, I'm going to add Orddict implementation and support for Enum.


#### [#267] - (2012-04-26T08:46:16Z) - [A newly updated dict module](https://github.com/elixir-lang/elixir/pull/267)

This obsoletes #250 and can be fast-forwarded in the upstream:

```
git remote add alco git://github.com/alco/elixir.git
git fetch alco
git checkout master   # ensure you're on master
git merge --ff-only alco/master
```


#### [#254] - (2012-04-25T17:32:43Z) - [guess expression meaning in ExUnit assert](https://github.com/elixir-lang/elixir/pull/254)

handle `==` and `List.member?` in expression


#### [#259] - (2012-04-17T06:59:35Z) - [Loop without args should not require match](https://github.com/elixir-lang/elixir/pull/259)

This should close #243.


#### [#252] - (2012-04-13T17:21:15Z) - [Allow uppercase letters to be used in numerals](https://github.com/elixir-lang/elixir/pull/252)



#### [#249] - (2012-04-13T11:25:07Z) - [Implement List.unzip](https://github.com/elixir-lang/elixir/pull/249)

The unzip operation is equivalent to zipping, but we take an additional
step of converting the resulting list of tuples into a list of lists.

Not sure if this is useful, implemented it for completeness sake. :)


#### [#248] - (2012-04-13T00:06:48Z) - [New list functions](https://github.com/elixir-lang/elixir/pull/248)

I'm using those in the new Dict module which I'm going to upload soon.


#### [#246] - (2012-04-12T01:48:43Z) - [Fix regex examples in documentation](https://github.com/elixir-lang/elixir/pull/246)

Replaced `~r` in the replace examples with the correct `%r`


#### [#242] - (2012-04-10T22:01:09Z) - [Do not test System.pwd return value.](https://github.com/elixir-lang/elixir/pull/242)

The function relies on Erlang's filename:abs function, so we're
basically testing Erlang here. There is no straightforward way to obtain
current directory by other means that'll work seamlessly on all OSes.
So we'll better not check the return value.


#### [#230] - (2012-04-10T19:30:48Z) - [New functions for the System module](https://github.com/elixir-lang/elixir/pull/230)

Not sure how to deal with the "binary vs charlist" issue. I tried to reach a balance with adding binary support for some functions. `put_env` would require 4 clauses to accept all pairs "binary-list", "list-binary", "binary-binary", and "list-list", so I didn't do it for this function.


#### [#236] - (2012-04-10T00:05:52Z) - [Atom to binary](https://github.com/elixir-lang/elixir/pull/236)

added atom_to_binary with UTF8 as default and some code refactoring.


#### [#234] - (2012-04-05T17:06:32Z) - [allow binary_to(_existing)_atom uses :utf8 as default encoding, refs #221](https://github.com/elixir-lang/elixir/pull/234)

i'd like to know your opnions about this patch. Should I improve tests and docs? Should I test macro's arguments with `is_binary`? 

Let me know.

Thanks.


#### [#232] - (2012-04-05T11:24:00Z) - [Augment option parsing with wildcards](https://github.com/elixir-lang/elixir/pull/232)

If the user invokes elixir with a quoted string

```
elixir -pa 'deps*/ebin'
```

then the CLI will receive the literal path 'deps/*/ebin'. That is why we're better off processing the wildcards ourselves.


#### [#222] - (2012-04-03T20:48:34Z) - [Env module](https://github.com/elixir-lang/elixir/pull/222)

Here's my humble beginning of the Env module that will allow us to get information about Elixir environment at run time. This could be useful, for instance, to determine which version of Elixir our IRC bot is running.


#### [#225] - (2012-04-02T22:01:50Z) - [Cleanup the Process module](https://github.com/elixir-lang/elixir/pull/225)

I have also added `spawn` and `spawn_link` functions. Those were the remaining functions that used `:erlang` reference in my demo app, so I thought we might as well Elixirize them.

Should I also add the `spawn/2` and `spawn/4` flavours?


#### [#220] - (2012-04-01T17:30:36Z) - [OptionParser.Simple is now based in binaries. Closes #208](https://github.com/elixir-lang/elixir/pull/220)



#### [#207] - (2012-03-30T20:17:49Z) - [Stdlib collections](https://github.com/elixir-lang/elixir/pull/207)

Cleaned up the Enum and List modules. Orddict is coming soon.

I don't like `List.seq`. This pull request implements two variations of `List.range` to replace `seq`.

Jos√©, what's your policy on adding new functions? I know that you want the core lib to be relatively small, but when people start mixing List with :lists in their code, it's going to be a mess. We might create a separate repository for user-contributed libraries like Clojure does, and in there most of :lists functions as well as some additional ones will find their place.

What do you guys think?


#### [#204] - (2012-03-29T11:56:03Z) - [.bat files to run Elixir under Windows.](https://github.com/elixir-lang/elixir/pull/204)

Commit: .bat files to run Elixir (elixir and elixirc) from Windows batch

There are still some issues with IEX. I've posted them in the issue 'Elixir and windows'.


#### [#195] - (2012-03-28T10:14:00Z) - [Added a URI parser](https://github.com/elixir-lang/elixir/pull/195)

As per our discussion on IRC.


#### [#193] - (2012-03-28T08:14:45Z) - [Add a guard to eval](https://github.com/elixir-lang/elixir/pull/193)

I have added the guard as you asked, but the first declaration of `eval/2` actually passes the binary "nofile". Changing that to 'nofile' caused most of the tests to fail for reasons I could not investigate.


#### [#189] - (2012-03-26T14:47:50Z) - [Fix a mistake in the comment for umergec](https://github.com/elixir-lang/elixir/pull/189)



#### [#183] - (2012-03-24T20:15:39Z) - [Default joiner to an empty list in join](https://github.com/elixir-lang/elixir/pull/183)

It 'feels' like join should be able to join a list without having to pass a joiner. I'm not sure if this is something you want, but I figure'd I'd throw it out there. I wasn't sure if it should default to list or binary. Also not sure if I should have added defaults for the other join cases. Are they ever meant to be used anyway?


#### [#184] - (2012-03-24T09:26:11Z) - [Readme fixes](https://github.com/elixir-lang/elixir/pull/184)



#### [#180] - (2012-03-20T20:15:26Z) - [__FILE__ returns the absolute path](https://github.com/elixir-lang/elixir/pull/180)

I don't figurate out how to test it. So no tests here :bomb:


#### [#179] - (2012-03-20T19:44:39Z) - [Fix apply/2](https://github.com/elixir-lang/elixir/pull/179)



#### [#177] - (2012-03-19T20:40:57Z) - [Add OptionParser::Simple](https://github.com/elixir-lang/elixir/pull/177)



#### [#176] - (2012-03-19T15:06:50Z) - [Add List.last](https://github.com/elixir-lang/elixir/pull/176)



#### [#175] - (2012-03-19T13:37:56Z) - [Improvements in List and Orddict modules](https://github.com/elixir-lang/elixir/pull/175)



#### [#173] - (2012-03-16T20:20:59Z) - [EEx eval](https://github.com/elixir-lang/elixir/pull/173)



#### [#172] - (2012-03-14T17:02:23Z) - [Add EEx.file to compile from a given file](https://github.com/elixir-lang/elixir/pull/172)

`EEx.file` accepts a filename and compile its source.


#### [#171] - (2012-03-14T14:42:28Z) - [Add File.read](https://github.com/elixir-lang/elixir/pull/171)

Add two methods to read a file:
- `File.read` - Just a wrapper to `Erlang.file.read_file`
- `File.read!` - Call `File.read` but if any error occurs raises an exception with a descriptive message


#### [#170] - (2012-03-13T11:49:06Z) - [Added File.split and File.join](https://github.com/elixir-lang/elixir/pull/170)



#### [#169] - (2012-03-10T15:51:08Z) - [fix receive examples](https://github.com/elixir-lang/elixir/pull/169)



#### [#168] - (2012-03-09T17:33:27Z) - [Add File.basename](https://github.com/elixir-lang/elixir/pull/168)



#### [#167] - (2012-03-09T14:46:03Z) - [Fix File.expand_path](https://github.com/elixir-lang/elixir/pull/167)



#### [#166] - (2012-03-09T14:39:18Z) - [List delegate](https://github.com/elixir-lang/elixir/pull/166)

Thoughts?
17 additions & 41 deletions feels good :)


#### [#165] - (2012-03-09T07:46:14Z) - [add assert_throw, assert_exit and assert_error to ExUnit](https://github.com/elixir-lang/elixir/pull/165)



#### [#164] - (2012-03-08T14:28:02Z) - [Link to vim-elixir](https://github.com/elixir-lang/elixir/pull/164)



#### [#163] - (2012-03-07T21:37:47Z) - [add assert_in_delta/refute_in_delta to ExUnit](https://github.com/elixir-lang/elixir/pull/163)



#### [#162] - (2012-03-07T21:31:33Z) - [List.duplicate added](https://github.com/elixir-lang/elixir/pull/162)



#### [#161] - (2012-03-07T19:54:27Z) - [add assert_nil/refute_nil to ExUnit](https://github.com/elixir-lang/elixir/pull/161)



#### [#160] - (2012-03-07T15:43:53Z) - [add assert_empty/refute_empty to ExUnit](https://github.com/elixir-lang/elixir/pull/160)



#### [#157] - (2012-03-07T09:03:03Z) - [add assert_operator to ExUnit assertions](https://github.com/elixir-lang/elixir/pull/157)



#### [#159] - (2012-03-06T22:10:52Z) - [Foldr & Foldl with docs](https://github.com/elixir-lang/elixir/pull/159)

Finally got it right.


#### [#158] - (2012-03-06T20:03:50Z) - [add IRC build notification](https://github.com/elixir-lang/elixir/pull/158)



#### [#156] - (2012-03-06T17:47:34Z) - [Use assert_raises on tests and add asert_raises/3](https://github.com/elixir-lang/elixir/pull/156)



#### [#155] - (2012-03-06T17:16:18Z) - [convert ExUnit assertions doc to the new format](https://github.com/elixir-lang/elixir/pull/155)



#### [#154] - (2012-03-06T16:31:39Z) - [get record name using elem/2](https://github.com/elixir-lang/elixir/pull/154)



#### [#153] - (2012-03-06T14:37:17Z) - [add assert_raises to ExUnit assertions](https://github.com/elixir-lang/elixir/pull/153)



#### [#150] - (2012-03-06T08:34:47Z) - [add refute_equal to ExUnit assertions](https://github.com/elixir-lang/elixir/pull/150)



#### [#151] - (2012-03-06T08:34:07Z) - [run make test on travis](https://github.com/elixir-lang/elixir/pull/151)

in order to run ExUnit tests (example http://travis-ci.org/#!/lest/elixir/builds/804537)


#### [#145] - (2012-03-05T14:50:42Z) - [Minor rewording and grammar fixes](https://github.com/elixir-lang/elixir/pull/145)

Please review the inclusion of the "no strings attached" idiom in favor of "no compromises".


#### [#141] - (2012-03-02T20:59:46Z) - [Allow deep linking and handle CDPATH issues](https://github.com/elixir-lang/elixir/pull/141)

This patch allows the scripts to be deep-linked anywhere. The `readlink_f` function emulates GNU `readlink -f` functionality, navigating through the link chain and returning an absolute path.

Also, the `cd` command output is nullified to avoid interference from user's `CDPATH` environment variable, which makes `cd` always print the new working directory.


#### [#140] - (2012-03-02T13:40:47Z) - [Serve logo image out of elixir-lang repo](https://github.com/elixir-lang/elixir/pull/140)

I edited the original logo image off the web site to add a transparent background so it matches the Github color scheme and checked that into my repo.

Now that you've pulled that image you can serve it out of yours.


#### [#139] - (2012-03-02T09:20:02Z) - [Logo in the README](https://github.com/elixir-lang/elixir/pull/139)

Go here for a preview: https://github.com/tarcieri/elixir


#### [#138] - (2012-03-01T22:12:26Z) - [Bring readlink back](https://github.com/elixir-lang/elixir/pull/138)



#### [#137] - (2012-03-01T21:51:41Z) - [Further improvements to script initialization](https://github.com/elixir-lang/elixir/pull/137)



#### [#134] - (2012-02-29T22:45:49Z) - [Fixes Getting Started link in Important links](https://github.com/elixir-lang/elixir/pull/134)



#### [#133] - (2012-02-29T20:54:47Z) - [EEx - Embedded Elixir](https://github.com/elixir-lang/elixir/pull/133)



#### [#132] - (2012-02-28T14:31:01Z) - [Makefile typo](https://github.com/elixir-lang/elixir/pull/132)

Typo


#### [#131] - (2012-02-27T13:41:12Z) - [Update docs/4_protocols_and_records.md](https://github.com/elixir-lang/elixir/pull/131)



#### [#130] - (2012-02-24T20:23:09Z) - [Update docs/3_modules.md](https://github.com/elixir-lang/elixir/pull/130)



#### [#129] - (2012-02-24T20:10:36Z) - [Fix grammar](https://github.com/elixir-lang/elixir/pull/129)



#### [#127] - (2012-02-22T17:19:51Z) - [Added a missing quoted](https://github.com/elixir-lang/elixir/pull/127)



#### [#126] - (2012-02-21T11:47:28Z) - [Update docs/2_diving_in.md](https://github.com/elixir-lang/elixir/pull/126)



#### [#120] - (2012-02-12T21:06:38Z) - [Add more assertions and rename assert_included to assert_member](https://github.com/elixir-lang/elixir/pull/120)

This add docs to assetions and fix the rescue docs in the guide


#### [#119] - (2012-02-12T18:56:18Z) - [Fix doc typo](https://github.com/elixir-lang/elixir/pull/119)



#### [#118] - (2012-02-12T06:39:13Z) - [Add some assertions helpers](https://github.com/elixir-lang/elixir/pull/118)



#### [#117] - (2012-02-12T06:34:25Z) - [Fix rescue and catch docs](https://github.com/elixir-lang/elixir/pull/117)



#### [#116] - (2012-02-11T19:50:05Z) - [Enum.times start form 1](https://github.com/elixir-lang/elixir/pull/116)

Closes #115


#### [#66] - (2011-12-26T20:17:26Z) - [Rename namespace to module](https://github.com/elixir-lang/elixir/pull/66)

change implemented, please review it.


#### [#55] - (2011-12-24T14:12:20Z) - [Feature/moving to rebar](https://github.com/elixir-lang/elixir/pull/55)



#### [#54] - (2011-12-19T15:33:45Z) - [R14B01 is temporarily not provided on travis-ci.org but we now have R14B04 ;)](https://github.com/elixir-lang/elixir/pull/54)

The issue is that R14B01 fails to compile on ubuntu 11.04 even after hours spent investigating.


#### [#53] - (2011-11-15T19:36:52Z) - [Typo fix: conver -> convert](https://github.com/elixir-lang/elixir/pull/53)

Found a typo. Fixed the typo :)

And Yay! my first contribution evah!


#### [#51] - (2011-09-27T07:43:36Z) - [travis status](https://github.com/elixir-lang/elixir/pull/51)

I have added travis status in readme file.


#### [#50] - (2011-09-27T07:43:11Z) - [Sorry, a few more additions](https://github.com/elixir-lang/elixir/pull/50)

Jose, 

I think I'm now "done" wit Numeric. I'd like to extend more of the the stdlib, anything you want me to look into?

Cheers,
Dimitrij


#### [#49] - (2011-09-26T13:00:51Z) - [Extending stdlib](https://github.com/elixir-lang/elixir/pull/49)

Added more standard functions to Numeric module (round/ceil/floor/truncate)


#### [#45] - (2011-09-13T12:50:17Z) - [Proper code path and proplists-based access to lists](https://github.com/elixir-lang/elixir/pull/45)

1) First commit contains fix for setting proper path to exbin files in elixir.
Without this patch it is impossible to load elixir with plain simple   application:start(elixir).

2) Second commit contains fix to lists behaviors. Almost all erlang API uses proplists for hash-like access, not dict. This is why it is very convenient to have [] working with proplists.

Test is applied.


#### [#44] - (2011-09-05T16:53:57Z) - [Small changes to the README to clarify some things](https://github.com/elixir-lang/elixir/pull/44)

made a couple changes to the README to clarify how to create an empty Tuple and how to invoke functions using "apply" and square brackets.


#### [#43] - (2011-08-25T11:21:52Z) - [added math module](https://github.com/elixir-lang/elixir/pull/43)

added math module with wrapper methods for Erlang.math


#### [#42] - (2011-08-24T16:17:43Z) - [Additions to List and Function](https://github.com/elixir-lang/elixir/pull/42)

I added an atom to proc functionality to the List#map function, that works similar to ruby's symbol to proc,

I also added Function#and_then that composes two functions of arity 1.


#### [#41] - (2011-08-23T15:35:34Z) - [String#each_line](https://github.com/elixir-lang/elixir/pull/41)

just added an each_line method and descriptions for the each_\* methods to the string class


#### [#40] - (2011-08-23T05:41:34Z) - [added each_char and each_byte to string](https://github.com/elixir-lang/elixir/pull/40)

Just added ruby like each_char and each_byte methods to the string class.


#### [#39] - (2011-08-22T08:38:35Z) - [Add to_i to String](https://github.com/elixir-lang/elixir/pull/39)

Adds support to convert a string to an integer with "to_i"


#### [#38] - (2011-08-16T14:57:37Z) - [Travis-Ci support](https://github.com/elixir-lang/elixir/pull/38)

Hi Jose,

Travis-CI support for Erlang is live. You can use this .travis.yml and add Elixer to http://travis-ci.org (for docs about this process, see http://about.travis-ci.org/docs/user/getting-started/)

Let me know if you have any questions.


#### [#37] - (2011-08-02T19:29:12Z) - [Partial application support](https://github.com/elixir-lang/elixir/pull/37)



#### [#36] - (2011-07-13T12:27:47Z) - [fixes in .gitignore regards to lexer/parser, removed eex_lexer.erl](https://github.com/elixir-lang/elixir/pull/36)

enable .gitignore rules for auto-generated files:
  *_parser.erl
  *_lexer.erl

removed eex_lexer.erl which should be ignored


#### [#33] - (2011-06-24T19:28:26Z) - [Lists api](https://github.com/elixir-lang/elixir/pull/33)

Once again some additions to lists, namely :
- nthail
- duplicate
- flatlength
- max
- min
- sum
- any?
- dropwhile
- partition
- splitwith

Tell me what you think about it :)


#### [#31] - (2011-06-09T11:00:54Z) - [rename arguments.](https://github.com/elixir-lang/elixir/pull/31)

rename arguments names of gen_server functions to be consistent with OTP documentation and to be more accurate  meaning


#### [#30] - (2011-06-08T13:06:07Z) - [Making tuples not raise 'badarg error when [] called with out ouf bounds index. Return nil instead.](https://github.com/elixir-lang/elixir/pull/30)

In lists sending an out of bounds index to [] results in a nil

```
[1,2,3][3] # => nil
```

However in a tuple it raises a 'badarg error:

```
{1,2,3}[3] # => error 'badarg
```

In this pull request I corrected the behavior for Tuple, however I'm not sure whether the implementation is Elixir-ish enough - if not, could you give me pointers how it should be done?


#### [#27] - (2011-06-04T13:57:46Z) - [Small fixes to README](https://github.com/elixir-lang/elixir/pull/27)

I'm reading through the README trying to learn Elixir properly :) and I stumbled across a few typos and style issues.

They are all in different commits but I can squash them into one, the question is should all of them be applied (for example I'm not sure about the .beam file part)


#### [#25] - (2011-05-31T10:07:26Z) - [Stdlib improv](https://github.com/elixir-lang/elixir/pull/25)

Various improvement to the standard lib.
I can split this into separate pull requests if you want :)

Lists:
Added takewhile, take, split, insert

String:
Added capitalize, index, chop

Regex:
Added a type argument to run and scan


#### [#24] - (2011-05-30T11:24:05Z) - [Improved List API and docs.](https://github.com/elixir-lang/elixir/pull/24)

Some improvements to Lists.
I added sort and zipwith and added some tests and docs to various methods.


#### [#22] - (2011-05-02T22:39:21Z) - [string example fix](https://github.com/elixir-lang/elixir/pull/22)

```
<<72, 73, 74>  % => "HIJ"
```


